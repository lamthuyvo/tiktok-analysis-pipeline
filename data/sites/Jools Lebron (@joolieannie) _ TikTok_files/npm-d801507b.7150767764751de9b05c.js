/*! For license information please see npm-d801507b.7150767764751de9b05c.js.LICENSE.txt */
(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6534],{7111:(e,t,n)=>{"use strict";n.d(t,{gJ:()=>b,rV:()=>S,TO:()=>_,w9:()=>T});var r,i=n(40099),o=n(58632),a=n(86354),s=n(86043);!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(r||(r={}));var u,c=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.code=n,i.originalMessage=r,i}return(0,o.__extends)(t,e),t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),l=function(e){function t(t,n,i,o){return e.call(this,'Invalid values for "'.concat(t,'": "').concat(n,'". Options are "').concat(Object.keys(i).join('", "'),'"'),r.INVALID_VALUE,o)||this}return(0,o.__extends)(t,e),t}(c),f=function(e){function t(t,n,i){return e.call(this,'Value for "'.concat(t,'" must be of type ').concat(n),r.INVALID_VALUE,i)||this}return(0,o.__extends)(t,e),t}(c),h=function(e){function t(t,n){return e.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(n,'"'),r.MISSING_VALUE,n)||this}return(0,o.__extends)(t,e),t}(c);function d(e){return"function"==typeof e}function p(e,t,n,i,o,s,v){if(1===e.length&&(0,a.eW)(e[0]))return[{type:u.literal,value:e[0].value}];for(var g=[],y=0,m=e;y<m.length;y++){var _=m[y];if((0,a.eW)(_))g.push({type:u.literal,value:_.value});else if((0,a.jA)(_))"number"==typeof s&&g.push({type:u.literal,value:n.getNumberFormat(t).format(s)});else{var b=_.value;if(!o||!(b in o))throw new h(b,v);var T=o[b];if((0,a.Im)(_))T&&"string"!=typeof T&&"number"!=typeof T||(T="string"==typeof T||"number"==typeof T?String(T):""),g.push({type:"string"==typeof T?u.literal:u.object,value:T});else if((0,a.tv)(_)){var k="string"==typeof _.style?i.date[_.style]:(0,a.Tu)(_.style)?_.style.parsedOptions:void 0;g.push({type:u.literal,value:n.getDateTimeFormat(t,k).format(T)})}else if((0,a.Qh)(_))k="string"==typeof _.style?i.time[_.style]:(0,a.Tu)(_.style)?_.style.parsedOptions:i.time.medium,g.push({type:u.literal,value:n.getDateTimeFormat(t,k).format(T)});else if((0,a.oF)(_))(k="string"==typeof _.style?i.number[_.style]:(0,a.N1)(_.style)?_.style.parsedOptions:void 0)&&k.scale&&(T*=k.scale||1),g.push({type:u.literal,value:n.getNumberFormat(t,k).format(T)});else{if((0,a.xm)(_)){var S=_.children,w=_.value,R=o[w];if(!d(R))throw new f(w,"function",v);var M=R(p(S,t,n,i,o,s).map((function(e){return e.value})));Array.isArray(M)||(M=[M]),g.push.apply(g,M.map((function(e){return{type:"string"==typeof e?u.literal:u.object,value:e}})))}if((0,a.Jp)(_)){if(!(x=_.options[T]||_.options.other))throw new l(_.value,T,Object.keys(_.options),v);g.push.apply(g,p(x.value,t,n,i,o))}else if((0,a.N6)(_)){var x;if(!(x=_.options["=".concat(T)])){if(!Intl.PluralRules)throw new c('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',r.MISSING_INTL_API,v);var P=n.getPluralRules(t,{type:_.pluralType}).select(T-(_.offset||0));x=_.options[P]||_.options.other}if(!x)throw new l(_.value,T,Object.keys(_.options),v);g.push.apply(g,p(x.value,t,n,i,o,T-(_.offset||0)))}}}}return(E=g).length<2?E:E.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===u.literal&&t.type===u.literal?n.value+=t.value:e.push(t),e}),[]);var E}function v(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(u||(u={}));var g=function(){function e(t,n,r,i){void 0===n&&(n=e.defaultLocale);var a,c,l,f=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=f.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===u.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return p(f.ast,f.locales,f.formatters,f.formats,e,void 0,f.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=f.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(f.locales)[0]}},this.getAst=function(){return f.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var h=i||{},d=(h.formatters,(0,o.__rest)(h,["formatters"]));this.ast=e.__parse(t,(0,o.__assign)((0,o.__assign)({},d),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=(c=e.formats,(l=r)?Object.keys(c).reduce((function(e,t){var n,r;return e[t]=(n=c[t],(r=l[t])?(0,o.__assign)((0,o.__assign)((0,o.__assign)({},n||{}),r||{}),Object.keys(n).reduce((function(e,t){return e[t]=(0,o.__assign)((0,o.__assign)({},n[t]),r[t]||{}),e}),{})):n),e}),(0,o.__assign)({},c)):c),this.formatters=i&&i.formatters||(void 0===(a=this.formatterCache)&&(a={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:(0,s.B)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,(0,o.__spreadArray)([void 0],t,!1)))}),{cache:v(a.number),strategy:s.W.variadic}),getDateTimeFormat:(0,s.B)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,(0,o.__spreadArray)([void 0],t,!1)))}),{cache:v(a.dateTime),strategy:s.W.variadic}),getPluralRules:(0,s.B)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,(0,o.__spreadArray)([void 0],t,!1)))}),{cache:v(a.pluralRules),strategy:s.W.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if(void 0!==Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale("string"==typeof e?e:e[0])}},e.__parse=a.qg,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();function y(e){var t=e.t.bind(e);e.t=function(n,r,o){var a,s=Object.entries(r||{}).map((function(e){var t=e[0],n=e[1];return(0,i.isValidElement)(n)?t:null})).filter((function(e){return!!e}));if(!s.length)return t(n,r,o);try{var c=e.i18nInstance.instance.options||{},l=(r||{}).ns||c.ns||"translation";l=Array.isArray(l)?l[0]:"translation";var f=function(t){return e.i18nInstance.instance.getResource(t,l,n)},h=c.fallbackLng,d=f(e.language)||function(){var t;switch(h?Array.isArray(h)&&h.length?"array":typeof h:"null"){case"array":h.find((function(e){return t=f(e)}));break;case"function":var r=h(e.language);if(!Array.isArray(r))return console.error("fallbackLng must be return array"),o||n;r.find((function(e){return t=f(e)}))}return void 0===t&&(t=o||n),t}();Array.isArray(d)&&(d=d[0]);var p=new g(d,e.language,{},{ignoreTag:!!(null===(a=c.formatOptions)||void 0===a?void 0:a.ignoreTag)});try{var v=p.formatToParts(r);if(1===v.length)return v[0].value;var y=v.reduce((function(e,t){return e.length&&t.type===u.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return i.createElement.apply(void 0,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([i.Fragment,{}],y,!1))}catch(e){console.warn("[intl-react-plugin] Key ".concat(JSON.stringify(n)," has missing some interpolation, use fallback target text ").concat(JSON.stringify(d)," fallback. More: ").concat(e));var m=t(n,r,o);return(0,i.createElement)(i.Fragment,{},m)}}catch(e){return console.error("[intl-react-plugin] Some error occurred",e),t(n,r,o)}}}var m=null;function _(){return m}var b=i.createContext({i18n:void 0,locale:void 0}),T={type:"intl3rdParty",init:function(e){!function(e){m=e}(e),y(e)}},k={bindI18n:"languageChanged loaded initialized",bindI18nStore:"added",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0};function S(){return k}},39627:(e,t,n)=>{"use strict";n.d(t,{B:()=>s});var r=n(40099),i=n(7111);function o(e,t,n){e.loadNamespaces(t,(function(){if(e.isInitialized)n();else{var t=function(){setTimeout((function(){e.off("initialized",t)}),0),n()};e.on("initialized",t)}}))}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function s(e,t){void 0===t&&(t={});var n=t.i18n,s=(r.useContext(i.gJ)||{}).i18n,u=n||s||(0,i.TO)()||void 0;if(!u){console.warn("You will need to pass in an @ies/starling_intl instance by using registerReactInstance");var c=function(e){return Array.isArray(e)?e[e.length-1]:e},l=[c,{},!1];return l.t=c,l.i18n={},l.ready=!1,l}var f=u.i18nInstance.instance;f.options.react&&void 0!==f.options.react.wait&&console.warn("It seems you are still using the old wait option, you may migrate to the new useSuspense behavior.");var h=a(a(a({},(0,i.rV)()),f.options.react),t),d=h.useSuspense,p=e||f.options&&f.options.defaultNS||[];p="string"==typeof p?[p]:p||["translation"];var v=(f.isInitialized||f.initializedStoreOnce)&&p.every((function(e){return function(e,t,n){if(void 0===n&&(n={}),!t.languages||!t.languages.length)return console.warn("i18n.languages were undefined or empty",t.languages),!0;var r=t.languages[0],i=!!t.options&&t.options.fallbackLng,o=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!a(t.isLanguageChangingTo,e)||!t.hasResourceBundle(r,e)&&t.services.backendConnector.backend&&(!a(r,e)||i&&!a(o,e)))}(e,f,h)}));function g(){return{t:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!Array.isArray(e))return"";var n=e[0],r=e[1],i=void 0===r?{}:r,o=e[2];return Array.isArray(p)&&p.filter((function(e){return!!e})).length&&(i.ns=p),u.t(n,i,o)}}}var y=r.useState(g()),m=y[0],_=y[1],b=r.useRef(!0);r.useEffect((function(){var e=h.bindI18n,t=h.bindI18nStore;function n(){b.current&&_(g())}b.current=!0,v||d||o(f,p,(function(){b.current&&_(g())}));var r=e?e.split(" ").filter((function(e){return!!e})):"",i=t?t.split(" ").filter((function(e){return!!e})):"";return r&&f&&r.forEach((function(e){return f.on(e,n)})),i&&f&&i.forEach((function(e){return f.store.on(e,n)})),function(){b.current=!1,r&&f&&r.forEach((function(e){return f.off(e,n)})),i&&f&&i.forEach((function(e){return f.store.off(e,n)}))}}),[f,p.join()]);var T=r.useRef(!0);r.useEffect((function(){b.current&&!T.current&&_(g()),T.current=!1}),[f]);var k=[m.t,u,v];if(k.t=m.t,k.i18n=u,k.ready=v,v)return k;if(!v&&!d)return k;throw new Promise((function(e){o(f,p,(function(){e()}))}))}},67768:(e,t,n)=>{"use strict";n.d(t,{ck:()=>de,hp:()=>K});var r=n(40099),i=n(7874),o=n.n(i);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function y(e,t,n){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},y(e,t,n||e)}function m(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b,T,k,S,w,R,M,x,P,E,D,O,I,A,L=function(e){h(n,e);var t=g(n);function n(){return a(this,n),t.apply(this,arguments)}return u(n,[{key:"getChildJSON",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"";var n=e.type,r=e.props,i=(r.children,r.id),o=r.type,a=r.parentID,s=v(r,["children","id","type","parentID"]);return a&&(s={"@id":a}),s=Object.assign(i?{"@id":i}:{},o?{"@type":o}:{},s),new n(e.props).getJSON(t,s)}},{key:"parseChildren",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.children;return n?n.length>0?n.map((function(n){return e.getChildJSON(n,t)})):[this.getChildJSON(n,t)]:[]}},{key:"render",value:function(){return null}}]),n}(r.Component);c(L,"propTypes",{schema:o().object,id:o().string});var C={schemaType:"Generic",requiredProps:{genericType:o().string.isRequired,genericKey:o().string.isRequired,schema:o().object.isRequired}},G={schemaType:"VideoObject",schemaKey:"video",requiredProps:{name:o().string.isRequired,description:o().string.isRequired,thumbnailUrl:o().arrayOf(o().string).isRequired,uploadDate:o().string.isRequired,expires:o().string,caption:o().string,commentCount:o().string,contentUrl:o().string,embedUrl:o().string,interactionCount:o().string,keywords:o().string,musicBy:o().shape({name:o().string.isRequired,alternateName:o().string,mainEntityOfPage:o().shape((b={},c(b,"@type",o().string.isRequired),c(b,"@id",o().string.isRequired),b))})}},N={schemaType:"BroadcastEvent",schemaKey:"publication",requiredProps:{name:o().string.isRequired,isLiveBroadcast:o().bool.isRequired,startDate:o().string.isRequired,endDate:o().string.isRequired,publishedBy:o().string,publishedOn:o().string}},B={schemaType:"MusicRecording",schemaKey:"MusicRecording",requiredProps:{name:o().string.isRequired,url:o().string.isRequired,description:o().string,image:o().string,duration:o().string,byArtist:o().shape((T={},c(T,"@type",o().string.isRequired),c(T,"name",o().arrayOf(o().string)),T)),inAlbum:o().shape((k={},c(k,"@type",o().string.isRequired),c(k,"name",o().string),k))}},$={schemaType:"Organization",schemaKey:"publisher",requiredProps:{id:o().string,url:o().string.isRequired,logo:o().shape((S={},c(S,"@type",o().string.isRequired),c(S,"url",o().string.isRequired),S)),name:o().string.isRequired,sameAs:o().arrayOf(o().string)}},F={schemaType:"ContactPoint",schemaKey:"contactPoint",requiredProps:{telephone:o().string.isRequired,contactType:o().string.isRequired}},U={schemaType:"Person",schemaKey:"author",requiredProps:{name:o().string.isRequired,alternateName:o().string,description:o().string,mainEntityOfPage:o().shape((w={},c(w,"@type",o().string.isRequired),c(w,"@id",o().string.isRequired),w))}},H={schemaType:"ProfilePage",schemaKey:"mainEntityOfPage",requiredProps:{type:o().string,id:o().string}},j={schemaType:"Comment",schemaKey:"comment",requiredProps:{comment:o().arrayOf(o().shape((x={},c(x,"@type",o().string.isRequired),c(x,"text",o().string.isRequired),c(x,"author",o().shape((M={},c(M,"@type",o().string.isRequired),c(M,"name",o().string.isRequired),c(M,"alternateName",o().string),c(M,"mainEntityOfPage",o().shape((R={},c(R,"@type",o().string.isRequired),c(R,"@id",o().string.isRequired),R))),M))),x)))}},V={schemaType:"ItemList",schemaKey:"itemListElement",requiredProps:{itemListElement:o().arrayOf(o().shape((P={},c(P,"@type",o().string.isRequired),c(P,"position",o().number.isRequired),c(P,"url",o().string.isRequired),P))).isRequired}},z={schemaType:"BreadcrumbList",schemaKey:"BreadcrumbList",requiredProps:{itemListElement:o().arrayOf(o().shape((D={},c(D,"@type",o().string.isRequired),c(D,"position",o().number.isRequired),c(D,"item",o().shape((E={},c(E,"@type",o().string.isRequired),c(E,"@id",o().string.isRequired),c(E,"name",o().string.isRequired),E)).isRequired),D))).isRequired}},X={GenericSchema:C,VideoSchema:G,BroadcastEventSchema:N,MusicRecordingSchema:B,OrganizationSchema:$,ContactSchema:F,PersonSchema:U,PageSchema:H,CommentsSchema:j,ItemListSchema:V,EventSchema:{schemaType:"Event",schemaKey:"Event",requiredProps:{name:o().string.isRequired,description:o().string.isRequired,startDate:o().string.isRequired,endDate:o().string.isRequired,image:o().arrayOf(o().string),location:o().object,offers:o().object,performer:o().object}},LocationSchema:{schemaType:"Place",schemaKey:"location",isParent:!0,requiredProps:{name:o().string.isRequired,address:o().object}},AddressSchema:{schemaType:"PostalAddress",schemaKey:"address",requiredProps:{streetAddress:o().string.isRequired,addressLocality:o().string.isRequired,postalCode:o().string.isRequired,addressRegion:o().string.isRequired,addressCountry:o().string.isRequired}},OffersSchema:{schemaType:"Offer",schemaKey:"offers",requiredProps:{url:o().string.isRequired,price:o().string.isRequired,priceCurrency:o().string.isRequired,availability:o().string.isRequired,validFrom:o().string.isRequired}},PerformerSchema:{schemaType:"PerformingGroup",schemaKey:"performer",requiredProps:{name:o().string.isRequired}},WebSiteSchema:{schemaType:"WebSite",schemaKey:"WebSite",requiredProps:{id:o().string,url:o().string.isRequired,name:o().string.isRequired,description:o().string.isRequired}},BreadcrumbSchema:z,ArticleSchema:{schemaType:"NewsArticle",schemaKey:"article",requiredProps:{headline:o().string.isRequired,image:o().arrayOf(o().string),datePublished:o().string.isRequired,dateModified:o().string.isRequired}},QAPageSchema:{schemaType:"QAPage",schemaKey:"qaPage",requiredProps:{mainEntity:o().shape({"@type":o().string.isRequired,name:o().string.isRequired,answerCount:o().number.isRequired,text:o().string,upvoteCount:o().string,dateCreated:o().string,author:o().shape((O={},c(O,"@type",o().string.isRequired),c(O,"name",o().string.isRequired),O)),acceptedAnswer:o().shape({"@type":o().string.isRequired,text:o().string.isRequired,dateCreated:o().string,upvoteCount:o().string,url:o().string,author:o().shape((I={},c(I,"@type",o().string.isRequired),c(I,"name",o().string.isRequired),I))}),suggestedAnswer:o().arrayOf(o().shape({"@type":o().string.isRequired,text:o().string.isRequired,dateCreated:o().string,upvoteCount:o().string,url:o().string,author:o().shape((A={},c(A,"@type",o().string.isRequired),c(A,"name",o().string.isRequired),A))}))}).isRequired}}},K=function(e){var t="",n=e.id,i=e.dangerouslyExposeHtml,o=e.children;try{if(o){var a=o.type,s=o.props,u=(s.children,s.id),c=s.type,l=v(s,["children","id","type"]),f=new a(s).getJSON(!0,l);t=Object.assign(u?{"@id":u}:{},c?{"@type":c}:{},{"@context":"https://schema.org/"},f)}}catch(e){console.error("[JSONLD] Sciprt ".concat(n," ").concat(e,", only allow one top child."))}return i?r.createElement("script",{type:"application/ld+json",id:n,dangerouslySetInnerHTML:{__html:JSON.stringify(t)}}):r.createElement("script",{type:"application/ld+json",id:n},JSON.stringify(t))};K.propTypes={dangerouslyExposeHtml:o().bool},K.defaultProps={dangerouslyExposeHtml:!1};var Q=X.VideoSchema,W=X.BroadcastEventSchema,q=X.MusicRecordingSchema,Y=X.OrganizationSchema,J=X.ContactSchema,Z=X.PersonSchema,ee=X.PageSchema,te=X.ItemListSchema,ne=X.EventSchema,re=X.LocationSchema,ie=X.AddressSchema,oe=X.OffersSchema,ae=X.PerformerSchema,se=X.WebSiteSchema,ue=X.CommentsSchema,ce=X.BreadcrumbSchema,le=X.ArticleSchema,fe=X.QAPageSchema,he=function(e){var t=e.schemaType,n=e.schemaKey,r=e.requiredProps,i=void 0===r?{}:r,s=e.isParent,l=void 0!==s&&s;return function(e){h(s,e);var r=g(s);function s(){return a(this,s),r.apply(this,arguments)}return u(s,[{key:"getJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{o().checkPropTypes(i,r,n,t)}catch(e){console.error("[JSONLD] Sciprt ".concat(t," ").concat(e))}var a={},u=y(d(s.prototype),"parseChildren",this).call(this,!1);if("Generic"===t){var h=this.props,p=h.genericType,v=h.genericKey,g=f({"@type":p},h.schema);a=e?Object.assign.apply(Object,[g].concat(m(u))):Object.assign.apply(Object,[c({},v,g)].concat(m(u)))}else{var _=f({"@type":t},r);a=e?Object.assign.apply(Object,[_].concat(m(u))):l?c({},n,Object.assign.apply(Object,[_].concat(m(u)))):Object.assign.apply(Object,[c({},n,_)].concat(m(u)))}return a}}]),s}(L)},de=he(X.GenericSchema);he(Q),he(W),he(J),he(Y),he(Z),he(ee),he(te),he(ne),he(re),he(ie),he(oe),he(ae),he(se),he(ue),he(ce),he(q),he(le),he(fe)},94810:(e,t,n)=>{"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n;if(e)return"string"==typeof e?a(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(){return(1<arguments.length&&void 0!==arguments[1]&&!arguments[1]?/^[0-9]+$/:/^[0-9]*$/).test(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")}function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e&&/[^a-zA-Z0-9\_\.]/.test(e)}function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e&&!s(e)&&!u(e)&&e.length<=25}function l(e){var t=e.uniqueId;return e=e.secUid,c(t)?t:e}function f(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e?e.replace(/([\[\]\,.?"\(\)+_*\/\\&\$#^@!%~`<>:;\{\}？，。·！￥……（）+｛｝【】、|《》]|(?!\s)'\s+|\s+'(?!\s))/gi,"").trim().replace(/(\s+)-(\s+)/gi," ").replace(/\s+|・/gi,"-"):""}function h(){function e(e){return f.test(e)}function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e?e.replace(u,"").trim().replace(/(\s+)-(\s+)/gi," ").replace(/\s+|・/gi,"-"):""}function n(){var e=r(f.exec(0<arguments.length&&void 0!==arguments[0]?arguments[0]:""),4);return e[0],{name:e[1],sign:e[2],feat:e[3]}}function o(){var i,o,a,s,u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=1<arguments.length?arguments[1]:void 0,l=[];return c?((c=r(c.exec(u)||[],3))[0],i=c[1],c=void 0===(c=c[2])?"":c,!e(i=void 0===i?"":i)&&e(c)?(l.push(t(i)),s=(o=n(c)).sign,o=o.feat,s&&l.push(t(s)),o&&l.push(t(o))):(e(i)&&!e(c)?(o=(s=n(i)).name,a=s.sign,s=s.feat,o&&l.push(t(o)),a&&l.push(t(a)),s&&l.push(t(s))):l.push(t(i)),l.push(t(c)))):(a=(o=n(u)).name,s=o.feat,a&&l.push(t(a)),s&&l.push(t(s))),l}var a,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",u=/([\[\]\,.?"\(\)+_*\/\\&\$#^@!%~`<>:;\{\}？，。·！￥……（）+｛｝【】、|《》]|(?!\s)'\s+|\s+'(?!\s))/gi,c=/^(.*)\s?-\s?(.*)?/,l=/^(.*)\((.*)?\)/,f=/^(.*)(ft\.|feat\.)(.*)/;return a=s,(l.test(a)?i(o(s,l)):(a=s,c.test(a)?i(o(s,c)):e(s)?i(o(s)):[t(s)])).join("-")}n.d(t,{A:()=>d,h:()=>p});var d=Object.freeze({__proto__:null,isPureNumber:s,hasIllegalText:u,isRealUniqueId:c,getPureUniqueId:l,purifyPlainText:f,purifyMusicName:h}),p=Object.freeze({__proto__:null,getPureUserPath:function(e){var t=e.uniqueId,n=e.secUid,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return(t=l({uniqueId:t,secUid:n}))?"/@".concat(t):r},getPureVideoPath:function(e){var t=e.uniqueId,n=e.secUid,r=e.videoId,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return(t=l({uniqueId:t,secUid:n}))&&r?"/@".concat(t,"/video/").concat(r):i},getPureTagPath:function(e){var t=e.tagName,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return t?"/tag/".concat(encodeURIComponent(t)):n},getPureMusicPath:function(e){var t=e.musicName,n=e.musicId,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return t&&n?"/music/".concat(h(t),"-").concat(n):r},getPureLivePath:function(e){var t=e.uniqueId,n=e.secUid,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return(t=l({uniqueId:t,secUid:n}))?"/@".concat(t,"/live"):r},getPureStickerPath:function(e){var t=e.stickerName,n=e.stickerId,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return t&&n?"/sticker/".concat(f(t),"-").concat(n):r},getPureQuestionPath:function(e){var t=e.questionContent,n=e.questionId,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return t&&n?"/question/".concat(f(t),"-").concat(n):r},getPureCollectionPath:function(e){var t=e.uniqueId,n=e.title,r=e.collectionId,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return t&&n&&r?"/@".concat(t,"/collection/").concat(n,"-").concat(r):i}})},90170:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(14);function i(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(15);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(11).default,i=n(7);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(16)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(17),i=n(18),o=n(19),a=n(20);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){e.exports=n(21)},function(e,t,n){var r=n(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(11).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),a=new M(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var d={};function p(){}function v(){}function g(){}var y={};l(y,s,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(x([])));_&&_!==n&&o.call(_,s)&&(y=_);var b=g.prototype=p.prototype=Object.create(y);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var n;this._invoke=function(i,a){function s(){return new t((function(n,s){!function n(i,a,s,u){var c=h(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}(i,a,n,s)}))}return n=n?n.then(s,s):s()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=h(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=g,l(b,"constructor",g),l(g,"constructor",v),v.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},T(k.prototype),l(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(f(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(12);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){var r=n(12);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,n){"use strict";n.r(t),n.d(t,"StreamPlayer",(function(){return Vt})),n.d(t,"BasicPlayer",(function(){return Xt})),n.d(t,"storage",(function(){return Ht}));var r=n(9),i=n.n(r),o=n(2),a=n.n(o),s=n(3),u=n.n(s),c=n(1),l=n.n(c),f=n(4),h=n.n(f),d=n(5),p=n.n(d),v=n(0),g=n.n(v),y=n(8),m=n.n(y),_=n(10),b=n.n(_),T={autoplay:!1,loop:!1,muted:!1,metaChunkSize:209715.2,dataChunkSize:1048576,bufferEnoughTime:.5,bufferMaxTime:3,bufferCheckingInterval:100,preload:"auto"},k={defaultBufferSize:10485760},S=n(7),w=n.n(S),R=n(6),M=n.n(R),x=function(){function e(){a()(this,e),this._events=[],this._callbacks={}}return u()(e,[{key:"register",value:function(e){this._events.includes[e]||this._events.push(e)}},{key:"on",value:function(e,t){return!!this._events.includes(e)&&(this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),!0)}},{key:"off",value:function(e,t){if(!this._events.includes(e))return!1;var n=this._callbacks[e].indexOf(t);return this._callbacks[e].splice(n,1),!0}},{key:"trigger",value:function(e,t){if(!this._callbacks[e]||!this._callbacks[e].length)return!1;var n=null;return this._callbacks[e].forEach((function(e,r){0==r?n=e(t):e(t)})),n}},{key:"events",get:function(){return this._events},set:function(e){var t=this;e.forEach((function(e){t.register(e)}))}}]),e}();var P=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return a()(this,n),r=t.call(this),M()(w()(r),"_initTextTrack",(function(){r.textTrack=document.createElement("track"),r.textTrack.default=!0,r.textTrack.kind="captions",r.textTrack.label="English",r.textTrack.srclang="en",r.textTrack.oncuechange=function(e){var t,n,i=null===(t=e.target)||void 0===t||null===(n=t.track)||void 0===n?void 0:n.activeCues;i&&i.length&&(i[0].track.mode="hidden",r.trigger("SUBTITLE_CHANGED",i[0].text))}})),M()(w()(r),"load",(function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){var t=new Blob([e],{type:"text/vtt"});r.textTrack&&(r.textTrack.src=URL.createObjectURL(t),r.el.appendChild(r.textTrack))}))})),M()(w()(r),"reset",(function(){r.textTrack&&(r.textTrack.src&&URL.revokeObjectURL(r.textTrack.src),r.textTrack.parentNode&&r.textTrack.parentNode.removeChild(r.textTrack),r.textTrack=null)})),r.el=e,r.textTrack=null,r._initTextTrack(),r.events=["SUBTITLE_CHANGED"],r}return u()(n)}(x);var E=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this)).el=e,i.events=r,i.proxyEvents=[],i}return u()(n,[{key:"bind",value:function(e,t){l()(g()(n.prototype),"on",this).call(this,e,t)||this.el.addEventListener(e,t)}},{key:"remove",value:function(e,t){l()(g()(n.prototype),"off",this).call(this,e,t)||this.el.removeEventListener(e,t)}},{key:"proxy",value:function(e,t){var r=this;this.register(e),this.proxyEvents.push(e),l()(g()(n.prototype),"on",this).call(this,e,t),this.el.addEventListener(e,(function(t){l()(g()(n.prototype),"trigger",r).call(r,e,t)}))}}]),n}(x),D=[],O=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;a()(this,e),this.type=t,this.config=n,this.el=document.createElement("video"),this.config.container&&this.config.container.appendChild(this.el),this.eventManager=new E(this.el,[].concat(b()(D),b()(r))),this.subtitle=null,this.isReady=!1,this._initAttributes()}var t;return u()(e,[{key:"_initAttributes",value:function(){this.el.autoplay=this.config.autoplay||T.autoplay,this.el.loop=this.config.loop||T.loop,this.el.muted=this.config.muted||T.muted,this.el.controls=!1,this.el.playsInline=!0,this.el.preload=this.config.preload||T.preload}},{key:"_initEvents",value:function(){var e=this;this.eventManager.proxy("canplay",(function(){e.isReady=!0}))}},{key:"load",value:function(e){this.el.src!==e&&(this.el.src=e)}},{key:"play",value:function(){return this.el.play()}},{key:"pause",value:function(){this.el.pause()}},{key:"seek",value:function(e){this.el.currentTime=e}},{key:"mute",value:function(e){this.el.muted=e}},{key:"addSubtitle",value:function(e,t){return this.subtitle&&(this.subtitle.reset(),this.subtitle=null),this.subtitle=new P(this.el),this.subtitle.on("SUBTITLE_CHANGED",t),this.subtitle.load(e)}},{key:"access",value:function(){var e=this;return this.el.play().then((function(){e.el.pause()}))}},{key:"reset",value:function(){this.pause(),this.el.src=""}},{key:"on",value:function(e,t){this.eventManager.bind(e,t)}},{key:"off",value:function(e,t){this.eventManager.remove(e,t)}},{key:"replay",value:(t=i()(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.seek(0),e.prev=1,e.next=4,this.play();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,this,[[1,6]])}))),function(){return t.apply(this,arguments)})},{key:"currentTime",get:function(){return this.el.currentTime}},{key:"playing",get:function(){return!this.el.paused}},{key:"duration",get:function(){return this.el.duration}},{key:"bufferRanges",get:function(){for(var e=[],t=0;t<this.el.buffered.length;t++)e.push({startTime:this.el.buffered.start(t),duration:this.el.buffered.end(t)-this.el.buffered.start(t)});return e}},{key:"volume",set:function(e){this.el.volume=e}},{key:"speed",set:function(e){this.el.playbackRate=e}},{key:"release",value:function(){this.isReady=!1}},{key:"getQualityInfo",value:function(){return this.el.getVideoPlaybackQuality?this.el.getVideoPlaybackQuality():{corruptedVideoFrames:0,creationTime:performance.now(),droppedVideoFrames:this.el.webkitDroppedFrameCount||0,totalVideoFrames:this.el.webkitDecodedFrameCount||0}}}]),e}();O.isSoftwareRender=function(){try{var e=document.createElement("canvas").getContext("webgl"),t=e.getExtension("WEBGL_debug_renderer_info");return e.getParameter(t.UNMASKED_RENDERER_WEBGL).includes("SwiftShader")}catch(e){return!0}};var I=O;var A=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a()(this,n),e=t.call(this),M()(w()(e),"_downloadChunk",(function(){if(!(e.loading||e._totalSize&&e._chunkOffset>=e._totalSize)){var t=function(){var e=performance.now();return function(){return(performance.now()-e)/1e3}}(),n=e._chunkSize,r=e._chunkOffset,i=e.url,o=new XMLHttpRequest;e.xhr=o,o.open("GET",i,!0),o.withCredentials=!!e.config.withCredentials,o.responseType="arraybuffer",o.start=e._chunkOffset,o.setRequestHeader("Range","bytes="+e._chunkOffset+"-"+(e._chunkOffset+n-1)),o.onerror=function(t){0!==t.target.status&&void 0!==t.target.status||e.trigger("ERROR",{name:"CORS_ERROR",url:i})},o.onreadystatechange=function(a){if(403===o.status&&e.trigger("ERROR",{name:"FORBIDDEN_ERROR",url:i,code:403}),4==o.readyState&&(e.loading=!1,200==o.status||206==o.status||304==o.status||416==o.status)){if(416==o.status)return void e.trigger("ERROR",{url:i,name:"RANGE_ERROR",code:416,range:"bytes="+r+"-"+(r+n-1)});if(i!=e.url)return;var s=null;if(o.getAllResponseHeaders().toLocaleLowerCase().indexOf("content-range")>=0&&(s=o.getResponseHeader("content-range")),!e._totalSize&&s){var u=s.split("/");2==u.length&&(e._totalSize=parseInt(u[1]),e.trigger("FILE_SIZE",e._totalSize))}e.eof=o.response.byteLength!=n||o.response.byteLength==e._totalSize,e.lastChunkNetworkTime=t(),e.trigger("CHUNK_READY",{data:o.response,eof:e.eof,chunkOffset:r,chunkSize:n,totalSize:e._totalSize,networkDuration:e.lastChunkNetworkTime}),e.eof||e.paused?e.eof&&e.trigger("EOF",null):e.timeoutId=setTimeout((function(){e._chunkOffset+=n,e._downloadChunk()}),0)}},e.loading=!0,o.send()}})),M()(w()(e),"load",(function(t){e.url=t})),M()(w()(e),"start",(function(){e.url&&(e.eof=!1,e.paused=!1,e.chunkOffset=0,e.switchToInitSize(),e._downloadChunk())})),M()(w()(e),"pause",(function(){e.paused=!0})),M()(w()(e),"resume",(function(t){!e.paused||e.loading||e.eof||(e.paused=!1,null!=t?e._chunkOffset=t:e._chunkOffset+=e._chunkSize,e._downloadChunk())})),M()(w()(e),"release",(function(){e.xhr&&(e.xhr.abort(),e.xhr=null,e.loading=!1),e.eof=!0,e.paused=!0,e.timeoutId&&clearTimeout(e.timeoutId),e.switchToInitSize(),e._chunkOffset=0,e._totalSize=0,e.url=""})),e.config=r,e._chunkSize=0,e._chunkOffset=0,e._totalSize=0,e.url="",e._initChunkSize=-1,e._commonChunkSize=-1,e.lastChunkNetworkTime=0,e.eof=!0,e.paused=!0,e.loading=!1,e.timeoutId=null,e.xhr=null,e.events=["CHUNK_READY","FILE_SIZE","EOF","ERROR"],e}return u()(n,[{key:"chunkSize",set:function(e){!e||e<0||(this._chunkSize=Math.ceil(e))}},{key:"initChunkSize",set:function(e){!e||e<0||(this._initChunkSize=Math.ceil(e))}},{key:"commonChunkSize",set:function(e){!e||e<0||(this._commonChunkSize=Math.ceil(e))}},{key:"switchToCommonSize",value:function(){this._commonChunkSize<=0||(this.chunkSize=this._commonChunkSize)}},{key:"switchToInitSize",value:function(){this._initChunkSize<=0||(this.chunkSize=this._initChunkSize)}},{key:"chunkOffset",set:function(e){this._chunkOffset=e}}]),n}(x),L=new(u()((function e(){var t=this;a()(this,e),M()(this,"create",(function(e,n,r){return new t.defs[e](n,r)})),M()(this,"define",(function(e,n){t.defs[e]=n})),M()(this,"isSupported",(function(e){return t.defs[e]})),this.defs={}}))),C=Math.pow(2,32),G=function(e,t,n,r,i){var o=new Uint8Array(e,t,i),a=new Uint8Array(n,r,i);o.set(a)},N=function(e,t){return e+t},B=function(e,t){return{value:e.getUint8(t),position:t+1}},$=function(e,t){return{value:e.getUint16(t),position:t+2}},F=function(e,t,n){return{value:e.getUint32(t,!n),position:t+4}},U=function(e,t,n){return e.setUint8(t,n),t+1},H=function(e,t,n){return e.setUint16(t,n),t+2},j=function(e,t,n){return e.setInt32(t,n),t+4},V=function(e,t,n){return e.setUint32(t,n),t+4},z=G,X=N,K=B,Q=$,W=function(e,t){return{value:e.getInt16(t),position:t+2}},q=function(e,t){var n=$(e,t),r=n.value<<16;return t=n.position,{value:r|(n=B(e,t)).value,position:t=n.position}},Y=F,J=function(e,t,n){return{value:e.getInt32(t,!n),position:t+4}},Z=function(e,t,n){var r=F(e,t,n),i=r.value;t=r.position;var o=(r=F(e,t,n)).value;return t=r.position,{value:n?i*C+o:o*C+i,position:t}},ee=function(e,t,n){return{value:null,position:N(t,8)}},te=function(e,t,n){for(var r=[],i=t;i<t+n;i++)r.push(e.getUint8(i));return{value:String.fromCharCode.apply(null,r),position:t+n}},ne=function(e,t,n){var r=new Uint8Array(n);return G(r.buffer,0,e.buffer,t,n*r.BYTES_PER_ELEMENT),{value:r,position:t+r.byteLength}},re=U,ie=function(e,t,n){return e.setInt16(t,n),t+2},oe=H,ae=function(e,t,n){return t=U(e,t,(16711680&n)>>16),t=U(e,t,(65280&n)>>8),U(e,t,255&n)},se=j,ue=V,ce=function(e,t,n){var r=Math.floor(n/C);return t=V(e,t,r),V(e,t,4294967295&n)},le=function(e,t,n,r){var i=Math.min(n.length,r),o=0;for(o=0;o<i;o++)t=U(e,t,n.charCodeAt(o));for(;o<r;o++)t=U(e,t,0);return t},fe=function(e,t,n){if(n instanceof Uint8Array)G(e.buffer,t,n.buffer,0,n.byteLength),t+=n.byteLength;else for(var r=0;r<n.length;r++)t=U(e,t,n[r]);return t},he=function(e,t,n){if(n instanceof Uint32Array)G(e.buffer,t,n.buffer,0,n.byteLength),t+=n.byteLength;else for(var r=0;r<n.length;r++)t=V(e,t,n[r]);return t},de=function(e,t,n){n=n||0;var r=new ArrayBuffer(t),i=new Uint8Array(r),o=new Uint8Array(e,n,t);return i.set(o),r},pe=function(e,t){var n=Number(e).toString(16);for(t=null==t?t=2:t;n.length<t;)n="0"+n;return n};var ve=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,i){var o;return a()(this,n),(o=t.call(this)).offset=i,o.type=e,o.size=r,o}return u()(n,[{key:"parse",value:function(e,t){}},{key:"write",value:function(e,t){var n=this;return this.offset=t,t=X(t,4),{position:t=le(e,t,this.type,4),writeSize:function(t){return n.size=t-n.offset,n.size,ue(e,n.offset,n.size),t}}}}]),n}(x);var ge=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"ftyp",e,r)).data=null,i.majorBrand=null,i.minorVersion=null,i.compatibleBrands=[],i}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r=ne(e,t,this.size-8);this.data=r.value,t=r.position}else{var i=this.size-8,o=te(e,t,4);for(this.majorBrand=o.value,t=o.position,o=Y(e,t,!0),this.minorVersion=o.value,t=o.position,i-=8,this.compatibleBrands=[];i>=4;){var a=te(e,t,4);this.compatibleBrands.push(a.value),t=a.position,i-=4}}return t}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);if(t=r.position,this.data)t=fe(e,t,this.data);else{t=le(e,t,this.majorBrand,4),t=ue(e,t,this.minorVersion);for(var i=0;i<this.compatibleBrands.length;i++)t=le(e,t,this.compatibleBrands[i],4)}return r.writeSize(t),t}}]),n}(ve);ge.type="ftyp",ge.skippable=!0,L.define(ge.type,ge);var ye=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,i){var o;return a()(this,n),(o=t.call(this,e,r,i)).boxes=[],o.events=["SUB_BOX"],o.lastPosition=-1,o.listBoxes=[],o}return u()(n,[{key:"parse",value:function(e,t){for(;t<this.offset+this.size;){this.lastPosition=t;var n=this.trigger("SUB_BOX",{position:t});if(n){t=n.position;var r=n.type;this.listBoxes&&this.listBoxes.length&&this.listBoxes.indexOf(r)>=0?(this[n.type]||(this[n.type]=[]),this[n.type].push(n.box)):this[n.type]=n.box,this.boxes.push(n.type)}if(t==this.lastPosition)break}}},{key:"write",value:function(e,t){var r=this,i=l()(g()(n.prototype),"write",this).call(this,e,t);return{position:t=i.position,writeSize:function(e){return i.writeSize(e)},writeSubBoxes:function(e,t){for(var n=0;n<r.boxes.length;n++){var i=r.boxes[n];if(r[i]&&!r[i].unwritable)if(r.listBoxes&&r.listBoxes.length&&r.listBoxes.indexOf(i)>=0)for(var o=0;o<r[i].length;o++)t=r[i][o].write(e,t),r.size+=r[i][o].size;else t=r[i].write(e,t),r.size+=r[i].size}return t}}}},{key:"addSubBox",value:function(e,t){this[e=e||t.type]=t,this.boxes.push(e)}}]),n}(ve);var me=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"moov",e,r)).listBoxes=["trak"],i}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}},{key:"duration",get:function(){return this.mvhd?this.mvhd.duration:0}},{key:"timescale",get:function(){return this.mvhd?this.mvhd.timescale:1}}]),n}(ye);me.type="moov",L.define(me.type,me);var _e=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,i){var o;return a()(this,n),(o=t.call(this,e,r,i)).version=0,o.flags=0,o}return u()(n,[{key:"parse",value:function(e,t){var n=K(e,t);return this.version=n.value,t=n.position,n=q(e,t),this.flags=n.value,n.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=re(e,t,this.version),{position:t=ae(e,t,this.flags),writeSize:function(e){return r.writeSize(e)}}}}]),n}(ve);var be=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"mvhd",e,r)).data=null,i.creationTime=null,i.modificationTime=null,i.timescale=null,i.duration=null,i.rate=null,i.volume=null,i.nextTrackId=null,i}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r=t;t=l()(g()(n.prototype),"parse",this).call(this,e,t);var i=ne(e,t,this.size-8-(t-r));return this.data=i.value,r=i.position,1==this.version?(t=X(t,16),i=Y(e,t,!0),this.timescale=i.value,t=i.position,i=Z(e,t,!0),this.duration=i.value,t=i.position):(t=X(t,8),i=Y(e,t,!0),this.timescale=i.value,t=i.position,i=Y(e,t,!0),this.duration=i.value,t=i.position),r}t=l()(g()(n.prototype),"parse",this).call(this,e,t);var o=null;if(1==this.version)o=Z(e,t,!0),this.creationTime=o.value,t=o.position,o=Z(e,t,!0),this.modificationTime=o.value,t=o.position,o=Y(e,t,!0),this.timescale=o.value,t=o.position,o=Z(e,t,!0),this.duration=o.value,t=o.position;else{var a=Y(e,t,!0);this.creationTime=a.value,t=a.position,a=Y(e,t,!0),this.modificationTime=a.value,t=a.position,a=Y(e,t,!0),this.timescale=a.value,t=a.position,a=Y(e,t,!0),this.duration=a.value,t=a.position}return o=Y(e,t,!0),this.rate=o.value,t=o.position,o=Q(e,t),this.volume=o.value>>8,t=o.position,o=function(e,t,n){var r=new Uint32Array(n);return G(r.buffer,0,e.buffer,t,n*r.BYTES_PER_ELEMENT),{value:r,position:t+r.byteLength}}(e,t=X(t,10),9),this.matrix=o.value,t=o.position,t=X(t,24),o=Y(e,t,!0),this.nextTrackId=o.value,o.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data?t=fe(e,t,this.data):(t=ue(e,t,this.creationTime),t=ue(e,t,this.modificationTime),t=ue(e,t,this.timescale),t=ue(e,t,this.duration),t=ue(e,t,this.rate),t=oe(e,t,this.volume<<8),t=X(t,10),t=he(e,t,this.matrix),t=X(t,24),t=ue(e,t,this.nextTrackId)),r.writeSize(t),t}}]),n}(_e);be.type="mvhd",be.skippable=!0,L.define(be.type,be);var Te=function(){function e(t,n){a()(this,e),this.index=t,this.trackId=n,this.dts=0,this.timescale=1,this.size=0,this.read=!1}return u()(e,[{key:"timestamp",get:function(){return this.dts/this.timescale}}]),e}();var ke=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),i=t.call(this,"trak",e,r),M()(w()(i),"buildSamples",(function(){if(i.sampleIndex=0,i.samples=[],i.samplesDuration=0,i.samplesSize=0,i.mdia&&i.mdia.minf&&i.mdia.minf.stbl){var e=i.mdia.minf.stbl.stco,t=i.mdia.minf.stbl.stsc,n=i.mdia.minf.stbl.stsz,r=i.mdia.minf.stbl.stts,o=i.mdia.minf.stbl.ctts,a=i.mdia.minf.stbl.stss,s=i.mdia.minf.stbl.stsd;if(n&&n.sampleSizes&&n.sampleSizes.length)for(var u=0,c=-1,l=-1,f=-1,h=-1,d=0,p=-1,v=-1,g=-1,y=-1,m=0;m<n.sampleSizes.length;m++){var _=new Te(m,i.id);_.timescale=i.timescale,i.samples[m]=_,_.size=n.sampleSizes[m],i.samplesSize+=_.size,0===m?(p=1,v=0,_.chunkIndex=p,_.chunkRunIndex=v,g=t.samplesPerChunk[v],u=0,y=v+1<t.firstChunk.length?t.firstChunk[v+1]-1:1/0):m<g?(_.chunkIndex=p,_.chunkRunIndex=v):(p++,_.chunkIndex=p,u=0,p<=y||(y=1+ ++v<t.firstChunk.length?t.firstChunk[v+1]-1:1/0),_.chunkRunIndex=v,g+=t.samplesPerChunk[v]),_.descriptionIndex=t.sampleDescriptionIndex[_.chunkRunIndex]-1,_.description=s.entries[_.descriptionIndex],_.offset=e.chunkOffsets[_.chunkIndex-1]+u,u+=_.size,m>c&&(l++,c<0&&(c=0),c+=r.sampleCounts[l]),m>0?(i.samples[m-1].duration=r.sampleDeltas[l],i.samplesDuration+=i.samples[m-1].duration,_.dts=i.samples[m-1].dts+i.samples[m-1].duration,m==n.sampleSizes.length-1&&(_.duration=r.sampleDeltas[l],i.samplesDuration+=_.duration)):_.dts=0,o?(m>=f&&(h++,f<0&&(f=0),f+=o.sampleCounts[h]),_.cts=i.samples[m].dts+o.sampleOffsets[h]):_.cts=_.dts,a?m==a.sampleNumbers[d]-1?(_.iFrame=!0,d++):_.iFrame=!1:_.iFrame=!0}}})),M()(w()(i),"resetForFMP4",(function(){if(i.tkhd&&(i.tkhd.duration=0),i.mdia&&(i.mdia.mdhd&&(i.mdia.mdhd.duration=0),i.mdia&&i.mdia.minf&&i.mdia.minf.stbl)){var e=i.mdia.minf.stbl;if(e.stco&&(e.stco.chunkOffsets=[]),e.stsc){var t=e.stsc;t.firstChunk=[],t.samplesPerChunk=[],t.sampleDescriptionIndex=[]}if(e.stsz&&(e.stsz.sampleSizes=[]),e.stts){var n=e.stts;n.sampleCounts=[],n.sampleDeltas=[]}if(e.ctts){var r=e.ctts;r.sampleCounts=[],r.sampleOffsets=[]}}})),i}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}},{key:"getSampleOffsetWithTime",value:function(e){if(!this.samples.length)return 0;for(var t=-1,n=-1,r=(this.samples[0].timescale,0);r<this.samples.length;r++){var i=this.samples[r];if(i.cts>e*i.timescale){t=Math.max(0,r-1);break}i.iFrame&&(n=r)}if(t=n)return 0;for(e=this.samples[t].cts,this.sampleIndex=t;this.samples[t].read&&t!=this.samples.length-1;)t++;return this.samples[t].offset}},{key:"id",get:function(){return this.tkhd?this.tkhd.trackId:0}},{key:"idString",get:function(){return"trak_"+this.id}},{key:"name",get:function(){return this.mdia&&this.mdia.hdlr?this.mdia.hdlr.handler:""}},{key:"isAudio",get:function(){return"soun"==this.name}},{key:"isVideo",get:function(){return"vide"==this.name}},{key:"duration",get:function(){return this.mdia&&this.mdia.mdhd?this.mdia.mdhd.duration:0}},{key:"calculatedDuration",get:function(){if(!this.samples.length)return 0;var e=this.samples[this.samples.length-1];return(e.cts+e.duration)/e.timescale}},{key:"timescale",get:function(){return this.mdia&&this.mdia.mdhd?this.mdia.mdhd.timescale:1}},{key:"sampleDesc",get:function(){return this.mdia&&this.mdia.minf&&this.mdia.minf.stbl&&this.mdia.minf.stbl.stsd&&this.mdia.minf.stbl.stsd.entries.length?this.mdia.minf.stbl.stsd.entries[0]:null}},{key:"codec",get:function(){return this.sampleDesc?this.sampleDesc.getCodec():""}},{key:"sampleDuration",get:function(){return this.samples&&this.samples.length?this.samples[0].duration:0}}]),n}(ye);ke.type="trak",L.define(ke.type,ke);var Se=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"tkhd",e,r)).data=null,i.creationTime=null,i.modificationTime=null,i.trackId=null,i.duration=null,i.layer=null,i.alternateGroup=null,i.volume=null,i.matrix=null,i.width=null,i.height=null,i}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r=t;t=l()(g()(n.prototype),"parse",this).call(this,e,t);var i=ne(e,t,this.size-8-(t-r));return this.data=i.value,r=i.position,1==this.version?(t=X(t,16),i=Y(e,t,!0),this.trackId=i.value,t=i.position,t=X(t,4),i=Z(e,t,!0),this.duration=i.value,t=i.position):(t=X(t,8),i=Y(e,t,!0),this.trackId=i.value,t=i.position,t=X(t,4),i=Y(e,t,!0),this.duration=i.value,t=i.position),t=X(t,52),i=Y(e,t,!0),this.width=i.value,t=i.position,i=Y(e,t,!0),this.height=i.value,t=i.position,r}if(t=l()(g()(n.prototype),"parse",this).call(this,e,t),1==this.version){var o=Z(e,t,!0);this.creationTime=o.value,t=o.position,o=Z(e,t,!0),this.modificationTime=o.value,t=o.position,o=Y(e,t,!0),this.trackId=o.value,t=o.position,t=(o=Y(e,t,!0)).position,o=Z(e,t,!0),this.duration=o.value,t=o.position}else{var a=Y(e,t,!0);this.creationTime=a.value,t=a.position,a=Y(e,t,!0),this.modificationTime=a.value,t=a.position,a=Y(e,t,!0),this.trackId=a.value,t=a.position,t=X(t,4),a=Y(e,t,!0),this.duration=a.value,t=a.position}t=X(t,8);var s=W(e,t);return this.layer=s.value,t=s.position,s=W(e,t),this.alternateGroup=s.value,t=s.position,s=W(e,t),this.volume=s.value>>8,t=s.position,s=function(e,t,n){var r=new Int32Array(n);return G(r.buffer,0,e.buffer,t,n*r.BYTES_PER_ELEMENT),{value:r,position:t+r.byteLength}}(e,t=X(t,2),9),this.matrix=s.value,t=s.position,s=Y(e,t,!0),this.width=s.value,t=s.position,s=Y(e,t,!0),this.height=s.value,s.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data?t=fe(e,t,this.data):(t=ue(e,t,this.creationTime),t=ue(e,t,this.modificationTime),t=ue(e,t,this.trackId),t=X(t,4),t=ue(e,t,this.duration),t=X(t,8),t=ie(e,t,this.layer),t=ie(e,t,this.alternateGroup),t=ie(e,t,this.volume<<8),t=function(e,t,n){if(n instanceof Int32Array)G(e.buffer,t,n.buffer,0,n.byteLength),t+=n.byteLength;else for(var r=0;r<n.length;r++)t=j(e,t,n[r]);return t}(e,t=X(t,2),this.matrix),t=ue(e,t,this.width),t=ue(e,t,this.height)),r.writeSize(t),t}}]),n}(_e);Se.type="tkhd",Se.skippable=!0,L.define(Se.type,Se);var we=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"edts",e,r)).unwritable=!0,i}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}}]),n}(ye);we.type="edts",L.define(we.type,we);var Re=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"elst",e,r)).entries=[],i}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r=t;t=l()(g()(n.prototype),"parse",this).call(this,e,t);var i=ne(e,t,this.size-8-(t-r));return this.data=i.value,i.position}t=l()(g()(n.prototype),"parse",this).call(this,e,t);var o=Y(e,t,!0),a=o.value;t=o.position;for(var s=0;s<a;s++){var u={};this.entries.push(u),1===this.version?(o=Z(e,t,!0),u.segmentDuration=o.value,t=o.position,o=ee(0,t),u.mediaTime=o.value,t=o.position):(o=Y(e,t,!0),u.segmentDuration=o.value,t=o.position,o=J(e,t,!0),u.mediaTime=o.value,t=o.position),o=W(e,t),u.mediaRateInteger=o.value,t=o.position,o=W(e,t),u.mediaRateFraction=o.value,t=o.position}return t}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);if(t=r.position,this.data)t=fe(e,t,this.data);else{t=ue(e,t,this.entries.length);for(var i=0;i<this.entries.length;i++){var o=this.entries[i];t=ue(e,t,o.segmentDuration),t=se(e,t,o.mediaTime),t=ie(e,t,o.mediaRateInteger),t=ie(e,t,o.mediaRateFraction)}}return r.writeSize(t),t}}]),n}(_e);Re.type="elst",Re.skippable=!0,L.define(Re.type,Re);var Me=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"mdia",e,r)}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}}]),n}(ye);Me.type="mdia",L.define(Me.type,Me);var xe=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"mdhd",e,r)}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r=t;t=l()(g()(n.prototype),"parse",this).call(this,e,t);var i=ne(e,t,this.size-8-(t-r));return this.data=i.value,r=i.position,1==this.version?(t=X(t,16),i=Y(e,t,!0),this.timescale=i.value,t=i.position,i=Z(e,t,!0),this.duration=i.value,t=i.position):(t=X(t,8),i=Y(e,t,!0),this.timescale=i.value,t=i.position,i=Y(e,t,!0),this.duration=i.value,t=i.position),r}if(t=l()(g()(n.prototype),"parse",this).call(this,e,t),1==this.version){var o=Z(e,t,!0);this.creationTime=o.value,t=o.position,o=Z(e,t,!0),this.modificationTime=o.value,t=o.position,o=Y(e,t,!0),this.timescale=o.value,t=o.position,o=Z(e,t,!0),this.duration=o.value,t=o.position}else{var a=Y(e,t,!0);this.creationTime=a.value,t=a.position,a=Y(e,t,!0),this.modificationTime=a.value,t=a.position,a=Y(e,t,!0),this.timescale=a.value,t=a.position,a=Y(e,t,!0),this.duration=a.value,t=a.position}var s=Q(e,t);this.language=s.value,t=s.position;var u=[];return u[0]=this.language>>10&31,u[1]=this.language>>5&31,u[2]=31&this.language,this.languageString=String.fromCharCode(u[0]+96,u[1]+96,u[2]+96),X(t,2)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data?t=fe(e,t,this.data):(t=ue(e,t,this.creationTime),t=ue(e,t,this.modificationTime),t=ue(e,t,this.timescale),t=ue(e,t,this.duration),t=oe(e,t,this.language),t=X(t,2)),r.writeSize(t),t}}]),n}(_e);xe.type="mdhd",xe.skippable=!0,L.define(xe.type,xe);var Pe=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"hdlr",e,r)).name="",i.handler="",i}return u()(n,[{key:"parse",value:function(e,t){if(t=l()(g()(n.prototype),"parse",this).call(this,e,t),0===this.version){t=X(t,4);var r=te(e,t,4);this.handler=r.value,t=r.position,t=X(t,12),r=te(e,t,12),this.name=r.value,t=r.position}return t}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=X(t,4),t=le(e,t,this.handler,4),t=X(t,12),t=le(e,t,this.name,this.name.length+1),r.writeSize(t),t}}]),n}(_e);Pe.type="hdlr",Pe.skippable=!0,L.define(Pe.type,Pe);var Ee=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"minf",e,r)}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}}]),n}(ye);Ee.type="minf",L.define(Ee.type,Ee);var De=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"vmhd",e,r)}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r=t;t=l()(g()(n.prototype),"parse",this).call(this,e,t);var i=ne(e,t,this.size-8-(t-r));return this.data=i.value,i.position}t=l()(g()(n.prototype),"parse",this).call(this,e,t);var o=Q(e,t);return this.graphicsMode=o.value,o=function(e,t,n){var r=new Uint16Array(n);return G(r.buffer,0,e.buffer,t,n*r.BYTES_PER_ELEMENT),{value:r,position:t+r.byteLength}}(e,t=o.position,3),this.opcolor=o.value,o.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data?t=fe(e,t,this.data):t=function(e,t,n){if(n instanceof Uint16Array)G(e.buffer,t,n.buffer,0,n.byteLength),t+=n.byteLength;else for(var r=0;r<n.length;r++)t=H(e,t,n[r]);return t}(e,t=oe(e,t,this.graphicsMode),this.opcolor),r.writeSize(t),t}}]),n}(_e);De.type="vmhd",De.skippable=!0,L.define(De.type,De);var Oe=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"dinf",e,r)}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}}]),n}(ye);Oe.type="dinf",L.define(Oe.type,Oe);var Ie=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"url ",e,r)).location="",i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t),1!==this.flags&&(this.location="")}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,r.writeSize(t),t}}]),n}(_e);Ie.type="url ",L.define(Ie.type,Ie);var Ae=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"dref",e,r)).events=["SUB_BOX"],i.entries=[],i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=Y(e,t,!0),i=r.value;t=r.position;for(var o=0;o<i;o++){var a=this.trigger("SUB_BOX",{position:t});a&&(t=a.position,this.entries.push(a.box))}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);t=r.position,t=ue(e,t,this.entries.length);for(var i=0;i<this.entries.length;i++)t=this.entries[i].write(e,t);return r.writeSize(t),t}}]),n}(_e);Ae.type="dref",L.define(Ae.type,Ae);var Le=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"stbl",e,r)}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}}]),n}(ye);Le.type="stbl",L.define(Le.type,Le);var Ce=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"stsd",e,r)).events=["SUB_BOX"],i.entries=[],i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=Y(e,t,!0),i=r.value;t=r.position;for(var o=0;o<i;o++){var a=this.trigger("SUB_BOX",{position:t});a&&(t=a.position,this.entries.push(a.box))}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);t=r.position,t=ue(e,t,this.entries.length);for(var i=0;i<this.entries.length;i++)t=this.entries[i].write(e,t);return r.writeSize(t),t}}]),n}(_e);Ce.type="stsd",L.define(Ce.type,Ce);var Ge=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,i){return a()(this,n),t.call(this,e,r,i)}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r=ne(e,t,78);this.data=r.value,t=r.position}else{t=X(t,6);var i=Q(e,t);this.dataReferenceIndex=i.value,t=i.position,t=X(t,16),i=Q(e,t),this.width=i.value,t=i.position,i=Q(e,t),this.height=i.value,t=i.position,i=Y(e,t,!0),this.hResolution=i.value,t=i.position,i=Y(e,t,!0),this.vResolution=i.value,t=i.position,t=(i=Y(e,t,!0)).position,i=Q(e,t),this.frameCount=i.value,t=i.position,i=K(e,t);var o=Math.min(31,i.value);t=i.position,i=te(e,t,o),this.compressorName=i.value,t=i.position,o<31&&(t=(i=te(e,t,31-o)).position),i=Q(e,t),this.depth=i.value,t=i.position,t=X(t,2)}l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data?t=fe(e,t,this.data):(t=X(t,6),t=oe(e,t,this.dataReferenceIndex),t=X(t,16),t=oe(e,t,this.width),t=oe(e,t,this.height),t=ue(e,t,this.hResolution),t=ue(e,t,this.vResolution),t=X(t,4),t=oe(e,t,this.frameCount),t=re(e,t,Math.min(31,this.compressorName.length)),t=le(e,t,this.compressorName,31),t=oe(e,t,this.depth),t=ie(e,t,-1)),t=r.writeSubBoxes(e,t),r.writeSize(t),t}},{key:"getCodec",value:function(){return this.type.replace(".","")}}]),n}(ye);Ge.skippable=!0;var Ne=Ge;var Be=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"avc1",e,r)}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"getCodec",value:function(){var e=l()(g()(n.prototype),"getCodec",this).call(this);if(this.avcC)return e+"."+pe(this.avcC.AVCProfileIndication)+pe(this.avcC.profileCompatibility)+pe(this.avcC.AVCLevelIndication)}}]),n}(Ne);Be.type="avc1",L.define(Be.type,Be);var $e=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"avcC",e,r)}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r,i=ne(e,t,this.size-8);return this.data=i.value,r=i.position,t=X(t,1),i=K(e,t),this.AVCProfileIndication=i.value,t=i.position,i=K(e,t),this.profileCompatibility=i.value,t=i.position,i=K(e,t),this.AVCLevelIndication=i.value,t=i.position,t=X(t,1),r}var o=K(e,t);this.configurationVersion=o.value,t=o.position,o=K(e,t),this.AVCProfileIndication=o.value,t=o.position,o=K(e,t),this.profileCompatibility=o.value,t=o.position,o=K(e,t),this.AVCLevelIndication=o.value,t=o.position,o=K(e,t),this.lengthSizeMinusOne=3&o.value,t=o.position,o=K(e,t),this.SPSNalusCount=31&o.value,t=o.position;var a=this.size-8-6;this.SPS=[];for(var s=0;s<this.SPSNalusCount;s++){this.SPS[s]={};var u=Q(e,t);this.SPS[s].length=u.value,t=u.position,u=ne(e,t,this.SPS[s].length),this.SPS[s].nalu=u.value,t=u.position,a-=2+this.SPS[s].length}o=K(e,t),this.PPSNalusCount=o.value,t=o.position,a--,this.PPS=[];for(var c=0;c<this.PPSNalusCount;c++){this.PPS[c]={};var l=Q(e,t);this.PPS[c].length=l.value,t=l.position,l=ne(e,t,this.PPS[c].length),this.PPS[c].nalu=l.value,t=l.position,a-=2+this.PPS[c].length}if(a>0){var f=ne(e,t,a);this.ext=f.value,t=f.position}return t}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);if(t=r.position,this.data)t=fe(e,t,this.data);else{t=re(e,t,this.configurationVersion),t=re(e,t,this.AVCProfileIndication),t=re(e,t,this.profileCompatibility),t=re(e,t,this.AVCLevelIndication),t=re(e,t,this.lengthSizeMinusOne+252),t=re(e,t,this.SPS.length+224);for(var i=0;i<this.SPS.length;i++)t=oe(e,t,this.SPS[i].length),t=fe(e,t,this.SPS[i].nalu);t=re(e,t,this.PPS.length);for(var o=0;o<this.PPS.length;o++)t=oe(e,t,this.PPS[o].length),t=fe(e,t,this.PPS[o].nalu);this.ext&&(t=fe(e,t,this.ext))}return r.writeSize(t),t}}]),n}(ve);$e.type="avcC",$e.skippable=!0,L.define($e.type,$e);var Fe=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"pasp",e,r)).unwritable=!0,i}return u()(n,[{key:"parse",value:function(e,t){if(n.keepData){var r=ne(e,t,this.size-8);this.data=r.value}var i=Y(e,t,!0);this.hSpacing=i.value,t=i.position,i=Y(e,t,!0),this.vSpacing=i.value,t=i.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data&&(t=fe(e,t,this.data)),r.writeSize(t),t}}]),n}(ve);Fe.type="pasp",Fe.keepData=!0,L.define(Fe.type,Fe);var Ue=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"btrt",e,r)).unwritable=!0,i}return u()(n,[{key:"parse",value:function(e,t){if(n.keepData){var r=ne(e,t,this.size-8);this.data=r.value}var i=J(e,t,!0);this.bufferSize=i.value,t=i.position,i=J(e,t,!0),this.maxBitrate=i.value,t=i.position,i=J(e,t,!0),this.avgBitrate=i.value,t=i.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data&&(t=fe(e,t,this.data)),r.writeSize(t),t}}]),n}(ve);Ue.type="btrt",Ue.keepData=!0,L.define(Ue.type,Ue);var He=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"stts",e,r)).sampleCounts=[],i.sampleDeltas=[],i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=Y(e,t,!0),i=r.value;if(t=r.position,0===this.version)for(var o=0;o<i;o++){var a=Y(e,t,!0);this.sampleCounts.push(a.value),t=a.position;var s=(a=J(e,t,!0)).value;t=a.position,s<0&&(s=1),this.sampleDeltas.push(s)}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);t=r.position,t=ue(e,t,this.sampleCounts.length);for(var i=0;i<this.sampleCounts.length;i++)t=ue(e,t,this.sampleCounts[i]),t=ue(e,t,this.sampleDeltas[i]);return r.writeSize(t),t}}]),n}(_e);He.type="stts",L.define(He.type,He);var je=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"stss",e,r)).sampleNumbers=[],i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=Y(e,t,!0),i=r.value;if(t=r.position,0===this.version)for(var o=0;o<i;o++){var a=Y(e,t,!0);this.sampleNumbers.push(a.value),t=a.position}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=ue(e,t,this.sampleNumbers.length),t=he(e,t,this.sampleNumbers),r.writeSize(t),t}}]),n}(_e);je.type="stss",L.define(je.type,je);var Ve=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"ctts",e,r)).sampleCounts=[],i.sampleOffsets=[],i.unwritable=!0,i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=Y(e,t,!0),i=r.value;t=r.position;for(var o=0;o<i;o++){var a=Y(e,t,!0);this.sampleCounts.push(a.value),t=a.position,a=J(e,t,!0),this.sampleOffsets.push(a.value),t=a.position}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);t=r.position,t=ue(e,t,this.sampleCounts.length);for(var i=0;i<this.sampleCounts.length;i++)t=ue(e,t,this.sampleCounts[i]),t=1===this.version?se(e,t,this.sampleOffsets[i]):ue(e,t,this.sampleOffsets[i]);return r.writeSize(t),t}}]),n}(_e);Ve.type="ctts",L.define(Ve.type,Ve);var ze=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"stsc",e,r)).firstChunk=[],i.samplesPerChunk=[],i.sampleDescriptionIndex=[],i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=Y(e,t,!0),i=r.value;if(t=r.position,0===this.version)for(var o=0;o<i;o++){var a=Y(e,t,!0);this.firstChunk.push(a.value),t=a.position,a=Y(e,t,!0),this.samplesPerChunk.push(a.value),t=a.position,a=Y(e,t,!0),this.sampleDescriptionIndex.push(a.value),t=a.position}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);t=r.position,t=ue(e,t,this.firstChunk.length);for(var i=0;i<this.firstChunk.length;i++)t=ue(e,t,this.firstChunk[i]),t=ue(e,t,this.samplesPerChunk[i]),t=ue(e,t,this.sampleDescriptionIndex[i]);return r.writeSize(t),t}}]),n}(_e);ze.type="stsc",L.define(ze.type,ze);var Xe=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"stsz",e,r)).sampleSizes=[],i.sampleSize=0,i.sampleCount=0,i}return u()(n,[{key:"parse",value:function(e,t){if(t=l()(g()(n.prototype),"parse",this).call(this,e,t),0===this.version){var r=Y(e,t,!0);this.sampleSize=r.value,t=r.position,r=Y(e,t,!0),this.sampleCount=r.value,t=r.position;for(var i=0;i<this.sampleCount;i++)if(0===this.sampleSize){var o=Y(e,t,!0);this.sampleSizes.push(o.value),t=o.position}else this.sampleSizes[i]=this.sampleSize}}},{key:"write",value:function(e,t){var r=!0;if(this.sampleSizes.length>0)for(var i=0;i+1<this.sampleSizes.length;){if(this.sampleSizes[i+1]!==this.sampleSizes[0]){r=!1;break}i++}else r=!1;var o=l()(g()(n.prototype),"write",this).call(this,e,t);return t=o.position,t=r?ue(e,t,this.sampleSizes[0]):X(t,4),t=ue(e,t,this.sampleSizes.length),r||(t=he(e,t,this.sampleSizes)),o.writeSize(t),t}}]),n}(_e);Xe.type="stsz",L.define(Xe.type,Xe);var Ke=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"stco",e,r)).chunkOffsets=[],i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=Y(e,t,!0),i=r.value;if(t=r.position,0===this.version)for(var o=0;o<i;o++){var a=Y(e,t,!0);this.chunkOffsets.push(a.value),t=a.position}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=ue(e,t,this.chunkOffsets.length),t=he(e,t,this.chunkOffsets),r.writeSize(t),t}}]),n}(_e);Ke.type="stco",L.define(Ke.type,Ke);var Qe=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"udta",e,r)}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}}]),n}(ye);Qe.type="udta",L.define(Qe.type,Qe);var We=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"meta",e,r)).events=["SUB_BOX"],i.boxes=[],i.lastPosition=-1,i}return u()(n,[{key:"parse",value:function(e,t){for(t=l()(g()(n.prototype),"parse",this).call(this,e,t);t<this.offset+this.size;){this.lastPosition=t;var r=this.trigger("SUB_BOX",{position:t});if(r&&(t=r.position,this[r.type]=r.box,this.boxes.push(r.type)),t==this.lastPosition)break}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,r.writeSize(t),t}}]),n}(_e);We.type="meta",L.define(We.type,We);var qe=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"ilst",e,r)}return u()(n,[{key:"parse",value:function(e,t){}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,r.writeSize(t),t}}]),n}(ve);qe.type="ilst",L.define(qe.type,qe);var Ye=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"free",e,r)}return u()(n,[{key:"parse",value:function(e,t){}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,r.writeSize(t),t}}]),n}(ve);Ye.type="free",L.define(Ye.type,Ye);var Je=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"mdat",e,r)).data=null,i}return u()(n,[{key:"parse",value:function(e,t){}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data&&(t=fe(e,t,this.data)),r.writeSize(t),t}}]),n}(ve);Je.type="mdat",L.define(Je.type,Je);var Ze=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"mvex",e,r)).listBoxes=[],i}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}}]),n}(ye);Ze.type="mvex",L.define(Ze.type,Ze);var et=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"mehd",e,r)}return u()(n,[{key:"parse",value:function(e,t){if(t=l()(g()(n.prototype),"parse",this).call(this,e,t),1&this.flags&&(this.version=1),1==this.version){var r=Z(e,t,!0);this.fragmentDuration=r.value,t=r.position}else{var i=Y(e,t,!0);this.fragmentDuration=i.value,t=i.position}return t}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,r.writeSize(t),t}}]),n}(_e);et.type="mehd",L.define(et.type,et);var tt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"trex",e,r)).trackId=null,i.defaultSampleDescriptionIndex=null,i.defaultSampleDuration=null,i.defaultSampleSize=null,i.defaultSampleFlags=null,i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=Y(e,t,!0);return this.trackId=r.value,t=r.position,r=Y(e,t,!0),this.defaultSampleDescriptionIndex=r.value,t=r.position,r=Y(e,t,!0),this.defaultSampleDuration=r.value,t=r.position,r=Y(e,t,!0),this.defaultSampleSize=r.value,t=r.position,r=Y(e,t,!0),this.defaultSampleFlags=r.value,r.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=ue(e,t,this.trackId),t=ue(e,t,this.defaultSampleDescriptionIndex),t=ue(e,t,this.defaultSampleDuration),t=ue(e,t,this.defaultSampleSize),t=ue(e,t,this.defaultSampleFlags),r.writeSize(t),t}}]),n}(_e);tt.type="trex",L.define(tt.type,tt);var nt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"moof",e,r)).listBoxes=[],i}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}},{key:"adjustDataOffset",value:function(e){this.traf&&this.traf.trun&&(this.traf.trun.dataOffset=this.size+8),ue(e,this.dataOffsetPosition,this.dataOffset)}},{key:"dataOffset",get:function(){return this.traf&&this.traf.trun?this.traf.trun.dataOffset:0}},{key:"dataOffsetPosition",get:function(){return this.traf&&this.traf.trun?this.traf.trun.dataOffsetPosition:0}}]),n}(ye);nt.type="moof",L.define(nt.type,nt);var rt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"mfhd",e,r)).sequenceNumber=0,i}return u()(n,[{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=Y(e,t,!0);return this.sequenceNumber=r.value,r.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=ue(e,t,this.sequenceNumber),r.writeSize(t),t}}]),n}(_e);rt.type="mfhd",L.define(rt.type,rt);var it=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"traf",e,r)).listBoxes=[],i}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=r.writeSubBoxes(e,t),r.writeSize(t),t}}]),n}(ye);it.type="traf",L.define(it.type,it);var ot=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"tfhd",e,r)).trackId=0,i}return u()(n,[{key:"parse",value:function(e,t){}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=ue(e,t,this.trackId),1&this.flags&&(t=ce(e,t,this.baseDataOffset)),2&this.flags&&(t=ue(e,t,this.defaultSampleDescriptionIndex)),8&this.flags&&(t=ue(e,t,this.defaultSampleDuration)),16&this.flags&&(t=ue(e,t,this.defaultSampleSize)),32&this.flags&&(t=ue(e,t,this.defaultSampleFlags)),r.writeSize(t),t}}]),n}(_e);ot.type="tfhd",L.define(ot.type,ot);var at=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"tfdt",e,r)}return u()(n,[{key:"parse",value:function(e,t){}},{key:"write",value:function(e,t){this.version=this.baseMediaDecodeTime>Math.pow(2,32)-1?1:0;var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=1===this.version?ce(e,t,this.baseMediaDecodeTime):ue(e,t,this.baseMediaDecodeTime),r.writeSize(t),t}}]),n}(_e);at.type="tfdt",L.define(at.type,at);var st=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"trun",e,r)).flags=0,i}return u()(n,[{key:"parse",value:function(e,t){}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);t=r.position,t=ue(e,t,this.sampleCount),1&this.flags&&(this.dataOffsetPosition=t,t=se(e,t,this.dataOffset)),4&this.flags&&(t=ue(e,t,this.firstSampleFlags));for(var i=0;i<this.sampleCount;i++)256&this.flags&&(t=ue(e,t,this.sampleDuration[i])),512&this.flags&&(t=ue(e,t,this.sampleSize[i])),1024&this.flags&&(t=ue(e,t,this.sampleFlags[i])),2048&this.flags&&(t=0===this.version?ue(e,t,this.sampleCompositionTimeOffset[i]):se(e,t,this.sampleCompositionTimeOffset[i]));return r.writeSize(t),t}}]),n}(_e);st.type="trun",L.define(st.type,st);var ut=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"smhd",e,r)}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r=t;t=l()(g()(n.prototype),"parse",this).call(this,e,t);var i=ne(e,t,this.size-8-(t-r));return this.data=i.value,i.position}t=l()(g()(n.prototype),"parse",this).call(this,e,t);var o=Q(e,t);return this.balance=o.value,o.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data?t=fe(e,t,this.data):(t=oe(e,t,this.balance),t=X(t,2)),r.writeSize(t),t}}]),n}(_e);ut.type="smhd",ut.skippable=!0,L.define(ut.type,ut);var ct=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,i){var o;return a()(this,n),(o=t.call(this)).type=e,o.size=r,o.offset=i,o}return u()(n,[{key:"parse",value:function(e,t){}},{key:"write",value:function(e,t){return t}}]),n}(x);var lt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,n.type,e,r)}return u()(n,[{key:"parse",value:function(e,t){var n=Q(e,t);if(this.esId=n.value,t=n.position,n=K(e,t),this.flags=n.value,t=n.position,this.size-=3,128&this.flags?(n=Q(e,t),this.depEsId=n.value,t=n.position,this.size-=2):this.depEsId=0,64&this.flags){var r=K(e,t),i=r.value;t=r.position,r=te(e,t,i),this.URL=r.value,t=r.position,this.size-=i+1}else this.URL="";if(32&this.flags){var o=Q(e,t);this.ocrEsId=o.value,t=o.position,this.size-=2}else this.ocrEsId=0;return t}},{key:"write",value:function(e,t){return t}}]),n}(ct);lt.type=3..toString();var ft=lt;var ht=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,n.type,e,r)}return u()(n,[{key:"parse",value:function(e,t){var n=ne(e,t,this.size);return this.data=n.value,n.position}},{key:"write",value:function(e,t){return t}}]),n}(ct);ht.type=5..toString();var dt=ht;var pt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,n.type,e,r)}return u()(n,[{key:"parse",value:function(e,t){var n=K(e,t);return this.oti=n.value,t=n.position,n=K(e,t),this.streamType=n.value,t=n.position,n=q(e,t),this.bufferSize=n.value,t=n.position,n=Y(e,t,!0),this.maxBitrate=n.value,t=n.position,n=Y(e,t,!0),this.avgBitrate=n.value,t=n.position,this.size-=13,t}},{key:"write",value:function(e,t){return t}}]),n}(ct);pt.type=4..toString();var vt=pt;var gt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,n.type,e,r)}return u()(n,[{key:"parse",value:function(e,t){var n=ne(e,t,this.size);return this.data=n.value,n.position}},{key:"write",value:function(e,t){return t}}]),n}(ct);gt.type=6..toString();var yt=gt;var mt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"esds",e,r)).lastPosition=-1,i.boxes=[],i.boxDef={},i.boxDef[ft.type]=ft,i.boxDef[vt.type]=vt,i.boxDef[dt.type]=dt,i.boxDef[yt.type]=yt,i}return u()(n,[{key:"parseDesc",value:function(e,t){var n=0,r=K(e,t),i=r.value;t=r.position;var o=(r=K(e,t)).value;for(t=r.position;128&o;){n=(127&o)<<7;var a=K(e,t);o=a.value,t=a.position}return{size:n+=127&o,position:t,type:i+""}}},{key:"parse",value:function(e,t){t=l()(g()(n.prototype),"parse",this).call(this,e,t);var r=ne(e,t,this.size-12);this.data=r.value,t=r.position;for(var i=new DataView(this.data.buffer),o=0;o<this.size-12;){var a=this.parseDesc(i,o);if(a){o=a.position;var s=a.type;if(!this.boxDef[s])break;var u=new this.boxDef[s](a.size,o);o=u.parse(i,o),this[s]=u,this.boxes.push(s)}}return t}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,this.data&&(t=fe(e,t,this.data)),r.writeSize(t),t}},{key:"getCodec",value:function(){var e=this[vt.type],t=this[dt.type],n=e?e.oti:0,r="";return t&&t.data&&31==(r=(248&t.data[0])>>3)&&t.data.length>=2&&(r=32+((7&t.data[0])<<3)+((224&t.data[1])>>5)),function(e,t){var n=Number(e).toString(16);for(t=null==t?t=2:t;n.length<t;)n="0"+n;return n}(n)+(r?"."+r:"")}}]),n}(_e);mt.type="esds",L.define(mt.type,mt);var _t=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"mp4a",e,r)}return u()(n,[{key:"parse",value:function(e,t){return l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){return l()(g()(n.prototype),"write",this).call(this,e,t)}},{key:"getCodec",value:function(){var e=l()(g()(n.prototype),"getCodec",this).call(this);return this.esds?e+"."+this.esds.getCodec():e}}]),n}(function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r,i){return a()(this,n),t.call(this,e,r,i)}return u()(n,[{key:"parse",value:function(e,t){t=X(t,6);var r=Q(e,t);this.dataReferenceIndex=r.value,t=r.position,t=X(t,8),r=Q(e,t),this.channelCount=r.value,t=r.position,r=Q(e,t),this.sampleSize=r.value,t=r.position,t=X(t,4),r=Y(e,t,!0),this.samplerate=r.value/65536,t=r.position,l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=X(t,6),t=oe(e,t,this.dataReferenceIndex),t=X(t,8),t=oe(e,t,this.channelCount),t=oe(e,t,this.sampleSize),t=X(t,4),t=ue(e,t,this.samplerate<<16),t=r.writeSubBoxes(e,t),r.writeSize(t),t}},{key:"getCodec",value:function(){return this.type.replace(".","")}}]),n}(ye));_t.type="mp4a",L.define(_t.type,_t);var bt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"keys",e,r)}return u()(n,[{key:"parse",value:function(e,t){if(n.keepData){var r=ne(e,t,this.size-8);this.data=r.value}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,r.writeSize(t),t}}]),n}(ve);bt.type="keys",bt.keepData=!0,L.define(bt.type,bt);var Tt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"hvc1",e,r)}return u()(n,[{key:"parse",value:function(e,t){l()(g()(n.prototype),"parse",this).call(this,e,t)}},{key:"getCodec",value:function(){var e=l()(g()(n.prototype),"getCodec",this).call(this);if(this.hvcC){switch(e+=".",this.hvcC.generalProfileSpace){case 0:e+="";break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C"}e+=this.hvcC.generalProfileIdc,e+=".";for(var t=this.hvcC.generalProfileCompatibility,r=0,i=0;i<32&&(r|=1&t,31!=i);i++)r<<=1,t>>=1;e+=pe(r,0),e+=".",0===this.hvcC.generalTierFlag?e+="L":e+="H",e+=this.hvcC.generalLevelIdc;for(var o=!1,a="",s=5;s>=0;s--)(this.hvcC.generalConstraintIndicator[s]||o)&&(a="."+pe(this.hvcC.generalConstraintIndicator[s],0)+a,o=!0);e+=a}return e}}]),n}(Ne);Tt.type="hvc1",L.define(Tt.type,Tt);var kt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"hvcC",e,r)}return u()(n,[{key:"parse",value:function(e,t){if(n.skippable){var r,i=ne(e,t,this.size-8);this.data=i.value,r=i.position,t=X(t,1);var o=(i=K(e,t)).value;return t=i.position,this.generalProfileSpace=o>>6,this.generalTierFlag=(32&o)>>5,this.generalProfileIdc=31&o,i=Y(e,t,!0),this.generalProfileCompatibility=i.value,t=i.position,i=ne(e,t,6),this.generalConstraintIndicator=i.value,t=i.position,i=K(e,t),this.generalLevelIdc=i.value,t=i.position,r}var a=K(e,t);this.configurationVersion=a.value,t=a.position;var s=(a=K(e,t)).value;t=a.position,this.generalProfileSpace=s>>6,this.generalTierFlag=(32&s)>>5,this.generalProfileIdc=31&s,a=Y(e,t,!0),this.generalProfileCompatibility=a.value,t=a.position,a=ne(e,t,6),this.generalConstraintIndicator=a.value,t=a.position,a=K(e,t),this.generalLevelIdc=a.value,t=a.position,a=Q(e,t),this.minSpatialSegmentationIdc=4095&a.value,t=a.position,a=K(e,t),this.parallelismType=3&a.value,t=a.position,a=K(e,t),this.chromaFormatIdc=3&a.value,t=a.position,a=K(e,t),this.bitDepthLumaMinus8=7&a.value,t=a.position,a=K(e,t),this.bitDepthChromaMinus8=7&a.value,t=a.position,a=Q(e,t),this.avgFrameRate=a.value,t=a.position,s=(a=K(e,t)).value,t=a.position,this.constantFrameRate=s>>6,this.numTemporalLayers=1&s,this.temporalIdNested=1&s,this.lengthSizeMinusOne=3&s,this.naluArrays=[];var u=(a=K(e,t)).value;t=a.position;for(var c=0;c<u;c++){var l=[];this.naluArrays.push(l),s=(a=K(e,t)).value,t=a.position,l.completeness=(128&s)>>7,l.naluType=63&s;var f=(a=Q(e,t)).value;t=a.position;for(var h=0;h<f;h++){var d={};l.push(d);var p=(a=Q(e,t)).value;t=a.position,a=ne(e,t,p),d.data=a.value,t=a.position}}}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);if(t=r.position,this.data)t=fe(e,t,this.data);else{t=re(e,t,this.configurationVersion),t=re(e,t,this.generalProfileSpace<<6|this.generalTierFlag<<5|this.generalProfileIdc),t=ue(e,t,this.generalProfileCompatibility),t=fe(e,t,this.generalConstraintIndicator),t=re(e,t,this.generalLevelIdc),t=oe(e,t,this.minSpatialSegmentationIdc+(15<<24)),t=re(e,t,this.parallelismType+252),t=re(e,t,this.chromaFormatIdc+252),t=re(e,t,this.bitDepthLumaMinus8+248),t=re(e,t,this.bitDepthChromaMinus8+248),t=oe(e,t,this.avgFrameRate),t=re(e,t,(this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),t=re(e,t,this.naluArrays.length);for(var i=0;i<this.naluArrays.length;i++){t=re(e,t,(this.naluArrays[i].completeness<<7)+this.naluArrays[i].naluType),t=oe(e,t,this.naluArrays[i].length);for(var o=0;o<this.naluArrays[i].length;o++)t=oe(e,t,this.naluArrays[i][o].data.length),t=fe(e,t,this.naluArrays[i][o].data)}}return r.writeSize(t),t}}]),n}(ve);kt.type="hvcC",kt.skippable=!0,L.define(kt.type,kt);var St=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,"colr",e,r)).unwritable=!0,i}return u()(n,[{key:"parse",value:function(e,t){var n=te(e,t,4);if(this.colourType=n.value,t=n.position,"nclx"===this.colourType){n=Q(e,t),this.colourPrimaries=n.value,t=n.position,n=Q(e,t),this.transferCharacteristics=n.value,t=n.position,n=Q(e,t),this.matrixCoefficients=n.value,t=n.position;var r=(n=K(e,t)).value;t=n.position,this.fullRangeFlag=r>>7}else"rICC"!==this.colourType&&"prof"!==this.colourType||(n=ne(this.size-4),this.ICCProfile=n.value,t=n.position)}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,r.writeSize(t),t}}]),n}(ve);St.type="colr",St.keepData=!1,L.define(St.type,St);var wt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e,r){return a()(this,n),t.call(this,"fiel",e,r)}return u()(n,[{key:"parse",value:function(e,t){var n=K(e,t);this.fieldCount=n.value,t=n.position,n=K(e,t),this.fieldOrdering=n.value,t=n.position}},{key:"write",value:function(e,t){var r=l()(g()(n.prototype),"write",this).call(this,e,t);return t=r.position,t=re(e,t,this.fieldCount),t=re(e,t,this.fieldOrdering),r.writeSize(t),t}}]),n}(ve);wt.type="fiel",wt.keepData=!1,L.define(wt.type,wt);var Rt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;return a()(this,n),e=t.call(this),M()(w()(e),"setPosition",(function(t){e.position=t})),M()(w()(e),"setEndPosition",(function(t){e.endPosition=t})),M()(w()(e),"_isEnoughForSize",(function(){return e.endPosition-e.position>=4})),M()(w()(e),"_isEnoughForType",(function(){return e.endPosition-e.position>=4})),M()(w()(e),"_isEnoughForBox",(function(t){return e.endPosition-e.position>=t})),M()(w()(e),"start",(function(){for(e.paused=!1;e.position<e.endPosition&&!e.moovReady&&(e.lastPosition=e.position,e._parse(),e.lastPosition!=e.position&&!e.paused););})),M()(w()(e),"updateBuffer",(function(t){e.dataView=new DataView(t),e.trigger("UPDATED",null)})),M()(w()(e),"_parse",(function(){var t=e.position;if(!e._isEnoughForSize())return e.paused=!0,e.trigger("PAUSED",{type:null,size:null,position:e.position}),!1;var n=Y(e.dataView,e.position,!0),r=n.value;if(e.position=n.position,!e._isEnoughForType())return e.paused=!0,e.position=t,e.trigger("PAUSED",{type:null,size:r,position:e.position}),!1;var i=(n=te(e.dataView,e.position,4)).value;if(!e._isEnoughForBox(r))return e.paused=!0,e.position=t,e.trigger("PAUSED",{type:i,size:r,position:e.position}),!1;if(e.position=n.position,!L.isSupported(i))return e.position=t+r,{type:i,box:null,position:e.position};e.trigger("STARTED",{type:i,offset:t,size:r});var o=L.create(i,r,t);return o.on("SUB_BOX",(function(t){return e.position=t.position,e._parse()})),o.parse(e.dataView,e.position),e.position=t+r,e.trigger("ENDED",{type:i,offset:t,size:r,box:o}),"moov"==i?(e.moovReady=!0,!1):{type:i,box:o,position:e.position}})),M()(w()(e),"release",(function(){e.dataView=null,e.position=0,e.endPosition=0,e.lastPosition=-1,e.paused=!0,e.moovReady=!1})),e.dataView=null,e.position=0,e.endPosition=0,e.lastPosition=-1,e.paused=!0,e.moovReady=!1,e.events=["STARTED","PAUSED","ENDED","UPDATED"],e}return u()(n)}(x);var Mt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return a()(this,n),r=t.call(this),M()(w()(r),"inputBuffer",(function(e){r.memory.inputBuffer(e)})),M()(w()(r),"release",(function(){r.boxParser.release()})),r.boxParser=new Rt,r.boxParser.on("STARTED",(function(e){})),r.boxParser.on("PAUSED",(function(e){})),r.boxParser.on("ENDED",(function(e){var t=(e.type+"_READY").toUpperCase();r.trigger(t,e)})),r.boxParser.on("UPDATED",(function(e){r.boxParser.start()})),r.memory=e,r.memory.on("UPDATED",(function(e){r.boxParser.moovReady||(r.boxParser.setEndPosition(r.memory.endPosition),r.boxParser.updateBuffer(e))})),r.events=["MOOV_READY","FTYP_READY"],r}return u()(n,[{key:"moovReady",get:function(){return this.boxParser.moovReady}}]),n}(x);var xt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return a()(this,n),r=t.call(this),M()(w()(r),"initFromConf",(function(e){r.conf=e;var t=r.conf.getTracks(),n=r.conf.moov.mvhd;r.conf.moov.mvhd.duration=0;for(var i=r.conf.ftyp,o=0;o<t.length;o++){var a=t[o];a.resetForFMP4();var s=L.create("moov",0,0);s.addSubBox("mvhd",n),s.addSubBox("trak",[a]);var u=L.create("mvex",0,0),c=L.create("trex",0,0);c.trackId=a.id,c.defaultSampleDescriptionIndex=1,c.defaultSampleDuration=a.sampleDuration,c.defaultSampleSize=0,c.defaultSampleFlags=65536,u.addSubBox("trex",c),s.addSubBox("mvex",u),r.trigger("META_READY",{trackId:a.idString,buffer:r.createFmp4MoovBuffer(i,s),startSampleIndex:-1,stopSampleIndex:-1,eos:!1})}r.ready=!0})),M()(w()(r),"createFmp4MoovBuffer",(function(e,t){var n=r.memory.createBuffer(r.conf.fileSize),i=new DataView(n),o=0;return o=e.write(i,o),t.write(i,o),de(i.buffer,e.size+t.size)})),M()(w()(r),"getSample",(function(e,t){var n=e.samples[t];n.data||(n.data=new Uint8Array(n.size));var i=r.memory.findNextBufferEndPos(n.offset)-n.offset;return n.size>i?null:(z(n.data.buffer,0,r.memory.buffer,n.offset-r.memory.startPosition,n.size),r.readLength+=n.size,e.samples[t].read=!0,n)})),M()(w()(r),"createMoof",(function(e){var t=L.create("moof",0,0),n=L.create("mfhd",0,0);t.addSubBox("mfhd",n),n.sequenceNumber=r.nextMoofIndex,r.nextMoofIndex++;var i=L.create("traf",0,0);t.addSubBox("traf",i);var o=L.create("tfhd",0,0);i.addSubBox("tfhd",o),o.trackId=e.trackId,o.flags=131072;var a=L.create("tfdt",0,0);i.addSubBox("tfdt",a),a.baseMediaDecodeTime=e.dts-0;var s=L.create("trun",0,0);return i.addSubBox("trun",s),s.flags=3841,s.dataOffset=0,s.firstSampleFlags=0,s.sampleCount=1,s.sampleDuration=[e.duration],s.sampleSize=[e.size],s.sampleFlags=[e.iFrame?1<<25:65536],s.sampleCompositionTimeOffset=[e.cts-e.dts],t})),M()(w()(r),"createFragment",(function(e,t,n,i){var o=r.getSample(e,t);if(!o)return i;var a=r.createMoof(o);i=a.write(n,i),r.moofSize=a.size,a.adjustDataOffset(n);var s=L.create("mdat",0,0);return s.data=o.data,s.write(n,i)})),M()(w()(r),"createFMP4",(function(e){for(var t=e.idString,n=e.name,i=0,o=r.memory.createBuffer(r.fragmentBufferSize),a=new DataView(o),s=!1,u=e.sampleIndex;e.sampleIndex<e.samples.length;){0==r.moofSize&&(r.moofSize=e.samples[e.sampleIndex].size);var c=i+e.samples[e.sampleIndex].size+r.moofSize+r.mdatHeaderSize;if(c>=r.fragmentBufferSize){0==i&&(r.fragmentBufferSize=c),s=!0;break}var l=r.createFragment(e,e.sampleIndex,a,i);if((e.isVideo?r.videoPaused:r.audioPaused)||l==i){e.isVideo?r.videoPaused=!0:r.audioPaused=!0,r.trigger("PAUSED",{trackId:t,trackName:n,index:e.sampleIndex,timestamp:e.samples[e.sampleIndex].timestamp,offset:e.samples[e.sampleIndex].offset});break}i=l,e.sampleIndex++}if(0!=i&&!r.paused){var f=de(a.buffer,i);r.trigger("DATA_READY",{trackId:t,startSampleIndex:u,stopSampleIndex:e.sampleIndex,buffer:f,eos:e.sampleIndex==e.samples.length})}s&&r.createFMP4(e)})),M()(w()(r),"createVideoFMP4",(function(){return new Promise((function(e,t){var n=r.conf.getVideoTrack();setTimeout((function(){r.createFMP4(n),e()}))}))})),M()(w()(r),"createAudioFMP4",(function(){return new Promise((function(e,t){var n=r.conf.getAudioTrack();setTimeout((function(){r.createFMP4(n),e()}))}))})),M()(w()(r),"start",(function(){if(r.ready){var e=[];return r.paused=!1,r.videoPaused&&(r.videoPaused=!1,e.push(r.createVideoFMP4())),r.audioPaused&&(r.audioPaused=!1,e.push(r.createAudioFMP4())),Promise.all(e)}})),M()(w()(r),"pause",(function(){r.videoPaused=!0,r.audioPaused=!0,r.paused=!0})),M()(w()(r),"release",(function(){r.ready=!1,r.readLength=0,r.nextMoofIndex=0,r.moofSize=0,r.paused=!0,r.shouldStart=!1,r.videoPaused=!0,r.audioPaused=!0})),r.ready=!1,r.readLength=0,r.nextMoofIndex=0,r.paused=!0,r.shouldStart=!1,r.fragmentBufferSize=1048576,r.memory=e,r.moofSize=0,r.mdatHeaderSize=8,r.videoPaused=!0,r.audioPaused=!0,r.events=["META_READY","DATA_READY","PAUSED"],r}return u()(n)}(x);var Pt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return a()(this,n),r=t.call(this),M()(w()(r),"_initMediaSource",(function(){r.mediaSource=new MediaSource,r.el.src=window.URL.createObjectURL(r.mediaSource);var e=function(){window.URL.revokeObjectURL(r.el.src),r.shouldEos=!1,r.ready=!0,r.initSourceBuffer(),r.trigger("OPENED",null)};return r.mediaSource.addEventListener("sourceopen",e),r.mediaSource.addEventListener("sourceended",(function e(){r.ready=!1,r.trigger("ENDED",null),r.mediaSource.removeEventListener("sourceended",e)})),r.mediaSource.addEventListener("sourceclose",(function e(){r.ready=!1,r.trigger("CLOSED",null),r.mediaSource.removeEventListener("sourceclose",e)})),function(){r.el.pause(),r.checkSourceBufferReady()?r.mediaSource.endOfStream():r.shouldEos=!0,r.mediaSource.removeEventListener("sourceopen",e)}})),M()(w()(r),"init",(function(e){e&&(r.conf=e,r.initSourceBuffer())})),M()(w()(r),"initSourceBuffer",(function(){r.conf&&r.ready&&(r.mediaSource.duration=r.conf.duration,r.conf.getTracks().forEach((function(e,t){var n='video/mp4; codecs="'+e.codec+'"',i=e.idString;if(MediaSource.isTypeSupported(n)){var o=r.mediaSource.addSourceBuffer(n);o.addEventListener("abort",(function(e){})),o.addEventListener("update",(function(e){})),o.addEventListener("updatestart",(function(e){})),o.addEventListener("error",(function(e){})),o.addEventListener("updateend",(function(e){r.feedBuffer(i),r.trigger("UPDATED",{trackId:i}),o.bufferCompleteCount++,o.eosBufferIndex>=0&&o.eosBufferIndex==o.bufferCompleteCount&&(o.eos=!0,r.checkEndOfStream(i)),r.shouldEos&&r.checkSourceBufferReady()&&(r.mediaSource.endOfStream(),r.shouldEos=!1)})),o.bufferInputCount=0,o.bufferCompleteCount=0,o.eosBufferIndex=-1,o.eos=!1,r.sourceBuffers[i]=o,r.inputBuffers[i]||(r.inputBuffers[i]=[]),r.feedBuffer(i)}})))})),M()(w()(r),"checkEndOfStream",(function(){var e=!0;for(var t in r.sourceBuffers)e=e&&r.sourceBuffers[t].eos;e&&r.checkSourceBufferReady()&&r.mediaSource.endOfStream()})),M()(w()(r),"feedBuffer",(function(e){if(r.checkSourceBufferReady(e)&&r.hasPendingBuffer(e)){var t=r.inputBuffers[e].shift();r.sourceBuffers[e].appendBuffer(t.buffer),r.sourceBuffers[e].bufferInputCount++,t.eos&&(r.sourceBuffers[e].eosBufferIndex=r.sourceBuffers[e].bufferInputCount)}})),M()(w()(r),"hasPendingBuffer",(function(e){return!!r.inputBuffers[e]&&0!=r.inputBuffers[e].length})),M()(w()(r),"clearPendingBuffers",(function(){for(var e in r.inputBuffers)r.inputBuffers[e]=[]})),M()(w()(r),"checkSourceBufferReady",(function(e){var t=!0;if(e)t=!!r.sourceBuffers[e]&&!r.sourceBuffers[e].updating;else for(var n in r.sourceBuffers)t=t&&!r.sourceBuffers[n].updating;return r.msAvailable&&t})),M()(w()(r),"inputBuffer",(function(e,t){r.inputBuffers[e]||(r.inputBuffers[e]=[]),r.inputBuffers[e].push(t),r.feedBuffer(e)})),M()(w()(r),"start",(function(){return r.el.play()})),M()(w()(r),"stop",(function(){r.el.pause()})),M()(w()(r),"release",(function(){r._releaseMediaSource&&r._releaseMediaSource(),r._releaseMediaSource=r._initMediaSource(),r.conf=null,r.ready=!1,r.sourceBuffers={},r.inputBuffers={},r.bufferInputCount=0,r.bufferCompleteCount=0,r.eosBufferIndex=-1})),r.el=e,r.conf=null,r.ready=!1,r.sourceBuffers={},r.inputBuffers={},r.bufferInputCount=0,r.bufferCompleteCount=0,r.eosBufferIndex=-1,r.shouldEos=!1,r._releaseMediaSource=r._initMediaSource(),r.events=["OPENED","CLOSED","UPDATED"],r}return u()(n,[{key:"msAvailable",get:function(){return this.mediaSource&&"open"===this.mediaSource.readyState}}]),n}(x);var Et=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;return a()(this,n),e=t.call(this),M()(w()(e),"inputFTYP",(function(t){t&&t.box&&(e.ftyp=t.box)})),M()(w()(e),"inputMOOV",(function(t){t&&t.box&&(e.moov=t.box,e.getTracks().forEach((function(e){e.buildSamples()})),e.moov.timescale&&(e.duration=e.moov.duration/e.moov.timescale),e.fileSize&&e.duration&&(e.durationPerUnitSize=e.duration/(e.fileSize-e.metadataSize)),e.trigger("CONF_READY",w()(e)))})),M()(w()(e),"getTracks",(function(){return e.moov.trak})),M()(w()(e),"getTrack",(function(t){var n=e.moov.trak.filter((function(e){return e.name==t}));return n.length?n[0]:null})),M()(w()(e),"getVideoTrack",(function(){return e.getTrack("vide")})),M()(w()(e),"getAudioTrack",(function(){return e.getTrack("soun")})),M()(w()(e),"getISamples",(function(e){return e.samples.filter((function(e){return e.iFrame}))})),M()(w()(e),"getVideoISamples",(function(){var t=e.getVideoTrack();return e.getISamples(t)})),M()(w()(e),"getAudioISamples",(function(){var t=e.getAudioTrack();return e.getISamples(t)})),M()(w()(e),"getGopSize",(function(){var t=e.getGopOffsets();return t.length>=2?t[1]-t[0]:0})),M()(w()(e),"getGopOffsets",(function(){e.iVideoSamples.length||(e.iVideoSamples=e.getVideoISamples());for(var t=e.getAudioISamples(),n=e.iVideoSamples.map((function(e){return e.offset})),r=-1,i=[],o=1;o<e.iVideoSamples.length;o++){for(var a=e.iVideoSamples[o-1],s=e.iVideoSamples[o],u=a.dts/a.timescale,c=(s.dts+s.duration)/s.timescale,l=r,f=-1,h=r+1;h<t.length;h++){var d=t[h];l<0&&(d.dts/d.timescale<=u&&(l=h),l>=0&&i.push(t[l].offset)),(d.dts+d.duration)/d.timescale<=c&&(f=h)}f>=0&&(i.push(t[f].offset),r=f)}return n.map((function(e,t){return 0==t?Math.min(e,i[t]):Math.max(e,i[t])}))})),M()(w()(e),"getDataOffsetWithTime",(function(t){for(var n=e.getTracks(),r=1/0,i=0;i<n.length;i++){var o=n[i];if(!(t>o.calculatedDuration)){var a=o.getSampleOffsetWithTime(t);a<r&&(r=a)}}return r})),M()(w()(e),"release",(function(){e.ftyp=null,e.moov=null,e.fileSize=0,e.iVideoSamples=[]})),e.ftyp=null,e.moov=null,e.fileSize=0,e.duration=0,e.durationPerUnitSize=0,e.iVideoSamples=[],e.events=["CONF_READY"],e}return u()(n,[{key:"metadataSize",get:function(){return this.moov?this.moov.size:0}}]),n}(x);var Dt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;return a()(this,n),e=t.call(this),M()(w()(e),"inputBuffer",(function(t){e.buffer?e.buffer=function(e,t,n){if(e+t.byteLength<n.byteLength){var r=new ArrayBuffer(n.byteLength),i=new Uint8Array(r);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(t),e),r}var o=new ArrayBuffer(e+t.byteLength),a=new Uint8Array(o);return a.set(new Uint8Array(n),0),a.set(new Uint8Array(t),e),o}(t.chunkOffset,t.data,e.buffer):(e.buffer=t.data,e.offset=t.chunkOffset),e.chunkInfo.push({offset:t.chunkOffset,size:t.chunkSize}),e.chunkInfo=function(e,t,n){if(0===e.length)return[];e.sort((function(e,n){return e[t]-n[t]}));for(var r=[e[0]],i=1;i<e.length;i++){var o=e[i],a=r[r.length-1];o[t]>a[t]+a[n]?r.push(o):o[t]+o[n]>a[t]+a[n]&&(a[n]+=o[t]+o[n]-(a[t]+a[n]))}return r}(e.chunkInfo,"offset","size"),e.trigger("UPDATED",e.buffer)})),M()(w()(e),"createBuffer",(function(e){return e=e||k.defaultBufferSize,new ArrayBuffer(e)})),M()(w()(e),"findNextBufferEndPos",(function(t){for(var n=0;n<e.chunkInfo.length;n++){var r=e.chunkInfo[n];if(r.offset<=t&&r.offset+r.size>=t)return r.offset+r.size}return t})),M()(w()(e),"release",(function(){e.buffer=null,e.chunkInfo=[],e.offset=0})),e.buffer=null,e.offset=0,e.chunkInfo=[],e.events=["UPDATED"],e}return u()(n,[{key:"startPosition",get:function(){return this.buffer?this.offset:0}},{key:"endPosition",get:function(){return this.buffer?this.offset+this.buffer.byteLength:0}}]),n}(x);var Ot,It=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return a()(this,n),r=t.call(this),M()(w()(r),"_stopBufferChecking",(function(){r.timeoutId&&(window.clearTimeout(r.timeoutId),r.timeoutId=null)})),M()(w()(r),"_startBufferChecking",(function(){r._eof||r.paused?r._stopBufferChecking():(r.isEnough?r.trigger("BUFFER_ENOUGH",null):r.trigger("BUFFER_UNENOUGH",null),r.timeoutId=window.setTimeout((function(){r._startBufferChecking()}),r._checkingInterval))})),r.el=e,r.timeoutId=null,r.paused=!0,r._eof=!1,r.rebufferCount=0,r._initEnoughTime=T.bufferEnoughTime,r._enoughTime=T.bufferEnoughTime,r._maxTime=T.bufferMaxTime,r._checkingInterval=T.bufferCheckingInterval,r.events=["BUFFER_ENOUGH","BUFFER_UNENOUGH"],r}return u()(n,[{key:"start",value:function(){this.paused=!1,this._startBufferChecking()}},{key:"stop",value:function(){this.paused=!0}},{key:"release",value:function(){this.stop(),this._stopBufferChecking(),this._eof=!1,this._enoughTime=this._initEnoughTime,this.rebufferCount=0}},{key:"countRebuffer",value:function(){this.rebufferCount++,this._enoughTime<this._maxTime&&(this._enoughTime+=.5)}},{key:"checkAvailable",value:function(e){for(var t=this.isEnough,n=0;n<this.el.buffered.length;n++){var r=this.el.buffered.start(n),i=this.el.buffered.end(n);if(e>=r&&e<=i)return{requestTime:t?e:i,isEnough:t}}return{requestTime:e,isEnough:!1}}},{key:"enoughTime",set:function(e){e&&(this._initEnoughTime=e,this._enoughTime=e)}},{key:"maxTime",set:function(e){e&&(this._maxTime=e)}},{key:"checkingInterval",set:function(e){e&&(this._checkingInterval=e)}},{key:"eof",set:function(e){this._eof=e,e&&this._stopBufferChecking()}},{key:"ranges",get:function(){for(var e=[],t=0;t<this.el.buffered.length;t++){var n=this.el.buffered.start(t),r=this.el.buffered.end(t);e.push([n,r])}return e}},{key:"pendingBufferDuration",get:function(){for(var e=-1,t=0;t<this.el.buffered.length;t++){var n=this.el.buffered.start(t),r=this.el.buffered.end(t);if(this.el.currentTime>=n&&this.el.currentTime<r){e=r;break}}return e<0?0:e-this.el.currentTime}},{key:"isEnough",get:function(){return!!this._eof||this.pendingBufferDuration>=this._enoughTime}}]),n}(x),At=["loadstart","downloaderError","downloaderChunkReady","memoryCompleted"],Lt=new Uint8Array(16);function Ct(){if(!Ot&&!(Ot="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ot(Lt)}for(var Gt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Nt=[],Bt=0;Bt<256;++Bt)Nt.push((Bt+256).toString(16).substr(1));var $t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Nt[e[t+0]]+Nt[e[t+1]]+Nt[e[t+2]]+Nt[e[t+3]]+"-"+Nt[e[t+4]]+Nt[e[t+5]]+"-"+Nt[e[t+6]]+Nt[e[t+7]]+"-"+Nt[e[t+8]]+Nt[e[t+9]]+"-"+Nt[e[t+10]]+Nt[e[t+11]]+Nt[e[t+12]]+Nt[e[t+13]]+Nt[e[t+14]]+Nt[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Gt.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n},Ft=function(e,t,n){var r=(e=e||{}).random||(e.rng||Ct)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return $t(r)};var Ut=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e,r,i,o,s,u;return a()(this,n),(u=t.call(this)).indexedDB="undefined"==typeof window?null:(null===(e=window)||void 0===e?void 0:e.indexedDB)||(null===(r=window)||void 0===r?void 0:r.webkitIndexedDB)||(null===(i=window)||void 0===i?void 0:i.mozIndexedDB)||(null===(o=window)||void 0===o?void 0:o.OIndexedDB)||(null===(s=window)||void 0===s?void 0:s.msIndexedDB),u.request=null,u.db=null,u.store=null,u}return u()(n,[{key:"init",value:function(){var e=this;return this.indexedDB?new Promise((function(t,n){var r=e.indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(n){e.db=n.target.result,t()},r.onerror=function(e){n()},r.onupgradeneeded=function(t){e.store=t.currentTarget.result.createObjectStore(e.dbStoreName)}})):null}},{key:"setData",value:function(e,t){var n=this;return new Promise((function(r,i){n.db||i();var o=n.db.transaction(n.dbStoreName,"readwrite").objectStore(n.dbStoreName).put(t,e);o.onsuccess=function(){r()},o.onerror=function(){i()}}))}},{key:"getData",value:function(e){var t=this;return new Promise((function(n,r){t.db||r();var i=t.db.transaction(t.dbStoreName,"readonly").objectStore(t.dbStoreName).get(e);i.onsuccess=function(e){var t=e.target.result;n(t)},i.onerror=function(){r()}}))}},{key:"hasData",value:function(e){var t=this;return new Promise((function(n,r){t.db||r();var i=t.db.transaction(t.dbStoreName,"readonly").objectStore(t.dbStoreName).getKey(e);i.onsuccess=function(e){var t=e.target.result;n(t)},i.onerror=function(){r()}}))}},{key:"clearData",value:function(){var e=this;return new Promise((function(t,n){e.db||n();var r=e.db.transaction(e.dbStoreName,"readwrite").objectStore(e.dbStoreName).clear();r.onsuccess=function(e){t()},r.onerror=function(){n()}}))}}]),n}(function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;return a()(this,n),(e=t.call(this)).dbName="tiktok",e.dbVersion=1,e.dbStoreName="playback",e}return u()(n,[{key:"init",value:function(){}},{key:"setData",value:function(e,t){}},{key:"getData",value:function(e){}},{key:"clearData",value:function(){}}]),n}(x));var Ht=new(function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(){var e;return a()(this,n),(e=t.call(this)).impl=new Ut,e.readyPromise=e.impl.init(),e}return u()(n,[{key:"save",value:function(e,t){var n=this;if(this.readyPromise)return this.readyPromise.then((function(){return n.impl.setData(e,t)}))}},{key:"export",value:function(e){var t=this;if(this.readyPromise)return this.readyPromise.then((function(){return t.impl.getData(e)}))}},{key:"check",value:function(e){var t=this;if(this.readyPromise)return this.readyPromise.then((function(){return t.impl.hasData(e)}))}},{key:"clear",value:function(){var e=this;if(this.readyPromise)return this.readyPromise.then((function(){return e.impl.clearData()}))}}]),n}(x));var jt=function(e){h()(c,e);var t,n,r,o,s=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(c);function c(e){var t;return a()(this,c),(t=s.call(this,"Stream",e,At)).id=Ft(),t._initMemory(),t._initEvents(),t._initConf(),t._initDownloader(),t._initDemuxer(),t._initRemuxer(),t._initBuffer(),t._initMSE(),t}return u()(c,[{key:"_initMemory",value:function(){var e=this;this.memory=new Dt,this.memory.on("UPDATED",function(){var t=i()(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.downloader.eof&&e.eventManager.trigger("MEMORY_COMPLETED",n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"_initEvents",value:function(){var e=this;l()(g()(c.prototype),"_initEvents",this).call(this),this.eventManager.proxy("canplay",(function(e){})),this.eventManager.proxy("waiting",(function(t){e.buffer.countRebuffer(),e.downloader.loading||e.downloader.eof||e.downloader.resume()})),this.eventManager.proxy("play",(function(t){e.buffer.start()})),this.eventManager.proxy("pause",(function(t){e.buffer.stop()})),this.eventManager.proxy("seeking",(function(e){}))}},{key:"_initMSE",value:function(){var e=this;this.mse=new Pt(this.el),this.mse.on("OPENED",(function(){})),this.mse.on("CLOSED",(function(){})),this.mse.on("UPDATED",(function(t){e.buffer.isEnough&&e.downloader.pause()}))}},{key:"_initConf",value:function(){var e=this;this.conf=new Et,this.conf.on("CONF_READY",(function(t){e.mse.init(t),e.remuxer.initFromConf(t)}))}},{key:"_initBuffer",value:function(){var e=this;this.buffer=new It(this.el),this.config.bufferEnoughTime&&(this.bufferEnoughTime=this.config.bufferEnoughTime),this.config.bufferMaxTime&&(this.buffer.maxTime=this.config.bufferMaxTime),this.config.bufferCheckingInterval&&(this.buffer.checkingInterval=this.config.bufferCheckingInterval),this.buffer.on("BUFFER_UNENOUGH",(function(){e.el.playbackRate=.9,e.downloader.resume()})),this.buffer.on("BUFFER_ENOUGH",(function(){e.el.playbackRate=1,e.downloader.pause()}))}},{key:"_initDemuxer",value:function(){var e=this;this.demuxer=new Mt(this.memory),this.demuxer.on("FTYP_READY",(function(t){e.conf.inputFTYP(t)})),this.demuxer.on("MOOV_READY",(function(t){e.conf.inputMOOV(t),e.downloader.switchToCommonSize()}))}},{key:"_initRemuxer",value:function(){var e=this;this.remuxer=new xt(this.memory),this.remuxer.on("META_READY",(function(t){e.mse.inputBuffer(t.trackId,t),e.remuxer.start()})),this.remuxer.on("DATA_READY",(function(t){e.mse.inputBuffer(t.trackId,t)})),this.remuxer.on("PAUSED",(function(e){}))}},{key:"_initDownloader",value:function(){var e=this;this.downloader=new A({withCredentials:this.config.withCredentials}),this.metaChunkSize=Math.ceil(this.config.metaChunkSize||T.metaChunkSize),this.dataChunkSize=Math.ceil(this.config.dataChunkSize||T.dataChunkSize),this.downloader.on("FILE_SIZE",(function(t){e.conf.fileSize=t})),this.downloader.on("CHUNK_READY",(function(t){e.demuxer.inputBuffer(t),e.remuxer.start(),e.eventManager.trigger("downloaderChunkReady",{chunkSize:t.chunkSize,networkDuration:t.networkDuration,speed:t.networkDuration?8*t.chunkSize/1024/t.networkDuration:0})})),this.downloader.on("EOF",(function(){e.buffer.eof=!0})),this.downloader.on("ERROR",(function(t){e.eventManager.trigger("downloaderError",t)}))}},{key:"loadFromLocal",value:(o=i()(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht.check(t);case 2:if(!(n=e.sent)){e.next=8;break}return e.next=6,Ht.export(t);case 6:r=e.sent,this.loadFromBuffer(r);case 8:return e.abrupt("return",!!n);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"loadFromBuffer",value:function(e){this.release(),this.demuxer.inputBuffer({chunkOffset:0,data:e}),this.remuxer.start(),this.eventManager.trigger("loadstart",{target:this.el,type:"loadstart"})}},{key:"saveToLocal",value:(r=i()(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht.save(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"exportFromLocal",value:(n=i()(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht.export(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"load",value:(t=i()(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.downloader){e.next=2;break}return e.abrupt("return");case 2:if(this.downloader.url!=t){e.next=4;break}return e.abrupt("return");case 4:this.release(),this.downloader.url=t,this.eventManager.trigger("loadstart",{target:this.el,type:"loadstart"}),this.downloader.start();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"pause",value:function(){this.mse.stop()}},{key:"seek",value:function(e){if(this.demuxer.moovReady){this.element.currentTime=e,this.remuxer.pause();var t=this.buffer.checkAvailable(e);if(!t.isEnough){e=t.requestTime,this.pause(),this.downloader.pause(),this.mse.clearPendingBuffers();var n=this.conf.getDataOffsetWithTime(e);n=this.memory.findNextBufferEndPos(n),this.downloader.resume(n)}}}},{key:"release",value:function(){l()(g()(c.prototype),"release",this).call(this),this.downloader.release(),this.demuxer.release(),this.remuxer.release(),this.mse.release(),this.conf.release(),this.memory.release(),this.buffer.release()}},{key:"metaChunkSize",set:function(e){this.downloader.initChunkSize=e}},{key:"dataChunkSize",set:function(e){this.downloader.commonChunkSize=e}},{key:"bufferEnoughTime",set:function(e){this.buffer.enoughTime=e}},{key:"element",get:function(){return this.el}},{key:"data",get:function(){return this.memory.buffer}}]),c}(I);jt.storage=Ht;var Vt=jt,zt=[];var Xt=function(e){h()(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g()(e);if(t){var i=g()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}(n);function n(e){var r;return a()(this,n),(r=t.call(this,"Basic",e,zt))._initEvents(),r}return u()(n,[{key:"_initEvents",value:function(){l()(g()(n.prototype),"_initEvents",this).call(this)}}]),n}(I)}])},53385:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function s(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var c=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.code=t,i.message=n,i.originError=r,i.name="StarlingError",i.code=t,i.message=n,i.originError=r,Error.captureStackTrace&&Error.captureStackTrace(i,i.constructor),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),l={ERROR_CODE:103,ERROR_MESSAGE:"Request failed, confirm your apiKey and namespace is correct"},f={ERROR_CODE:110,ERROR_MESSAGE:"Check your params, parameter apiKey, namespace and zoneHost is required!"},h={ERROR_CODE:111,ERROR_MESSAGE:"Check your params, parameter request and store is required!"},d=112,p={ERROR_CODE:120,ERROR_MESSAGE:"Version is not found, please check your param [version]!"},v={zone:"CN",locale:"zh",timeout:15e3,test:!1,mode:"normal",format:"merged",lazyUpdate:!1,fallbackLang:["zh"],tracker:function(){},cache:!0},g=function(){function e(e){this.options=e,this.options=e}return e.prototype.getText=function(e,t){return s(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,this._request(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.getTexts=function(e){var t=this;return Promise.all(e.map((function(e){var n=e[0],r=e[1];return t.getText(n,r)})))},e.prototype._request=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,o,a,s,f,h,d,v,g,y,m,_;return u(this,(function(u){switch(u.label){case 0:return n=this.options.getReleaseVersion,r=n(e),e&&r&&t?[2,{}]:(i=this.getUrl(e,t),o=this.options,a=o.request,s=o.timeout,[4,a(i,{timeout:s})]);case 1:if(f=u.sent(),h=f.data,d=h.status,v=h.message,200==+d)return[2,this._mapResponse(v)];if(1001==+d)throw y=(g=p).ERROR_CODE,new c(y,g.ERROR_MESSAGE);throw _=(m=l).ERROR_CODE,new c(_,m.ERROR_MESSAGE)}}))}))},e.prototype.getUrl=function(e,t){var n=this.options,r=n.apiKey,i=n.locale,o=n.fallbackLang,a=n.zoneHost,s=n.mode,u=n.getReleaseVersion,c=[i].concat(o),l=a+"/check_and_get_text/"+r+"/"+s+"/"+e+"?lang="+c,f=u(e);return f&&(l=a+"/text_by_release_version/"+r+"/"+s+"/"+e+"/"+f+"?lang="+c),"string"==typeof t&&(l+="&version="+t),l},e.prototype._mapResponse=function(e){return e?Object.keys(e).reduce((function(t,n){return t[n.toLowerCase()]=e[n],t}),{}):{}},e}(),y=function(){function e(e){this.options=e,this.options=e}return e.prototype._setCache=function(e,t,n){try{return this.options.store.set(e,t)}catch(e){var r=d;return this.options.tracker("cache_error",{code:r,message:e.message,stack:e.stack}),void(n&&n())}},e.prototype._getCache=function(e){var t=this.options,n=t.store,r=t.cache;try{return r&&n.get(e)}catch(e){var i=d;return void this.options.tracker("cache_error",{code:i,message:e.message,stack:e.stack})}},e.prototype.getVersion=function(e){var t=this.options,n="version."+t.apiKey+"."+e+"."+t.locale,r=(0,t.getReleaseVersion)(e);r&&(n+="."+r);var i=this.getText(e);return i&&"object"==typeof i?"object"==typeof i&&i.then?this._getCache(n):"object"==typeof i&&0===Object.keys(i||{}).length?null:this._getCache(n):null},e.prototype.getVersions=function(e){var t=this;return Promise.all(e.map((function(e){return t.getVersion(e)})))},e.prototype.getText=function(e){var t=this.options,n="text."+t.apiKey+"."+e+"."+t.locale,r=(0,t.getReleaseVersion)(e);return r&&(n+="."+r),this._getCache(n)},e.prototype.getTexts=function(e){var t=this;return Promise.all(e.map((function(e){return t.getText(e)})))},e.prototype.refresh=function(e,t,n,r){return s(this,void 0,void 0,(function(){var i,o,a,s,c,l=this;return u(this,(function(u){switch(u.label){case 0:return i=this.options,o=i.apiKey,a=i.getReleaseVersion,s=i.cache,c=[],t.forEach((function(i,u){var f="text."+o+"."+e[u]+"."+r[u],h="version."+o+"."+e[u]+"."+r[u],d=a(e[u]);d&&(f+="."+d,h+="."+d),s&&(c.push(l._setCache(f,t[u],(function(){l.options.store.set(f,{})}))),c.push(l._setCache(h,n[u])))})),[4,Promise.all(c)];case 1:return u.sent(),[2,t.reduce((function(e,t){return Object.assign(e,t)}),{})]}}))}))},e}(),m=function(){function e(e){void 0===e&&(e=[]),this._list=[],this._list=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!1,configurable:!0}),e.prototype.getList=function(){return this._list},e.prototype.getNamespaces=function(){return this._list.map((function(e){return e.namespace}))},e.prototype.addNamespace=function(e){this._list.push(e)},e.prototype.insertTexts=function(e){this._list.forEach((function(t,n){t.texts=e[n]}))},e.prototype.sortByPrior=function(){return this._list.sort((function(e,t){return e.prior-t.prior})),this._list},e.prototype.concat=function(t){return new e(this._list.concat(t.getList()))},e}(),_=function(){function e(e,t,n){this._promiseRefresh=Promise.resolve(null),this.remote=e,this.local=t,this.options=n}return e.prototype._checkVersions=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o,a;return u(this,(function(s){switch(s.label){case 0:return t=this.options.locale,[4,this.local.getVersions(e)];case 1:return n=s.sent(),r=e.map((function(e,t){return[e,n[t]]})),[4,this.remote.getTexts(r)];case 2:return i=s.sent(),o=new m,a=new m,e.forEach((function(e,r){var s=i[r],u=s.updated,c=s.version,l=s.data,f=s.lang;u?a.addNamespace({namespace:e,prior:r,version:c,texts:l,lang:f}):o.addNamespace({namespace:e,prior:r,version:n[r],lang:t})})),[2,{equalNs:o,diffNs:a}]}}))}))},e.prototype.waitForRefresh=function(){return this._promiseRefresh},e.prototype._refresh=function(e){var t=e.getList(),n=[],r=[],i=[],o=[];return t.forEach((function(e){n.push(e.namespace),r.push(e.version),i.push(e.texts),o.push(e.lang)})),this.local.refresh(n,i,r,o)},e.prototype._getLocalTexts=function(e){return s(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:return[4,this.local.getTexts(e.getNamespaces())];case 1:return t=n.sent(),e.insertTexts(t),[2,t]}}))}))},e.prototype.load=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o;return u(this,(function(a){switch(a.label){case 0:return t=this.options.format,[4,this._checkVersions(e)];case 1:return n=a.sent(),r=n.equalNs,i=n.diffNs,r.length?[4,this._getLocalTexts(r)]:[3,3];case 2:return a.sent(),[3,4];case 3:a.label=4;case 4:return o=this._formatTexts(t,i.concat(r)),i.length?[4,this._refresh(i)]:[3,6];case 5:a.sent(),a.label=6;case 6:return[2,{texts:o,diffNs:i.getNamespaces(),equalNs:r.getNamespaces()}]}}))}))},e.prototype._getCacheText=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return u(this,(function(u){switch(u.label){case 0:return t=this.options,n=t.locale,r=t.format,[4,this.local.getTexts(e)];case 1:return i=u.sent(),[4,this.local.getVersions(e)];case 2:return o=u.sent(),a=i.map((function(t,r){if(t)return{namespace:e[r],version:o[r],lang:n,texts:t}})).filter((function(e){return!!e})),s=new m(a),[2,{texts:this._formatTexts(r,s),cacheAllLoaded:a.length===i.length}]}}))}))},e.prototype.lazyLoad=function(e){return s(this,void 0,void 0,(function(){var t,n,r,i,o;return u(this,(function(a){switch(a.label){case 0:return[4,this._getCacheText(e)];case 1:return t=a.sent(),n=t.texts,r=t.cacheAllLoaded,i=0===Object.keys(n).length||!r,this._promiseRefresh=this.load(e),i?[4,this._promiseRefresh]:[3,3];case 2:o=a.sent(),n=o.texts,a.label=3;case 3:return[2,{texts:n,diffNs:i?o&&o.diffNs:[],equalNs:i?o&&o.equalNs:e}]}}))}))},e.prototype._formatTexts=function(e,t){return"splitted"===e?t.getList().reduce((function(e,t){var n=t.namespace,r=t.lang,i=t.texts,o=t.version;return e[n]={lang:r,texts:i,version:o},e}),{}):t.sortByPrior().map((function(e){return e.texts})).reduce((function(e,t){return Object.assign(e,t)}),{})},e}();"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},writable:!0,configurable:!0});var b,T="client_load";!function(e){e.AfterLoad="afterLoad"}(b||(b={}));var k=function(){function e(e){this.afterLoadPlugins=[],this.setConfig(e)}return e.prototype._init=function(e){var t=this;this.options=function(e){var t=(e=Object.assign({},v,e)).namespace,n=e.apiKey,r=e.request,i=e.store,o=e.zoneHost;if(e.test&&(e.mode="test"),e.namespace=t=t?Array.isArray(t)?t:[t]:[],e.apiKey=n=n||e.api_key,!r||!i){var a=h.ERROR_CODE,s=h.ERROR_MESSAGE;throw new c(a,s,null)}if(!n||!t.length||!o){throw new c(a=f.ERROR_CODE,s=f.ERROR_MESSAGE,null)}return e}(e);var n=this.options,r=n.apiKey,i=n.locale,o=n.zoneHost,s=n.request,u=n.timeout,l=n.fallbackLang,d=n.store,p=n.lazyUpdate,m=n.test,b=n.mode,T=n.format,k=n.cache,S={mode:p?"lazy":m?"test":"prod",zone:o,locale:i,apiKey:r};this._tracker=function(e,n){try{t.options.tracker(e,a(a({},S),n))}catch(e){console.log(e)}};var w=this._getReleaseVersionByNamespace.bind(this),R=new g({request:s,timeout:u,apiKey:r,locale:i,zoneHost:o,fallbackLang:l,mode:b,getReleaseVersion:w}),M=new y({apiKey:r,locale:i,store:d,tracker:this._tracker,getReleaseVersion:w,cache:k});this._textManager=new _(R,M,{locale:i,format:T}),this.initPlugin()},e.prototype.initPlugin=function(){var e=this,t=this.options.plugins||[];Array.isArray(t)&&t.every((function(e){return"object"==typeof e}))&&t.forEach((function(t){t.type===b.AfterLoad&&e.afterLoadPlugins.push(t)}))},e.prototype._getReleaseVersionByNamespace=function(e){var t=this.options.namespace,n=this.options.version,r=null;return Array.isArray(n)?r=n[t.findIndex((function(t){return t===e}))]:n&&"object"==typeof n?r=n[e]:"string"==typeof n&&(r=n),r},e.prototype.setConfig=function(e){var t=Object.assign({},this.options,e);this._init(t)},e.prototype.waitForRefresh=function(){return s(this,void 0,void 0,(function(){var e;return u(this,(function(t){switch(t.label){case 0:return[4,this._textManager.waitForRefresh()];case 1:return[2,(e=t.sent())?e.texts:null]}}))}))},e.prototype._load=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,i;return u(this,(function(o){switch(o.label){case 0:return e=this.options,t=e.namespace,n=e.lazyUpdate,r=t,n?[4,this._textManager.lazyLoad(r)]:[3,2];case 1:return i=o.sent(),[3,4];case 2:return[4,this._textManager.load(r)];case 3:i=o.sent(),o.label=4;case 4:return[2,i]}}))}))},e.prototype.load=function(e,t){return s(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,l,f,h,d,p,v,g,y=this;return u(this,(function(u){switch(u.label){case 0:n=Date.now(),r=this.options.namespace,u.label=1;case 1:return u.trys.push([1,5,,10]),this._tracker(T,{state:"start",version:"0.5.13"}),[4,this._load()];case 2:return i=u.sent(),o=i.diffNs,a=i.equalNs,s=i.texts,c=this.afterLoadPlugins,Array.isArray(c)&&c.length?[4,c.reduce((function(e,t){return e.then((function(e){return"function"==typeof t.process?t.process(e||s,y.options):e}))}),Promise.resolve(s))]:[3,4];case 3:l=u.sent(),s=l||s,u.label=4;case 4:return e&&e(s),this._tracker("client_load_time",{time:Date.now()-n}),this._tracker(T,{state:"success",version:"0.5.13"}),f=o.length,h=a.length,d=r.length,p=(h/d).toFixed(2),this._tracker("client_cache",{diffLen:f,diff:o.join(","),equalLen:h,equal:a.join(","),namespaces:a.join(","),namespacesLen:d,ratio:p}),[2,s];case 5:if(v=u.sent(),this._tracker(T,{state:"fail"}),this._tracker("client_exception",{code:v.code,message:v.message,stack:v.stack}),!(v||{}).useWebCache)return[3,9];u.label=6;case 6:return u.trys.push([6,8,,9]),[4,this._textManager._getCacheText(r)];case 7:return g=u.sent().texts,v.response.data=g&&"object"==typeof g?g:{},[3,9];case 8:return u.sent(),[3,9];case 9:return t?(t(v),[3,10]):[2,Promise.reject(v)];case 10:return[2]}}))}))},e}(),S=new(function(){function e(){}return e.prototype.get=function(e){if(localStorage&&localStorage.getItem)return function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}}(localStorage.getItem(e))},e.prototype.set=function(e,t){localStorage&&localStorage.setItem&&localStorage.setItem(e,function(e){return JSON.stringify(e)}(t))},e}()),w=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t)||this;return s.url=n,s.code=r,s.request=i,s.response=o,s.useWebCache=a,s.url=n,s.code=r,s.request=i,s.response=o,s.useWebCache=!!a,s}return i(t,e),t}(Error);function R(e,t){var n=t.timeout;return new Promise((function(t,r){var i=new XMLHttpRequest;i.open("GET",e),i.overrideMimeType("application/json; charset=utf-8"),i.withCredentials=!1,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n,o=function(e){try{return JSON.parse(e)}catch(e){return{}}}(i.responseText),a=(n=o).message&&"object"==typeof n.message?n:null;if(i.status<200||i.status>=300||!a)return function(e,t,n,r){var i=(r||{}).message||"";i=i?", reason is: ".concat(i):"",t(new w("Request failed with status code "+e.status+i,n,null,e,{data:{}},!0))}(i,r,e,o),void(i=null);var s={data:a,status:i.status,statusText:i.statusText,request:i};t(s),i=null}},i.onerror=function(){r(new w("Network Error",e,null,i,{data:{}},!0)),i=null},i.timeout=n,i.ontimeout=function(){r(new w("timeout of "+n+"ms exceeded",e,"ECONNABORTED",i,{data:{}},!0)),i=null},i.send()}))}var M=function(e){function t(t){return t.store||(t.store=S),t.request||(t.request=R),e.call(this,t)||this}return i(t,e),t}(k)},17283:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=class{constructor(e){this.type="afterLoad",this.condition={},this.tccUrl=e.tccUrl,this.condition=e.condition,this.tccKey=e.tccKey||"text_custom_config",this.expiredTime=e.expiredTime||1e4}createRequest(e,t){const{timeout:n}=t,r=this.tccKey;return new Promise((function(t,i){e||i("[@ies/starling_client_text_replace_plugin]: tccUrl is required");const o=new XMLHttpRequest;o.open("GET",e),o.withCredentials=!1,o.onreadystatechange=function(){if(!o||4!==o.readyState)return;let e=[];try{const t=JSON.parse(o.responseText);e=JSON.parse(t.data[r])}catch(e){i(e)}o.status<200||o.status>=300?i("server error"):t({data:e})},o.onerror=function(e){i(e)},o.timeout=n,o.ontimeout=function(e){i(e)},o.send()}))}async getWithCache(e){const t=`starling_tcc_${e}`,n=(e=>{try{return JSON.parse(localStorage.getItem(e)||"")}catch(e){return{}}})(t);try{if(n&&n.data&&n.expiredTime&&Date.now()-+n.expiredTime<this.expiredTime)return n.data;const e=await this.createRequest(this.tccUrl,{timeout:1e4});return((e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}})(t,{data:e.data,expiredTime:Date.now()}),e.data}catch(e){return n&&n.data?n.data:(console.error(e),[])}}validate(e){return Array.isArray(e)?!(!this.condition||"object"!=typeof this.condition||!Object.keys(this.condition).length)||(console.warn("condition should be an object"),!1):(console.warn("tcc error: tcc config should be an array"),!1)}createRule(e){return e.reduce(((e,t)=>{if(!Array.isArray(t.condition))return e;const n=t.condition.reduce(((e,t)=>e||this.condition[t.type]==t.value),!1),r=Object.assign({},e.replace,t.rule.replace||{}),i=e.whitelist.concat(t.rule.whitelist||[]);return n?{replace:r,whitelist:i}:e}),{replace:{},whitelist:[]})}replaceByRule(e,t){let n="";if(Object.keys(e).forEach((e=>{RegExp(e,"i").test(t)&&(n=e.length>n.length?e:n)})),n){const r=RegExp(n,"ig");t=t.replace(r,e[n])}return t}async process(e,t){const n=await this.getWithCache(t.apiKey||"");if(!this.validate(n))return e;const{replace:r,whitelist:i}=this.createRule(n);return Object.keys(e).reduce(((t,n)=>{let o=e[n];return i.includes(n)||(o=this.replaceByRule(r,o)),t[n]=o,t}),{})}processSync(e,t,n){if(!this.validate(t))return e;const{replace:r,whitelist:i}=this.createRule(t);return i.includes(n)||(e=this.replaceByRule(r,e)),e}}},77966:(e,t,n)=>{"use strict";n.d(t,{F2:()=>Ee,OV:()=>Pe,Ay:()=>De});var r=n(76279),i=n(42682),o=n(92114),a=n(32548),s=n(92283),u=n(88145),c=n(25124),l=n(1586),f={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},h=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.A)(this,e),this.init(t,n)}return(0,a.A)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||f,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,(0,i.A)({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}()),d=function(){function e(){(0,o.A)(this,e),this.observers={}}return(0,a.A)(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach((function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)})),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter((function(e){return e!==t})):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach((function(e){e.apply(void 0,n)})),this.observers["*"]&&[].concat(this.observers["*"]).forEach((function(t){t.apply(t,[e].concat(n))}))}}]),e}();function p(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function v(e){return null==e?"":""+e}function g(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return i()?{}:{obj:e,k:r(o.shift())}}function y(e,t,n){var r=g(e,t,Object);r.obj[r.k]=n}function m(e,t){var n=g(e,t),r=n.obj,i=n.k;if(r)return r[i]}function _(e,t,n){var r=m(e,n);return void 0!==r?r:m(t,n)}function b(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):b(e[r],t[r],n):e[r]=t[r]);return e}function T(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function S(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,(function(e){return k[e]})):e}var w="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,R=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return(0,o.A)(this,t),n=(0,s.A)(this,(0,u.A)(t).call(this)),w&&d.call((0,c.A)(n)),n.data=e||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return(0,l.A)(t,e),(0,a.A)(t,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[e,t];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(o=e.split(".")),m(this.data,o)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),y(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(s=e.split("."))[1]),this.addNamespaces(t);var u=m(this.data,s)||{};r?b(u,n,o):u=(0,i.A)({},u,n),y(this.data,s,u),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?(0,i.A)({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),t}(d),M={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach((function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))})),t}},x={},P=function(e){function t(e){var n,r,i,a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.A)(this,t),n=(0,s.A)(this,(0,u.A)(t).call(this)),w&&d.call((0,c.A)(n)),r=["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i=e,a=(0,c.A)(n),r.forEach((function(e){i[e]&&(a[e]=i[e])})),n.options=l,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=h.create("translator"),n}return(0,l.A)(t,e),(0,a.A)(t,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var o=e.match(this.interpolator.nestingRegexp);if(o&&o.length>0)return{key:e,namespaces:i};var a=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(a[0])>-1)&&(i=a.shift()),e=a.join(r)}return"string"==typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,o){var a=this;if("object"!==(0,r.A)(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);var s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,u=this.extractFromKey(e[e.length-1],n),c=u.key,l=u.namespaces,f=l[l.length-1],h=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&"cimode"===h.toLowerCase()){if(d){var p=n.nsSeparator||this.options.nsSeparator;return f+p+c}return c}var v=this.resolve(e,n),g=v&&v.res,y=v&&v.usedKey||c,m=v&&v.exactUsedKey||c,_=Object.prototype.toString.apply(g),b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject;if(T&&g&&"string"!=typeof g&&"boolean"!=typeof g&&"number"!=typeof g&&["[object Number]","[object Function]","[object RegExp]"].indexOf(_)<0&&("string"!=typeof b||"[object Array]"!==_)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,g,n):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");if(s){var k="[object Array]"===_,S=k?[]:{},w=k?m:y;for(var R in g)if(Object.prototype.hasOwnProperty.call(g,R)){var M="".concat(w).concat(s).concat(R);S[R]=this.translate(M,(0,i.A)({},n,{joinArrays:!1,ns:l})),S[R]===M&&(S[R]=g[R])}g=S}}else if(T&&"string"==typeof b&&"[object Array]"===_)(g=g.join(b))&&(g=this.extendTranslation(g,e,n,o));else{var x=!1,P=!1,E=void 0!==n.count&&"string"!=typeof n.count,D=t.hasDefaultValue(n),O=E?this.pluralResolver.getSuffix(h,n.count):"",I=n["defaultValue".concat(O)]||n.defaultValue;!this.isValidLookup(g)&&D&&(x=!0,g=I),this.isValidLookup(g)||(P=!0,g=c);var A=D&&I!==g&&this.options.updateMissing;if(P||x||A){if(this.logger.log(A?"updateKey":"missingKey",h,f,c,A?I:g),s){var L=this.resolve(c,(0,i.A)({},n,{keySeparator:!1}));L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var C=[],G=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&G&&G[0])for(var N=0;N<G.length;N++)C.push(G[N]);else"all"===this.options.saveMissingTo?C=this.languageUtils.toResolveHierarchy(n.lng||this.language):C.push(n.lng||this.language);var B=function(e,t,r){a.options.missingKeyHandler?a.options.missingKeyHandler(e,f,t,A?r:g,A,n):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(e,f,t,A?r:g,A,n),a.emit("missingKey",e,f,t,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?C.forEach((function(e){a.pluralResolver.getSuffixes(e).forEach((function(t){B([e],c+t,n["defaultValue".concat(t)]||I)}))})):B(C,c,I))}g=this.extendTranslation(g,e,n,v,o),P&&g===c&&this.options.appendNamespaceToMissingKey&&(g="".concat(f,":").concat(c)),P&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(g))}return g}},{key:"extendTranslation",value:function(e,t,n,r,o){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init((0,i.A)({},n,{interpolation:(0,i.A)({},this.options.interpolation,n.interpolation)}));var s,u=n.interpolation&&n.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;if(u){var c=e.match(this.interpolator.nestingRegexp);s=c&&c.length}var l=n.replace&&"string"!=typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=(0,i.A)({},this.options.interpolation.defaultVariables,l)),e=this.interpolator.interpolate(e,l,n.lng||this.language,n),u){var f=e.match(this.interpolator.nestingRegexp);s<(f&&f.length)&&(n.nest=!1)}!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return o&&o[0]===r[0]&&!n.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):a.translate.apply(a,r.concat([t]))}),n)),n.interpolation&&this.interpolator.reset()}var h=n.postProcess||this.options.postProcess,d="string"==typeof h?[h]:h;return null!=e&&d&&d.length&&!1!==n.applyPostProcessor&&(e=M.handle(d,e,t,this.options&&this.options.postProcessPassResolved?(0,i.A)({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach((function(e){if(!a.isValidLookup(t)){var u=a.extractFromKey(e,s),c=u.key;n=c;var l=u.namespaces;a.options.fallbackNS&&(l=l.concat(a.options.fallbackNS));var f=void 0!==s.count&&"string"!=typeof s.count,h=void 0!==s.context&&"string"==typeof s.context&&""!==s.context,d=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);l.forEach((function(e){a.isValidLookup(t)||(o=e,!x["".concat(d[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(x["".concat(d[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(d.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),d.forEach((function(n){if(!a.isValidLookup(t)){i=n;var o,u,l=c,d=[l];for(a.i18nFormat&&a.i18nFormat.addLookupKeys?a.i18nFormat.addLookupKeys(d,c,n,e,s):(f&&(o=a.pluralResolver.getSuffix(n,s.count)),f&&h&&d.push(l+o),h&&d.push(l+="".concat(a.options.contextSeparator).concat(s.context)),f&&d.push(l+=o));u=d.pop();)a.isValidLookup(t)||(r=u,t=a.getResource(n,e,u,s))}})))}))}})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}]),t}(d);function E(e){return e.charAt(0).toUpperCase()+e.slice(1)}var D=function(){function e(t){(0,o.A)(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=h.create("languageUtils")}return(0,a.A)(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map((function(e){return e.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=E(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=E(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=E(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(e)}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach((function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}})),!t&&this.options.supportedLngs&&e.forEach((function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find((function(e){if(0===e.indexOf(r))return e}))}})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),"string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"==typeof e&&o(this.formatLanguageCode(e)),r.forEach((function(e){i.indexOf(e)<0&&o(n.formatLanguageCode(e))})),i}}]),e}(),O=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],I={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},A=function(){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.A)(this,e),this.languageUtils=t,this.options=r,this.logger=h.create("pluralResolver"),this.rules=(n={},O.forEach((function(e){e.lngs.forEach((function(t){n[t]={numbers:e.nr,plurals:I[e.fc]}}))})),n)}return(0,a.A)(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){return this.getSuffixes(e).map((function(e){return t+e}))}},{key:"getSuffixes",value:function(e){var t=this,n=this.getRule(e);return n?n.numbers.map((function(n){return t.getSuffix(e,n)})):[]}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var i=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.A)(this,e),this.logger=h.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return(0,a.A)(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:S,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?T(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?T(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?T(t.nestingPrefix):t.nestingPrefixEscaped||T("$t("),this.nestingSuffix=t.nestingSuffix?T(t.nestingSuffix):t.nestingSuffixEscaped||T(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,a,s=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var l=function(e){if(e.indexOf(s.formatSeparator)<0){var i=_(t,u,e);return s.alwaysFormat?s.format(i,void 0,n):i}var o=e.split(s.formatSeparator),a=o.shift().trim(),c=o.join(s.formatSeparator).trim();return s.format(_(t,u,a),c,n,r)};this.resetRegExp();var f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r&&r.interpolation&&r.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?c(s.escape(e)):c(e)}}].forEach((function(t){for(a=0;i=t.regex.exec(e);){if(void 0===(o=l(i[1].trim())))if("function"==typeof f){var n=f(e,i,r);o="string"==typeof n?n:""}else{if(h){o=i[0];continue}s.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),o=""}else"string"==typeof o||s.useRawValueToEscape||(o=v(o));if(e=e.replace(i[0],t.safeValue(o)),t.regex.lastIndex=0,++a>=s.maxReplaces)break}})),e}},{key:"nest",value:function(e,t){var n,r,o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(0,i.A)({},a);function u(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0],o=(o=this.interpolate(o,s)).replace(/'/g,'"');try{s=JSON.parse(o),t&&(s=(0,i.A)({},t,s))}catch(t){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),t),"".concat(e).concat(n).concat(o)}return delete s.defaultValue,e}for(s.applyPostProcessor=!1,delete s.defaultValue;n=this.nestingRegexp.exec(e);){var c=[],l=!1;if(n[0].includes(this.formatSeparator)&&!/{.*}/.test(n[1])){var f=n[1].split(this.formatSeparator).map((function(e){return e.trim()}));n[1]=f.shift(),c=f,l=!0}if((r=t(u.call(this,n[1].trim(),s),s))&&n[0]===e&&"string"!=typeof r)return r;"string"!=typeof r&&(r=v(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=c.reduce((function(e,t){return o.format(e,t,a.lng,a)}),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}(),C=function(e){function t(e,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,o.A)(this,t),i=(0,s.A)(this,(0,u.A)(t).call(this)),w&&d.call((0,c.A)(i)),i.backend=e,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=a,i.logger=h.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,a.backend,a),i}return(0,l.A)(t,e),(0,a.A)(t,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o=[],a=[],s=[],u=[];return e.forEach((function(e){var r=!0;t.forEach((function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?a.indexOf(s)<0&&a.push(s):(i.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),o.indexOf(s)<0&&o.push(s),u.indexOf(t)<0&&u.push(t)))})),r||s.push(e)})),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:o,pending:a,toLoadLanguages:s,toLoadNamespaces:u}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var a={};this.queue.forEach((function(n){var r,s,u,c,l;r=n.loaded,s=o,(c=(u=g(r,[i],Object)).obj)[l=u.k]=c[l]||[],c[l].push(s),function(e,t){for(var n=e.indexOf(t);-1!==n;)e.splice(n,1),n=e.indexOf(t)}(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(e){a[e]||(a[e]=[]),n.loaded[e].length&&n.loaded[e].forEach((function(t){a[e].indexOf(t)<0&&a[e].push(t)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(e){return!e.done}))}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:350,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,(function(s,u){s&&u&&i<5?setTimeout((function(){r.read.call(r,e,t,n,i+1,2*o,a)}),o):a(s,u)})):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(e){n.loadOne(e)}))}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),a),t.loaded(e,r,a)}))}},{key:"saveMissing",value:function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)?this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):null!=n&&""!==n&&(this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,(0,i.A)({},a,{isUpdate:o})),e&&e[0]&&this.store.addResource(e[0],t,n,r))}}]),t}(d);function G(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function N(){}const B=new(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if((0,o.A)(this,t),e=(0,s.A)(this,(0,u.A)(t).call(this)),w&&d.call((0,c.A)(e)),e.options=G(n),e.services={},e.logger=h,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),(0,s.A)(e,(0,c.A)(e));setTimeout((function(){e.init(n,r)}),0)}return e}return(0,l.A)(t,e),(0,a.A)(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function o(e){return e?"function"==typeof e?new e:e:null}if("function"==typeof t&&(n=t,t={}),t.whitelist&&!t.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),t.nonExplicitWhitelist&&!t.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=(0,i.A)({},{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if("object"===(0,r.A)(e[1])&&(t=e[1]),"string"==typeof e[1]&&(t.defaultValue=e[1]),"string"==typeof e[2]&&(t.tDescription=e[2]),"object"===(0,r.A)(e[2])||"object"===(0,r.A)(e[3])){var n=e[3]||e[2];Object.keys(n).forEach((function(e){t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}},this.options,G(t)),this.format=this.options.interpolation.format,n||(n=N),!this.options.isClone){this.modules.logger?h.init(o(this.modules.logger),this.options):h.init(null,this.options);var a=new D(this.options);this.store=new R(this.options.resources,this.options);var s=this.services;s.logger=h,s.resourceStore=this.store,s.languageUtils=a,s.pluralResolver=new A(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),s.interpolator=new L(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new C(o(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.languageDetector&&(s.languageDetector=o(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=o(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new P(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))})),this.modules.external.forEach((function(t){t.init&&t.init(e)}))}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&"dev"!==u[0]&&(this.options.lng=u[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}}));var c=p(),l=function(){var t=function(t,r){e.isInitialized&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,r="string"==typeof e?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var i=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(e){i.indexOf(e)<0&&i.push(e)}))};r?o(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((function(e){return o(e)})),this.options.preload&&this.options.preload.forEach((function(e){return o(e)})),this.services.backendConnector.load(i,this.options.ns,n)}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=p();return e||(e=this.languages),t||(t=this.options.ns),n||(n=N),this.services.backendConnector.reload(e,t,(function(e){r.resolve(),n(e)})),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&M.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=p();this.emit("languageChanging",e);var i=function(e){var i="string"==typeof e?e:n.services.languageUtils.getBestMatchFromCodes(e);i&&(n.language||(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i)),n.translator.language||n.translator.changeLanguage(i),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(i)),n.loadResources(i,(function(e){!function(e,i){i?(n.language=i,n.languages=n.services.languageUtils.toResolveHierarchy(i),n.translator.changeLanguage(i),n.isLanguageChangingTo=void 0,n.emit("languageChanged",i),n.logger.log("languageChanged",i)):n.isLanguageChangingTo=void 0,r.resolve((function(){return n.t.apply(n,arguments)})),t&&t(e,(function(){return n.t.apply(n,arguments)}))}(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,t){var n=this,o=function e(t,o){var a;if("object"!==(0,r.A)(o)){for(var s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];a=n.options.overloadTranslationOptionHandler([t,o].concat(u))}else a=(0,i.A)({},o);return a.lng=a.lng||e.lng,a.lngs=a.lngs||e.lngs,a.ns=a.ns||e.ns,n.t(t,a)};return"string"==typeof e?o.lng=e:o.lngs=e,o.ns=t,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||!(!a(r,e)||i&&!a(o,e))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=p();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach((function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)})),this.loadResources((function(e){r.resolve(),t&&t(e)})),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=p();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter((function(e){return r.indexOf(e)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(e){n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){return e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),e?["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr":"rtl"}},{key:"createInstance",value:function(){return new t(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}},{key:"cloneInstance",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N,o=(0,i.A)({},this.options,n,{isClone:!0}),a=new t(o);return["store","services","language"].forEach((function(t){a[t]=e[t]})),a.services=(0,i.A)({},this.services),a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a.translator=new P(a.services,a.options),a.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e].concat(n))})),a.init(o,r),a.translator.options=a.options,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}}]),t}(d));var $,F=n(58632),U=n(60657),H=n(9829);!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}($||($={}));var j,V=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.code=n,i.originalMessage=r,i}return(0,F.__extends)(t,e),t.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},t}(Error),z=function(e){function t(t,n,r,i){return e.call(this,'Invalid values for "'+t+'": "'+n+'". Options are "'+Object.keys(r).join('", "')+'"',$.INVALID_VALUE,i)||this}return(0,F.__extends)(t,e),t}(V),X=function(e){function t(t,n,r){return e.call(this,'Value for "'+t+'" must be of type '+n,$.INVALID_VALUE,r)||this}return(0,F.__extends)(t,e),t}(V),K=function(e){function t(t,n){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+n+'"',$.MISSING_VALUE,n)||this}return(0,F.__extends)(t,e),t}(V);function Q(e){return"function"==typeof e}function W(e,t,n,r,i,o,a){if(1===e.length&&(0,U.eW)(e[0]))return[{type:j.literal,value:e[0].value}];for(var s=[],u=0,c=e;u<c.length;u++){var l=c[u];if((0,U.eW)(l))s.push({type:j.literal,value:l.value});else if((0,U.jA)(l))"number"==typeof o&&s.push({type:j.literal,value:n.getNumberFormat(t).format(o)});else{var f=l.value;if(!i||!(f in i))throw new K(f,a);var h=i[f];if((0,U.Im)(l))h&&"string"!=typeof h&&"number"!=typeof h||(h="string"==typeof h||"number"==typeof h?String(h):""),s.push({type:"string"==typeof h?j.literal:j.object,value:h});else if((0,U.tv)(l)){var d="string"==typeof l.style?r.date[l.style]:(0,U.Tu)(l.style)?l.style.parsedOptions:void 0;s.push({type:j.literal,value:n.getDateTimeFormat(t,d).format(h)})}else if((0,U.Qh)(l))d="string"==typeof l.style?r.time[l.style]:(0,U.Tu)(l.style)?l.style.parsedOptions:void 0,s.push({type:j.literal,value:n.getDateTimeFormat(t,d).format(h)});else if((0,U.oF)(l))(d="string"==typeof l.style?r.number[l.style]:(0,U.N1)(l.style)?l.style.parsedOptions:void 0)&&d.scale&&(h*=d.scale||1),s.push({type:j.literal,value:n.getNumberFormat(t,d).format(h)});else{if((0,U.xm)(l)){var p=l.children,v=l.value,g=i[v];if(!Q(g))throw new X(v,"function",a);var y=g(W(p,t,n,r,i,o).map((function(e){return e.value})));Array.isArray(y)||(y=[y]),s.push.apply(s,y.map((function(e){return{type:"string"==typeof e?j.literal:j.object,value:e}})))}if((0,U.Jp)(l)){if(!(m=l.options[h]||l.options.other))throw new z(l.value,h,Object.keys(l.options),a);s.push.apply(s,W(m.value,t,n,r,i))}else if((0,U.N6)(l)){var m;if(!(m=l.options["="+h])){if(!Intl.PluralRules)throw new V('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',$.MISSING_INTL_API,a);var _=n.getPluralRules(t,{type:l.pluralType}).select(h-(l.offset||0));m=l.options[_]||l.options.other}if(!m)throw new z(l.value,h,Object.keys(l.options),a);s.push.apply(s,W(m.value,t,n,r,i,h-(l.offset||0)))}}}}return(b=s).length<2?b:b.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===j.literal&&t.type===j.literal?n.value+=t.value:e.push(t),e}),[]);var b}function q(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(j||(j={}));const Y=function(){function e(t,n,r,i){var o,a=this;if(void 0===n&&(n=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=a.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===j.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return W(a.ast,a.locales,a.formatters,a.formats,e,void 0,a.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{ignoreTag:null==i?void 0:i.ignoreTag})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=function(e,t){return t?Object.keys(e).reduce((function(n,r){var i,o;return n[r]=(i=e[r],(o=t[r])?(0,F.__assign)((0,F.__assign)((0,F.__assign)({},i||{}),o||{}),Object.keys(i).reduce((function(e,t){return e[t]=(0,F.__assign)((0,F.__assign)({},i[t]),o[t]||{}),e}),{})):i),n}),(0,F.__assign)({},e)):e}(e.formats,r),this.locales=n,this.formatters=i&&i.formatters||(void 0===(o=this.formatterCache)&&(o={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:(0,H.A)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,(0,F.__spreadArray)([void 0],t)))}),{cache:q(o.number),strategy:H.W.variadic}),getDateTimeFormat:(0,H.A)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,(0,F.__spreadArray)([void 0],t)))}),{cache:q(o.dateTime),strategy:H.W.variadic}),getPluralRules:(0,H.A)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,(0,F.__spreadArray)([void 0],t)))}),{cache:q(o.pluralRules),strategy:H.W.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=U.qg,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();var J,Z=function(){return Z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Z.apply(this,arguments)};function ee(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"==typeof e}void 0===n&&(n=null);for(var o="string"!=typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=e[a]}return i()?{}:{obj:e,k:r(o.shift())}}!function(e){e.keepRaw="keepRaw",e.replaceAnyway="replaceAnyway"}(J||(J={})),J.replaceAnyway;var te={memoize:!1,memoizeFallback:!1,bindI18n:!1,bindI18nStore:!1,onParseError:J.replaceAnyway},ne=function(){function e(){this.mem={}}return e.staticInit=function(t){e._i18nextInstance=t},e.prototype.init=function(t,n){var r=this;void 0===t&&(t=e._i18nextInstance);var i={};if((null==t?void 0:t.options)&&(t.options.i18nFormat&&(i=t.options.i18nFormat),i.onParseError=t.options.onParseError,i.missingInterpolationHandler=t.options.missingInterpolationHandler,i.icuConfig=t.options.icuConfig,i.ignoreWarning=!!t.options.ignoreWarning),this.options=Object.assign(te,n,i),this.formats=this.options.formats,t){var o=this.options,a=o.bindI18n,s=o.bindI18nStore,u=o.memoize;t.IntlMessageFormat=Y,this.IntlMessageFormat=Y,t.ICU=this,u&&(a&&t.on(a,(function(){return r.clearCache()})),s&&t.store.on(s,(function(){return r.clearCache()})))}this.options.localeData&&("[object Array]"===Object.prototype.toString.apply(this.options.localeData)?this.options.localeData.forEach((function(e){return r.addLocaleData(e)})):this.addLocaleData(this.options.localeData))},e.prototype.addLocaleData=function(e){("[object Array]"===Object.prototype.toString.apply(e)?e:[e]).forEach((function(e){e&&e.locale&&Y.__addLocaleData(e)}))},e.prototype.addUserDefinedFormats=function(e){this.formats=this.formats?Z(Z({},this.formats),e):e},e.prototype.checkMissingInterpolation=function(e,t,n,r,i){if(!1===(this.options.icuConfig||{}).strict)return n;for(var o={},a=0,s=e;a<s.length;a++){var u=s[a];if(1===u.type){var c=u.value;if(null===n[c]||void 0===n[c]){if("function"==typeof this.options.missingInterpolationHandler){var l=this.options.missingInterpolationHandler({key:i,text:t,locale:r,interpolation:{key:c,val:n[c]}});if("string"==typeof l){o[c]=l;continue}}switch(this.options.onParseError){case J.keepRaw:throw new Error;case J.replaceAnyway:o[c]="{"+c+"}";continue}if("function"==typeof this.options.onParseError){console.warn("[DEPRECATED] onParseError is deprecated, please use 'missingInterpolationHandler' instead of");var f=this.options.onParseError(t,c,r,this.IntlMessageFormat);if(!0===f)throw new Error;o[c]="string"==typeof f?f:"{"+c+"}"}else this.options.ignoreWarning||console.warn('[Starling ICU Warning] The interpolation parameter "{'+c+'}" is missing in the translation text "'+t+'" for the key "'+i+"\"\nSuggestions: check whether the value is null or undefined. Try using empty string '' as fallback! e.g I18n.t('key', { apple: count || '' })"),o[c]="{"+c+"}"}}}return Object.assign({},n,o)},e.prototype.parse=function(e,t,n,r,i,o){var a,s,u,c,l=o&&o.resolved&&o.resolved.res,f=this.options.memoize&&n+"."+r+"."+i.replace(/\./g,"###");!l&&t.thirdParamFallback&&t.fallbackText&&(e=t.fallbackText),this.options.memoize&&(a=function(e,t){var n=ee(e,t),r=n.obj,i=n.k;if(r)return r[i]}(this.mem,f));try{return a||(a=new this.IntlMessageFormat(e,n,this.formats,(this.options.icuConfig||{}).formatOptions),this.options.memoize&&(this.options.memoizeFallback||!o||l)&&(s=this.mem,u=a,(c=ee(s,f,Object)).obj[c.k]=u)),a.format(this.checkMissingInterpolation(a.getAst(),e,t||{},n,i))}catch(t){return e}},e.prototype.addLookupKeys=function(e,t,n,r,i){return e},e.prototype.clearCache=function(){this.mem={}},e.type="i18nFormat",e._i18nextInstance=null,e}(),re=(ne.name,function(){return re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},re.apply(this,arguments)}),ie=/^\s*\[\[__starling_(\d+)_(.*)__\]\]\s*$/;"undefined"!=typeof window&&(window.__STARLING_INCONTEXT_GLOBAL__HOOK__=re({},window.__STARLING_INCONTEXT_GLOBAL__HOOK__||{payload:{}}));var oe={name:"inContext",type:"postProcessor",process:function(e,t,n,r){if(window&&document.getElementById("INCONTEXT-KEY-MATCH")&&!n.__STARLING_INCONTEXT_FLAG__){window.__STARLING_INCONTEXT_GLOBAL_I18N__||(window.__STARLING_INCONTEXT_GLOBAL_I18N__=r),delete n.keySeparator,delete n.lngs;var i,o=0;if(t=t.toString(),ie.test(t)&&((i=t.match(ie))[0],o=i[1],t=i[2]),ie.test(e))(i=e.match(ie))[0],i[1],e=i[2];if(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]){var a=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t].findIndex((function(e){return JSON.stringify(e.options)===JSON.stringify(n)}));a>-1?(window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t][a].default=e,o=a):o=window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t].push({options:n,default:e})-1}else window.__STARLING_INCONTEXT_GLOBAL__HOOK__.payload[t]=[{options:n,default:e}],o=0;return"[[__starling_"+o+"_"+t+"__]]"}return e}};function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ce(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}for(var he=["AFN","EUR","ALL","DZD","USD","AOA","XCD","ARS","AMD","AWG","AUD","AZN","BSD","BHD","BDT","BBD","BYN","BZD","XOF","BMD","INR","BTN","BOB","BOV","BAM","BWP","NOK","BRL","BND","BGN","BIF","CVE","KHR","XAF","CAD","KYD","CLP","CLF","CNY","COP","COU","KMF","CDF","NZD","CRC","HRK","CUP","CUC","ANG","CZK","DKK","DJF","DOP","EGP","SVC","ERN","ETB","FKP","FJD","XPF","GMD","GEL","GHS","GIP","GTQ","GBP","GNF","GYD","HTG","HNL","HKD","HUF","ISK","IDR","XDR","IRR","IQD","ILS","JMD","JPY","JOD","KZT","KES","KPW","KRW","KWD","KGS","LAK","LBP","LSL","ZAR","LRD","LYD","CHF","MOP","MKD","MGA","MWK","MYR","MVR","MRO","MUR","XUA","MXN","MXV","MDL","MNT","MAD","MZN","MMK","NAD","NPR","NIO","NGN","OMR","PKR","PAB","PGK","PYG","PEN","PHP","PLN","QAR","RON","RUB","RWF","SHP","WST","STD","SAR","RSD","SCR","SLL","SGD","XSU","SBD","SOS","SSP","LKR","SDG","SRD","SZL","SEK","CHE","CHW","SYP","TWD","TJS","TZS","THB","TOP","TTD","TND","TRY","TMT","UGX","UAH","AED","USN","UYU","UYI","UZS","VUV","VEF","VND","YER","ZMW","ZWL","XBA","XBB","XBC","XBD","XTS","XXX","XAU","XPD","XPT","XAG"],de={},pe=0;pe<he.length;pe++)de[he[pe]]={style:"currency",currency:he[pe]};var ve={number:de},ge="languageTransformer";function ye(e){return function(t){return t.type===e}}function me(e,t){var n=e;return(t||[]).map((function(t){n=t.process(e)||n})),n}var _e,be={lng:"zh-CN",fallbackLng:["en-US"],inContext:!0},Te=[ne,oe],ke=function(){function e(t,n){var r=this;ae(this,e),this._waitingToAddResourceBundle=[],this.t=function(e,t,n){var i=Array.isArray(e)?Array.from(e).map((function(){return" "})).join(""):Array(e.length).fill(" "),o=Object.assign({keySeparator:i,nsSeparator:i},t);return"thirdParamFallback"in r.config&&r.config.thirdParamFallback&&(o.thirdParamFallback=!0),r.instance.t(e,n,o)},this._handlePlugins(n),this._handleConfigs(t),this.instance=B.createInstance(),this.instance.isInitialized=!1}return ue(e,[{key:"_handlePlugins",value:function(e){var t,n;!1===(null===(t=this.config)||void 0===t||null===(n=t.icuConfig)||void 0===n?void 0:n.open)&&Te.shift(),this.plugins=Array.isArray(e)?e.concat(Te):Te}},{key:"_handleConfigs",value:function(e){this.userLng=(null==e?void 0:e.lng)||null,this.config=Object.assign({},be,e||{})}},{key:"language",get:function(){return(this.instance||{}).language}},{key:"createInstance",value:function(){var e=this;return new Promise((function(t,n){"undefined"!=typeof window&&!window.CocosEngine&&e.config.inContext&&(e.config.postProcess=[].concat(["inContext"],e.config.postProcess||[]),window.__STARLING_DEVTOOLS_I18N=e.instance),e.plugins.map((function(t){"IES_INTL_ICU_PLUGIN"===t.name&&t.staticInit(e.instance),e.instance.use(t)}));var r=e.config;e.config.formats=Object.assign({},e.config.formats,ve);var i=me(r.lng,e.plugins.filter(ye(ge)));e.instance.init(Object.assign({},r,{lng:i,i18nFormat:{formats:e.config.formats}}),(function(r,i){try{var o,a=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=le(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==t.return||t.return()}finally{if(a)throw i}}}}(e._waitingToAddResourceBundle);try{for(a.s();!(o=a.n()).done;){var s,u=o.value;(s=e.instance).addResourceBundle.apply(s,ce(u))}}catch(r){a.e(r)}finally{a.f()}e._waitingToAddResourceBundle=[]}catch(r){}r||(e._updateLanguages(),t({t:i,err:r})),e.init=!0,n({t:i,err:r})}))}))}},{key:"_updateLanguages",value:function(){this.languages=this.instance?Array.from(new Set([this.instance.language].concat(ce(this.instance.languages)))):null}},{key:"getLanguages",value:function(){return this.languages}},{key:"changeLanguage",value:function(e,t){var n=this;this.config.lng=e,this.instance.changeLanguage(e,(function(e,r){e||n._updateLanguages(),t&&t(e,r)}))}},{key:"changeLanguageWithPromise",value:function(e){var t=this;return new Promise((function(n,r){t.config.lng=e,t.instance.changeLanguage(e,(function(e,i){e&&r({err:e,t:i}),t._updateLanguages(),n({err:e,t:i})}))}))}},{key:"getDir",value:function(e){return this.instance.dir(e)}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.instance.isInitialized?this.instance.addResourceBundle(e,t,n,r,i):(this._waitingToAddResourceBundle.push([e,t,n,!!r,!!i]),this.instance)}}]),e}(),Se="Starling_intl:",we=function(){for(var e,t="".concat(Se," [ERROR]"),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=console).error.apply(e,[t].concat(r))};function Re(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Me(){}function xe(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}!function(e){e.intl3rdParty="intl3rdParty",e.backend="backend",e.logger="logger",e.languageDetector="languageDetector",e.postProcessor="postProcessor",e.i18nFormat="i18nFormat",e["3rdParty"]="3rdParty"}(_e||(_e={}));var Pe=function(){function e(){var t=this;ae(this,e),this.t=function(e,n,r){return t.ignoreWarning||t.i18nInstance&&t.i18nInstance.init?!e||"string"==typeof e&&!e.trim()?"":t.i18nInstance.t(e,n,r):(we("The instance has not been initialized: i18n.t('".concat(e,"'").concat(n?","+JSON.stringify(n):"",");")),null!=r?r:Array.isArray(e)?e[0]:e)},this.plugins=[],this.i18nInstance=new ke}return ue(e,[{key:"use",value:function(e){return this.plugins.includes(e)?(function(){for(var e,t="".concat(Se," [WARNING]"),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=console).warn.apply(e,[t].concat(r))}("Plugin: ".concat(e.name," has beeninit installed.")),this):(this.plugins.push(e),this)}},{key:"init",value:function(e,t){try{var n=this;return n.ignoreWarning=e.ignoreWarning,n.i18nInstance._handleConfigs(e),n.i18nInstance._handlePlugins(n.plugins),Re(function(e,r){try{var i=Re(n.i18nInstance.createInstance(),(function(e){var r,i=e.err,o=e.t,a=n.plugins.filter((function(e){return e.type===_e.intl3rdParty}));return Re((r=a.map(xe((function(e){if(e&&"function"==typeof e.init)return(t=(e.init instanceof Promise?e.init:xe((function(t){return Promise.resolve(e.init(t))})))(n))&&t.then?t.then(Me):Promise.resolve();var t}))),new Promise((function(e,t){if(Array.isArray(r)||(r=Array.from(r)),r.length<=0)return e([]);var n=[];r=r.map((function(i,o){return function(){("function"==typeof i?new Promise(i):Promise.resolve(i)).then((function(t){n[o]=t,o===r.length-1?e(n):r[o+1]()}),t)}})),r[0]()}))),(function(){return"function"==typeof t&&t(i,o),{err:i,t:o}}))}))}catch(e){return r(e)}return i&&i.then?i.then(void 0,r):i}(0,(function(e){return we("The instance init error: ".concat(e)),{err:e,t:function(e){return e}}})))}catch(e){return Promise.reject(e)}}},{key:"language",get:function(){return(this.i18nInstance||{}).language}},{key:"setLang",value:function(e,t){var n=me(e,this.plugins.filter(ye(ge)));this.i18nInstance.changeLanguage(n,t)}},{key:"getLanguages",value:function(){return this.i18nInstance.getLanguages()}},{key:"setLangWithPromise",value:function(e){var t=me(e,this.plugins.filter(ye(ge)));return this.i18nInstance.changeLanguageWithPromise(t)}},{key:"dir",value:function(e){return this.i18nInstance.getDir(e)}},{key:"addResourceBundle",value:function(e,t,n,r,i){return this.i18nInstance.addResourceBundle(e,t,n,r,i)}}]),e}(),Ee=new Pe;const De=Ee},93545:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var r=n(96100),i=n(30348),o=n(92114),a=n(32548),s=n(1586),u=n(92283),c=n(88145),l=n(40099),f=n(18499);function h(e){var t=[];return l.Children.forEach(e,(function(e){t.push(e)})),t}function d(e,t){var n=null;return e&&e.forEach((function(e){n||e&&e.key===t&&(n=e)})),n}function p(e,t,n){var r=null;return e&&e.forEach((function(e){if(e&&e.key===t&&e.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=e}})),r}var v=n(33726);const g=function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},y=function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},m=function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},_=function(e){return e.transitionAppear||e.animation.appear},b=function(e){return e.transitionEnter||e.animation.enter},T=function(e){return e.transitionLeave||e.animation.leave};var k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"};const w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),k(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){y(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){g(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){m(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var n=this,r=f.findDOMNode(this),i=this.props,o=i.transitionName,a="object"==typeof o;this.stop();var s=function(){n.stopper=null,t()};if((v._||!i.animation[e])&&o&&i[S[e]]){var u=a?o[e]:o+"-"+e,c=u+"-active";a&&o[e+"Active"]&&(c=o[e+"Active"]),this.stopper=(0,v.A)(r,{name:u,active:c},s)}else this.stopper=i.animation[e](r,s)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(l.Component);var R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x="rc_animate_"+Date.now();function P(e){var t=e.children;return l.isValidElement(t)&&!t.key?l.cloneElement(t,{key:x}):t}function E(){}var D=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return O.call(n),n.currentlyAnimatingKeys={},n.keysToEnter=[],n.keysToLeave=[],n.state={children:h(P(e))},n.childrenRefs={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),M(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter((function(e){return!!e.props[t]}))),n.forEach((function(t){t&&e.performAppear(t.key)}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.nextProps=e;var n=h(P(e)),r=this.props;r.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach((function(e){t.stop(e)}));var i,o,a,s,u=r.showProp,c=this.currentlyAnimatingKeys,f=r.exclusive?h(P(r)):this.state.children,v=[];u?(f.forEach((function(e){var t,r,i,o,a=e&&d(n,e.key);(o=a&&a.props[u]||!e.props[u]?a:l.cloneElement(a||e,(i=!0,(r=u)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t)))&&v.push(o)})),n.forEach((function(e){e&&d(f,e.key)||v.push(e)}))):(i=n,o=[],a={},s=[],f.forEach((function(e){e&&d(i,e.key)?s.length&&(a[e.key]=s,s=[]):s.push(e)})),i.forEach((function(e){e&&Object.prototype.hasOwnProperty.call(a,e.key)&&(o=o.concat(a[e.key])),o.push(e)})),v=o=o.concat(s)),this.setState({children:v}),n.forEach((function(e){var n=e&&e.key;if(!e||!c[n]){var r=e&&d(f,n);if(u){var i=e.props[u];r?!p(f,n,u)&&i&&t.keysToEnter.push(n):i&&t.keysToEnter.push(n)}else r||t.keysToEnter.push(n)}})),f.forEach((function(e){var r=e&&e.key;if(!e||!c[r]){var i=e&&d(n,r);if(u){var o=e.props[u];i?!p(n,r,u)&&o&&t.keysToLeave.push(r):o&&t.keysToLeave.push(r)}else i||t.keysToLeave.push(r)}}))}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var n=this.props.showProp;return n?p(e,t,n):d(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var e=this,t=this.props;this.nextProps=t;var n=this.state.children,r=null;n&&(r=n.map((function(n){if(null==n)return n;if(!n.key)throw new Error("must set key for <rc-animate> children");return l.createElement(w,{key:n.key,ref:function(t){e.childrenRefs[n.key]=t},animation:t.animation,transitionName:t.transitionName,transitionEnter:t.transitionEnter,transitionAppear:t.transitionAppear,transitionLeave:t.transitionLeave},n)})));var i=t.component;if(i){var o=t;return"string"==typeof i&&(o=R({className:t.className,style:t.style},t.componentProps)),l.createElement(i,o,r)}return r[0]||null}}]),t}(l.Component);D.isAnimate=!0,D.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:E,onEnter:E,onLeave:E,onAppear:E};var O=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,n){var r=e.props;if(delete e.currentlyAnimatingKeys[t],!r.exclusive||r===e.nextProps){var i=h(P(r));e.isValidChildByKey(i,t)?"appear"===n?_(r)&&(r.onAppear(t),r.onEnd(t,!0)):b(r)&&(r.onEnter(t),r.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var n=e.props;if(delete e.currentlyAnimatingKeys[t],!n.exclusive||n===e.nextProps){var r,i,o,a,s=h(P(n));if(e.isValidChildByKey(s,t))e.performEnter(t);else{var u=function(){T(n)&&(n.onLeave(t),n.onEnd(t,!1))};r=e.state.children,i=s,o=n.showProp,(a=r.length===i.length)&&r.forEach((function(e,t){var n=i[t];e&&n&&(e&&!n||!e&&n||e.key!==n.key||o&&e.props[o]!==n.props[o])&&(a=!1)})),a?u():e.setState({children:s},u)}}}};const I=function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");return"function"!=typeof t.componentWillReceiveProps?e:l.Profiler?(t.UNSAFE_componentWillReceiveProps=t.componentWillReceiveProps,delete t.componentWillReceiveProps,e):e}(D);var A=n(61978),L=n.n(A);var C=function(e){(0,s.A)(h,e);var t,n,r=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.A)(t);if(n){var i=(0,c.A)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.A)(this,e)});function h(){var e;return(0,o.A)(this,h),(e=r.apply(this,arguments)).closeTimer=null,e.close=function(t){t&&t.stopPropagation(),e.clearCloseTimer();var n=e.props.onClose;n&&n()},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=window.setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e}return(0,a.A)(h,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.update)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var e=this,t=this.props,n=t.prefixCls,r=t.className,o=t.closable,a=t.closeIcon,s=t.style,u=t.onClick,c=t.children,h=t.holder,d="".concat(n,"-notice"),p=Object.keys(this.props).reduce((function(t,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(t[n]=e.props[n]),t}),{}),v=l.createElement("div",Object.assign({className:L()(d,r,(0,i.A)({},"".concat(d,"-closable"),o)),style:s,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:u},p),l.createElement("div",{className:"".concat(d,"-content")},c),o?l.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(d,"-close")},a||l.createElement("span",{className:"".concat(d,"-close-x")})):null);return h?f.createPortal(v,h):v}}]),h}(l.Component);C.defaultProps={onClose:function(){},duration:1.5,style:{right:"50%"}};var G=n(11217),N=n(14675);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=0,U=Date.now(),H=function(e){(0,s.A)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.A)(t);if(n){var i=(0,c.A)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.A)(this,e)});function i(){var e;return(0,o.A)(this,i),(e=r.apply(this,arguments)).state={notices:[]},e.hookRefs=new Map,e.add=function(t,n){var r;t.key=t.key||(r=F,F+=1,"rcNotification_".concat(U,"_").concat(r));var i=t.key,o=e.props.maxCount;e.setState((function(e){var r=e.notices,a=r.map((function(e){return e.notice.key})).indexOf(i),s=r.concat();return-1!==a?s.splice(a,1,{notice:t,holderCallback:n}):(o&&r.length>=o&&(t.updateKey=s[0].notice.updateKey||s[0].notice.key,s.shift()),s.push({notice:t,holderCallback:n})),{notices:s}}))},e.remove=function(t){e.setState((function(e){return{notices:e.notices.filter((function(e){return e.notice.key!==t}))}}))},e}return(0,a.A)(i,[{key:"getTransitionName",value:function(){var e=this.props,t=e.prefixCls,n=e.animation,r=this.props.transitionName;return!r&&n&&(r="".concat(t,"-").concat(n)),r}},{key:"render",value:function(){var e=this,t=this.state.notices,n=this.props,r=n.prefixCls,i=n.className,o=n.closeIcon,a=n.style,s=t.map((function(n,i){var a=n.notice,s=n.holderCallback,u=Boolean(i===t.length-1&&a.updateKey),c=a.updateKey?a.updateKey:a.key,f=function(){var e=[].slice.call(arguments,0);return 1===e.length?e[0]:function(){for(var t=0;t<e.length;t++)e[t]&&e[t].apply&&e[t].apply(this,arguments)}}(e.remove.bind(e,a.key),a.onClose),h=$($($({prefixCls:r,closeIcon:o},a),a.props),{},{key:c,update:u,onClose:f,onClick:a.onClick,children:a.content});return s?l.createElement("div",{key:c,className:"".concat(r,"-hook-holder"),ref:function(t){void 0!==c&&(t?(e.hookRefs.set(c,t),s(t,h)):e.hookRefs.delete(c))}}):l.createElement(C,Object.assign({},h))}));return l.createElement("div",{className:L()(r,i),style:a},l.createElement(I,{transitionName:this.getTransitionName()},s))}}]),i}(l.Component);H.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},H.newInstance=function(e,t){var n=e||{},i=n.getContainer,o=(0,r.A)(n,["getContainer"]),a=document.createElement("div");i?i().appendChild(a):document.body.appendChild(a);var s=!1;f.render(l.createElement(H,Object.assign({},o,{ref:function(e){s||(s=!0,t({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){f.unmountComponentAtNode(a),a.parentNode&&a.parentNode.removeChild(a)},useNotification:function(){return t=e,n=l.useRef({}),r=l.useState([]),o=(i=(0,N.A)(r,2))[0],a=i[1],[function(e){t.add(e,(function(e,t){var r=t.key;if(e&&!n.current[r]){var i=l.createElement(C,Object.assign({},t,{holder:e}));n.current[r]=i,a((function(e){return[].concat((0,G.A)(e),[i])}))}}))},l.createElement(l.Fragment,null,o)];var t,n,r,i,o,a}}))}})),a)};const j=H},71648:(e,t,n)=>{"use strict";n.d(t,{A:()=>vt});var r=n(80305),i=n(76279),o=n(25946),a=n(96100),s=n(40099),u=n(92114),c=n(32548),l=n(25124),f=n(1586),h=n(42750),d=n(30348),p=n(18499),v=function(e){return+setTimeout(e,16)},g=function(e){return clearTimeout(e)};"undefined"!=typeof window&&"requestAnimationFrame"in window&&(v=function(e){return window.requestAnimationFrame(e)},g=function(e){return window.cancelAnimationFrame(e)});var y=0,m=new Map;function _(e){m.delete(e)}var b=function(e){var t=y+=1;return function n(r){if(0===r)_(t),e();else{var i=v((function(){n(r-1)}));m.set(t,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};b.cancel=function(e){var t=m.get(e);return _(e),g(t)};const T=b;function k(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function S(e){return e instanceof HTMLElement||e instanceof SVGElement}function w(e){var t,n=function(e){return e&&"object"===(0,i.A)(e)&&S(e.nativeElement)?e.nativeElement:S(e)?e:null}(e);return n||(e instanceof s.Component?null===(t=p.findDOMNode)||void 0===t?void 0:t.call(p,e):null)}var R=n(1882),M=function(e,t){"function"==typeof e?e(t):"object"===(0,i.A)(e)&&e&&"current"in e&&(e.current=t)},x=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);return r.length<=1?r[0]:function(e){t.forEach((function(t){M(t,e)}))}},P=function(e){var t,n,r=(0,R.isMemo)(e)?e.type.type:e.type;return!!("function"!=typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render||r.$$typeof===R.ForwardRef)&&!!("function"!=typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render||e.$$typeof===R.ForwardRef)};function E(e,t,n,r){var i=p.unstable_batchedUpdates?function(e){p.unstable_batchedUpdates(n,e)}:n;return null!=e&&e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){null!=e&&e.removeEventListener&&e.removeEventListener(t,i,r)}}}function D(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}Number(s.version.split(".")[0]);const O=(0,s.forwardRef)((function(e,t){var n=e.didUpdate,r=e.getContainer,i=e.children,o=(0,s.useRef)(),a=(0,s.useRef)();(0,s.useImperativeHandle)(t,(function(){return{}}));var u=(0,s.useRef)(!1);return!u.current&&D()&&(a.current=r(),o.current=a.current.parentNode,u.current=!0),(0,s.useEffect)((function(){null==n||n(e)})),(0,s.useEffect)((function(){return null===a.current.parentNode&&null!==o.current&&o.current.appendChild(a.current),function(){var e;null===(e=a.current)||void 0===e||null===(e=e.parentNode)||void 0===e||e.removeChild(a.current)}}),[]),a.current?p.createPortal(i,a.current):null}));var I=n(61978),A=n.n(I);function L(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}var C=n(14675),G=s.createContext({});const N=function(e){(0,f.A)(n,e);var t=(0,h.A)(n);function n(){return(0,u.A)(this,n),t.apply(this,arguments)}return(0,c.A)(n,[{key:"render",value:function(){return this.props.children}}]),n}(s.Component);function B(e){var t=s.useRef();t.current=e;var n=s.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}var $=D()?s.useLayoutEffect:s.useEffect;const F=function(e,t){var n=s.useRef(!0);$((function(){return e(n.current)}),t),$((function(){return n.current=!1,function(){n.current=!0}}),[])};function U(e){var t=s.useRef(!1),n=s.useState(e),r=(0,C.A)(n,2),i=r[0],o=r[1];return s.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[i,function(e,n){n&&t.current||o(e)}]}"undefined"==typeof Reflect?Object.keys:Reflect.ownKeys;var H={},j=[];function V(e,t){}function z(e,t){}function X(e,t,n){t||H[n]||(e(!1,n),H[n]=!0)}function K(e,t){X(V,e,t)}K.preMessage=function(e){j.push(e)},K.resetWarned=function(){H={}},K.noteOnce=function(e,t){X(z,e,t)};const Q=K;var W="none",q="appear",Y="enter",J="leave",Z="none",ee="prepare",te="start",ne="active",re="end",ie="prepared";function oe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var ae,se,ue,ce=(ae=D(),se="undefined"!=typeof window?window:{},ue={animationend:oe("Animation","AnimationEnd"),transitionend:oe("Transition","TransitionEnd")},ae&&("AnimationEvent"in se||delete ue.animationend.animation,"TransitionEvent"in se||delete ue.transitionend.transition),ue),le={};if(D()){var fe=document.createElement("div");le=fe.style}var he={};function de(e){if(he[e])return he[e];var t=ce[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in le)return he[e]=t[o],he[e]}return""}var pe=de("animationend"),ve=de("transitionend"),ge=!(!pe||!ve),ye=pe||"animationend",me=ve||"transitionend";function _e(e,t){return e?"object"===(0,i.A)(e)?e[t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}))]:"".concat(e,"-").concat(t):null}const be=D()?s.useLayoutEffect:s.useEffect;var Te=[ee,te,ne,re],ke=[ee,ie],Se=!1;function we(e){return e===ne||e===re}function Re(e,t,n,r){var i,a,u,c,l=r.motionEnter,f=void 0===l||l,h=r.motionAppear,p=void 0===h||h,v=r.motionLeave,g=void 0===v||v,y=r.motionDeadline,m=r.motionLeaveImmediately,_=r.onAppearPrepare,b=r.onEnterPrepare,k=r.onLeavePrepare,S=r.onAppearStart,w=r.onEnterStart,R=r.onLeaveStart,M=r.onAppearActive,x=r.onEnterActive,P=r.onLeaveActive,E=r.onAppearEnd,D=r.onEnterEnd,O=r.onLeaveEnd,I=r.onVisibleChanged,A=U(),L=(0,C.A)(A,2),G=L[0],N=L[1],$=(i=W,a=s.useReducer((function(e){return e+1}),0),u=(0,C.A)(a,2)[1],c=s.useRef(i),[B((function(){return c.current})),B((function(e){c.current="function"==typeof e?e(c.current):e,u()}))]),F=(0,C.A)($,2),H=F[0],j=F[1],V=U(null),z=(0,C.A)(V,2),X=z[0],K=z[1],Q=H(),oe=(0,s.useRef)(!1),ae=(0,s.useRef)(null);function se(){return n()}var ue=(0,s.useRef)(!1);function ce(){j(W),K(null,!0)}var le=B((function(e){var t=H();if(t!==W){var n=se();if(!e||e.deadline||e.target===n){var r,i=ue.current;t===q&&i?r=null==E?void 0:E(n,e):t===Y&&i?r=null==D?void 0:D(n,e):t===J&&i&&(r=null==O?void 0:O(n,e)),i&&!1!==r&&ce()}}})),fe=function(e){var t=(0,s.useRef)();function n(t){t&&(t.removeEventListener(me,e),t.removeEventListener(ye,e))}return s.useEffect((function(){return function(){n(t.current)}}),[]),[function(r){t.current&&t.current!==r&&n(t.current),r&&r!==t.current&&(r.addEventListener(me,e),r.addEventListener(ye,e),t.current=r)},n]}(le),he=(0,C.A)(fe,1)[0],de=function(e){switch(e){case q:return(0,d.A)((0,d.A)((0,d.A)({},ee,_),te,S),ne,M);case Y:return(0,d.A)((0,d.A)((0,d.A)({},ee,b),te,w),ne,x);case J:return(0,d.A)((0,d.A)((0,d.A)({},ee,k),te,R),ne,P);default:return{}}},pe=s.useMemo((function(){return de(Q)}),[Q]),ve=function(e,t,n){var r=U(Z),i=(0,C.A)(r,2),o=i[0],a=i[1],u=function(){var e=s.useRef(null);function t(){T.cancel(e.current)}return s.useEffect((function(){return function(){t()}}),[]),[function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var o=T((function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)}));e.current=o},t]}(),c=(0,C.A)(u,2),l=c[0],f=c[1],h=t?ke:Te;return be((function(){if(o!==Z&&o!==re){var e=h.indexOf(o),t=h[e+1],r=n(o);r===Se?a(t,!0):t&&l((function(e){function n(){e.isCanceled()||a(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,o]),s.useEffect((function(){return function(){f()}}),[]),[function(){a(ee,!0)},o]}(Q,!e,(function(e){if(e===ee){var t=pe[ee];return t?t(se()):Se}var n;return Re in pe&&K((null===(n=pe[Re])||void 0===n?void 0:n.call(pe,se(),null))||null),Re===ne&&Q!==W&&(he(se()),y>0&&(clearTimeout(ae.current),ae.current=setTimeout((function(){le({deadline:!0})}),y))),Re===ie&&ce(),true})),ge=(0,C.A)(ve,2),_e=ge[0],Re=ge[1],Me=we(Re);ue.current=Me,be((function(){N(t);var n,r=oe.current;oe.current=!0,!r&&t&&p&&(n=q),r&&t&&f&&(n=Y),(r&&!t&&g||!r&&m&&!t&&g)&&(n=J);var i=de(n);n&&(e||i[ee])?(j(n),_e()):j(W)}),[t]),(0,s.useEffect)((function(){(Q===q&&!p||Q===Y&&!f||Q===J&&!g)&&j(W)}),[p,f,g]),(0,s.useEffect)((function(){return function(){oe.current=!1,clearTimeout(ae.current)}}),[]);var xe=s.useRef(!1);(0,s.useEffect)((function(){G&&(xe.current=!0),void 0!==G&&Q===W&&((xe.current||G)&&(null==I||I(G)),xe.current=!0)}),[G,Q]);var Pe=X;return pe[ee]&&Re===te&&(Pe=(0,o.A)({transition:"none"},Pe)),[Q,Re,Pe,null!=G?G:t]}const Me=function(e){var t=e;"object"===(0,i.A)(e)&&(t=e.transitionSupport);var n=s.forwardRef((function(e,n){var r=e.visible,i=void 0===r||r,a=e.removeOnLeave,u=void 0===a||a,c=e.forceRender,l=e.children,f=e.motionName,h=e.leavedClassName,p=e.eventProps,v=function(e,n){return!(!e.motionName||!t||!1===n)}(e,s.useContext(G).motion),g=(0,s.useRef)(),y=(0,s.useRef)(),m=Re(v,i,(function(){try{return g.current instanceof HTMLElement?g.current:w(y.current)}catch(e){return null}}),e),_=(0,C.A)(m,4),b=_[0],T=_[1],k=_[2],S=_[3],R=s.useRef(S);S&&(R.current=!0);var x,E=s.useCallback((function(e){g.current=e,M(n,e)}),[n]),D=(0,o.A)((0,o.A)({},p),{},{visible:i});if(l)if(b===W)x=S?l((0,o.A)({},D),E):!u&&R.current&&h?l((0,o.A)((0,o.A)({},D),{},{className:h}),E):c||!u&&!h?l((0,o.A)((0,o.A)({},D),{},{style:{display:"none"}}),E):null;else{var O;T===ee?O="prepare":we(T)?O="active":T===te&&(O="start");var I=_e(f,"".concat(b,"-").concat(O));x=l((0,o.A)((0,o.A)({},D),{},{className:A()(_e(f,b),(0,d.A)((0,d.A)({},I,I&&O),f,"string"==typeof f)),style:k}),E)}else x=null;return s.isValidElement(x)&&P(x)&&(x.ref||(x=s.cloneElement(x,{ref:E}))),s.createElement(N,{ref:y},x)}));return n.displayName="CSSMotion",n}(ge);var xe="add",Pe="keep",Ee="remove",De="removed";function Oe(e){var t;return t=e&&"object"===(0,i.A)(e)&&"key"in e?e:{key:e},(0,o.A)((0,o.A)({},t),{},{key:String(t.key)})}function Ie(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Oe)}var Ae=["component","children","onVisibleChanged","onAllRemoved"],Le=["status"],Ce=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Me,t=function(t){(0,f.A)(i,t);var n=(0,h.A)(i);function i(){var e;(0,u.A)(this,i);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e=n.call.apply(n,[this].concat(r)),(0,d.A)((0,l.A)(e),"state",{keyEntities:[]}),(0,d.A)((0,l.A)(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:(0,o.A)((0,o.A)({},e),{},{status:De})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==De})).length})),e}return(0,c.A)(i,[{key:"render",value:function(){var t=this,n=this.state.keyEntities,i=this.props,u=i.component,c=i.children,l=i.onVisibleChanged,f=i.onAllRemoved,h=(0,a.A)(i,Ae),d=u||s.Fragment,p={};return Ce.forEach((function(e){p[e]=h[e],delete h[e]})),delete h.keys,s.createElement(d,h,n.map((function(n,i){var u=n.status,h=(0,a.A)(n,Le),d=u===xe||u===Pe;return s.createElement(e,(0,r.A)({},p,{key:h.key,visible:d,eventProps:h,onVisibleChanged:function(e){null==l||l(e,{key:h.key}),e||0===t.removeKey(h.key)&&f&&f()}}),(function(e,t){return c((0,o.A)((0,o.A)({},e),{},{index:i}),t)}))})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=Ie(n),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,a=Ie(e),s=Ie(t);a.forEach((function(e){for(var t=!1,a=r;a<i;a+=1){var u=s[a];if(u.key===e.key){r<a&&(n=n.concat(s.slice(r,a).map((function(e){return(0,o.A)((0,o.A)({},e),{},{status:xe})}))),r=a),n.push((0,o.A)((0,o.A)({},u),{},{status:Pe})),r+=1,t=!0;break}}t||n.push((0,o.A)((0,o.A)({},e),{},{status:Ee}))})),r<i&&(n=n.concat(s.slice(r).map((function(e){return(0,o.A)((0,o.A)({},e),{},{status:xe})}))));var u={};return n.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1})),Object.keys(u).filter((function(e){return u[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==Ee}))).forEach((function(t){t.key===e&&(t.status=Pe)}))})),n}(r,i);return{keyEntities:a.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==De||e.status!==Ee}))}}}]),i}(s.Component);(0,d.A)(t,"defaultProps",{component:"div"})}(ge);const Ge=Me;function Ne(e){var t=e.prefixCls,n=e.motion,r=e.animation,i=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:i?{motionName:i}:null)}function Be(e){var t=e.prefixCls,n=e.visible,i=e.zIndex,a=e.mask,u=e.maskMotion,c=e.maskAnimation,l=e.maskTransitionName;if(!a)return null;var f={};return(u||l||c)&&(f=(0,o.A)({motionAppear:!0},Ne({motion:u,prefixCls:t,transitionName:l,animation:c}))),s.createElement(Ge,(0,r.A)({},f,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return s.createElement("div",{style:{zIndex:i},className:A()("".concat(t,"-mask"),n)})}))}var $e=n(84035);var Fe=n(14609);function Ue(e,t){var n=null,r=null,i=new Fe.A((function(e){var i=(0,C.A)(e,1)[0].target;if(document.documentElement.contains(i)){var o=i.getBoundingClientRect(),a=o.width,s=o.height,u=Math.floor(a),c=Math.floor(s);n===u&&r===c||Promise.resolve().then((function(){t({width:u,height:c})})),n=u,r=c}}));return e&&i.observe(e),function(){i.disconnect()}}function He(e){return"function"!=typeof e?null:e()}function je(e){return"object"===(0,i.A)(e)&&e?e:null}var Ve=function(e,t){var n=e.children,r=e.disabled,o=e.target,a=e.align,u=e.onAlign,c=e.monitorWindowResize,l=e.monitorBufferTime,f=void 0===l?0:l,h=s.useRef({}),d=s.useRef(),p=s.Children.only(n),v=s.useRef({});v.current.disabled=r,v.current.target=o,v.current.align=a,v.current.onAlign=u;var g=function(e,t){var n=s.useRef(!1),r=s.useRef(null);function i(){window.clearTimeout(r.current)}return[function e(o){if(i(),n.current&&!0!==o)r.current=window.setTimeout((function(){n.current=!1,e()}),t);else{if(!1===function(){var e=v.current,t=e.disabled,n=e.target,r=e.align,i=e.onAlign,o=d.current;if(!t&&n&&o){var a,s=He(n),u=je(n);h.current.element=s,h.current.point=u,h.current.align=r;var c=document.activeElement;return s&&function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1}(s)?a=(0,$e.Op)(o,s,r):u&&(a=(0,$e.aG)(o,u,r)),function(e,t){e!==document.activeElement&&k(t,e)&&"function"==typeof e.focus&&e.focus()}(c,o),i&&a&&i(o,a),!0}return!1}())return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,i()}]}(0,f),y=(0,C.A)(g,2),m=y[0],_=y[1],b=s.useState(),T=(0,C.A)(b,2),S=T[0],w=T[1],R=s.useState(),M=(0,C.A)(R,2),P=M[0],D=M[1];return F((function(){w(He(o)),D(je(o))})),s.useEffect((function(){var e,t;h.current.element===S&&((e=h.current.point)===(t=P)||e&&t&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY))&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=r.has(t);if(Q(!s,"Warning: There may be circular references"),s)return!1;if(t===o)return!0;if(n&&a>1)return!1;r.add(t);var u=a+1;if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(var c=0;c<t.length;c++)if(!e(t[c],o[c],u))return!1;return!0}if(t&&o&&"object"===(0,i.A)(t)&&"object"===(0,i.A)(o)){var l=Object.keys(t);return l.length===Object.keys(o).length&&l.every((function(n){return e(t[n],o[n],u)}))}return!1}(e,t)}(h.current.align,a)||m()})),s.useEffect((function(){return Ue(d.current,m)}),[d.current]),s.useEffect((function(){return Ue(S,m)}),[S]),s.useEffect((function(){r?_():m()}),[r]),s.useEffect((function(){if(c)return E(window,"resize",m).remove}),[c]),s.useEffect((function(){return function(){_()}}),[]),s.useImperativeHandle(t,(function(){return{forceAlign:function(){return m(!0)}}})),s.isValidElement(p)&&(p=s.cloneElement(p,{ref:x(p.ref,d)})),p},ze=s.forwardRef(Ve);ze.displayName="Align";const Xe=ze;var Ke=n(60592),Qe=n(16292),We=["measure","alignPre","align",null,"motion"],qe=s.forwardRef((function(e,t){var n=e.visible,i=e.prefixCls,a=e.className,u=e.style,c=e.children,l=e.zIndex,f=e.stretch,h=e.destroyPopupOnHide,d=e.forceRender,p=e.align,v=e.point,g=e.getRootDomNode,y=e.getClassNameFromAlign,m=e.onAlign,_=e.onMouseEnter,b=e.onMouseLeave,k=e.onMouseDown,S=e.onTouchStart,w=e.onClick,R=(0,s.useRef)(),M=(0,s.useRef)(),x=(0,s.useState)(),P=(0,C.A)(x,2),E=P[0],D=P[1],O=function(e){var t=s.useState({width:0,height:0}),n=(0,C.A)(t,2),r=n[0],i=n[1];return[s.useMemo((function(){var t={};if(e){var n=r.width,i=r.height;-1!==e.indexOf("height")&&i?t.height=i:-1!==e.indexOf("minHeight")&&i&&(t.minHeight=i),-1!==e.indexOf("width")&&n?t.width=n:-1!==e.indexOf("minWidth")&&n&&(t.minWidth=n)}return t}),[e,r]),function(e){var t=e.offsetWidth,n=e.offsetHeight,r=e.getBoundingClientRect(),o=r.width,a=r.height;Math.abs(t-o)<1&&Math.abs(n-a)<1&&(t=o,n=a),i({width:t,height:n})}]}(f),I=(0,C.A)(O,2),L=I[0],G=I[1],N=function(e){var t=U(null),n=(0,C.A)(t,2),r=n[0],i=n[1],o=(0,s.useRef)();function a(e){i(e,!0)}function u(){T.cancel(o.current)}return(0,s.useEffect)((function(){a("measure")}),[e]),(0,s.useEffect)((function(){"measure"===r&&(f&&G(g())),r&&(o.current=T((0,Qe.A)((0,Ke.A)().mark((function e(){var t,n;return(0,Ke.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=We.indexOf(r),(n=We[t+1])&&-1!==t&&a(n);case 3:case"end":return e.stop()}}),e)})))))}),[r]),(0,s.useEffect)((function(){return function(){u()}}),[]),[r,function(e){u(),o.current=T((function(){a((function(e){switch(r){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(n),B=(0,C.A)(N,2),$=B[0],H=B[1],j=(0,s.useState)(0),V=(0,C.A)(j,2),z=V[0],X=V[1],K=(0,s.useRef)();function Q(){var e;null===(e=R.current)||void 0===e||e.forceAlign()}function W(e,t){var n=y(t);E!==n&&D(n),X((function(e){return e+1})),"align"===$&&(null==m||m(e,t))}F((function(){"alignPre"===$&&X(0)}),[$]),F((function(){"align"===$&&(z<3?Q():H((function(){var e;null===(e=K.current)||void 0===e||e.call(K)})))}),[z]);var q=(0,o.A)({},Ne(e));function Y(){return new Promise((function(e){K.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=q[e];q[e]=function(e,n){return H(),null==t?void 0:t(e,n)}})),s.useEffect((function(){q.motionName||"motion"!==$||H()}),[q.motionName,$]),s.useImperativeHandle(t,(function(){return{forceAlign:Q,getElement:function(){return M.current}}}));var J=(0,o.A)((0,o.A)({},L),{},{zIndex:l,opacity:"motion"!==$&&"stable"!==$&&n?0:void 0,pointerEvents:n||"stable"===$?void 0:"none"},u),Z=!0;null==p||!p.points||"align"!==$&&"stable"!==$||(Z=!1);var ee=c;return s.Children.count(c)>1&&(ee=s.createElement("div",{className:"".concat(i,"-content")},c)),s.createElement(Ge,(0,r.A)({visible:n,ref:M,leavedClassName:"".concat(i,"-hidden")},q,{onAppearPrepare:Y,onEnterPrepare:Y,removeOnLeave:h,forceRender:d}),(function(e,t){var n=e.className,r=e.style,u=A()(i,a,E,n);return s.createElement(Xe,{target:v||g,key:"popup",ref:R,monitorWindowResize:!0,disabled:Z,align:p,onAlign:W},s.createElement("div",{ref:t,className:u,onMouseEnter:_,onMouseLeave:b,onMouseDownCapture:k,onTouchStartCapture:S,onClick:w,style:(0,o.A)((0,o.A)({},r),J)},ee))}))}));qe.displayName="PopupInner";const Ye=qe;var Je=s.forwardRef((function(e,t){var n=e.prefixCls,i=e.visible,a=e.zIndex,u=e.children,c=e.mobile,l=(c=void 0===c?{}:c).popupClassName,f=c.popupStyle,h=c.popupMotion,d=void 0===h?{}:h,p=c.popupRender,v=e.onClick,g=s.useRef();s.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return g.current}}}));var y=(0,o.A)({zIndex:a},f),m=u;return s.Children.count(u)>1&&(m=s.createElement("div",{className:"".concat(n,"-content")},u)),p&&(m=p(m)),s.createElement(Ge,(0,r.A)({visible:i,ref:g,removeOnLeave:!0},d),(function(e,t){var r=e.className,i=e.style,a=A()(n,l,r);return s.createElement("div",{ref:t,className:a,onClick:v,style:(0,o.A)((0,o.A)({},i),y)},m)}))}));Je.displayName="MobilePopupInner";const Ze=Je;var et=["visible","mobile"],tt=s.forwardRef((function(e,t){var n=e.visible,i=e.mobile,u=(0,a.A)(e,et),c=(0,s.useState)(n),l=(0,C.A)(c,2),f=l[0],h=l[1],d=(0,s.useState)(!1),p=(0,C.A)(d,2),v=p[0],g=p[1],y=(0,o.A)((0,o.A)({},u),{},{visible:f});(0,s.useEffect)((function(){h(n),n&&i&&g(function(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null==e?void 0:e.substr(0,4))}())}),[n,i]);var m=v?s.createElement(Ze,(0,r.A)({},y,{mobile:i,ref:t})):s.createElement(Ye,(0,r.A)({},y,{ref:t}));return s.createElement("div",null,s.createElement(Be,y),m)}));tt.displayName="Popup";const nt=tt,rt=s.createContext(null);function it(){}var ot=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];const at=(st=O,ut=function(e){(0,f.A)(n,e);var t=(0,h.A)(n);function n(e){var i,o;return(0,u.A)(this,n),i=t.call(this,e),(0,d.A)((0,l.A)(i),"popupRef",s.createRef()),(0,d.A)((0,l.A)(i),"triggerRef",s.createRef()),(0,d.A)((0,l.A)(i),"portalContainer",void 0),(0,d.A)((0,l.A)(i),"attachId",void 0),(0,d.A)((0,l.A)(i),"clickOutsideHandler",void 0),(0,d.A)((0,l.A)(i),"touchOutsideHandler",void 0),(0,d.A)((0,l.A)(i),"contextMenuOutsideHandler1",void 0),(0,d.A)((0,l.A)(i),"contextMenuOutsideHandler2",void 0),(0,d.A)((0,l.A)(i),"mouseDownTimeout",void 0),(0,d.A)((0,l.A)(i),"focusTime",void 0),(0,d.A)((0,l.A)(i),"preClickTime",void 0),(0,d.A)((0,l.A)(i),"preTouchTime",void 0),(0,d.A)((0,l.A)(i),"delayTimer",void 0),(0,d.A)((0,l.A)(i),"hasPopupMouseDown",void 0),(0,d.A)((0,l.A)(i),"onMouseEnter",(function(e){var t=i.props.mouseEnterDelay;i.fireEvents("onMouseEnter",e),i.delaySetPopupVisible(!0,t,t?null:e)})),(0,d.A)((0,l.A)(i),"onMouseMove",(function(e){i.fireEvents("onMouseMove",e),i.setPoint(e)})),(0,d.A)((0,l.A)(i),"onMouseLeave",(function(e){i.fireEvents("onMouseLeave",e),i.delaySetPopupVisible(!1,i.props.mouseLeaveDelay)})),(0,d.A)((0,l.A)(i),"onPopupMouseEnter",(function(){i.clearDelayTimer()})),(0,d.A)((0,l.A)(i),"onPopupMouseLeave",(function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&k(null===(t=i.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||i.delaySetPopupVisible(!1,i.props.mouseLeaveDelay)})),(0,d.A)((0,l.A)(i),"onFocus",(function(e){i.fireEvents("onFocus",e),i.clearDelayTimer(),i.isFocusToShow()&&(i.focusTime=Date.now(),i.delaySetPopupVisible(!0,i.props.focusDelay))})),(0,d.A)((0,l.A)(i),"onMouseDown",(function(e){i.fireEvents("onMouseDown",e),i.preClickTime=Date.now()})),(0,d.A)((0,l.A)(i),"onTouchStart",(function(e){i.fireEvents("onTouchStart",e),i.preTouchTime=Date.now()})),(0,d.A)((0,l.A)(i),"onBlur",(function(e){i.fireEvents("onBlur",e),i.clearDelayTimer(),i.isBlurToHide()&&i.delaySetPopupVisible(!1,i.props.blurDelay)})),(0,d.A)((0,l.A)(i),"onContextMenu",(function(e){e.preventDefault(),i.fireEvents("onContextMenu",e),i.setPopupVisible(!0,e)})),(0,d.A)((0,l.A)(i),"onContextMenuClose",(function(){i.isContextMenuToShow()&&i.close()})),(0,d.A)((0,l.A)(i),"onClick",(function(e){if(i.fireEvents("onClick",e),i.focusTime){var t;if(i.preClickTime&&i.preTouchTime?t=Math.min(i.preClickTime,i.preTouchTime):i.preClickTime?t=i.preClickTime:i.preTouchTime&&(t=i.preTouchTime),Math.abs(t-i.focusTime)<20)return;i.focusTime=0}i.preClickTime=0,i.preTouchTime=0,i.isClickToShow()&&(i.isClickToHide()||i.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var n=!i.state.popupVisible;(i.isClickToHide()&&!n||n&&i.isClickToShow())&&i.setPopupVisible(!i.state.popupVisible,e)})),(0,d.A)((0,l.A)(i),"onPopupMouseDown",(function(){var e;i.hasPopupMouseDown=!0,clearTimeout(i.mouseDownTimeout),i.mouseDownTimeout=window.setTimeout((function(){i.hasPopupMouseDown=!1}),0),i.context&&(e=i.context).onPopupMouseDown.apply(e,arguments)})),(0,d.A)((0,l.A)(i),"onDocumentClick",(function(e){if(!i.props.mask||i.props.maskClosable){var t=e.target,n=i.getRootDomNode(),r=i.getPopupDomNode();k(n,t)&&!i.isContextMenuOnly()||k(r,t)||i.hasPopupMouseDown||i.close()}})),(0,d.A)((0,l.A)(i),"getRootDomNode",(function(){var e=i.props.getTriggerDOMNode;if(e)return e(i.triggerRef.current);try{var t=w(i.triggerRef.current);if(t)return t}catch(e){}return p.findDOMNode((0,l.A)(i))})),(0,d.A)((0,l.A)(i),"getPopupClassNameFromAlign",(function(e){var t=[],n=i.props,r=n.popupPlacement,o=n.builtinPlacements,a=n.prefixCls,s=n.alignPoint,u=n.getPopupClassNameFromAlign;return r&&o&&t.push(function(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var s=o[a];if(L(e[s].points,i,r))return"".concat(t,"-placement-").concat(s)}return""}(o,a,e,s)),u&&t.push(u(e)),t.join(" ")})),(0,d.A)((0,l.A)(i),"getComponent",(function(){var e=i.props,t=e.prefixCls,n=e.destroyPopupOnHide,o=e.popupClassName,a=e.onPopupAlign,u=e.popupMotion,c=e.popupAnimation,l=e.popupTransitionName,f=e.popupStyle,h=e.mask,d=e.maskAnimation,p=e.maskTransitionName,v=e.maskMotion,g=e.zIndex,y=e.popup,m=e.stretch,_=e.alignPoint,b=e.mobile,T=e.forceRender,k=e.onPopupClick,S=i.state,w=S.popupVisible,R=S.point,M=i.getPopupAlign(),x={};return i.isMouseEnterToShow()&&(x.onMouseEnter=i.onPopupMouseEnter),i.isMouseLeaveToHide()&&(x.onMouseLeave=i.onPopupMouseLeave),x.onMouseDown=i.onPopupMouseDown,x.onTouchStart=i.onPopupMouseDown,s.createElement(nt,(0,r.A)({prefixCls:t,destroyPopupOnHide:n,visible:w,point:_&&R,className:o,align:M,onAlign:a,animation:c,getClassNameFromAlign:i.getPopupClassNameFromAlign},x,{stretch:m,getRootDomNode:i.getRootDomNode,style:f,mask:h,zIndex:g,transitionName:l,maskAnimation:d,maskTransitionName:p,maskMotion:v,ref:i.popupRef,motion:u,mobile:b,forceRender:T,onClick:k}),"function"==typeof y?y():y)})),(0,d.A)((0,l.A)(i),"attachParent",(function(e){T.cancel(i.attachId);var t,n=i.props,r=n.getPopupContainer,o=n.getDocument,a=i.getRootDomNode();r?(a||0===r.length)&&(t=r(a)):t=o(i.getRootDomNode()).body,t?t.appendChild(e):i.attachId=T((function(){i.attachParent(e)}))})),(0,d.A)((0,l.A)(i),"getContainer",(function(){if(!i.portalContainer){var e=(0,i.props.getDocument)(i.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",i.portalContainer=e}return i.attachParent(i.portalContainer),i.portalContainer})),(0,d.A)((0,l.A)(i),"setPoint",(function(e){i.props.alignPoint&&e&&i.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),(0,d.A)((0,l.A)(i),"handlePortalUpdate",(function(){i.state.prevPopupVisible!==i.state.popupVisible&&i.props.afterPopupVisibleChange(i.state.popupVisible)})),(0,d.A)((0,l.A)(i),"triggerContextValue",{onPopupMouseDown:i.onPopupMouseDown}),o="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,i.state={prevPopupVisible:o,popupVisible:o},ot.forEach((function(e){i["fire".concat(e)]=function(t){i.fireEvents(e,t)}})),i}return(0,c.A)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=E(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=E(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=E(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=E(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),T.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){var r=e[t]||{};return(0,o.A)((0,o.A)({},r),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,i=1e3*t;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,o),r.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,t=this.props,n=t.children,r=t.forceRender,i=t.alignPoint,a=t.className,u=t.autoDestroy,c=s.Children.only(n),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,i&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var f=A()(c&&c.props&&c.props.className,a);f&&(l.className=f);var h=(0,o.A)({},l);P(c)&&(h.ref=x(this.triggerRef,c.ref));var d,p=s.cloneElement(c,h);return(e||this.popupRef.current||r)&&(d=s.createElement(st,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&u&&(d=null),s.createElement(rt.Provider,{value:this.triggerContextValue},p,d)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),n}(s.Component),(0,d.A)(ut,"contextType",rt),(0,d.A)(ut,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(e){return e?e.ownerDocument:window.document},onPopupVisibleChange:it,afterPopupVisibleChange:it,onPopupAlign:it,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),ut);var st,ut,ct={adjustX:1,adjustY:1},lt=[0,0],ft={left:{points:["cr","cl"],overflow:ct,offset:[-4,0],targetOffset:lt},right:{points:["cl","cr"],overflow:ct,offset:[4,0],targetOffset:lt},top:{points:["bc","tc"],overflow:ct,offset:[0,-4],targetOffset:lt},bottom:{points:["tc","bc"],overflow:ct,offset:[0,4],targetOffset:lt},topLeft:{points:["bl","tl"],overflow:ct,offset:[0,-4],targetOffset:lt},leftTop:{points:["tr","tl"],overflow:ct,offset:[-4,0],targetOffset:lt},topRight:{points:["br","tr"],overflow:ct,offset:[0,-4],targetOffset:lt},rightTop:{points:["tl","tr"],overflow:ct,offset:[4,0],targetOffset:lt},bottomRight:{points:["tr","br"],overflow:ct,offset:[0,4],targetOffset:lt},rightBottom:{points:["bl","br"],overflow:ct,offset:[4,0],targetOffset:lt},bottomLeft:{points:["tl","bl"],overflow:ct,offset:[0,4],targetOffset:lt},leftBottom:{points:["br","bl"],overflow:ct,offset:[-4,0],targetOffset:lt}};function ht(e){var t=e.showArrow,n=e.arrowContent,r=e.children,i=e.prefixCls,o=e.id,a=e.overlayInnerStyle,u=e.className,c=e.style;return s.createElement("div",{className:A()("".concat(i,"-content"),u),style:c},!1!==t&&s.createElement("div",{className:"".concat(i,"-arrow"),key:"arrow"},n),s.createElement("div",{className:"".concat(i,"-inner"),id:o,role:"tooltip",style:a},"function"==typeof r?r():r))}var dt=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],pt=function(e,t){var n=e.overlayClassName,u=e.trigger,c=void 0===u?["hover"]:u,l=e.mouseEnterDelay,f=void 0===l?0:l,h=e.mouseLeaveDelay,d=void 0===h?.1:h,p=e.overlayStyle,v=e.prefixCls,g=void 0===v?"rc-tooltip":v,y=e.children,m=e.onVisibleChange,_=e.afterVisibleChange,b=e.transitionName,T=e.animation,k=e.motion,S=e.placement,w=void 0===S?"right":S,R=e.align,M=void 0===R?{}:R,x=e.destroyTooltipOnHide,P=void 0!==x&&x,E=e.defaultVisible,D=e.getTooltipContainer,O=e.overlayInnerStyle,I=e.arrowContent,A=e.overlay,L=e.id,C=e.showArrow,G=void 0===C||C,N=(0,a.A)(e,dt),B=(0,s.useRef)(null);(0,s.useImperativeHandle)(t,(function(){return B.current}));var $=(0,o.A)({},N);"visible"in e&&($.popupVisible=e.visible);var F=!1,U=!1;if("boolean"==typeof P)F=P;else if(P&&"object"===(0,i.A)(P)){var H=P.keepParent;F=!0===H,U=!1===H}return s.createElement(at,(0,r.A)({popupClassName:n,prefixCls:g,popup:function(){return s.createElement(ht,{showArrow:G,arrowContent:I,key:"content",prefixCls:g,id:L,overlayInnerStyle:O},A)},action:c,builtinPlacements:ft,popupPlacement:w,ref:B,popupAlign:M,getPopupContainer:D,onPopupVisibleChange:m,afterPopupVisibleChange:_,popupTransitionName:b,popupAnimation:T,popupMotion:k,defaultPopupVisible:E,destroyPopupOnHide:F,autoDestroy:U,mouseLeaveDelay:d,popupStyle:p,mouseEnterDelay:f},$),y)};const vt=(0,s.forwardRef)(pt)},1151:(e,t,n)=>{"use strict";function r(e){return"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)}function i(){let e=arguments.length,t=arguments[0];r(t)||(t={});for(let n=1;n<e;n++){let e=arguments[n];if(r(e))for(let n in e)"__proto__"===n||t===e[n]||(r(e[n])&&"instance"!==n?t[n]=i(t[n],e[n]):t[n]=e[n])}return t}n.d(t,{C:()=>o,a:()=>a,d:()=>i});const o="g_ven",a="g_exp"},87916:(e,t,n)=>{"use strict";n.d(t,{V:()=>h,_:()=>m,a:()=>_,b:()=>y,g:()=>g,p:()=>p});var r=n(1151);const i=/ANGLE\s+\((?:[^,]+,\s+)?(?:[^:]*:)?([^,/]+)?(?:[^,]*)(?:[,\s]+)(Direct\S+|OpenGL[\d.\s]+|Unspecified)/,o=/ANGLE\s+\((?:[^,]+,\s+)?([^,]+)?(?:[,\s]+)(Direct\S+|OpenGL[\d.\s]+)/,a=/ANGLE\s+\((?:[^,]+,\s+)?(?:[^:]+:\s+)?([^,]+)?(?:[,\s]+)(Direct\S+|OpenGL[\d.\s]+)?/,s="OpenGL Engine",u="Unknow",c=4318,l=32902,f=4098;var h=(e=>(e.CpuDeriver="CpuDeriver",e.Intel="Intel",e.Nvidia="NVIDIA",e.Amd="AMD",e.Apple="Apple",e.Adreno="Adreno",e[e.Unknow=u]="Unknow",e))(h||{});function d(e){return"NVIDIA"===e?c:"AMD"===e?f:"Intel"===e?l:0}function p(e){const t=function(e){const t=/(SwiftShader|Intel|NVIDIA|AMD|Radeon|Apple|Adreno)/.exec(e);return t?"Radeon"===t[0]?"AMD":"SwiftShader"===t[0]?"CpuDeriver":t[0]:h.Unknow}(e);return t===h.Unknow||"CpuDeriver"===t?{vendor:t,vendorId:0,model:e,backupModel:e,api:u,origin:e}:/^ANGLE/.test(e)?function(e,t){let n,r=u,c=u,l=u;return("Intel"===e||"NVIDIA"===e)&&(n=i.exec(t)),("AMD"===e||"Adreno"===e)&&(n=o.exec(t)),"Apple"===e&&(n=a.exec(t)),null!=n&&n[1]&&(r=n[1].replace(/(AMD|NVIDIA)/,"").trim()),null!=n&&n[2]&&(l=n[2].trim()),r=r.split("(0x00")[0].trim(),c="Intel"===e?r=r.split(s)[0].trim():r.split(s)[0].trim(),{vendor:e,vendorId:d(e),model:r,backupModel:c,api:l,origin:t}}(t,e):"Intel"===t?{vendor:t,vendorId:d(t),model:e.split(s)[0].trim(),backupModel:e.split(s)[0].trim(),api:u,origin:e}:{vendor:t,vendorId:d(t),model:e.replace(/(AMD|NVIDIA)/,"").trim(),backupModel:e.split(s)[0].replace(/(AMD|NVIDIA)/,"").trim(),api:u,origin:e}}let v="";function g(e){if(v)return v;v=localStorage.getItem(r.C)||"";const t=Number(localStorage.getItem(r.a));if(v){const n=t?Date.now()-t:0;if(null==e||!e.expiration||n<e.expiration)return v;n>e.expiration&&(localStorage.removeItem(r.C),localStorage.removeItem(r.a))}return v=function(){try{let e,t;const n=document.createElement("canvas").getContext("webgl");if(n)return t=n.getExtension("WEBGL_debug_renderer_info"),e=t?n.getParameter(t.UNMASKED_RENDERER_WEBGL):"",e}catch{}return""}(),localStorage.setItem(r.C,v),localStorage.setItem(r.a,""+Date.now()),v}function y(e,t){let n=[];switch(t){case h.Intel:n=e.split("\n").map((e=>`Intel(R) ${e}`.replace("#","Graphics").replace("*","HD")));break;case h.Amd:n=e.split("\n").map((e=>e.replace("@","Radeon").replace("*","HD").replace("^","RX")));break;case h.Nvidia:n=e.split("\n").map((e=>e.replace("$","GeForce").replace("%","RTX").replace("&","GTX")))}return n.map((e=>e.split("|")))}function m(e,t){let n=e.filter((e=>e[0]===t.model));n.length||(n=e.filter((e=>e[0]===t.backupModel))),!n.length&&t.vendor===h.Intel&&!/^Intel(R)/.test(t.model)&&(n=e.filter((e=>e[0]==="Intel(R) "+t.model)));let r="-1";if(n.length){const e=n[0][1];r="-1"===e?"0":e}return parseInt(r)}function _(e){return 0===e?0:-1===e?-1:parseFloat(Math.log2(e).toFixed(2))}},68955:(e,t,n)=>{"use strict";n.d(t,{lg:()=>f,Zo:()=>l});var r=n(87916),i=Object.defineProperty;let o=[],a=[],s=[];const u=class e{static setConfig(t){e.cfg=t}static getGPUVendor(){return(0,r.g)(e.cfg)}static getGPUParsedVendor(t){return(0,r.p)(t||e.getGPUVendor())}static parseVendorAsync(t){const n=e.getGPUParsedVendor(t);if(!n)return Promise.resolve(null);if(!e.cfg)throw new Error("need specify config, call setConfig() method");return function(e,t){return e?async function(e,t){let n;if(e===r.V.Intel){if(o.length)return o;n=t.intelPath}if(e===r.V.Nvidia){if(a.length)return a;n=t.nvidiaPath}if(e===r.V.Amd){if(s.length)return s;n=t.amdPath}if(!n)return Promise.resolve([]);try{const t=await fetch(n).then((e=>e.text())),i=(0,r.b)(t,e);return e===r.V.Intel&&(o=i),e===r.V.Nvidia&&(a=i),e===r.V.Amd&&(s=i),i}catch{}return[]}(e.vendor,t).then((t=>(0,r._)(t,e))).then(r.a):Promise.resolve(0)}(n,e.cfg).then((e=>({...n||{},score:e}))).catch((()=>null))}};((e,t)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:null}):e[t]=null})(u,"cfg");let c=u;function l(){let e=!1;if(typeof MediaSource>"u"||!MediaSource.isTypeSupported||function(){if(typeof navigator>"u")return!1;const e=navigator.userAgent.match(/Edg\/(\d+)\./);if(e&&e.length>=2){const t=parseInt(e[1]);return t>=117&&t<=122}return!1}())return e;if(e=MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'),e){const t=c.getGPUParsedVendor();e=!!t&&t.vendor!==r.V.CpuDeriver}return e}async function f(e){const{url:t,minDroppedFramesRate:n,minTotalVideoFrames:r}=Object.assign({url:"",minDroppedFramesRate:0,minTotalVideoFrames:0},e);let i,o,a,s;const u=new Promise((e=>{function u(t=1001,n){e({status:!1,errCode:t,robustErr:2101===t||2001===t||3e3===t,...n||{}})}!t||0===n&&0===r?u(1e3):(o=()=>{let t="";try{if(!i.getVideoPlaybackQuality)return u(2001);const{totalVideoFrames:t,droppedVideoFrames:o}=i.getVideoPlaybackQuality(),a=o/t,s={droppedFrameRate:a,droppedVideoFrames:o,totalVideoFrames:t};return void((n?a<=n:r&&t>r)?e({status:!0,...s}):u(3e3,s))}catch(e){t=(null==e?void 0:e.message)||e||"empty err msg"}u(2200,{errMsg:t})},a=()=>{const e=i.error;u(2e3,{errMsg:`${e.code}-${e.message}`})},s=()=>{const e=i.play();e&&e.then((e=>{})).catch((e=>{const t=e.message;let n=2100;/no supported source/gi.test(t)||/The media resource indicated by the src attribute or assigned media provider object was not suitable/gi.test(t)||/NotSupportedError/gi.test(t)?n=2101:/video-only background media was paused to save power/gi.test(t)?n=2103:(/the user didn't interact with the document first/gi.test(t)||/user denied permission/gi.test(t))&&(n=2102),u(n,{errMsg:t})}))},i=function(e){const t=document.createElement("video");return t.style.cssText="width:50px;height:50px;position:absolute;top:0;left:0;z-index:999999;opacity:.001;pointer-events:none;",t.muted=!0,t.autoplay=!1,t.src=e,t}(t),i.addEventListener("loadedmetadata",s,!1),i.addEventListener("ended",o,!1),i.addEventListener("error",a,!1),i.load(),document.body.append(i))}));return u.finally((()=>{i&&(o&&a&&s&&(i.removeEventListener("loadedmetadata",s,!1),i.removeEventListener("ended",o,!1),i.removeEventListener("error",a,!1),o=null,a=null,s=null),document.body.removeChild(i),i=null)})),await u}},57882:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});class r{constructor(){this._events=[],this._callbacks={}}register(e){this._events.includes[e]||this._events.push(e)}on(e,t){return!!this._events.includes(e)&&(this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),!0)}off(e,t){if(!this._events.includes(e))return!1;const n=this._callbacks[e].indexOf(t);return this._callbacks[e].splice(n,1),!0}bind(e,t){if(!this._events.includes(e))return!1;this._callbacks[e]=[],this._callbacks[e].push(t)}clear(e){this._callbacks[e]=[]}trigger(e,t){if(!this._callbacks[e]||!this._callbacks[e].length)return!1;let n=null;return this._callbacks[e].forEach(((e,r)=>{0==r?n=e(t):e(t)})),n}set events(e){e.forEach((e=>{this.register(e)}))}get events(){return this._events}}},91432:(e,t,n)=>{"use strict";n.d(t,{M:()=>W,a:()=>K,b:()=>J});var r=n(68955),i=n(87916),o=Object.defineProperty;const a="Arc(TM) A770M #|995\nArc(TM) A770 #|980\nArc(TM) A770 #|970\nArc(TM) A580 #|940\nArc(TM) A730M #|820\nArc(TM) A750 #|770\nArc(TM) A750 #|770\nArc(TM) A550M #|660\nArc(TM) A550M #|630\nXe # ReleaseInternal|560\nArc(TM) A770M #|500\nArc(TM) A380 #|470\nArc(TM) A380 #|470\nArc(TM) A370M #|340\nArc(TM) A370M #|340\nXe #|320\nHD # 630 GT2|310\nArc(TM) A350M #|280\nIris(R) Xe MAX #|210\nIris(R) Xe # RI|205\nIris(R) Xe # ReleaseInternal|180\nIris(R) Xe #|180\nGen12 Desktop # Controller|180\nIris(R) Xe #|180\nIris(R) Xe MAX #|170\nCorporation Iris Xe #|170\nCorporation TigerLake-LP GT2 [Iris Xe #]|160\nXe #|160\nArc(TM) A350M #|150\nCorporation TigerLake GT2 [Iris Xe #]|150\nUHD # 770|140\nUHD # ReleaseInternal|140\nIris(R) Pro # P580|140\nIris(R) Plus #|130\nIris Plus #|130\nIris(R) Pro # 580|130\nUHD # 770|125\nUHD # 750|125\nRadeong 0.4 on AMD TONGA (DRM 3.1.0, LLVM 3.9.0)|120\nCorporation Iris Plus # G7|120\nIris(R) Plus #|120\nIris(R) Plus # 940|120\nIris(R) Plus # 650|120\nIris(R) Plus # 655|120\nIris(R) Plus # 655|120\nHD # P4600|120\nIris(TM) Pro # 6200|120\nIris(R) Plus #|120\nIris(R) Plus # 650|120\nIris(R) Plus # 655|115\nIris(R) Pro # 580|110\nCorporation Iris Pro # 580|110\nIris(R) Plus # 645|110\nIris(TM) Pro # 6200|110\nIris(TM) Pro # P580|110\nCorporation Iris Plus # 655|110\nArc(TM) # RI|110\nIris(R) Plus # 655|110\nIris(R) Plus # 655|110\nIris(R) Plus #|110\nUHD #|110\nIris Plus # 655|110\nIris(R) Plus # 650|110\nIris(R) Plus # 650|110\nIris(TM) Pro # 580|110\nIris(TM) Pro # 6200|110\nIris # 6100|110\nIris(TM) Pro # 6200|110\nIris(R) Plus # 645|110\nUHD # 730|110\nIris(TM) Pro # 6200|100\nIris Pro # 580|100\nCorporation Iris Pro # 6200|100\nIris(R) Plus # gfx-driver-user-comp_media-21486 DC ReleaseInternal|100\nIris(R) Pro # 580|100\nIris Plus # 645|100\nUHD # 750|100\nIris(TM) Pro # 580|100\nIris(TM) # 550|100\nIris(TM) Pro # P6300|100\nIris(R) Plus # 650|100\nIris(TM) Pro # 5200|100\nIris(R) # 550|100\nIris(R) Plus #|100\nIris(R) Plus # 650|100\nIris(R) Plus # 655|100\nIris(R) # 550|100\nIris(R) Plus # 645|95\nIris Plus # 650|95\nIris(R) # 550|95\nIris # 550|90\nIris(R) Plus # 650|90\nIris(R) Pro # 580|90\nIris(TM) Plus # 650|90\nIris(TM) # 550|90\nIris(R) Plus # 640|90\nIris(TM) Plus # 650|90\nIris(TM) Pro # P6300|90\nIris(TM) Plus # 650|90\nIris(TM) # 550|90\nUHD # 730|90\nCorporation Iris Plus # 650|90\nIris(TM) Pro # 5200|90\nCorporation CometLake-H GT2 [UHD #]|90\nIris(R) # 540|90\nUHD # P630|90\nUHD # 630|85\nIris(TM) # 540|85\nIris(TM) Plus # 640|80\nIris(TM) # 540|80\nUHD # 630|80\nUHD # 630|80\nUHD # P630|80\nIris(TM) Plus # 640|80\nUHD # 630|80\nUHD # 630|80\nIris Plus # 640|80\nIris(TM) # 540|80\nUHD # 630|80\nUHD # 630|80\nIris(TM) Pro # 5200|80\nUHD # 630|80\nHD # 630|80\nUHD # 630|80\nUHD # 630|80\nUHD # 630|80\nUHD # 630|80\nUHD # 630|80\nIris Pro # 6200|80\nUHD # 630|80\nIris # 540|80\nHD # 630|80\nIris(TM) # 540|80\nIris(TM) Pro # 5200|79\nUHD # 630|79\nUHD # 630|79\nUHD # 630|79\nIris # 540|79\nUHD # 630|79\nUHD #|78\nCorporation Sky Lake Integrated #|78\nIris(TM) Pro # 6200|78\nCorporation WhiskeyLake-U GT2 [UHD # 620]|78\nRadeong 0.4 on AMD BONAIRE (DRM 2.43.0, LLVM 3.8.0)|78\nUHD # 710|78\nUHD # 630|78\nUHD # P630|77\nUHD # 630|77\nUHD # 630 (Desktop 9 Series)|77\nUHD # 630|77\nCoffee Lake UHD #|77\nIris(TM) Pro # 5200|77\nUHD # 630|76\nIris(R) Plus # 640|76\nIris(TM) Pro # 5200|76\nUHD # 630|76\nUHD #|76\nUHD # 630|76\nIris(TM) Pro # 5200|75\nUHD # 630|75\nUHD # P630|75\nHD # P530|75\nHD # 630|75\nIris(TM) Pro # 5200|75\nUHD # 630|75\nIris(TM) Pro # 5200|75\nHD # 620|74\nUHD # 630|74\nHD # 630|74\nHD # 630|74\nCoffee Lake HD #|74\nUHD # 630|74\nIris(TM) # 540|74\nUHD 630|74\nIris(R) # 540|73\nUHD # 620|73\nIris # 6200|73\nCorporation CoffeeLake-H GT2 [UHD # 630]|73\nUHD # 630 (Desktop)|73\nHD # ICL RVP|73\nUHD # 630|73\nHD # 630|72\nIris Pro|72\nKBL Unknown|72\nUHD # 630|72\nIris(TM) Pro # 5200|72\nHD # 530|72\nCorporation UHD # 630 (Desktop 9 Series)|72\nRadeon Pro Vega 16|72\nIris(TM) # 540|72\nIris(R) # 540|72\nUHD # 630|71\nHD # 630|71\nIris(TM) Pro # 5200|71\nUHD # 630|71\nIris Pro|71\nCometLake UHD # 630|71\nHD # 630|71\nUHD #|71\nIris(TM) Plus # 640|71\nUHD #|71\nCorporation UHD #|70\nIris Pro # 6200|70\nIris(R) # 540|70\n#|70\nUHD # 630|70\nHD # ICL RVP BigSur|70\nUHD # ReleaseInternal|70\nHD # 530|70\nUHD # 630|70\nUHD #|70\nUHD # gfx-driver-user-comp_core-23599|70\nUHD # 630|69\nUHD #|69\nIris(TM) Pro # 5200|69\nCorporation Iris Plus # G1 (Ice Lake)|69\nHD # 630|69\nHD # 630|69\nIris(R) Plus #|69\nIris(TM) Pro # 5200|69\nUHD # 620|69\nUHD #|69\nIris(R) Plus # 640|69\nIris Pro # 6200|69\nHD # 630|69\nUHD # 630 (Mobile)|68\nIris(TM) Pro # 5200|68\nCorporation UHD # 630 (Desktop)|68\nHD # 630|68\nUHD # 630|68\nUHD # 620|68\nUHD # 630|68\nIris(TM) Plus # 640|68\nUHD #|67\nIris Pro # 580|67\nIris(TM) # 540|67\nUHD # 620|67\nIris(TM) Pro # 5200|67\nUHD #|66\nHD # P530|66\nCorporation UHD # 630 (Mobile)|66\nIris(R) Plus # 640|66\nUHD # 630|66\nIris(R) Plus # 640|65\nHD # 630|65\nHD 530|65\nUHD # 620|65\nSKL Unknown|65\nHD # 630|64\nIris(TM) # 540|64\nMesa DRI Intel(R) UHD # 620 (Kabylake GT2)|64\nUHD # 630|64\nHD # 530|63\nHD # 530|63\nHD # 530|63\nMesa Intel(R) HD # 530 (SKL GT2)|63\nUHD #|63\nHD # 530|63\nIris # 550|63\nHD # 530|63\nIris Plus # 655|63\nHD # 630|63\nUHD #, Gen11 LP|63\nCorporation 8th Gen Core Processor Gaussian Mixture Model|63\nUHD # 630|63\nIris(TM) # 650|63\nIris(R) Plus # 640|62\nHD # 530|62\nMesa DRI Intel(R) Iris # 540 (Skylake GT3e)|62\nIris(R) Plus #|61\nIris(TM) Pro # 5200|61\nIris Pro|61\nHD # 620|61\nUHD # 620|61\nUHD # 630|61\nUHD #|61\nHD # 530|60\nIris Plus # G1|60\nIris(TM) Pro # 5200|60\nIris Plus # 650|60\nUHD #|60\nHD # 620|60\nUHD # 620|60\nUHD # 630|60\nMesa DRI Intel(R) HD # 630 (Kaby Lake GT2)|60\nUHD # 620|60\nHD # 630|60\nHD # 630|59\nIris # 540|59\nIris Plus # 640|59\nCoffeeLake-H GT2 [UHD # 630]|59\nHD # 630|59\nUHD #|59\nHD # 620|59\nUHD # 620|59\nHD # 630|59\nCorporation UHD # 620 (Whiskey Lake)|59\nIris(R) Plus # 650|59\nUHD # 620|59\nMesa Intel(R) HD # 520 (SKL GT2)|58\nHD # 630|58\nHD # P530|58\nIris(TM) Plus # 640|58\nCorporation HD # 630|58\nUHD # 620|58\nUHD # 630|58\nHD # P630|58\nMesa DRI Intel(R) UHD # 630 (Coffeelake 3x8 GT2)|58\nCorporation CometLake-S GT2 [UHD # 630]|58\nHD # 530|58\nIris # 540|58\nHD # 530|58\nCorporation Device|58\nHD # CFL CRB|57\nHD # 620 macOS Edition|57\nHD # 530|57\nMesa DRI Intel(R) HD # 520 (SKL GT2)|57\nIris Pro #|56\nIris(TM) Pro # 5200|56\nIris(R) Plus # 655|56\nCoffee Lake UHD #|56\nIris(TM) # 640|55\nIris Pro|55\nUHD # 630|55\nUHD # 620|55\nHD # 530|55\nHD # 520|54\nHD # 530|54\nUHD # 620|54\nHD # 530|54\nCorporation UHD # 620|54\nUHD #|54\nIris Plus # G7|54\nCorporation Skylake GT2 [HD # 520]|53\nUHD # 630|53\nHD # 630|53\nCorporation HD # 530|53\nUHD # 617|53\nHD # 520|52\nHD # 620|52\nHD # 620|52\nHD # 620|52\nHD # 620|52\nHD # 630|52\nHD # 630|52\nHD # 5600|51\nHD # 530|51\nHD # 630|51\nUHD # 615|51\nMesa DRI Intel(R) HD # 520 (Skylake GT2)|51\nHD # 630|50\nHD # 620|50\nUHD #|50\nHD # P4600/P4700|50\nHD # 520|50\nHD # 530|50\nHD # 620|50\nHD # 530|50\nCorporation HD # 620|50\nHD # 530|50\nUHD # 620|49\nUHD # 620|49\nHD # 530|49\nIris(TM) # 6100|49\nHD # 4600|49\nHD # 630|49\nUHD # 617|49\nUHD # RI|48\nHD # 520|48\nUHD # 617|48\nHD # 5600|48\nHD # 620|48\nUHD #, Gen11 LP|47\nUHD # 617|47\nMesa DRI Intel(R) HD # 620 (Kaby Lake GT2)|47\nHD # 615|47\nUHD # RI|47\nHD # 630|47\nHD # 4600|46\nHD # 520|46\nCorporation Skylake GT2 [HD # 520]|46\nHD # 520|46\nCorporation Device|46\nHD # 4600|46\nHD # 615|45\nHD # 4600|45\nIris(TM) # 6100|45\nHD # 615|45\nUHD # 615|45\nHD # 630 GT2|45\nHD # 4600|45\nHD # 630|45\nIris(TM) # 6100|45\nHD # 4600|45\nHD # 620|45\nIris(TM) # 6100|45\nHD # 520|45\nHD # 4600|45\nIris(TM) # 540|44\nHD # 530|44\nHD # 4600|44\nIris(TM) # 5100|44\nKabylake HD # ULT GT2|44\nIris # 6100|44\nUHD # 630|44\nHD # 520|44\nHD # KBL CRB|44\nHD # 530 (Skylake GT2)|44\nCorporation HD # 620|44\nHD # 515|44\nUHD #|44\nUHD # 620|44\nIris(TM) Pro # P580|43\nUHD # 615|43\nHD # 4600|43\nHD # 4600|43\nCorporation Skylake Integrated #|43\nHD # 530|43\nUHD # 615|43\nUHD # 630|43\nHD # 615|42\nHD # 620|42\nHD # 4600|42\nHD # 615|42\nHD # 4600|42\nHD # 4600|42\nMesa DRI Intel(R) Kabylake GT2|42\nHD # 620|42\nCorporation HD # 6000|42\nUHD # 615|42\nHD # 4600|41\nCorporation HD # 520|41\nHD # P4600/P4700|41\nCorporation, Series Chipset Iris Plus # 655|41\nHD # 4600|41\nMesa DRI Intel(R) HD # 530 (Skylake GT2)|41\nHD # 4600|41\nIris(TM) # 640|41\nHD # 4600|41\nHD # 630|40\nIris(TM) # 5100|40\nIris(TM) # 6100|40\nUHD # 610|40\nHD # 4600|40\nHD # 4600|40\nUHD # 615|40\nUHD # 610|40\nHD # 530|40\nUHD # 605|40\nHD # 615|40\nHD # 4600|40\nUHD # 615|40\nHD # 505|39\nPHDGD Ivy 4|39\nUnknown|39\nIris(TM) # 5100|39\nIris|39\nCorporation Iris # 6100|39\nHD # 6000|39\nIris(TM) # 5100|39\nHD # 615|39\nHD # 5500|39\nSkylake GT2 [HD # 520]|39\nCorporation Broadwell-U Integrated #|38\nHD # 615|38\nHD # 5500|38\nHD # 4600|38\nMesa DRI Intel(R) HD # P4000 (IVB GT2)|38\nHD # 4600|38\nHD # 615|38\nCorporation HD # 610|38\nHD # 4600|38\nHD # 4600|38\nIris(TM) # 5100|38\nIris # 6100|38\nHD # 515|38\nHD # 6000|38\nUHD #, Gen11 LP|38\nIris(TM) # 5100|38\nHD # 4600|37\nHD # 610|37\nHD # 4600|37\nHD # 515|37\nHD # 4600|37\nHD # 4600|37\nIris # P580|37\nIris(TM) Pro # P6300|37\nHD # 5500|37\nHD # 4600|37\nIris # 6100|37\nUHD # 610|37\nHD # 4600|37\nHD # 4600|37\nUHD # 610|37\nHD # 530|37\nHD # 5500|37\nHD # 515|36\nHD # P4600/P4700|36\nHD # 515|36\nHD # 4600|36\nUHD # 615|36\nIris # 6100|36\nHD # 4600|36\nHD # 4600|36\nHD # 4600|36\nHD # 520|36\nHD # 520|36\nHD # 5500|36\nCorporation HD # 5500|35\nIris|35\nHD5500 # PG7|35\nHD # 515|35\nIris|35\n# gfx-driver-user-feature_dg1_poweron-27723 DCH ReleaseInternal|35\nHD # 615|35\nHD # P630|35\nHD # 510|35\nHD # 6000|35\nHD # 5000|35\nCorporation HD # 5300|35\nHD # 6000|35\nHD # 4600|35\nHD5500 Broadwell PG7|35\n# HD 4600|35\nHD # 6000|35\nHD # 510|34\nHD # 610|34\nHD # 4600|34\nHD # Family (PHDGD Skylake v2.9)|34\nCorporation Device|34\nHD # 610|34\nUHD # 610|34\nHD # 5300|34\nHD # 5000|34\nHD # 4600|34\nUHD # 610|33\nHD # 4600|33\nUHD # 620|33\nCorporation UHD # 615|33\nHD # 5000|33\nKabylake HD # ULX GT2|33\nHD # 620|33\nUHD # 615|33\nHD # 4600|33\nHD # 5500|33\nHD # 515|33\nUHD #|33\nHD # 4600|33\nHD # 520|33\nHD # 6000|33\nHD # 615|33\nHD # KBL CRB|33\nHD # 4600|33\nUHD # 610|33\nIris # 6100|33\nHD # 515|33\nIris|32\nIris|32\nHD # 5000|32\nIris|32\nHD # 5000|32\nIris(TM) # 5100|32\nHD # 4600|32\nHD # 4600|32\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|32\nHD # 5500 (PHDGD Skylake v2.9)|32\nHD # 610|32\nHD # 6000|31\nHD # 5500|31\nIris|31\nHD # 6000|31\nUHD # 610|31\nHD # 510|31\nHD #|31\nHD # 6000|31\nHD # 4400|31\nHD # 5000|31\nHD # 4600|30\nHD # 515|30\nHD # 5600|30\nHD # 4600|30\nHD # 4400|30\nHD # 530|30\nGeForce GTX 960|30\nUHD # 610|30\nGeForce GTX 960|30\nHD # 510|30\nHD # 6000|30\nCorporation HD # 515|30\nHD # 610|29\nHD # 510|29\nHD # 5000|29\nHD # 4600|29\nIris(TM) Pro # 6200|29\nHD # 510|29\nHD # 5000|29\nHD # 6000|29\nIris|29\nHD # 4400|29\nHD # 4400|29\nHD # 4000|29\nHD # 510|29\nHD # 5000|29\nHD # 4400|28\nHD # 610|28\nHD # 5300|28\nHD # 510|28\nHD #|28\nHD # 610|28\nHD # 4400|28\nHD # 610|28\nHD # 4600|28\nHD # 4600|28\nHD # 5000|28\nHD # 4400|28\nHD # 4400|28\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|28\nHD # 4400|28\nHD # 5300|28\nHD # 5000|28\nUHD # 605|28\nHD # 4400|28\nHD # 5500|28\nHD # 4000|28\nHD # 4400|27\nHD # 615|27\nHD # Family(PHDGD Skylake v2.0)|27\nHD # 4400|27\nHD # 4400|27\nHD # 610|27\nCorporation HD # 510|27\nIris|27\nHD # 520|27\nHD # 5000|27\nHD # 5300|27\nHD # 6000|27\nHD # 4000|27\nHD # 610|27\nHD # 5000|27\nHD # 4600|27\nMesa DRI Intel(R) HD # 505 (Broxton)|27\nHD # 5500|27\nHD #|27\nHD # 5000|26\nUHD # 600|26\nHD # 4600|26\nMesa DRI Intel(R) Haswell Mobile|26\nHD # 4000|26\nHD # 5300|26\nIris(TM) # 540|26\nHD # 4000|26\nHD # 4600|26\nHD #|26\nHD # 4400|26\nHD # 4600|26\nHD # 6000|26\nCorporation Celeron N3350/Pentium N4200/Atom E3900 Series Integrated # Controller|26\nHD # 530|26\nHD # 5500|25\nBroxton-P HD #|25\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|25\nHD 4000|25\nHD # 4400|25\nHD # 4600|25\nHD # 5500|25\nHD 4000|25\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|25\nCorporation HD #|25\nHD # 4400|25\nMesa DRI Intel(R) HD # 5500 (Broadwell GT2)|25\nHD # 4400|25\nHD #|25\nUHD # 600|24\nArc(TM) #|24\nHD # 4600|24\nHD # 5300|24\nHD # 4400|24\nHD # 4400|24\nHD # 4400|24\nHD # 4000|24\nUHD # 605|24\nHD # 5000|23\nCorporation Xeon E3-1200 v2/3rd Gen Core processor # Controller|23\nUHD #, LKF|23\nUHD # 605|23\nHD # 4400|23\nHD # 4400|23\nHD # 4000|23\nHD # 4400|23\nMesa DRI Intel(R) Ivybridge Desktop|23\n0x496e74656c2048442047726170686963000732034343|23\nHD # 5300|22\nHD # 615|22\nKabylake HD # ULX GT2|22\nHD # 5300|22\nHD #|22\nHD #|22\nHD # 4000|22\nHD #|22\nHD # 515|22\nHD #|22\nHD # 5300|22\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|22\nHD # 5300|22\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|22\nHD # 4000|21\nUHD # 605|21\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|21\nHD # 4400|21\nHD #|21\nHD # 4400|21\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|21\nHD #|21\nHD # 5300|21\nHD # 4400|21\nHD # 5300|21\nHD # P4600/P4700|21\nHD #|21\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|21\nCorporation UHD # 605|20\nUHD # 600|20\nHD # 4000|20\nHD #|20\nUHD # 600 Universal|20\nHD # 4600|20\nHD # 500|20\nUHD # 600|20\nHD #|20\nHD # 5000|20\nHD # 4400|20\nHD # 5300|19\nHD # 4000|19\nMesa DRI Intel(R) Sandybridge Mobile|19\nHD # 505|19\nHD # 4000|19\nHD # 4400|19\nUHD # 600|19\nHD # 3000|19\nHD # 615|19\nHD #|19\nCorporation Atom/Celeron/Pentium Processor N4200/N3350/E3900 Series Integrated # Controller|19\nHD # 4000|19\nHD #|19\nUHD # 600|19\nHD #|19\nCorporation Haswell-ULT Integrated # Controller|19\nHD # 4400|19\nCorporation GeminiLake [UHD # 600]|19\nHD # 4000|18\nHD #|18\nHD #|18\nHD # 500|18\nHD # 4000|18\nCherryView HD #|17\nCorporation Xeon E3-1200 v2/3rd Gen Core processor # Controller|17\nXeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|17\nCorporation Xeon E3-1200 v3/4th Gen Core Processor Integrated # Controller|17\nUHD # 600|17\nUHD # 600|17\nCorporation Xeon E3-1200 v2/3rd Gen Core processor # Controller|16\nHD #|16\nUHD # 600|16\nHD #|16\nHD # 5000 (Android)|16\nHD #|16\nUHD # 600|16\nHD #|16\nHD #, Gen10|16\nHD # (PHDGD IvyDrive 3.0)|16\nHD #|15\nUHD # 600|15\nCorporation Atom/Celeron/Pentium Processor x5-E8000/J3xxx/N3xxx Integrated # Controller|15\nHD # 500|15\nHD # 505|15\nHD #|15\nCorporation 3rd Gen Core processor # Controller|15\nHD # 4400|15\nHD #|14\nHD #|14\nHD #|14\nHD # 505|14\nHD #|14\nHD #|14\nHD #|14\nHD #|13\nHD # 530|13\nHD # 500|13\nCorporation 3rd Gen Core processor # Controller|13\nHD # 4400|12\nHD # 5500|12\nHD #|12\nHD #|12\nCorporation HD # 500|12\nHD # 500|12\n3rd Gen Core processor # Controller|12\nHD #|11\nCorporation Atom/Celeron/Pentium Processor x5-E8000/J3xxx/N3xxx Series PCI Configuration Registers|11\nCorporation 2nd Gen Core Processor Family Integrated # Controller|11\nHD # 510|11\nHD # 4600 (PHDGD Skylake v2.9)|9\nCorporation Atom Processor Z36xxx/Z37xxx Series # & Display|8\nCorporation Atom Processor Z36xxx/Z37xxx Series # & Display|8\nMesa DRI Intel(R) Bay Trail|8\nUHD #, Gen12 LP ReleaseInternal|5\nCorporation D3D12 (Intel(R) UHD # 630)|3\nHD # 3000|2\n(PE64) Intel(R) 4th Generation Haswell HD # Family|-1\n4 Series Internal Chipset|-1\n7 Series/C216 Chipset Family MEI Controller #1|-1\nB43 Express Chipset|-1\nCometLake-S GT2 [UHD # 630]|-1\nHD # 5500|-1\nHD # 620|-1\nG35 Express Chipset Family|-1\nG41 Express Chipset|-1\nG45/G43 Express Chipset|-1\n# Media Accelerator HD|-1\nHD # (PHDGD Omega 5.0)|-1\nHD # 4400|-1\nHD # P3000|-1\nHD # P3000 (PHDGD Omega 5.0)|-1\nIncrediblE HD # 3000|-1\nIris Pro # 5200|-1\nMesa DRI Intel(R) HD # (CHV)|-1\nMesa DRI Intel(R) Ivybridge Mobile|-1\nMobile Intel(R) 4 Series Express Chipset Family|-1\nMobile Intel(R) 965 Express Chipset Family|-1\nMobile Intel(R) HD #|-1\nPHDGD Quantic C3|-1\nQ45/Q43 Express Chipset|-1\nRadeong 0.4 on AMD CAPE VERDE (DRM 2.43.0, LLVM 3.7.0)|-1\nRadeong 0.4 on AMD CAPE VERDE (DRM 3.9.0 / 4.9.0-rc1+, LLVM 4.0.0)|-1\nRadeong 0.4 on AMD FIJI (DRM 3.2.0 / 4.7.0-rc5+, LLVM 4.0.0)|-1\nUHD #, Gen12 LP ReleaseInternal|-1",s="\n$ % 4090|1950\n$ % 4090 Laptop GPU|1790\n$ % 4070 Ti|1520\n$ % 3090 Ti|1465\n$ % 4080|1430\n$ % 4060 Laptop GPU|1410\n$ % 3080 Ti Laptop GPU|1390\n$ % 3080|1325\n$ % 3080 Ti|1300\n% A5500 Laptop GPU|1240\n$ % 3090|1235\n$ % 3070 Ti|1230\n$ % 3070|1230\n$ % 3060 Ti|1160\n$ % 3080 Laptop GPU|1140\n% A4000 Laptop GPU|1130\n$ % 2080 Ti|1120\n$ % 3070 Laptop GPU|1080\nTITAN V|1070\n$ % 2080 SUPER|1060\nQuadro % 8000|1050\n% A6000|1050\nTITAN %|1050\n$ % 3070 Ti Laptop GPU|1030\n% A5000 Laptop GPU|1030\n$ % 4090 Laptop GPU|1020\n$ % 3060|1015\nTITAN X (Pascal)|1010\nTITAN Xp|995\n$ & 1080 Ti|990\n$ % 4070 Laptop GPU|990\n$ % 4090|980\n$ % 2070 SUPER|980\n$ % 4080|975\n$ % 3060|970\n$ % 2080|970\n$ % 4080 Laptop GPU|970\n$ % 3060 Laptop GPU|910\n$ % 2060 SUPER|890\n$ % 4060 Laptop GPU|880\n$ % 2070|880\n$ % 2080 Super with Max-Q Design|870\n$ % 2080 with Max-Q Design|870\nQuadro % 5000|870\n$ % 3080 Ti Laptop GPU|860\nQuadro % 5000 with Max-Q Design|840\nAsus $ & 1080|840\n$ & 1080|840\n$ % 2070 Super with Max-Q Design|840\n% A3000 Laptop GPU|835\nQuadro % 4000 with Max-Q Design|830\n$ % 3070 Ti Laptop GPU|830\nQuadro % 4000|820\n% A6000|810\n$ & 1070 Ti|785\n$ % 4070 Ti|784\n$ % 4050 Laptop GPU|784\n% A5500 Laptop GPU|780\nTITAN Xp COLLECTORS EDITION|770\n$ % 2070 with Max-Q Design|765\n$ % 3050|760\n$ % 2060|760\n$ & 980 Ti|755\nQuadro P6000|750\n$ & 1080|750\nQuadro % 6000|744\n$ & 1070|740\n% A4000|740\n$ % 3090|740\n$ % 3080 Ti|730\n$ & 1080 Ti|730\nQuadro P4200|710\n$ & 1080 with Max-Q Design|707\n$ % 3060 Lite Hash Rate|705\nEIZO MED-XN83|700\n$ % 3080 Ti|700\n$ & 1660 SUPER|700\nTITAN Xp|700\nEVGA $ & 1070|700\n$ % 3090 Ti|700\nQuadro GV100|695\nQuadro P4000|695\n$ & 1660 Ti|690\n$ % 3070 Ti|690\n% 6000 Ada Generation|690\n$ % 3070|690\nQuadro % 8000|685\n% A2000 12GB|680\n$ % 2080|680\n$ & TITAN X|680\nQuadro M6000 24GB|680\n$ & 1660 SUPER|670\nTITAN V|670\nQuadro % 3000|670\nGraphics Device|670\n% A5000|670\n$ % 3090|670\nTITAN Xp COLLECTORS EDITION|670\n$ & 1070 A17|670\n$ % 3080 Laptop GPU|667\n% A4500 Embedded GPU|660\n% A5000 Laptop GPU|660\n$ % 3080|660\n$ % 3050 Ti Laptop GPU|650\n$ & 1070 with Max-Q Design|650\n$ % 3060 Ti|650\nQuadro P4200 with Max-Q Design|650\n$ % 3080|650\n$ % 2080 SUPER|650\n$ & 1070 Ti|648\n$ & 1070 with MaxQ Design|642\n% A3000 Laptop GPU|641\n$ % 3070 Laptop GPU|641\n$ & 1070|640\nGA104GL [% A4000]|639\n$ & 980 Ti|637\n$ % 2070 Mobile / Max-Q Refresh|637\n% A4000 Laptop GPU|634\n$ % 3060|633\nMicrosoft Virtual Render Driver|633\n$ % 3050 Laptop GPU|631\n% A2000|629\n$ % 2070 Mobile / Max-Q|626\n$ % 3070|625\nQuadro P5000|625\nQuadro P4000|621\n$ % 3060 Laptop GPU|621\n$ % 2060 with Max-Q Design|618\nGV102|614\n$ % 2070 SUPER|612\n$ & 1660|606\n$ % 2070|604\n$ & 1660 Ti with Max-Q Design|601\n$ & TITAN X|598\n% A2000 8GB Laptop GPU|598\n$ & TITAN Xp|595\n$ & 980|593\n$ % 2080 SUPER|591\n& 1060 HL|589\nTesla T4|589\nGRID P4-1Q|585\n% A4000|581\n$ % 2080 Ti|577\n$ % 2080 Super with Max-Q Design|576\nQuadro % 4000 Mobile / Max-Q|576\nTU102 [TITAN %]|574\n$ & 1060 with Max-Q Design|571\n$ % 2070 SUPER|570\n$ & 1060 6GB|570\n$ % 2080 Mobile|568\n$ % 2060|568\nQuadro P3200|565\nP106-100|564\nGRID V100DX-1Q|564\n% A2000|562\n$ % 2080 Ti Rev. A|561\n$ % 2080 Rev. A|559\nGV100 [TITAN V]|557\n$ % 2080|556\n$ & 1650 SUPER|554\nP106-100 Custom|553\n$ % 2070 Super with Max-Q Design|553\nGV100|553\n$ % 2070 Mobile|550\nGP102 [TITAN X]|548\n% A2000 12GB|546\n$ & 1060 5GB|542\nMSI $ & 1060|542\n$ % 2060 SUPER|542\nGRID T4-1Q|539\nQuadro % 5000 Mobile / Max-Q|538\n$ % 3050|538\n$ & 1060 3GB|538\nQuadro % 5000 with Max-Q Design|537\nQuadro M6000|536\n% A2000 Laptop GPU|536\n$ & 1660 SUPER|533\nA10-2B|530\nTITAN X (Pascal)|530\nQuadro P5000|527\n$ % 2070|526\n$ & 1080|525\n$ % 2060 Mobile|524\nPNY $ & 980|524\n$ & 1080 Mobile|523\n$ % 2060 SUPER|520\n$ & 780 Ti|518\n% A4500|516\n$ % 2060 Rev. A|515\nMSI $ & 980|515\nQuadro P3200 with Max-Q Design|513\n$ % 2070 with Max-Q Design|513\n$ % 3050 Ti Laptop GPU|510\nQuadro % 3000 Mobile / Max-Q|509\n$ & 1660 SUPER|508\nQuadro % 4000|508\n$ & 1060|506\n$ % 2080 with Max-Q Design|505\n$ & 1080 Ti|505\n$ & 1660 Ti Rev. A|504\n$ & 1660 Ti Mobile|504\n$ % 3050 Laptop GPU|503\n$ % 2060|503\nQuadro % 4000 with Max-Q Design|500\nEIZO MED-XN83|499\n$ & 970|499\n$ & 1080|495\n$ & 1070 Ti|492\n$ & 980|491\nA100-PCIE-40GB|489\n$ & 1070|487\n$ & 1660 Ti|487\nQuadro P2200|485\n$ & TITAN Black|484\nTITAN Xp COLLECTORS EDITION|483\nTITAN %|482\nQuadro P5200|482\n$ & 1060 with Max-Q Design|480\n% A1000 Laptop GPU|479\n$ & 1060 6GB|479\nQuadro % 5000|475\nTITAN V|475\nGRID P100-4Q|474\nEVGA $ & 970|472\n$ & 1650 SUPER|471\n$ & 1650 Ti|470\nQuadro % 3000|470\nQuadro M5000|469\nQuadro % 3000 with Max-Q Design|468\n$ & 980 Ti|467\n$ & TITAN|467\nQuadro P4200|466\n$ & 1070 with Max-Q Design|466\nQuadro M5000|466\n$ & 1080 Ti|466\nTesla M60|462\n$ & 1660|457\n$ & 1660|455\n$ % 2050|453\n$ & 1060|453\n$ % 2060 with Max-Q Design|453\nQuadro P3200 with Max-Q Design|452\nQuadro P4000|450\n$ & 1060 3GB|449\n$ & 1070|448\n$ & 1060 6GB Rev. 2|447\nGigabyte $ & 780 Ti|447\nTITAN Xp|444\n$ & 980M|440\nA10-4Q|439\n$ & 1080 with Max-Q Design|437\n$ & 1650 SUPER|435\nQuadro P5000|435\nQuadro P3000|434\n% A6000|434\n$ & 1060 3GB|433\n$ & 1070 Ti|432\n$ & 780|432\n$ & 1060 Mobile|432\nGigabyte $ & 970|431\n$ & TITAN Z|431\nQuadro K6000|429\n$ & 1650|425\n$ & 970|421\nTesla K20m|420\nQuadro GV100|419\nQuadro P4000|419\nQuadro P3200|417\n& 1060 HL|415\n% A2000 Laptop GPU|415\n$ & 780 by St3Phl3|414\nP102-100|412\nT1200 Laptop GPU|412\n$ & 780 Ti|411\n$ & 1060 6GB|408\n$ & 1650 Ti with Max-Q Design|407\nQuadro T2000 with Max-Q Design|407\nQuadro P2000|406\nQuadro P2200|406\n$ % 2060 Max-Q|405\n$ & 1650 Ti Mobile|403\n$ & 1060 Mobile 6GB|403\n$ & 1060 with Max-Q Design|401\n$ & 980|398\n$ % 2070 Rev. A|397\n$ & TITAN X|397\nTesla T4|395\nQuadro P6000|394\n$ & 1060 3GB|394\nQuadro M5000|393\n$ & 1060 with Max-Q Design|392\nPNY $ & 970|392\nQuadro T2000|391\nQuadro T1000 with Max-Q Design|391\nGRID P40-8Q|390\n$ & 780 Rev. 2|389\nQuadro GP100|387\n$ & 980|387\nP104-100|387\n$ & 1650 Ti|386\nGRID P40-4Q|384\n$ & 780 Ti|383\nDevice|383\nTU117M|381\nQuadro P2000|380\nQuadro % 6000|379\n$ & 1070 Mobile|378\nQuadro T1000|377\n$ % 3070 Mobile / Max-Q|376\n$ & 1060|376\nGRID V100-1Q|375\n$ & 780 Rev. 2|372\n$ % 2050|370\n$ & 770|370\n$ & 970|368\n$ & 1650 Ti|368\nGRID T4-2B4|368\nAsus $ & 780|366\nP106-100|365\nQuadro % 8000|365\n$ & TITAN Black|365\nGRID RTX6000-2Q|365\n$ & TITAN Black|363\nQuadro M4000|363\n$ & 1060 6GB|362\nQuadro P5000|361\n$ & 1650|361\nQuadro M5500|361\n$ & 780|360\n$ & 780|360\n$ & 980M|358\n$ & 1650|358\n$ & 1050 Ti|357\nQuadro P3200 Mobile|357\n$ & 1650 with Max-Q Design|356\nTesla T4|356\nQuadro P2000|356\n$ & TITAN|355\n$ & 970|355\n$ & 980 Ti|354\n$ & 1660 Ti with Max-Q Design|354\n$ & 780 Rev. 2|352\nGRID P4-4Q|351\n$ & TITAN X|351\nT1200 Laptop GPU|350\nGRID T4-8Q|350\n$ & 1060|349\n$ & 1050 Ti with Max-Q Design|348\n$ & 970M|346\nT1000 8GB|346\n$ % 3080 Mobile / Max-Q 8GB/16GB|346\n$ & 780 Ti|346\n$ & 680|346\n$ & 1660 Ti|345\n$ & 780|345\nQuadro M6000|344\nGRID T4-16Q|344\n$ % 2080 Ti|344\nGRID T4-1B|343\nQuadro K5200|342\nQuadro P2200|341\nT1000 8GB|341\nTesla K80|341\nQuadro T2000 Mobile / Max-Q|338\nTU107|337\n$ & 780 Mac|336\n$ & TITAN|336\n$ & 980M|335\nGRID P40-2Q|335\nEVGA $ & 780|334\n$ & TITAN Z|334\nTITAN X (Pascal)|332\n$ & 960|331\nTesla P40|331\n$ & 1650 Ti with Max-Q Design|330\nTesla P40|330\n$ & 1060se 3GB|329\n$ & 1650 Mobile / Max-Q|329\nQuadro T2000 with Max-Q Design|328\nT1000|327\n% A5500|326\nA40-8Q|326\n$ % 3060 Mobile / Max-Q|326\n$ & 690|326\nTesla V100-SXM2-16GB|326\nQuadro M5000|325\nA16-2B|323\n$ & 1050 Ti with Max-Q Design|321\n$ & 1050 Ti Mobile|321\n$ & 980M|319\nQuadro M3000M|318\n$ & 1650 with Max-Q Design|318\n$ & 670|316\nQuadro P3000|316\nT600 Laptop GPU|315\nQuadro T1000 with Max-Q Design|313\nTesla K80|312\nTesla K20m|311\n$ & 770|311\nTesla P100-PCIE-16GB|311\nQuadro M5000M|311\nTesla K80|309\nEVGA $ & 1070|309\nQuadro T1000|309\n$ & 1050 Ti|309\n$ & TITAN Z|308\nQuadro T2000|308\nQuadro M6000 24GB|308\n$ & 760 Ti|308\n$ % 2080 SUPER Mobile / Max-Q|308\n$ & 1050 Ti|307\nQuadro P2000|304\nQuadro P6000|304\n$ & 770 Mac Edition|303\nMSi $ & 1050 Ti|303\nA40|303\nT600|303\nP106-090|302\nP106-090|301\nQuadro K5200|300\n$ & 770|299\n$ & 680|299\n$ & TITAN|299\n$ & 680|297\nGRID M60-4Q|296\nQuadro M4000|296\nGRID M60-2Q|295\n$ & 760|294\nGRID V100DX-16Q|293\nQuadro % 6000/8000|293\n$ & 770|293\nGP104|292\n$ & 780 Rev. 2|290\n$ & 1050 Ti|288\n$ & 950|288\nEVGA $ & 1050 Ti|288\n$ & 1650 with Max-Q Design|286\n$ & 880M|285\n%NVIDIA_DEV.13D7.0580.1028%|283\nGP104GL|283\nGigabyte $ & 960|282\nQuadro K5200|281\n$ & 660 Ti|281\n$ & 670|281\nQuadro M4000|280\n$ & 580|280\nMSi $ & 960|280\nTesla M6|278\nPNY $ & 680|278\nT500|277\n$ & 1050|276\n$ & 1050 Ti with Max-Q Design|276\n$ & 690|276\n$ & 680|276\n$ & 670|275\n$ & 760 Ti|274\n$ & 1050 3GB|272\n$ & 880M|272\nTesla M60|272\nAsus $ & 960|271\nQuadro M4000|269\nT600|268\nTesla K20m|268\n$ & 760|268\nGP102 [TITAN Xp]|267\n$ & 960|267\n$ & 670|265\nQuadro T1000 Mobile|265\n$ & 1050|264\nTesla M60|264\nEVGA $ & 1080 Ti|263\n$ & 970M|263\n$ & 780M|262\n$ & 690|262\nAsus $ & 770|261\n$ & 1070 with MaxQ Design|261\nEVGA $ & 960|261\n$ & 960|260\nGRID T4-2Q|259\n$ & 970M|259\n$ & 960|259\nQuadro M3000M|258\n$ & 1060se 3GB|257\nTesla K10|257\nQuadro M3000M|257\nQuadro M2200|256\n$ & 690|255\n$ & 760|254\n$ & 880M|254\nQuadro K4200|253\nQuadro P2000 with Max-Q Design|253\nT550 Laptop GPU|253\nQuadro K5200|252\nMSI $ & 760|250\n$ & 580|249\n$ & 780M Mac Edition|249\n$ & 570|249\nTesla V100-PCIE-16GB|248\n$ GTX880M|248\n$ & 760|247\n$ & 570 Rev. 2|247\nAsus $ & 670|246\n$ & 580|246\n$ & 1050|245\nTesla P4|244\n$ & 680MX|244\n$ & 480|242\n$ & 1050|242\nQuadro 7000|241\nQuadro M4000M|241\n$ & 1050 Mobile|240\n$ & 660|240\n$ & 760 (192-bit)|239\nQuadro K5000|239\n$ & 760 OEM|238\n$ & 660 Ti|238\n$ & 775M Mac Edition|238\n$ & 965M|237\n$ & 870M|236\n$ & 950|236\n$ & 560 Ti 448 Cores|236\n$ & 780M|236\nQuadro P2000 with Max-Q Design|234\nMSI $ & 980 TI|234\nGRID K2|233\n$ & 1060 6GB OpenGL Engine|233\nPNY $ & 1060|233\nEVGA $ & 980|232\nGRID RTX6000P-6Q|232\n$ & 950|232\n$ & 950|232\n$ & 590|231\n$ & 1070 OpenGL Engine|231\nTITAN X (Pascal)|229\n$ & 1050 with Max-Q Design|229\n$ & TITAN Black|228\nQuadro K4200|227\n$ & 660 OEM|227\n$ MX450|225\n$ & 1050 with Max-Q Design|225\nQuadro P1000|225\nGraphics Device|225\nQuadro M2000|222\n$ & 1630|222\nQuadro M4000M|221\nQuadro K5100M|221\nEVGA $ & 760|221\n$ & 1070 Ti|221\n$ & 660 Ti|220\n$ & 570|220\n$ & 660 Ti|219\nQuadro K6000|219\n$ & 570 Rev. 2|219\n$ & 1050 with Max-Q Design|219\nTesla M40|218\n$ & 680M|217\n$ & 780M by Nick[D]vB|217\nAsus $ & 980 TI|217\n$ & 1060 3GB|217\nGraphics Device|217\n$ & 570 Rev. 2|216\n$ & 1060 3GB OpenGL Engine|216\n$ & 660|215\nPoint of View $ & 660 Ti|214\nGigabyte $ & 980|214\nQuadro K5000|213\nQuadro P1000|213\n$ & 480|213\n$ MX450|212\nQuadro K4200|211\nGRID K280Q|211\nAsus $ & 760|210\nQuadro P1000|210\n$ & 680MX|209\n$ & 1060 6GB|209\n$ & 660|209\n$ & 750 Ti|208\n$ & 780M Mac Edition|208\n$ & 775M Mac Edition|208\nGRID K520|208\nQuadro M2200|207\nGRID M60-8Q|207\nGRID K2|207\n$ & 775M Mac Edition|206\n$ & 560 Ti 448 Cores|205\n$ & 760 (192-bit)|205\nQuadro K5000|205\nGigabyte $ & 980 TI|204\n$ & 780M Mac Edition|204\nAsus $ & 660|204\nGRID M60-1B|202\n$ & 650 Ti BOOST|202\n$ & 480|202\n$ & 960M|201\n$ & 660 OEM|201\n$ & 780 Ti|201\nQuadro K5000|201\n$ & 780M Mac Edition|201\n$ & 870M|200\n$ & 680MX|200\n$ & 680MX|199\nQuadro P1000|198\nTesla P100 PCIe 16GB|198\nQuadro K5100M|198\n$ & 470|198\nQuadro P620|197\nAsus $ & 780|197\nQuadro 6000|196\nQuadro M1200|195\nQuadro K2200|195\n$ & 590|195\nQuadro M2000M|194\nQuadro M4000 OpenGL Engine|194\n$ & 870M|194\n$ & 1070|194\nEVGA $ & 750 Ti|194\nZotac $ & 680|193\nQuadro % 3000 with Max-Q Design|193\nT400|193\nQuadro M2200|193\nQuadro K4100M by nikey22|192\nGRID K2|192\n& 865M by iMacGFX|191\nQuadro M2000|191\n$ & 980M|190\n$ & 560 Ti|190\nPalit $ & 660|190\nGRID K260Q|189\nGRID M10-2Q|189\n$ & 660|189\n$ & 965M|189\n$ & 650 Ti BOOST|188\n$ & 675MX Mac Edition|188\nQuadro K5100M by nikey22|187\n$ & 680M|187\nZotac $ & 660|186\n$ & 650 Ti BOOST|186\n$ & 760 (192-bit)|185\nGRID M60-1Q|184\nGigabyte $ & 960|184\nQuadro M2000M Special Edition|184\n$ & 560 Ti|184\nInno3D $ GTX660|183\n$ & 1060|183\n$ & 675MX Mac Edition|182\nQuadro P600|181\n$ & 1080|181\n$ & 675MX Mac Edition|181\nQuadro P620|180\nGK104 Board - 20530501|180\nAshley|180\nQuadro M2000|179\n$ & 860M|179\nMSi $ & 1050 Ti|179\nAsus $ & 750 Ti|178\n$ & 750 Ti|178\n$ & 750 Ti|177\nEVGA $ & 980 TI|177\nAsus $ & 770|177\n$ & 760 OEM|176\n$ & 750|176\nQuadro P2000 Mobile|176\nQuadro K4100M|175\nT400 4GB|174\n$ & 1080 Ti OpenGL Engine|174\nQuadro K5000M|173\n$ & 960A|173\n$ & 560 Ti|172\nTesla M10|172\n$ & 1080 Ti|172\nGRID RTX6000P-6|172\nGK104 Board - 2051b502|172\n$ & 770M|172\n$ & 960M|172\n$ & 970|172\nGRID M10-2Q|171\n$ & 560 Ti OEM|171\nMSi $ & 970|171\nGK104GL [GRID K2]|171\n$ & 470|170\n$ & 560 Ti|170\nTITAN Xp|170\n$ & 870M|170\n$ MX350|169\nMSi $ & 580|169\n$ & 960M|169\nEVGA $ & 760|169\nQuadro K4000M|169\nT400|169\n$ MX350|168\n$ & 470|168\n$ & 560|167\nQuadro 6000|167\n$ & 1050 Ti OpenGL Engine|167\nQuadro M1200|167\nGigabyte $ & 970|166\n$ GT 1030|166\n$ GTX780M by nikey22|166\n$ GTX870M by nikey22|166\nTesla V100-PCIE-32GB|165\nQuadro K2200|165\nQuadro M1000M|165\nQuadro K2200|165\nAsus $ & 970|164\n$ & 750 Ti|164\nQuadro M2000M|164\n$ & 1050|164\n$ & 1050 Ti|163\nQuadro K5000|163\nGraphics Device|162\n$ MX250|162\nT500|161\nEVGA $ & 570|161\nQuadro M2000M|161\nQuadro K1200|159\n$ & 860M|159\n$ & 770M|159\nQuadro M1200|158\n$ & 675MX|158\n$ MX330|158\nQuadro K2200M|157\nQuadro K4000|157\n$ & 690|157\n$ & 860M|157\nMSi $ & 670|156\nQuadro K2200|156\nQuadro K4100M|156\n$ & 770M by Nick[D]vB|155\nTesla V100-SXM2-32GB|155\n$ & 1080 OpenGL Engine|155\nGigabyte $ & 670|155\nEVGA $ & 960|155\n$ & 750|155\n$ Pre-Release TITAN X (Pascal) OpenGL Engine|154\n$ & TITAN Xp|154\nAsus $ & 950|154\nQuadro K4100M|153\n$ & 960|153\n$ & 770M|153\n$ MX330|153\nQuadro M2200 Mobile|153\n$ MX250|153\n$ Pre-Release TITAN Xp OpenGL Engine|153\nQuadro P600|153\nQuadro M620|152\n$ & 1070 Ti OpenGL Engine|152\n$ & 770|152\n$ GT 1030|152\nTesla C2070|152\n$ & 650 Ti|152\nGRID K240Q|151\n$ & 480 OpenGL Engine|151\n$ & 750|151\n$ & TITAN|151\n$ & 760 (192-bit)|151\n$ & 560|151\n$ GT 1030|151\nQuadro K5000M|151\nQuadro P1000 Mobile|151\nZotac $ & 660|151\n$ & 460 v2|150\nGRID & P40-6|150\nMSi $ & 660|149\n$ & 780M|149\nMSI $ & 760|149\nP106-090|149\n$ & 950A|149\n$ MX150|149\nAsus $ & 1060|149\nUnknown|149\n$ & 980 Ti|148\nGRID T4-4Q|148\n$ & 465|147\nColorful $ & 960|147\nGigabyte $ & 750|147\nQuadro M1000M|147\n$ & 780 Mac|147\n$ & 460|146\nMSi $ & 960|146\n$ & 560|146\nQuadro K4000|145\n$ & 970M|145\nQuadro M1000M|145\nUnknown|145\n$ & 980|144\n$ & 950|144\n$ & 675M|144\nZotac $ & 960|144\n$ Pre-Release Graphics Device|144\n$ & 670 OpenGL Engine|143\nQuadro K4000|143\nEVGA $ & 580|143\n$ & 950M|143\n$ & TITAN Black OpenGL Engine|142\n$ & 760|142\nQuadro 5000|142\nMSI $ & 570 HD|142\n$ Pre-Release TITAN Xp COLLECTORS EDITION OpenGL E|142\n$ & 1050 OpenGL Engine|142\n$ & TITAN X|142\n$ & 880M|141\nGV-N660OC-2GD|141\n$ & 750|141\nQuadro M5000M|140\n$ & 970 OpenGL Engine|140\n$ & 675MX|140\nAsus $ & 760|140\nQuadro P5000 OpenGL Engine|139\n$ & 580|139\n$ & 675MX|139\nZotac $ & 750|139\nQuadro K1200|139\n$ MX150|139\n$ & 650 Ti|139\nQuadro K1200|139\n$ & 980 Ti OpenGL Engine|139\n$ & 580M|138\nAsus $ & 580|138\n$ & 770 OpenGL Engine|138\n$ GT 1010|138\n$ & 780 Rev. 2|138\nQuadro P2000 OpenGL Engine|138\n$ MX250|138\nQuadro K4000|137\n$ & 460 v2|137\n$ & 770M|137\nGigabyte $ & 570 HD|136\n$ & 465|136\n$ & 460 v2|136\n$ & 670|136\n$ & 590 OpenGL Engine|136\n$ & 780|135\n$ & TITAN Black|135\n$ & 660 Ti|135\nZotac $ & 560 Ti|134\n$ & 880M OpenGL Engine|134\n$ & 650 Ti|134\n$ & 760 OpenGL Engine|134\nnull Graphics Device|134\nQuadro M620|133\n$ & 780M Mac Edition|133\n$ MX150|132\nAsus $ & 570 HD|132\n$ & 775M OpenGL Engine|132\n$ & 850M|132\nAsus $ & 570|132\nQuadro K6000 OpenGL Engine|131\n$ & 850M|131\n$ & 460|131\n$ & 950A|130\n$ & 780M OpenGL Engine|130\nPoint of View $ & 660 Ti|130\n$ & 775M Mac Edition|130\nEVGA $ & 650 Ti|130\nEVGA $ & 750 Ti|129\n$ & 460|129\nQuadro P520|129\nGainward $ & 570|129\nAsus $ & 750 Ti|129\nQuadro K3100M|128\nQuadro K2200|128\nAsus $ & 560 Ti|127\n$ & 680|127\n$ & 680 OpenGL Engine|127\n$ & 950M|127\nGRID V100-2B|127\nGigabyte $ & 660 Ti|127\nN15E-GT|126\nQuadro K1200|126\n$ & 650 Ti|126\nGigabyte $ & 770|126\n$ & 660|126\nQuadro 5000|125\n$ GT 1030|125\n$ & 950M|125\n$ & 765M|125\nQuadro M5000|125\nGigabyte $ & 560 Ti|125\n$ & 580M|125\nQuadro M2000|124\n$ & 850M|124\n$ & 570 OpenGL Engine|123\nGainward $ & 750 Ti|123\nQuadro K2200M|123\n$ & 780M Mac Edition|123\n$ & 680MX OpenGL Engine|123\nQuadro K4200|123\n$ & 460 OEM|122\n$ & 670MX|122\nMSi $ & 560 Ti|122\n$ & 460 SE|122\nQuadro M4000|122\n$ GTX880M OpenGL Engine|122\nQuadro P620|121\n$ & 560 SE|121\n$ GTX880M by nikey22|121\n$ & 555|121\n$ & 965M OpenGL Engine|121\n$ & 850A|121\nQuadro K5000 OpenGL Engine|120\n$ & 580 OpenGL Engine|120\nQuadro K3100M|120\n$ & 650 Ti BOOST|119\n$ & 570M|119\n$ & 675MX OpenGL Engine|119\n$ & 775M Mac Edition|119\nZotac $ & 1050 Ti|118\n$ & 965M|117\nQuadro M600M|117\n$ & 780M by Nick[D]vB|117\n$ & 460 SE|117\n$ & 555|116\n$ & 670M|116\nQuadro K3000M|116\n$ & 780 Ti OpenGL Engine|116\nQuadro K4000M|115\n$ & 860M|115\nAsus $ & 660|115\nTesla C2075|114\n$ & 675MX Mac Edition|114\nZotac $ & 770|114\nGigabyte $ & 750 Ti|114\n$ MX330|114\n$ GT 1030|113\n$ & TITAN OpenGL Engine|113\n$ & 590|113\nQuadro K620|113\n$ & 780M|112\n$ & 560 Ti|112\nQuadro 6000|112\nEVGA $ & 560 Ti|112\nAsus $ & 960|112\nQuadro K5000|112\nPoint of View $ & 470|111\nPNY $ & 580|111\n$ & 770M|111\n$ GT 120|111\nMSi $ & 660|111\nGigabyte $ & 560|111\n$ & 680MX|110\n$ 945M|110\n$ & 765M|110\n$ & 950 OpenGL Engine|110\n$ Pre-Release Tesla C2075 OpenGL Engine|109\n$ & 550 Ti|109\n$ & 765M|108\nPNY $ & 750|108\n$ & 560 Ti 448 Cores|108\nQuadro P500|108\n$ & 670MX|108\n$ & 680MX|107\n$ & 460 SE|107\n$ & 675MX Mac Edition|107\n$ & 770M OpenGL Engine|107\n$ 945M|107\n$ & 675MX|107\nPNY $ & 570 HD|106\n$ & 745|106\n$ MX230|106\n$ & 670MX|106\n$ 845M|106\nQuadro K3100M OpenGL Engine|105\nQuadro P2000|105\n$ MX570 A|105\n$ & 750 Ti|104\n$ & 660 OEM|104\nQuadro M600M|104\n$ & 750|104\n$ & 645|104\nGP108|104\nQuadro P520|104\nZotac $ & 460|103\nChip Model|103\n$ & 670M|103\nQuadro T1000|103\n$ & 670M|103\n$ & 650|103\nZotac $ & 750|102\n$ & 460 OpenGL Engine|102\n$ & 860M OpenGL Engine|102\nQuadro 4000|102\nAsus $ & 480|102\nZotac $ & 650 Ti|102\n$ GT 755M|101\nGF100 Board - 10220000|101\n$ & 470M|101\n$ & 570 Rev. 2|101\n$ & 775M by iDopt Mac|101\n$ & 765M by Nick[D]vB|101\n$ & 570|101\n$ & 645|101\n$ & 550 Ti|100\n$ & 760M|100\n$ GT 1030 OpenGL Engine|100\n$ & 650|100\nQuadro P400|100\n$ & 480|99\nEVGA $ & 650|99\nEVGA $ & 560|99\n$ MX130|99\n$ MX130|98\nAsus $ & 460|98\nElitegroup $ & 460|98\nTesla V100-SXM2-32GB|98\n$ GT 755M|98\n$ & 760 Ti OpenGL Engine|98\nQuadro P520|97\n$ GT 755M Mac Edition|97\n$ & 1060 5GB|97\nPalit $ & 650 Ti|97\nMSi $ & 460|96\n$ & 650|96\nGigabyte $ & 580|96\nGigabyte $ & 460|96\n$ & 745|96\nEVGA $ & 550 Ti|96\n$ & 465|96\n$ & 460 SE|96\n$ & 765M|96\n$ GT 755M Mac Edition|96\nQuadro M520|95\nQuadro K620|95\nT1000|95\n$ & 745|95\nQuadro K620|95\n$ GT 755M|94\n$ & 660 Ti OpenGL Engine|94\nQuadro K3000M|94\nQuadro K4000|94\nQuadro K4000 OpenGL Engine|94\n$ & 560|94\n$ & 650 Ti OpenGL Engine|94\nZotac $ & 560|94\nAsus $ & 560|93\n$ & 650 Ti|93\n$ GPU|92\n$ & 460|92\nMSi $ & 650 Ti|92\n$ & 645|92\nGigabyte $ & 760|92\n$ & 660M|92\n$ GTS 450|92\n$ & 765M|92\nQuadro K2000D|92\nQuadro K2000|91\n$ GT 740|91\n$ & 650|91\nGRID M6-0B|91\nHP Quadro K620|91\n$ MX130|91\nQuadro K3000M by ST3PHL3|91\nQuadro 4000|90\n$ MX230|90\nQuadro K620|90\nQuadro K2100M by Nick[D]vB|90\nQuadro K3000M by nikey22|89\n$ GT 650M OpenGL Engine|89\nQuadro 4000|89\nQuadro K3000M|88\n$ & 660M|88\nQuadro K6000|87\n$ GT 755M Mac Edition|87\nPalit $ & 650|87\nQuadro P500|87\n$ & 570M|86\nGainward $ & 460|86\n$ & 950M|86\nQuadro K2000D|86\n$ & 650 Ti BOOST|86\nQuadro K2100M|86\n$ & 470|85\nQuadro K2000|85\nQuadro K2000|85\n$ GT 750M Mac Edition|85\n$ & 745|85\nGRID K220Q|85\n$ & 750 OpenGL Engine|85\nQuadro 5000M|84\nQuadro P400|84\n$ GTS 450|84\n$ GT 640 Rev. 2|84\n$ & 660M Mac Edition|84\nQuadro P400|84\nAsus $ & 560 SE|84\nPNY $ & 460|83\n$ GT 640 Rev. 2|83\n$ GTS 450 Rev. 2|83\n$ GTS 450|83\n$ GTS 450 Rev. 2|83\n$ & 645|82\n$ GPU|82\n$ & 560M|82\nQuadro K3000M|82\nQuadro K2100M by nikey22|82\nGigabyte $ & 750|82\n$ GT 740|82\n$ GT 750M Mac Edition|82\n$ & 765M OpenGL Engine|82\n$ & 645 OpenGL Engine|82\nQuadro K620|81\n$ & 550 Ti OpenGL Engine|81\nQuadro 4000M|81\nPNY $ & 550 Ti|81\n$ MX110|80\n$ & 760M|80\nMSi $ & 745|80\nQuadro K2100M OpenGL Engine|80\nQuadro K2000|80\nQuadro 5000|80\nQuadro K620 OpenGL Engine|80\nMSi $ & 745|80\n$ GT 755M OpenGL Engine|80\n$ & 660M|79\nGigabyte $ & 550 Ti|79\nMSi $ & 650|79\n$ & 560M|79\nQuadro P400|78\nQuadro K2100M|78\nQuadro K2100M|78\nZotac $ & 1050 Ti|78\nQuadro 3000M|77\n$ 940A|77\n$ & 460M|77\n$ & 550 Ti|77\n$ GT 545|77\n$ GT 650M Mac Edition|77\n$ 940MX|76\n$ & 650 OEM|76\n$ & 550 Ti|76\n$ GT 755M Mac Edition|76\n$ GT 740 OpenGL Engine|75\nGainward $ & 550 Ti|75\nQuadro K1200|75\n$ GT 650M Mac Edition|75\nEVGA $ & 650|75\n$ GT 750M Mac Edition|74\n$ & 745|73\n$ & 555|73\n$ & 650|73\nGainward $ GTS 450|73\n$ GT 650M|73\n$ GT 755M Mac Edition|73\n$ & 460M|72\n$ 930A|72\n$ 930MX|72\n$ 940MX|72\n$ MX110|72\n$ GT 750M Mac Edition|72\nQuadro 2000|72\n$ 845M|71\nQuadro 2000D|71\n$ GT 640 Rev. 2|71\n$ MX110|71\n$ GT 1010|71\n$ GT 545|71\nQuadro K1200 OpenGL Engine|71\n$ 940MX|71\n$ & 650 OpenGL Engine|71\nEVGA $ & 650 Ti BOOST|71\nQuadro K2100M|70\n$ GT 1010|70\nQuadro M500M|70\n$ GT 650M Mac Edition|70\n$ GT 640 OEM|70\nQuadro K2000D|70\nQuadro K2000 OpenGL Engine|70\n$ GT 750M Mac Edition|70\n$ GT 650M|69\nQuadro K1100M by Nick[D]vB|69\n$ GT 650M|69\n$ 940M|69\n$ GT 650M|69\nQuadro 4000|69\n$ GT 650M Mac Edition|69\n$ GT 745M|69\nGainward $ & 560 Ti|68\n$ 920MX|68\nQuadro M520|68\n$ GT 640|68\n$ 840M|68\n$ 9800 & / 9800 &+|68\n$ & 770M by Nick[D]vB|67\nZotac $ & 650|67\nAsus $ & 550 Ti|67\n$ GT 750M|67\nQuadro K3100M by nikey22|67\n$ GT 750M|67\n$ & 760 (192-bit) OpenGL Engine|67\nHP Quadro 4000|67\nQuadro K2000|67\n$ GTS 450 Rev. 2|67\n$ 930MX|67\n$ & 660M Mac Edition|66\n$ & 570|66\n$ GT 750M|66\n$ GT 650M Mac Edition|66\n$ GT 650M OpenGL Engine|65\n$ & 660M OpenGL Engine|65\n$ 930M|65\nPalit $ & 650|65\n$ & 760M|65\n$ GT 650M Mac Edition|65\n$ 940M|65\n$ GT 750M Mac Edition|64\n$ 940M|64\n$ GT 740|63\n$ 930MX|63\nQuadro 3000M|63\n$ GT 730|63\nQuadro K1100M|63\n$ GT 750M|63\n$ 840M|63\n$ GT 640 OEM|63\n$ 840M|63\n$ GT 640 Rev. 2|62\n$ GTS 450|62\nQuadro 2000|62\n$ GT 745M|62\n$ GT 740|62\n$ GT 640|62\nQuadro 2000|62\n$ & 660M Mac Edition|62\nQuadro K1100M OpenGL Engine|62\nQuadro K2000M|62\n$ & 680MX OpenGL Engine|61\nEVGA $ GT 730|61\nQuadro 2000D|61\n$ 840A|61\nMSi $ & 660 Ti|61\nQuadro K1100M|61\n$ GT 645M|61\n$ & 780M OpenGL Engine|61\nHP $ GT 730|61\nQuadro K5000M OpenGL Engine|61\nEVGA $ GT 640|61\n$ 920MX|60\nQuadro M500M|60\nQuadro K620M|60\n$ 930M|60\n$ 930A|60\n$ GT 640 OEM|60\n$ GT 640|60\nQuadro 2000M|60\n$ GT 640|60\n$ GT 640M Mac Edition|60\n$ GT 640M Mac Edition|60\n$ GT 640M Mac Edition|59\n$ GT 645M|59\n$ 930M|59\nGigabyte $ & 650 Ti|59\n$ GT 640 OEM|59\n$ 830M|59\nAsus $ GT 640|58\nMSI $ & 1070|58\n$ GT 555M|58\nQuadro K2000M|58\nQuadro K1100M|57\n$ GT 650M Mac Edition|57\nQuadro K2000M by Nick[D]vB|57\nEVGA $ & 650 Ti|57\n$ GT 640M|56\n$ GT 650M Mac Edition|56\n$ GT 445M|56\n$ 830A|56\n$ 9800 GT|56\nAsus $ GTS 450|55\n$ 830M|55\n$ 920MX|55\nQuadro 2000|55\nEVGA $ GT 545|54\nQuadro K2000M|54\n$ GT 650M Mac Edition|54\n$ & 280|54\n$ GT 640|53\nQuadro FX 2800M|53\nQuadro 3000M OpenGL Engine|53\n$ GT 740|53\nnull $ 920A|53\n$ GT 640M Mac Edition|52\n$ GT 635|52\nGraphics Device|52\n$ GT 640M|52\n$ & 660M Mac Edition|52\nQuadro 2000M|52\nQuadro 5010M|52\n$ GTS 250|52\n$ GT 445M|51\n$ GT 640M OpenGL Engine|51\n$ GT 640M|50\nEVGA $ GT 740|50\n$ GT 640M Mac Edition|50\n$ 730A|50\n$ 920M|49\nHP Quadro 2000|49\n$ GT 730M|49\nnull $ 920A|49\n$ GT 555M|49\n$ GT 640M LE|49\n$ GT 730M|49\n$ GT 730M|48\n$ GT 640M Mac Edition|48\nQuadro K2000M OpenGL Engine|48\n$ GT 640M LE|48\n$ GT 740M|47\n$ & 460M|47\n$ GT 440|47\n$ GT 440|46\n$ GT 640M Mac Edition|46\nQuadro P400|46\n$ GT 730|46\nDell Quadro 2000M|45\n$ GT 740M|45\n$ GT 740M|45\n$ GTS 450 Rev. 2|45\n$ 920M|45\n$ 920M|45\n$ 910M|44\n$ & 680M|44\n$ GT 730|44\nQuadro 2000M|44\n$ GT 635|43\n$ GT 720 OpenGL Engine|43\n$ GT 635|43\nQuadro K5200 OpenGL Engine|43\nZotac $ & 650|43\n$ GT 440|43\n$ GT 435M|42\n$ GT 735M|42\nGainward $ GT 630|42\nQuadro 1000M|42\n$ 820M|41\n$ & 680M OpenGL Engine|41\nMSI $ GT 635|41\n$ 820A|41\nTesla M10|41\nAsus $ GT 440|40\nAsus $ GT 630|40\n$ GT 820M|40\n$ 910M|40\n$ GT 820M|40\n$ GT 730|40\n$ GT 550M|40\n$ GT 430|40\n$ GT 540M|39\nAsus $ GT 720|39\n$ GT 630|39\n$ GT 530|39\n$ GT 635M|39\n$ GT 620M/630M/635M/640M LE|39\nNVS 5400M|39\nQuadro K600|39\nQuadro K610M|39\nAsus $ GT 730|39\n$ GT 630|39\n$ GT 440|39\n$ GT 630M|38\n$ 820M|38\nQuadro K420|38\nQuadro K610M|38\n$ GT 625M|38\nQuadro K1000M|38\nNVS 5200M|38\nGRID K1|38\nQuadro K600|38\nQuadro K420|38\n$ GT 630|38\nQuadro K600|37\nQuadro 600|37\nHP Quadro 600|37\nQuadro K1000M|37\nQuadro K610M|37\nGRID K180Q|37\nGRID K160Q|37\n$ GT 635M|37\nGigabyte $ GT 440|37\n$ 820M|37\n$ GT 530|37\n$ GT 540M|37\n$ GT 630 OEM|37\nQuadro K610M by Nick[D]vB|37\nNVS 510|37\n$ GT 630M|37\nQuadro 1000M|37\n$ GT 540M|37\n$ GT 530|37\nQuadro K1100M|37\nQuadro K620M|37\nQuadro 1000M|36\n$ GT 730|36\n$ 820M|36\n$ GT 430|36\nGRID K1|36\n$ GT 525M|36\nNVS 5200M|36\nNVS 510|36\nZotac $ GT 430|36\nQuadro K600|36\nAsus $ GT 730|36\nHP Quadro K4000|35\n$ GT 755M Mac Edition|35\n$ GT 630|35\nNVS 5400M|35\nNVS 5400M|35\n$ GT 640 OpenGL Engine|35\n$ GT 625M|35\n$ GT 630|35\n$ GT 430|35\nQuadro K600 OpenGL Engine|35\nQuadro K1000M|35\nZotac $ GT 630|35\nGigabyte $ GT 630|35\nGRID K140Q vGPU|35\n$ GT 710M|35\n$ GT 620M|35\n$ GT 720M|34\n$ 710M|34\nQuadro 1000M,|34\nQuadro K510M|34\n$ 9400 GT|34\nQuadro K1000M|34\n$ GT 635M|34\nQuadro K420|34\nGRID K180Q|34\nAsus $ GT 430|34\nQuadro K4100M|34\nGigabyte $ GT 730|34\n$ GT 620M|34\n$ GT 525M|34\nQuadro K420|34\nDell NVS 5200M|34\n$ 710A|34\n$ GT 425M|33\n$ GT 710B|33\n$ GT 525M|33\nQuadro 600|33\n$ GT 620M|33\nQuadro K600|33\nQuadro 600|33\n$ 610M/710M/810M/820M / GT 620M/625M/630M/720M|33\nMSI $ GT 730|33\n$ GT 710|33\n$ GT 435M|33\nNVS 510|33\nAsus $ GT 710|33\nNVS 510|32\n$ 710M|32\n$ GT 720M|32\n$ GT 730A|32\n$ GT 710M|32\nGIGABYTE $ & 660|31\nEVGA $ GT 710|31\n$ GT 710|31\n$ GT 710|31\n$ GT 425M|31\n$ GT 720|31\nEVGA $ GT 710|31\nQuadro K1000M by Nick[D]vB|31\nAsus $ GT 710|31\n$ GT 720|31\n$ GT 420M|30\n$ GT 710|30\nnull Graphics Device|30\n$ GT 240|30\n$ 810M|29\n$ GT 720M|29\n$ GT 710|29\nQuadro 600|29\n$ 810M|29\n$ GT 420M|28\nQuadro 410|28\n$ & 660M|28\nMSI $ GT 710|28\n$ GT 720|28\n$ GT 735M|27\n$ GT 720|27\n$ GT 720|27\n$ GT 630 OpenGL Engine|27\nQuadro 410|27\n$ GT 330M|26\n$ GT 420M|26\n$ GT 430|26\n$ 615|25\n$ & 760A|25\nToshiba $ GT 525M|25\n$ GT 520MX|25\n$ GT 620|25\n$ GT 625|25\n$ GT 710|24\nQuadro NVS 4200M|24\n$ 840A|24\n$ 610M|24\n$ 800M|24\n$ GT 420|24\n$ 705M|23\n$ GT 705|23\n$ 800M|23\n$ 610M|23\n$ GT 620 OEM|23\n$ GT 625|23\n$ GT 420|23\nQuadro NVS 4200M|23\n$ GT 520M|22\nNVS 4200M|22\n$ GT 620 OEM|22\nNVS 5200M|22\n$ GT 620 OEM|22\n$ GT 620|22\n$ GT 705|21\n$ GT 620|21\n$ GT 630 Rev. 2|21\nQuadro NVS 4200M|21\n$ GT 520M|20\n& 980M SLI|20\n$ GT 620|20\n$ GT 520M|20\n$ GT 520|19\n$ 410M|19\n$ 730A|19\n$ GT 520|19\n$ GT 610|19\nAsus $ GT 610|19\nNVS 310|18\n$ 410M|18\nNVS 315|18\n$ 605|18\n$ GT 610|18\n$ GT 520|17\n$ MX550|17\nNVS 4200M|17\nNVS 315|17\nNVS 310|17\n$ 410M|17\nPalit $ & 660|17\n$ 605|17\nNVS 310|17\n$ GT 415M|17\nZotac $ GT 610|17\n$ & 675M|17\n$ GT 610|16\nQuadro 4000M|16\nPNY $ GT 610|16\n$ GT 610|16\n$ 510|15\nMSi $ GT 610|15\n$ GT 735M|15\n$ GT 520|15\n$ 510|15\n$ GT 320M|14\n$ 9600M GT|14\n$ & 570M|14\nCorporation D3D12 (NVIDIA $ % 3080 Ti)|13\n$ 510|13\nQuadro FX 1800M|12\nAsus $ GT 520|12\n$ GT 705|12\nMSi $ GT 630|11\nQuadro 3000M|10\nGigabyte $ GT 610|10\nPegatron $ GT 420|9\n$ 210|8\n$ 9300 / nForce 730i|7\nNVS 3100M|7\n$ 8600 GT|5\n$ 8400 GS Rev. 3|4\n$ 8400 GS|3\n$ 9600 GT|2\n$ GT 550M|-1\n$ 8600 GTS|-1\n$ GT 520MX|-1\nEVGA $ & 460|-1\nEVGA $ & 970|-1\nGP106|-1\nGRID P4-2B|-1\nGainward $ & 650|-1\n$ 210|-1\n$ 310|-1\n$ 310M|-1\n$ 315|-1\n$ 315M|-1\n$ 320M|-1\n$ 405|-1\n$ 610M|-1\n$ 820A|-1\n$ 8300 GS|-1\n$ 8400 GS|-1\n$ 8400 GS Rev. 2|-1\n$ 8400 GS Rev. 3|-1\n$ 8400M GS|-1\n$ 8400M GT|-1\n$ 8500 GT|-1\n$ 8600 GT|-1\n$ 8600M GS|-1\n$ 8600M GT|-1\n$ 8700M GT|-1\n$ 8800 GT|-1\n$ 8800 GTS|-1\n$ 8800 GTS 512|-1\n$ 8800 &|-1\n$ 8800M &|-1\n$ 9200M GE|-1\n$ 9200M GS|-1\n$ 9300 / nForce 730i|-1\n$ 9300 GE|-1\n$ 9300 GS|-1\n$ 9300M GS|-1\n$ 9400|-1\n$ 9400M|-1\n$ 9500 GT|-1\n$ 9500M GS|-1\n$ 9600 GS|-1\n$ 9600 GSO|-1\n$ 9600 GSO 512|-1\n$ 9600 GT|-1\n$ 9600M GS|-1\n$ 9600M GT|-1\n$ 9600M GT / $ GT 220M|-1\n$ 9800 GT|-1\n$ 9800 &+|-1\n$ 9800 &/9800 &+|-1\n$ 9800M GTS|-1\n$ G 103M|-1\n$ G 105M|-1\n$ G105M|-1\n$ G205M|-1\n$ G210|-1\n$ G210M|-1\n$ GT 120|-1\n$ GT 120M|-1\n$ GT 130|-1\n$ GT 130M|-1\n$ GT 220|-1\n$ GT 220M|-1\n$ GT 230|-1\n$ GT 230M|-1\n$ GT 240|-1\n$ GT 240M|-1\n$ GT 240M|-1\n$ GT 320|-1\n$ GT 320M|-1\n$ GT 325M|-1\n$ GT 330|-1\n$ GT 330M|-1\n$ GT 335M|-1\n$ GT 435M|-1\n$ GT 520M|-1\n$ GT 525M|-1\n$ GT 555M/635M|-1\n$ GTS 240|-1\n$ GTS 250|-1\n$ GTS 360M|-1\n$ & 1180|-1\n$ & 260|-1\n$ & 260M|-1\n$ & 275|-1\n$ & 280|-1\n$ & 285|-1\n$ & 295|-1\n$ & 560 SE|-1\n$ & 750 v2|-1\n$ % T10-16|-1\n$ % T10-8|-1\nGigabyte $ & 1050 Ti|-1\nION|-1\nMSI $ GT 710|-1\nNVS 300|-1\nNVS 3100M|-1\nNVS 4200M|-1\nNVS 5100M|-1\nPalit & 680 JetStream|-1\nQuadro FX 1700|-1\nQuadro FX 1700M|-1\nQuadro FX 1800|-1\nQuadro FX 1800M|-1\nQuadro FX 2700M|-1\nQuadro FX 2800M|-1\nQuadro FX 3600M|-1\nQuadro FX 360M|-1\nQuadro FX 370|-1\nQuadro FX 3700|-1\nQuadro FX 3700M|-1\nQuadro FX 380 LP|-1\nQuadro FX 3800|-1\nQuadro FX 3800M|-1\nQuadro FX 4600|-1\nQuadro FX 4800|-1\nQuadro FX 4800|-1\nQuadro FX 5600|-1\nQuadro FX 570M|-1\nQuadro FX 580|-1\nQuadro FX 770M|-1\nQuadro FX 880M|-1\nQuadro K1100M by Nick[D]vB|-1\nQuadro K2000D|-1\nQuadro K2000M|-1\nQuadro K2100M by Nick[D]vB|-1\nQuadro NVS 135M|-1\nQuadro NVS 140M|-1\nQuadro NVS 160M|-1\nQuadro NVS 290|-1\nQuadro NVS 295|-1\nQuadro NVS 4200M|-1\nQuadro P4000 OpenGL Engine|-1\nSony $ 410M|-1\nZotac $ & 780|-1\n",u="\n@ ^ 7900 XT|2200\n@ ^ 7900 XT|1970\n^ 6800 XT|1960\n@ ^ 6900 XT (XTXH)|1930\n@ ^ 6900XT|1925\n@ PRO W6900X|1890\n^ 6900 XT|1850\n@ ^ 6900|1810\n@ ^ 7900 XTX|1770\nRX6800|1690\nFreddyVGA|1600\n@ PRO W6800|1560\n@ ^ 7900 XTX|1430\n@ ^ 6950 XT|1380\n@ ^ 6800 XT|1360\n@ ^ 6750 XT|1310\n@(TM) ^ 6850M XT|1290\n@ ^ 6700|1290\n@ ^ 6900 XT|1270\nSapphire Nitro+ ^ 6800|1260\n@ PRO W6800X|1250\n@ PRO W6800X Duo|1220\n@ ^ 6700|1210\n@ ^ 6800 XT|1180\nSapphire Nitro @ RX6650XT|1180\n@(TM) ^ 6750 XT|1160\n@ ^ 6800|1160\n@ ^ 6900 XT|1160\nASRock ^ 6650 XT Phantom Gaming|1160\n@ Navi23|1140\n@ ^ 6650 XT|1130\n@ ^ 6950 XT|1130\n@ 6800|1120\n@ ^ 6700 XT|1110\n@ Pro W6600X|1100\n@ ^ 6700M|1080\n@ ^ 6800M|1080\n@ ^ 5700 XT PJM|1060\n@ ^ 6800|1050\n@ ^ 6600 XT|1040\n@ ^ 6600 XT|1030\nASUS ^ 6600XT macOS Edition|1020\n@ ^ 6800M|1020\n@ Pro Vega II Duo|1015\n@ ^ 5700 Series|960\n@ ^ 6800/6800 XT / 6900 XT|960\n@ ^ 6600 XT|960\n@ Pro Vega II|955\n@ ^ 6650 XT|950\nNavi 10 5700 XT|950\n@ Pro Vega II|950\n@ ^ 5700 Series|950\n@ Pro W5700X|930\n@ ^ 6600|930\nASUS @ ^ 5700 XT|930\n@ Pro W5700X|920\n@ Pro 5700 XT|920\n@ ^ 6900 XT|920\n@ ^ 5700 XT|910\n@ Pro W5700|895\n@ ^ 6600/6600 XT/6600M|890\n@ ^ 6750 XT|880\n@ ^ 6600|870\n@ ^ 5700|855\n@ ^ 5700 XT 50th Anniversary|850\n@ VII|850\n@ ^ 5700 XT 50th Anniversary|840\n@ PRO W6800|840\n@ Pro Vega 64|820\n@ Navi10|820\n@ ^ 5600 XT|820\n@ ^ 6600M|800\n@ ^ 6800S|790\n@ Pro 5700 XT|780\n@ ^ Vega 64 8GB|770\n@ Pro 5700|770\n@ Vega Frontier Edition|770\n@ ^ Vega|760\n@ ^ Vega 56/64|760\n@(TM) ^ Vega|760\n@ Pro Vega 64X|740\n@ ^ 5600 XT|740\n@ PRO W6600|740\n@ Vega 64 LC|735\n@ ^ Vega 64.1|730\n@ ^ 6600M|730\n@ Pro 5700|720\n@ Vega Frontier Edition|710\n@ Vega Frontier|700\n@ Vega FE|700\n@ ^ 5700 XT|690\n@ Pro Vega 64|670\n@ Vega 64|670\n@ VII|660\n@ Pro WX9100|660\nSapphire @ ^ Vega 64 8GB|650\n@(TM) PRO W6600M|650\n@ ^ 5700 XT 50th Anniversary|650\n@ ^ 5700|640\n@ Pro W5700|640\n@(TM) Pro WX 9100|635\n@ ^ Vega 56|630\n@ ^ Vega 56|620\n@ Pro 5500 XT|620\n@ ^ 5600 OEM/5600 XT / 5700/5700 XT|620\n@ ^ 5500|620\n@ ^ 5500 XT|620\n@ Vega Frontier Edition|620\n@ ^ 5500M Series|610\n^ xxx|610\n@ Pro Vega 64X|610\n@ ^ Vega 64|610\n@ ^ 5600 XT|610\n@ Pro Vega 64|610\n@ ^ 6500 XT|600\n@ Vega|600\n@ Pro W5500|600\n@ ^ 5600M|600\n@ Pro Vega 56|600\n@ Pro Vega 64|590\n@ Pro 5600M|590\n@ Pro Vega 48|590\n@ Pro Vega II Duo|590\n@ ^ 590 Series|590\n@ ^ Vega 56 8GB|590\n@ Pro 5600M|590\n@ Pro WX 9100|590\n@ Pro 5300|580\n@(TM) R9 Fury Series|580\n@ ^ 6800 XT 16GB|570\n@ Pro 5600M|570\n@ Pro W5500X|560\n@(TM) ^ 5500M|560\n@ * 7870|560\n@ Pro W5500|550\n@ ^ 5500M|550\n@ R9 290X Series|550\n66AF:F0|550\n@ Pro 5500 XT|550\n@ ^ 580 Series|550\n@ ^ 5500XT|550\n@(TM) ^ 580X|540\n@ Pro 5500 XT|540\n@(TM) Pro W5500M|540\n@ Pro W5500X|540\n@ Pro W5500|540\nRadeonT ^ 5300|540\n@(TM) ^ 570 Graphics|520\n@ Pro 5300|520\n@(TM) ^ 6500M|520\n@ ^ Vega M GL|520\nASUS @ ^ 570 Series|520\nASUS @ ^ 580 Series|520\n@(TM) ^ 580|520\n@(TM) Pro V7350x2|520\n@(TM) ^ 480 Graphics|520\n@(TM) ^ 570 Graphics|515\n@ ^ 6400|510\n@ Pro 580X|510\n@(TM) R9 390 Series|500\n@ Pro 5300|500\n@ ^ 580 2048SP|500\n@ PRO W6400|500\n@ ^ 570 Series|500\n@ PRO W6800X Duo|500\n@ Pro 580|500\n@ ^ 5500 XT|500\n@ ^ 6400|490\n@ Pro 580|485\n@(TM) Pro WX 7100 Graphics|485\n@(TM) R9 290X|480\nSapphire @ ^ 580 Pulse|480\n@ ^ 6700/6700 XT / 6800M|470\n@(TM) ^ 580|475\n@ ^ 6700S|475\n@ R9 290X|470\n@(TM) ^ 470 Graphics|470\n@ R9 FURY / NANO Series|470\n@ Embedded E9560|470\nKamen Rider Black ^|460\n@(TM) E9550|460\n@(TM) ^ 580 Graphics|460\n@ ^ Vega 56/64|460\n@(TM) ^ 480|460\n@ ^ 6800 XT|460\n@ ^ 470 Series|460\n@ RX480|455\n66AF:F1|455\n@ Pro 480/575|455\n@ Embedded E9560|450\n@ FURY|450\n@ ^ 5600 OEM/5600 XT / 5700/5700 XT|450\n@ ^ 6600 XT|450\n@ * 6800 Series|445\n@ Pro 570X|440\n@(TM) ^ 470 Graphics|440\n@ Pro 575X|440\n@ ^ 470/480/570/570X/580/580X/590|440\n@ ^ 6600|440\n@ ^ Vega M GH Graphics|440\n^ 580|440\n@ ^ 570|440\n@ Pro 570|440\n@ ^ 590|440\n@(TM) ^ 470 Series|435\n@ ^ 6900 XT|435\n@ FURY X|430\n^ 590|430\n@ Pro 5500M|430\n???|430\n@(TM) ^ 570|430\n@ ^ 580|430\n@ * 8xxx|430\n@ R9 290|425\n@ Pro 5500M|420\n@ Pro 580X|420\n@ ^ 6700 XT|420\n@ ^ 480|420\n@ R9 290/390|420\n@ Pro 580X|420\n@(TM) Pro Duo|415\nEllesmere @ ^ 570|410\n@ R9-290X|410\n@ Pro 580|410\n@ R9 200 Series|400\n@ ^ 570|400\n@ Pro 470/570|400\n@ ^ 6800M|400\n@ ^ 5300M|400\n@ ^ 580 Series (POLARIS10, DRM 3.40.0, 5.11.9-141-tkg-pds, LLVM 11.1.0)|400\n@ Pro 5300M|400\n@ R9 285|400\n@ ^ 470|400\n@ Pro 575|390\n@ Pro 575X|390\n@ Pro WX 7100|390\n@ ^ 6700M|390\n@ ^ 470/480/570/570X/580/580X/590|380\n@ PRO W6600|380\n@ Polaris|370\n@ ^ 6500 XT|370\n@ Pro Vega 20|370\n@ * 7970|370\n@ Pro Vega 16|370\n@ ^ 6800|370\n@ Pro Vega 64 OpenGL Engine|370\n@(TM) R9 380 Series|360\n@ ^ 5700XT|360\nFirePro W8100|360\n@ Pro Vega 64|365\n@ Pro 570|365\n@ Pro 570X|360\n@ Pro Vega 64 OpenGL Engine|360\n@ R9 280x|360\n@ R9 380|360\n@ R9 280x|360\n@ R9 280x|360\n@ Pro Vega 56|360\nR9 280X Dual-X|360\n@ Pro Vega 56 OpenGL Engine|350\n@ * 7970|350\n@ * 7970X/8970/R9 280X|350\n@ R9 285|350\n@ R9 380X|350\n@ ^ 480|350\n@ ^ 5700 XT Series|350\nASUS @ ^ 470 Series|350\n@ Pro Vega 64|350\n@ R9 200 / * 7900 Series|340\nASUS @ ^ 470 Series|340\n@ Vega 56|340\n@ ^ 580 Series (AMD POLARIS10 / DRM 3.15.0 / 4.12.0-1-amd64, LLVM 4.0.1)|340\n@ Pro Vega 20|340\nR9 380|340\n@ * 7970|340\n@ ^ 5700 XT|330\n@ D700|330\nAsus @ R9 280|330\n@ R9 285|330\n@ R9 M395X|330\n@ ^ 5600 XT|330\nPowerColor @ R9 280|330\n@ R9 280|330\nFirePro W7100 Graphics Adapter|330\n@ R9 M295X Mac Edition|330\nASUS @ ^ 5700|330\n@ R9 380|330\n@ Pro Vega 16|325\n@ R9 290X|325\n@ RX5600|320\nASUS @ ^ 5500 XT|320\n@ R9 280|320\n@ * 7950/8950 / R9 280|320\n@ R9 M395|320\n@ ^ 6800/6800 XT / 6900 XT|320\nFirePro D700 (FireGL V)|320\n@ ^ 5500/5500M / Pro 5500M|320\nMSI @ ^ 6600 XT Gaming X|320\nFirePro W8000|315\n@ * 7950|315\n@ Pro W5700|315\nFirePro W7170M|310\n@ PRO W6800|310\n@ ^ 5500|310\n@ ^ 580 Special Edition|310\nRadeonT ^ 5500M|310\n@ R9 M395 (Bootcamp XG edition by bootcampdrivers.com)|310\n@ R9 360|310\n@ Pro WX 7100|310\n@ Pro WX 7100 Mobile|310\n@ ^ 5700 XT 50th Anniversary|310\nR9 xxx|300\n@ ^ 5700XT|300\n@ PRO W6400|300\n@(TM) R9 370 Series|300\n@ ^ 470/480/570/570X/580/580X/590|300\n@(TM) PRO W6600M|300\n@ * 8950|300\n@ R9 M395X|300\n@ R9 M395X|300\n^ Vega 64|300\n@ ^ Vega 11 Graphics|295\n@ Pro 270X|290\n@ ^ 580 2048SP|290\n@ * 7950|290\nVideo Controller (VGA Compatible)|290\n@(TM) R7 370 Series Graphics|290\n@ * 7950|290\nAsus @ R9 270X|290\n@ ^ 580X Series|290\n@(TM) ^ 5500M|285\n@ R9 270X|285\n^ xxx|285\nASUS R7 265 Series|280\n@(TM) R9 270|280\n731F:C1|280\n@ R9 M395X|280\n@(TM) R7 370 Series|280\n@ Pro V520 MxGPU|280\n@ R9 M395|280\nFirePro D700|280\n@ R9 270X|280\n@(TM) R9 200 Series|270\n@ ^ 5700|275\nRadeong 0.4 on AMD POLARIS10 (DRM 3.8.0 / 4.9.11-1-ARCH, LLVM 3.9.1)|270\n@ * 7870 XT|270\n@ R9 390X|270\n@(TM) ^ 570 Graphics|270\n@ * 7870 GHz Edition|270\n@ R9 390|270\nFirePro D700|270\n@ R9 M395|270\n@ R9 270|270\n@ ^ 5700 / 5700 XT|270\nASUS R7 370 Series|270\nFirePro W7000|270\n@(TM) Pro V7350x2|270\n@(TM) ^ 470 Series|270\n@ ^ Vega 64 OpenGL Engine|270\n@ ^ 5500M|265\n@ * 7950/8950 OEM / R9 280|265\n@ Vega Frontier Edition OpenGL Engine|265\n@ 7950 x2|263\n@ R9 270|263\n@ VII|263\n@ * 7xxx|262\nVideo Controller (VGA Compatible)|262\n@(TM) ^ 570|261\n@ ^ 5500 XT|261\n@ R9 M295X|261\nFirePro W7000 (FireGL V) Graphics Adapter|260\n@ R9 M390|260\n@ * 7870 GHz Edition|260\n@ R9 M390 (Bootcamp edition by bootcampdrivers.com)|260\n@ R9 370|259\nMetal|259\n@ * 7870|259\n@ ^ 470/570|258\n@(TM) R9 370|257\n@(TM) ^ 460|257\n@ ^ 560 Series|256\n@ R9 290|255\n@(TM) ^ 560 Series|255\n@ ^ 5300M|254\nFirePro W7000|254\n@ R9 290X|253\n67EF:E7|253\n@ * 7850|253\n@(TM) ^ 460 Graphics|253\nMSI @ ^ 580|251\n@ R9 290/390|250\nFirePro W8100 (FireGL V)|249\n@ Pro WX 9100 OpenGL Engine|248\n@(TM) ^ 560|247\n@(TM) ^ 560 Series|247\n@ Pro Vega II Duo|247\n@ * 7970M|246\n@ R9 290|245\n@ ^ 5600M|245\nFirePro D300|245\n@(TM) ^ 5600M Series|244\n@ ^ 590 Series|244\n@ R7 370 Series|244\n@(TM) ^ 560|243\nFirePro D300|243\n@ R9 390|243\n@ ^ 470/480/570/570X/580/580X|243\nFirePro D300|243\n@(TM) R7 370 Series|242\n@ R9 M390|241\n@ ^ 560X Series|241\nFirePro D300|241\n@ ^ 560|240\n@ R9 M290X|240\nGigabyte Vega 64 macOS Edition|239\n@ Pro 580|238\n@ Pro WX 4100|236\n@ Pro WX 7100 OpenGL Engine|236\n@ * - FirePro D300|235\nFirePro D500|234\n@ Pro 580 OpenGL Engine|234\n@(TM) E9260|234\n@ Pro WX 2100|233\nFirePro D500|232\nFirePro D500|232\n@(TM) ^ 6500 XT|232\n@ Pro 580X|231\n@ * 7850|231\n@ Pro 575|231\n@ Pro Vega 64X|231\nASUS R9 270 Series|230\n@ Pro 450|230\n@(TM) ^ 560 Graphics|230\n@ R9 M290|229\n@ Pro 560X|228\n@ Pro 480/575|228\nPitcairn PRO @ * 7850|228\nASUS @ ^ 5700 XT|227\n@ * 7870|227\n@(TM) Pro WX 5100 Graphics|226\n@ R9 370X|225\n@(TM) ^ 480|224\n@ HD7970M|224\nFirePro S9000 (FireGL V)|223\n@ ^ 550 640SP / ^ 560/560X|222\nMSI / AMD ^ 560 4G|222\n@ ^ 570 OpenGL Engine|222\nMSI RX650|222\n^ 480|221\nMSI / AMD ^ 560|221\nBaffin AMD @ ^ 560|221\nMSI Baffin RX650|220\n@ Pro 5700 XT|220\n@ Pro 570|220\n@ Pro 575 OpenGL Engine|219\nAsus @ R9 270X|219\n@ ^ ^ 560|218\n@ ^ 560 [Baffin]|218\n^ 460|218\n@ R9 370X|218\n@(TM) Pro WX 4100|217\nASUS R9 390 Series|217\n@ Pro 5600M|217\nR9 xxx|217\n@ * 7870 Series|217\n@ Pro ^ 560|216\nR9 280X Dual-X|215\n@ Pro 570 OpenGL Engine|214\n^ 560|213\n@ Pro WX 5100|213\nFirePro D700|213\n@(TM) R9 390 Series|213\n@ ^ 480|212\n@ ^ 560|212\n@ ^ 5500/5500M / Pro 5500M|212\n@ ^ 550 640SP / ^ 560/560X|211\n@ R9 FURY / NANO Series|211\nSapphire @ ^ 560|211\n@ ^ 460|210\n@ RX550/550 Series|210\ninc. @ ^ 480|209\n@(TM) ^ 550|208\n@ R9 M290X|206\n@ Pro 560 (Bootcamp XG edition by bootcampdrivers.com)|206\n@ RX460|206\n@ ^ 550 Series|205\nCustom GPU 0405|204\n@(TM) ^ 460|204\nASUS AMD @ R9-990X|204\n@ Pro 555X|203\n@ ^ 460/560|203\n@ * 7970X/8970/R9 280X|202\nASUS @ ^ 550 Series|201\n@ * 8950|201\nFirePro D500 (FireGL V)|201\n^ 5700XT|200\n@ 550 Series|200\n@ * 8470 + 7660D Dual Graphics|200\n@ * 7990|200\n@ ^ 560X|199\n@ ^ Vega|199\n@ * 7950 Series|198\n@(TM) ^ 540|197\n@ * 6970|197\n@ * 7970/8970 / R9 280X|197\n@ Navi14|197\n@ Pro 560|197\n@ ^ 550|197\n@ R9 285|196\n@ Pro W5500|195\n@ Pro Vega 56|195\n@ Pro 460|195\n@ ^ 470/480|194\n@ PRO Graphics|194\n@(TM) RX550|194\n@ Pro 560X|193\n@ Pro 570X|192\n66AF:F1|192\n@ ^ Vega M GH|190\n@ R9 M280X|190\n@ ^ 460/560D / Pro 450/455/460/555/555X/560/560X|189\n@ R9 280,|188\nCustom GPU 0405|188\n@ * 7790|187\n@(TM) ^ 480 Graphics|187\n@ Pro 455|186\n@ R9 260|186\n@ ^ 580 Series|186\n@ * 7950/8950 OEM / R9 280|186\n@ R9 290X|185\n@ R9 M290X|184\n@(TM) R9 370 Series|184\n@ Pro 555|184\n@ R7 260X|184\n@ * 6950|183\nFirePro W5000|183\n@(TM) R9 390X|182\nR9 270X Devil|182\n@(TM) ^ 470 Graphics (AMD POLARIS10 / DRM 3.23.0 / 4.15.0-1-MANJARO, LLVM 5.0.0)|182\n@ R9 380|182\n@(TM) Pro WX 9100|182\n@(TM) R7 360 Series|181\n@ ^ 570 Series|181\n@(TM) R9 M470X|181\n@(TM) R7 360 Series|181\n@ RX480|180\n@ R7 200 Series|180\n@ Pro WX 4150|180\n@ Pro WX 4100|179\n@ * 8xxx|179\nASUS R9 295X2 Series|179\n@ R9 390X|178\n@ * 5870|176\n@ Pro 560|176\n@ ^ 580 OpenGL Engine|175\n@ * 8950|175\nFirePro V(FireGL V) Graphics Adapter|175\nASUS @ ^ 580 Series|174\n@ Pro WX 4100|174\n@ Pro 460|173\n@ * 2600 XT|173\n@ Pro WX 4100|172\n@ * 8280|172\n@ Pro 575|171\n@ Pro 555X|171\n@ Pro WX 4130/4150|170\n@ ^ Vega M GH Graphics|170\nFirePro W5100|170\n@(TM) PRO WX 8200|169\n@ Vega Frontier Edition|169\n@ Pro 555X|168\nFirePro D700|168\n@ * 6990|167\n@ ^ 470 OpenGL Engine|167\n@ * 7870 XT|167\n@ ^ 580|167\n@ Polaris|167\nFirePro V8800 (FireGL V)|166\n@ ^ 550|165\n@ * 6900 Series|165\nFirePro W9100 (FireGL V)|164\n^ 580|163\n@(TM) ^ 580X|163\n@ ^ 550|163\n@ * 6870|163\n@ R9 M395X OpenGL Engine|163\n@(TM) R9 360|163\n@(TM) * 8490|162\n@ R9 M295X|162\n@ * 7970M|162\n@ R9 M380|161\nFirePro W5100 (FireGL V) Graphics Adapter|161\nASUS HD7850 Series|161\nFirePro M6100 FireGL V|161\n@ Pro 455|160\n@ ^ 460/560D / Pro 450/455/460/555/555X/560/560X|160\n@ R9 M395X|159\n@ ^ 560X|159\n@ Pro 555|158\nRadeonT ^ 560X|158\n@ Pro Vega 48|158\nASUS @ ^ Vega|158\n@ Pro WX 9100|158\n@ Pro Vega 64|157\nPowered By QiongB A9999999999|157\n@(TM) Pro Duo|157\nFirePro D700|157\n@ Pro WX 7100|156\n@ ^ 460|156\n@ * - FirePro D700 OpenGL Engine|156\n@ R9 M290X|156\n@ R9 M395 OpenGL Engine|155\n@ Pro SSG|155\nFirePro D300|155\nASUS R9 380 Series|155\n@(TM) R9 Series|153\n@ ^ 470/480/570/580|153\nFirePro W8000|153\nCezanne|153\n@(TM) Graphics|153\nFirePro D300|153\n@(TM) R9 Fury Series|153\n@ R9 M395|152\n@ ^ 570|152\n@ R9 270X Series|152\n@ Pro 5300M|152\nR9 xxx|152\n@ Pro 555|152\nFirePro D500|151\n@ * 5850|151\nFirePro D300|150\n@(TM) R9 290X|150\n66AF:F0|149\n@(TM) ^ 560|149\n@ R9 M290|148\n@ Instinct MI25 MxGPU|148\nFirePro V7800 (FireGL) Graphics Adapter|148\n@(TM) R9 M470|147\nAdvanced Micro Devices, Inc. [AMD/ATI] Fiji [@ R9 FURY / NANO Series]|147\n@ * 5870 Series|147\n@(TM) E9550|147\n@ * 7850|147\n@ * 7770|147\n@ Pro Vega 20|146\n@ R9 290/390|146\n@ Pro 450|146\n@ ^ 560X Series|146\n@ * 6850|146\n@ R9 270 1024SP|145\nASUS R9 280X Series|145\n@ Pro 450|145\n@(TM) R9 390 Series|145\nFirePro V7900 (FireGL V)|145\n@ R9 370X|145\n@(TM) ^ 560 Series|144\nASUS R7 250X|144\n@ ^ 480 OpenGL Engine|144\n@ R9 290X|144\n@ ^ 550X|144\n@(TM) ^ 580|144\nASUS @(TM) ^ 470 Series|143\nBaffin @ ^ 560|143\n@ R9 M295X (Bootcamp edition by bootcampdrivers.com)|143\n@ R9 M295X Mac Edition|143\n@ R7 Series / * 9000 Series|142\nAdvanced Micro Devices [AMD] nee ATI Device|142\n@(TM) Pro WX 7100 Graphics|142\n@ ^ 640|142\nFirePro D500|141\n@ * 7900 Series|141\n@ R9 290|141\n@ R7 250X|141\n@(TM) ^ Vega|140\n@ 630 Series|140\nFirePro W8100 Graphic Adapter|140\n@ R9 FURY / NANO Series|140\n@ R9 M390|140\n@ Pro WX 3100|140\n@ R9 290|140\n@(TM) R9 370|140\nFirePro V7900|139\n@ * 7970|139\n@ * - FirePro D500 OpenGL Engine|139\n@ * - FirePro D300 OpenGL Engine|139\n@ Pro 580|139\n@ * 7770|139\n@ * - FirePro D500 OpenGL Engine|139\n@ 540/540X/550/550X / ^ 540X/550/550X|138\nFirePro S9050|138\n@(TM) ^ 480 Graphics|138\n@(TM) R9 M390X|137\n@ Vega 64|137\n@(TM) Graphics|137\nTonga PRO GL [FirePro W7100]|136\nHD7950 Martin Ver.|136\n@ * 7990|135\n@ R9 280x|135\n@ RX550/550 Series|135\nHD7950 MARTIN REV.|134\n@ RX560|134\n@ R7 250X Series|134\n@ R9 M390 OpenGL Engine|134\nASUS R7 250X|134\n@ HD6870|134\n@ R9 270X|134\n@ Pro 5500 XT|134\n@(TM) ^ 480|133\n@ R9 270|133\nASUS HD7970 Series|133\n@ ^ 540|133\n@ 500 Series|132\n@ * 5970|132\n@ * 7770 GHz Edition|132\n@ * 5870|132\n@ 540X Series|132\n@ * 6870 Series|132\n@(TM) ^ 470 Graphics|132\n@ * - FirePro D300 OpenGL Engine|132\n@ * 7xxx|131\n@ * 5970|131\nRadeonT 540X|131\n@ R7 Graphics + R7 350 Dual Graphics|131\n@ R9 M295X Mac Edition / R9 380X|131\nFirepro M5100|131\n@(TM) R9 M375X|131\n@ R9 280x|130\n@(TM) ^ 560X|130\n@ * 6990|130\n@ Pro 5500M|130\n@ Pro WX 5100 OpenGL Engine|129\n@ R9 M395X (Bootcamp edition by bootcampdrivers.com)|129\n@ R9 M380|128\nFirePro W5170M|128\n@ R9 280|128\nFirePro W5000 (FireGL V)|128\n@(TM) ^ 5600M Series|128\n@ ^ 560D|128\nFirePro D500 (FireGL V)|128\n@(TM) Pro WX 5100 Graphics|128\n@(TM) ^ Vega 11 Graphics|128\n@ * 7970|127\n@ R9 370|127\n@ * 7770|127\n@ R9 M395X|126\n@ * 7660D|126\n@ * 8970|126\n@ R9 200 Series|126\n@ Pro WX 3200 Series|126\n@ * 7800 Series|125\n@ R9 285/380|125\n@ R9 270X|124\nFirePro W2100|124\nFirePro W7170M|124\n@ * 7870 GHz Edition|123\nRadeong 0.4 on AMD TONGA (DRM 3.1.0, LLVM 3.9.0)|123\n@ ^ 460|123\n@ * 5970 Series|123\n@ R9 M380|122\n@ R9 M395|122\nAsus @ R9 280|122\n@ * 6850 Series|122\n@(TM) ^ 540|122\n@ * 6900 Series|122\nDevice|122\n67DF:C4|121\n@ * 6950|121\nFirePro D300 (FireGL V)|121\n@ ^ 570|121\n@ * 5850 Series|121\n@ * 7870 XT|121\n@ * 7950|121\nFirePro V7800 (FireGL) Graphics Adapter|121\n@ * 6850|121\n@ * 7950|120\n@ * 7870 GHz Edition|120\n@ R7 370 / R9 270X/370X|120\n@ * 6870|120\n@ Pro V340|120\nASUS @ ^ 570 Series|119\n@(TM) R7 370 Series Graphics|119\n@(TM) ^ 580 Graphics|119\n@(TM) ^ 470 Graphics|119\n@ * 5870|119\n@ * 7950/8950 / R9 280|119\n@ * 6790|119\n@(TM) RX580|119\nASUS ARES2|119\n@(TM) R9 380 Series|118\n@ * 7750|118\n@ Pro 560X|118\n@ R7 250E|118\n@ 550 Series|118\n@ ^ 560|118\n@ Pro WX 5100|117\n@ R7 370 / R9 270X/370|117\n@ * 7800 Series|117\nFirePro W5000 (FireGL V) Graphics Adapter|117\n@ * 7750 Series|116\n@ * 5870|116\n@ R7 450|115\nFirePro R5000|115\n@ R7 370 Series|115\nFirePro W9100|114\n@ R7 370 / R9 270/370|114\n@(TM) 540 Graphics|114\n@ * 6510 Series|114\n@(TM) R7 370 Series|113\nSapphire @ HD6870|113\nFirepro M5100|113\n@(TM) ^ 550|113\n@(TM) Pro Duo|113\n@ 540/540X/550/550X / ^ 540X/550/550X|113\n@ Pro 570|112\n@ R9 280|112\nFirePro D700 (FireGL V)|112\n(ATI) FirePro M6000 (FireGL V) Mobility Pro Graphics|112\nRenoir|112\n@ 540X Series (POLARIS12, DRM 3.40.0, 5.10.56-1-MANJARO, LLVM 12.0.1)|112\n@ * 6970|112\n@ * 8770|112\n@ Pro WX3200 Graphics|112\n@(TM) R9 270|111\n@ R9 270X|111\n@ R9 285|111\n@ * 7800M Series|111\n@(TM) R7 370 Series|111\n@ * 7870M Series|111\n@ Pro 450/550|110\n@ * 7000 series|110\n@ * 7870|110\n@ Pro 555X|110\n@ RX590 GME|109\nFirePro S10000|109\n@ * 7870M|109\n@ * 5800 Series|109\n@ * 6970M|108\nASUS HD7770 Series|108\n@(TM) R9 M360|108\n@(TM) ^ 550X|107\n@ R9 285|107\n@ * 6900M Series|107\n@ * 7870 GHz Edition|107\nFirePro S7000|107\n@ R9 M370X|106\n@ Pro WX 4100|106\n@ * 6800 Series|106\n@ * 7750|106\n@ Pro 455 OpenGL Engine|106\nASUS R7 370 Series|106\n@ Pro 560|105\n@ * 6870|105\nFirePro D300 (FireGL V)|105\n@ * 6970M|105\n@ * 7850|105\n@(TM) R9 200 Series|104\nASUS HD7750 Series|104\n@ * 6970M OpenGL Engine|104\nAsus @ R7 250|104\n@ R7 370 / R9 270X/370|104\n@ R9 M395X (Bootcamp XG edition by bootcampdrivers.com)|103\n@(TM) ^ 560|103\n@ ^ Vega|103\n@(TM) Pro W5500M|103\n@ R9 270|103\n@ Pro 560X|103\n@ * 5850|103\nFirePro S7150|103\n@(TM) ^ 580|103\n@(TM) R9 370 Series|103\nASUS @(TM) ^ 480 Series|102\n@ Graphics Processor|102\n@ R9 M370X|102\nFirePro W7100|102\n@ R9 M370X|101\n@ Pro 460 OpenGL Engine|101\n@ ^ 580 Series|101\n@ 500 Series|100\n@ Pro 555|100\n@(TM) Pro WX 4100|100\nAsus @ R7 260X|100\n@(TM) ^ Vega 10 Graphics|100\n@ * 7790|99\n@ Pro 450 OpenGL Engine|99\n@ * 7790/8770 / R7 360 / R9 260/360|99\nFirePro M4000 Mobility Pro Graphics|99\n@ * 7970M|99\n@ R9 M270X|99\n@ ^ 550|98\n@ * 6850|98\n@(TM) ^ 460|98\n@(TM) ^ Vega11 Graphics|98\n@(TM) ^ 460 Graphics|98\n@ Pro 460|97\n@ * 7800 Series|97\nMatrox C680 PCIe x16|97\n@(TM) ^ 550|97\n@ * 5770|96\n@ * 8670D + 7700 Dual Graphics|96\n@ * 7790|96\n@ 630 Series|96\n@ ^ 560 Series|96\nFirepro M6100|95\n@ * 6700 Series|95\n67EF:E7|95\n@(TM) Vega 10 Graphics|95\n@ * 6900M Series|94\n@ Pro 455|94\nFirePro M4000|94\n@ R9 260|94\nFirePro W7000|94\n@ Instinct MI25|93\n@ * 8870M|93\n@(TM) Vega 11 Graphics|93\n@ Pro 450|93\nFirePro W5000|92\n@ * 6770|92\n@(TM) RX560|92\n@(TM) Graphics|91\nASUS @(TM) ^ 460 Series|91\n@(TM) Vega 8 Graphics|91\n@(TM) Graphics|91\nFirePro W5100 Graphics Adapter|90\n@(TM) Pro WX Series|90\nRenoir|90\nSTRATO XT (6646)|89\n@(TM) Pro WX 4150 Graphics|89\n@ E8870MXM|89\n@ * 8970M|89\nFirePro M6100 FireGL V|89\n@ * 7770|89\nFirePro W5100 (FireGL V) Graphics Adapter|89\n@ * 6970M|89\n@ Pro 460|88\n@ ^ Vega 8 Graphics|88\n@ * 7700 Series|88\n@(TM) R9 M360|88\nASUS R7 265 Series|88\n@ ^ Vega M GL Graphics|88\nASUS @ ^ 550 Series|88\n@ R7 360 / R9 360|88\n@ * 6950|86\n@ * 6790|86\n@ Pro WX 2100|86\nASUS @ ^ 560 Series|86\n@ * 5750|86\n@(TM) ^ 640|86\n@ * 8870M|85\n@ R7 260X|85\n@ Pro WX 7100|85\n@(TM) R7 360 Series|85\n@ Infoshock™ ^ 460 Graphics|85\nFirePro W5170M|85\n@ R9 M295X|85\nFirePro W8100|85\n@ * 6750|85\nFirePro W5170M|85\nFirePro V5800 (FireGL) Graphics Adapter|84\nASUS R7 250X|84\n67E8:00|84\n@(TM) ^ 550X|84\n@(TM) R7 350|84\n@(TM) E9260|84\n@ Sky 500|84\n@ R9 M270X|83\n@(TM) R9 350|83\n@(TM) ^ Vega 11 Graphics|83\nFirepro M6100|83\n@ R9 360|82\nFirePro V7900|82\nFirePro V5800 (FireGL V)|82\n@ * 8830M|82\n@ Pro 450|82\n@ * 8950|82\n6980:00|82\nFirePro W5100 (FireGL V)|81\n@ E8870|81\n@ * 7750 Series|81\n@ * 7850 / R7 265 / R9 270 1024SP|81\nFirePro™ W4190M|80\n@ * 5770|80\n@(TM) R7 360 Series|80\nFirePro M5100 FireGL V|80\n@ ^ 470/480/580|80\n@(TM) ^ 460 Graphics|79\n@ * 6700 Series|79\nMobility @ * 5870|79\n@ R9 255|79\n@ 535 Series|79\n@ R9 M380 OpenGL Engine|78\n@(TM) ^ 550|78\n@ R9 M380|78\n@ R7 250X|78\nSaphire @ ^ 580|78\nRadeong 0.4 on AMD BONAIRE (DRM 2.43.0, LLVM 3.8.0)|78\n@ * 5000|78\n@ * 5770|77\n@ ^ 460|77\nFirePro W4300|77\n@ 530 Series|77\n@(TM) 540X|77\n@ R9 M370X OpenGL Engine|77\nFirePro V5900 (FireGL V)|77\n@ Pro WX 4100|77\nSAPPHIRE * 5770|77\n@ Pro WX 3100|76\nFirePro W5100|76\n@(TM) Pro Graphics|76\n@ Pro WX 3100|76\n67FF:C8|76\n@(TM) HD8970M|76\nFirepro M5100|76\n@(TM) R9 M375X|75\n@ 550X Series|75\n@ R9 M390|75\n@(TM) Vega 9 Graphics|75\nFirePro V5900 (FireGL V) Graphics Adapter|74\n@ * 8570|74\n@(TM) ^ 475M|74\n@ * 6770|74\n@ ^ 550 Series|74\n@ ^ 550|74\nFirePro M4000|74\n@ ^ 460/560D / Pro 450/455/460/560|74\n@ Pro 560|74\n@ Vega Series / @ Vega Mobile Series|74\n@ Pro 455|74\n@ * 7870M Series|74\n@(TM) R7 430|74\n@ 620 Series|73\n@ * 7770 GHz Edition|73\n@ * 7770|73\n@(TM) R9 360 Series|73\n@ * 7770/8760 / R7 250X|73\n@(TM) 530|73\n15DD Graphics|73\n@ ^ Vega M GL Graphics|73\n@(TM) R9 380|72\n@(TM) 530 series|72\n@ R7 200 Series|72\nEmbedded @ E9171|72\n@ Pro WX3200 Graphics|71\n@ * 8800M Series|71\n@ R9 M375|70\n@ * 5770|70\n@ Pro 555|70\n@ R7 250E|70\n@ * 7750|70\n@ Pro 555X|70\n@(TM) Vega 8 Mobile Graphics|70\n@(TM) R9 M380|69\n@ R7 260X/360|69\nBarco MXRT 7600 (WDDM)|69\n@(TM) Vega 10 Graphics|69\n@ * 7750|69\n@ R9 M370X|69\n@(TM) R2E Graphics|69\n@ R9™ M370X|68\nFirePro V4900 (FireGL V)|68\n@(TM) ^ Vega11 Graphics|68\n@ * 5770|68\n@(TM) Renoir Graphics D1|68\n@ * 7600 Series|67\n@ R5 340|67\n@(TM) Vega 9 Graphics|67\nFirePro W4100 (FireGL V) Graphics Adapter|67\n694E:C0|67\n694C:C0|67\n@ R7 250|66\n@ * 6750|66\nRAVEN (DRM 3.36.0, 5.6.5-AMD, LLVM 9.0.1)|66\nFirePro W600|66\n@ R9 255|66\n@ ^ 470|66\n@(TM) R7 250|66\nFirePro V5900|65\n@(TM) 530|65\n@ Pro WX Vega M GL Graphics|65\n@ ^ 470/480|65\n@ * 5750|65\n@ R7 260X|65\nFirePro V5900 (FireGL V) Graphics Adapter|65\nFirePro W4100 Graphics Adapter|65\n@ * 6700 Green Edition|65\n@ R9 M370X|65\n@(TM) R7 350X|64\n@(TM) R7 350X|64\n@ * 7670|64\n@ R9 M200X Series|64\n@ R9 M370X|64\n@ * 6670|63\n@(TM) * 8350|63\n@ 530X Series|63\n@(TM) R9 360|63\n@(TM) Pro WX 4150 Graphics|63\n67EF:C5|63\n@ R7 Graphics + R5 340 Dual Graphics|62\n@ * 5670|62\n@ ^ 470/570|62\n@ 530 Series|62\n@ R7 250 Series|62\n@ R7 430|62\n@ * 6750 Graphics|62\n@(TM) R9 M385X|62\n@(TM) Vega 10 Mobile Graphics|62\nFirePro V5900 (FireGL V)|61\nFirePro V5800 (FireGL V)|61\n@(TM) Vega 8 Graphics|61\nFirePro V4800 (FireGL V)|61\n@ * 7600 Series|61\n@(TM) Vega 6 Graphics|61\n@(TM) R9 200 Series|61\n@ * 8850M|61\n@ RX460|61\n@ R7 M460|61\n@ ^ 640 Series|60\n@ 530|60\n@ * 5600/5700|60\n@ * 5750 Series|60\n@ R7 Graphics + R7 200 Dual Graphics|60\n@ R7 450|60\nFirePro V4900|60\nFirepro W6150M|60\nASUS R7 250 Series|60\n@(TM) ^ 560 Graphics|60\n@(TM) R7 M370|59\nFirePro M4000 Mobility Pro Graphics|59\n@ R5 430|59\n@ R9 M275X|59\nFirePro V5800 (FireGL) Graphics Adapter|59\nMobility @ * 5870|59\n@(TM) R9 M385X|58\n@ * 7750M|58\n@ * 5670|58\n@ * 8850M|58\n@ * 7700M Series|58\n@ * 8670D + R7 200 Dual Graphics|58\n@ R7 Series / * 9000 Series|57\n@ * 6730M/6770M|57\n@(TM) 625|57\n@(TM) R9 M385|57\n@ * 5870M|56\n@ 610 Series|56\nFirePro W4100|56\nFirePro M6000 Mobility Pro Graphics|56\n@ ^ 540 Series|56\n@ R7 240|56\n@ * 7560D + * 7700 Dual Graphics|56\n@ R9 M370X (Bootcamp XG edition by bootcampdrivers.com)|56\nFirePro V4900 (ATI FireGL)|55\n@(TM) R7 M350|55\nFirePro M6000 Mobility Pro Graphics|55\n67FF:08|55\n@ * 5750|55\n@ * 7570|55\n@(TM) Vega 11 Graphics|55\n@ R7 M460|55\n@ * 5750 OpenGL Engine|55\n@(TM) R7 M370|55\n@ * 6730M/6770M/7690M XT|55\n@ E8860|55\n@ * 8790M|54\n@ * 6770M|54\n@ R7 M440|54\n@(TM) R7 350|54\n@(TM) R7 350X|54\n@ * 7870 XT|54\n@ * 7800M Series|54\n@ 520|54\n@ R7 M370|53\nFirePro W4150M FireGL V|53\n(ATI) FirePro M4000 (FireGL V) Mobility Pro Graphics|53\n@ R9 M200X Series|53\n@ * 6700M/7700M/7900M Series|53\n@(TM) 620|53\nPicasso|53\n@(TM) ^ Vega 10 Graphics|53\n67EF:CF|53\n@(TM) Vega 3 Graphics|53\n@ R7 250|53\nFirePro W4190M|53\n@(TM) Vega 8 Graphics|53\n694C:C0|52\n@ * 5670 Series|52\n@(TM) ^ Vega 11 Graphics|52\n@ * 6770M OpenGL Engine|52\n@(TM) M535DX|52\nFirePro V4800 (FireGL V)|52\n@ R7 350 Series|52\nBarco MXRT 5600 (WDDM)|51\n@ 630|51\nFirePro V4900 (FireGL V)|51\nFirePro V4900 (FireGL V) Graphics Adapter|51\n@(TM) Vega 3 Mobile Graphics|51\n@ 535 Series|51\n@ R7 Graphics|51\n@ * 5670|51\nFirePro W4170M|50\n@ * 8700M Series|50\n@ * 8670 / R7 250/350|50\nPicasso|50\nFirePro V4800 (FireGL) Graphics Adapter|50\nMobility @ * 5850|49\nOPAL XT/GL (6604)|49\n@ R5 M335|49\nMatrox C900 PCIe x16|49\n@ * 7670|49\n@ * 6750M|49\n@(TM) 535|49\n@ 540X Series|49\n@ R9 M275|49\n@(TM) ^ 640|49\n@ * 5700 Series|48\n@ R5 M230 Series|48\nFirepro M6100|48\n@(TM) R9 M375|48\n@ R5 430|48\n@(TM) R7 250|47\n@ R9 M265X|47\n@ * 6730M/6770M|47\n@ * 8670D|47\n@ R5 340|47\n@ 520|47\n@(TM) 520|47\nFirePro V (FireGL V) Graphics Adapter|47\nFirePro M5100 FireGL V|46\n@ * 6670|46\n@ R7 M260X|46\n@ * 8550|46\nFirePro M4150|46\n@ * 6670|46\n@ * 7700 Series|46\nFirePro M4170|46\n@ * 7570|46\n@ * 8670D + * 6670 Dual Graphics|45\n699F:C1|45\n@ R7 Graphics|45\n@(TM) R7 M340|45\nFirePro W4170M (FireGL V)|45\n@(TM) * 8500M/8700M|45\n@ R7 M340|44\nFirePro M5950|44\n@ * 8570D + R7 240 Dual Graphics|44\n@ * 6770M|44\n@ * 7730M|44\n@ * 8790M|44\n@ * 7750|44\n@ * 8690A|44\nMobility @ * 5730 / 6570M|44\n@ R9 A375|44\n@(TM) R8 M445DX|43\nFirePro V (FireGL V) Graphics Adapter|43\n@ * 7750/8740 / R7 250E|43\nFirePro V3900|43\n@ * 7600A Series|43\n@(TM) R7 200 Series Graphics|43\n@ R7 Graphics|43\n@ * 6770M|43\n@ R7 M260 Series|43\n@ R7 M360|43\n@ * 8970M|43\n@(TM) Vega 6 Graphics|43\n@ * 8570|42\n@ R7 M440|42\n@ * 8670A/8670M/8750M|42\nMobility @ * 5850|42\n@ * 8750M|42\nEmbedded @ E9173|42\n@(TM) R7 M440|42\n@ * 8730M|42\n@ R7 240 + * 8570D Dual Graphics|42\nFirePro V3900|42\n@(TM) 535DX|42\n@(TM) 520|42\n@(TM) Vega 8 Mobile Graphics|42\n@(TM) Vega 8 Graphics|42\n@(TM) Vega 2 Graphics|42\n@(TM) R9 M375|42\n@(TM) R8 M445DX|41\n@ * 6750M|41\nRadeonT 540X|41\n@(TM) 530|41\n@ * 7560D + * 6670 Dual Graphics|41\n@ R7 240|41\n@(TM) R7 M360|41\n@ R9 M280X|41\n@ * 7520G + * 7600M Dual Graphics|41\n@(TM) R7 M445|41\n@ Vega 8 Mobile|40\n@(TM) R9 255|40\n@ R7 M260X|40\n@ R8 M535DX|40\n@ R7 240/340|40\n@(TM) R9 M375|40\n@(TM) R7 Graphics|40\n@(TM) R5 M420|40\n@ * 6750M|40\n@ R9 M265X|40\n@ R7 M340|40\n@ * 6570|40\n@ * 7500/7600 Series|39\n@ R7 430|39\nFirePro W2100|39\n@ * 7730M|39\n@ * 8670D|39\n@ R5 M255|39\n@ * 7560D + * 6570 Dual Graphics|39\n@ ^ Vega|39\n@ R7 240 Series|39\n@(TM) R7 M445|39\n@ * 6800M Series|39\n@ * 8690M|39\n@ * 7660D + * 6570 Dual Graphics|39\n@ R7 M370|39\n@(TM) * 6650M|38\n@ R5 M435|38\n@ * 6500 Series|38\n@ R7 Graphics|38\nFirePro M7820|38\n@(TM) R8 M445DX Graphics|38\n@ * 5570|38\n@ * 8650G + 8750M Dual Graphics|38\n@ * 8670A/8670M/8750M|38\n@ * 6650M|38\n@ R7 M260 Series|38\n@ * 7660G + 7600M Dual Graphics|38\n@ * 7600M Series|38\n@ * 7670M|37\n@. * 7670M|37\n@(TM) R7 M265|37\nMobility @ * 5000|37\n@ * 7500M/7600M Series|37\n@ R5/R6/R7 Graphics|37\n@ R7 M270|37\n@ * 8650G + * 7600M Dual Graphics|37\nFirepro M5100|37\n@ * 7730M|37\n@ * 8570D|37\n@(TM) * 7650A Graphics|37\n@ R7 Graphics|37\n@(TM) ^ Vega 10 Graphics|37\n@ * 7600A Series|36\n@ R7 M270|36\n@ * 7660D + * 6670 Dual Graphics|36\n@ * 7570M/* 7670M Graphics|36\n@ 6600M and 6700M Series|36\n@ R7 Graphics + R7 200 Dual Graphics|36\n@ * 7570 Series|36\n@ * 8750M|36\n@ * 6550D|36\nFirePro M5950|36\n@ * 7660G + 7600M Dual Graphics|36\n@ * 6550D|36\n@ * 7600M/7700M Series|36\n@(TM) Vega 3 Graphics|36\n@(TM) 625|36\nMobility @ * 5570|36\n@ HD8730|36\n@(TM) R9 M380|36\n@(TM) R5 240|36\n@ * 7650M|35\n@ * 7560D|35\n@ * 8690M|35\n@ * 8650G + 8750M Dual Graphics|35\n@ * 8650G + * 8750M Dual Graphics|35\n@ * 8650G + * 8570M Dual Graphics|35\n@ * 6570|35\n@ * 7650M|35\n@ * 6630M/6650M/6750M/7670M/7690M|35\n@ * 6500 Series|35\n@(TM) 520|35\n@ * 8570D|35\n@ * 7600M Series|35\n@ R7 Graphics|35\n@ * 7660G + 8670M Dual Graphics|35\n@ R7 200 Series|35\n@ * 6630M/6650M/6750M/7670M/7690M|35\n@ R7 M265|35\n@ * 8650G + * 8750M Dual Graphics|35\n@ * 8650G + 8670M Dual Graphics|35\n@ R7 Graphics|34\n@ * 6630M Series|34\n@(TM) 520|34\n@ * 7660D|34\nASUS R7 240 Series|34\n@ R9 M280X|34\n@(TM) R5 340|34\n@ * 8550G + 8600/8700M Dual Graphics|34\n@ R7 Graphics|34\n@(TM) * 8500M/8700M|34\n@ * 7660G + * 7600M Dual Graphics|34\n@ * 7670M|34\n@(TM) R5 M430|34\n@ * 8650G + 8500M Dual Graphics|34\n@(TM) R5 340X|34\n@(TM) R5 230 series|34\n@ * 8550|34\nFirePro W2100 (FireGL V)|34\nFirepro M4100 FireGL V|34\n@ * 6550D|34\n@ * 6630M|34\n@(TM) R9 M375|34\n@ * 5670 OpenGL Engine|33\n@ * 5670|33\n@ R7 Graphics|33\n@ * 7660G|33\n@ * 5570|33\n@ * 7550M/7650M Graphics|33\n@ * 7660D|33\n@ * 7560D|33\n@ * 7560D|33\n@ R5 M445 Series|33\n@ R5 M315|33\n@ * 8570D|33\n@ R7 M265|33\n@ * 7640G + * 7500/7600 Dual Graphics|33\n@ R7 Graphics|33\n@ * 8500M Series|33\nMobility @ * 5000|33\n@(TM) R7 M360|33\nFirepro M4100|33\n@(TM) Vega 10 Graphics|32\n@ * 7500M/7600M Series|32\n@ * 8550G + * 8600/8700M Dual Graphics|32\n@ * 7660G|32\n@ * 7350|32\n@ * 8470D + * 6450 Dual Graphics|32\n@ R7 Graphics|32\n@ * 8730M|32\n@ * 7640G + * 7400M Dual Graphics|32\n@ * 8690A|32\n@ * 8650G + 8600/8700M Dual Graphics|32\n@ R7|32\n@(TM) Vega 11 Graphics|32\n@(TM) Vega 8 Graphics|32\n@ R5 M200 Series|32\n@(TM) R5 M335|32\n@(TM) R5 M430|32\n@ * 8550G + * 8570M Dual Graphics|32\n@ * 7650M Series|32\n@ R7 250 Series|32\n@(TM) R7 M460|32\n@ * 6550D|32\n@ * 7660G + * 7600M Dual Graphics|32\n@(TM) Vega 3 Graphics|32\n@ * 8470D|32\n@ R8 M365DX|31\nMadison [Mobility @ * 5650/5750 / 6530M/6550M]|31\n@ * 6630M/6650M/6750M/7670M/7690M|31\n@ R7 Graphics|31\n@ E6760|31\n@ R7 Graphics|31\n@(TM) Vega 8 Graphics|31\n@(TM) R5 M330|31\n@ * 8670A/8670M/8690M|31\n@ R7 A360|31\n@ * 8650G + * 8600M Dual Graphics|31\n@ R5 M200 / * 8500M Series|31\n@(TM) R8 M435DX|30\n@ * 7640G + * 7670M Dual Graphics|30\n@(TM) Vega 10 Mobile Graphics|30\n@ R7 Graphics|30\n@ Pro 450/550|30\n@ * 8800M Series|30\n@ * 8470D|30\n@ * 7660D|30\n@ * 8610G + * 8600M Dual Graphics|30\n@ * 7660G + 7670M Dual Graphics|30\n@(TM) Vega 8 Mobile Graphics|30\n@ 610 Series|30\n@(TM) R5 M330|30\n@ * 7660G|30\n@ * 7640G|30\n@ R8 M365DX|30\n@ * 8550G|29\n@ * 7540D|29\n@ * 7640G|29\n@ * 8650G|29\n@(TM) R7 Graphics|29\n@(TM) ^ Vega 11 Graphics|29\n@ * 6650M|29\n@ * 7660G|29\n@ 6600M and 6700M Series|29\n@ * 7640G + * 7400M Dual Graphics|29\n@(TM) R5 340X|29\n@ R5 435|29\n@ * 6500M/5600/5700 Series|29\nFirepro M4100 FireGL V|29\n@ R7 Graphics|29\n@(TM) 535|29\n@ R7 240 Series|29\n@(TM) R7|29\n@ * 8550G + 8500M Dual Graphics|28\n@(TM) 530|28\n@ * 5650 Series|28\n@ * 7570M|28\n@ * 7570M|28\nASUS R7 240 Series|28\n@ * 6570|28\n@(TM) Vega 8 Graphics|28\n@ E8860|28\n@(TM) 530 series|28\n@(TM) R5 M315|28\n@ * 5500 Series|28\n@ * 8610G + * 8670M Dual Graphics|28\n@(TM) R6|28\n@ R9 M275X|28\n@ * 8550G + R5 M230 Dual Graphics|28\n@ * 8470D|28\n@ * 8670D|28\n@ * 7620G|28\n@(TM) R8 M350DX|28\n@ * 8470D|27\n@(TM) R8 M445DX|27\n@(TM) R7 Graphics|27\n@(TM) R5 Graphics|27\n@(TM) R7 M340|27\n@(TM) R6 Graphics|27\n@ R6 Graphics|27\n@ R5 M230 Series|27\n@ * 8650G|27\n@ * 7480D|27\n@(TM) R8 M445DX Graphics|27\n@(TM) R6 Graphics|27\n@ R7 Graphics|27\n@ R6|27\n@ R5 M255|27\n@(TM) Vega 3 Graphics|27\n@ 550X|27\n@(TM) Vega 3 Graphics|27\n@ * 7500/7600 Series|27\n@ * 8650G|27\n@ * 5500 Series|27\n@ * 7610M|27\n@ Instinct MI25 MxGPU|27\n@(TM) HD8530M|27\n@ R7 M260|27\n@(TM) R8 M445DX|27\n@ R7 Graphics|26\n@ * 8500M|26\n@(TM) R7 M260DX|26\n@ * 8410G|26\n@ * 8670A/8670M/8690M|26\n@(TM) R7 M360|26\n@(TM) R7 M360|26\n@ * 8670D|26\n@ R9 M275|26\n@ * 7640G|26\n@(TM) R7 Graphics|26\nMxGPU|26\n@ * 8370D|26\n@ * 6620G|25\n@ * 7560D|25\n@ * 8570 / R5 430 / R7 240/340 / @ 520|25\n@ R4 Graphics|25\n@ R6 Graphics|25\n@ R7 Graphics|25\n@(TM) 535DX|25\n@(TM) 540 Graphics|25\n@(TM) R5 M330|25\n@ * 6530D|25\n@ R6 Graphics|25\n@ * 8510G|25\n@ * 6620G|25\n@ R7 M360|24\n@(TM) R6 Graphics|24\n@ R7 M260|24\n@ * 8610G + * 8600M Dual Graphics|24\n@(TM) R6 Graphics|24\n@ R5 M200 / * 8500M Series|24\n@ R7 Graphics|24\n@ * 7600G|24\n@ R7 Graphics|24\n@ * 6620G|24\n@ R5 M330|24\n@(TM) R5 240|24\n@(TM) * 6620G|24\nFirePro V3800 (FireGL V)|24\n@ * 6520G|24\n@ R7 Graphics|24\n@ * 7520G|24\n@(TM) R6 Graphics|24\n@(TM) R7 M260|24\n@ ^ 540 Series|24\n@(TM) R5 M320|24\n@ * 8500M|23\n@ R5 M230|23\n@ * 8670M|23\n@ * 8550G + * 8750M Dual Graphics|23\n@ * 8600M Series (HAINAN, DRM 3.40.0, 5.11.13-arch1-1, LLVM 11.1.0)|23\n@ * 8550G|23\n@ R5 M240|23\n@ R5 M240 Series|23\n@ * 7540D|23\n@(TM) R5 M430|23\n@ R5 Graphics|23\n@(TM) R5 M430|23\n@ R6 Graphics|23\n@ * 7520G|23\n@ R7 Graphics|23\n@ * 8610G|22\nFirePro 3800 (FireGL) Graphics Adapter|22\n@ * 7570M/* 7670M Graphics|22\n@ * 7480D|22\n@(TM) R7 Graphics|22\n@ * 8650G + * 8600M Dual Graphics|22\n@(TM) Vega 6 Graphics|22\n@ R7 Graphics|22\n@ R5 Graphics|22\n@ * 7660G + * 8600M Dual Graphics|22\nFirePro M2000|22\n@ R7 Graphics|22\n@ * 7870M|22\n@ R5 M335|22\n@ R5|22\n@ * 8500M Series|22\n@(TM) * 8490|22\n@ * 8670M|22\n@ * 7660G + * 7670M Dual Graphics|22\n@ 7500M/7600M Series|22\n@ R5 Graphics|21\n@(TM) R4 Graphics|21\n@ * 8490|21\n@ * 8490|21\n@ R7 Graphics|21\n@ * 8570M|21\n@(TM) R5 M320|21\n@ R2|21\n@ * 6530D|21\n@(TM) * 6470M|21\nMxGPU|21\n@ * 7000 series|21\n@ * 7470|21\n@(TM) R8 M350DX|21\n@ R7 Graphics|21\n@ * 7520G + * 7400M Dual Graphics|21\n@(TM) R5 M335|21\n@ * 7400G|21\n@ * 7640G + * 8500M Dual Graphics|21\n@ * 7000 series|21\n@(TM) R5 Graphics|20\n@(TM) R7 M520 (R17M-M1-30)|20\n@ * 8470|20\n@ * 7480D|20\n@ * 6400M/7400M Series|20\n@(TM) R3 Graphics|20\n@ R6 M255DX|20\n@ * 8370D|20\n@ R5 Graphics|20\n@ R7 Graphics|20\n@ * 6410D|20\n@(TM) R5 Graphics|20\n@ R5 M330|20\n@ R7 M260DX|20\n@(TM) R5 Graphics|20\n@ * 7480D|20\n@ * 6470M|20\n@ Hybrid (Blocked)|20\n@(TM) R7 Graphics|20\n@(TM) R6 M340DX|20\n@ R5 235|20\n@ * 7520G|19\n@(TM) R6 M255DX|19\n@ R5 M240|19\n@(TM) R3 Graphics|19\n@ R7E Graphics|19\n@ R5 M200 Series|19\n@ * 7470|19\n@ * 7640G + 8500M Dual Graphics|19\n@(TM) R5 M330|19\n@ * 6470M|19\n@ R3 Graphics|19\n@ * 8400E|19\n@ * 7640G + * 8570M Dual Graphics|19\n@ * 8400|19\n@ * 8400 / R3 Series|19\n@ R5 Graphics|19\n@(TM) R7 M265|19\n@ R5 M230|19\n@ R5 Graphics|19\n@ * 7620G|19\n@ R5 Graphics|19\n@(TM) * 6470M|19\n@ * 7480D|18\n@ R7 Graphics|18\n@(TM) R5 Graphics|18\n@ * 8550G|18\n@ * 8370D|18\n@ R5 Graphics|18\n@(TM) * 7450|18\n@ * 6530D|18\n@ * 8570M|18\n@ R6 Graphics|18\n@ * 7650A|18\n@ * 8450G|18\n@ * 8550G + R5 M230 Dual Graphics|18\n@ * 7640G + 7470M Dual Graphics|18\n@ * 8370D|18\n@ * 7400M Series|18\n@ * 8670D + R5 200 Dual Graphics|17\n@ * 7500G|17\n@ * 7790|17\n@ * 7450M|17\n@(TM) * 7450A Graphics|17\n@(TM) R5 Graphics|17\n@(TM) R6 Graphics|17\n@(TM) R4 Graphics|17\n@ * 8650G + * 8500M Dual Graphics|17\n@ * 7400M Series|17\n@ * 8450G|17\n@ * 6520G|17\n@ * 8470D|17\n@(TM) R5 Graphics|17\n@(TM) R4E Graphics|17\n@ * 8330|17\n@ * 8400|17\n@(TM) * 8510G|17\n@(TM) R5 Graphics|17\n@ * 8650G|17\n@ * 6490M|17\n@ R7 Graphics|16\n@ * 6400 Series|16\n@ * 8510G|16\n@ * 7400 Series|16\n@ * 7400 Series|16\n@(TM) * 8510G|16\n@ * 6370D|16\n@ * 7420G|16\n@ * 7520G + * 7600M Dual Graphics|16\n@ R9 260|16\n@ * 7640G + 7600M Dual Graphics|16\n@ * 7470M|16\n@(TM) R2 Graphics|16\nRADEON * 6450|16\n@(TM) R1E Graphics|16\n@ R5 Graphics|16\n@ * 7420G|16\n@(TM) R4 Graphics|16\n@(TM) R4 Graphics|16\n@(TM) R4 Graphics|16\n@ * 7480D|16\n@ * 6490M|15\nRADEON * 6450|15\n@(TM) * 8610G|15\n@(TM) * 8610G|15\n@ * 8610G + 8600M Dual Graphics|15\n@ * 7350|15\n@(TM) * 6480G|15\n@ * 8650G + 8600M Dual Graphics|15\n@ * 8570D|15\n@ * 6370M|15\nMobility @ * 5000 Series|15\n@ R2 Graphics|15\n@ * 8240 / R3 Series|15\n@ * 8650G + R5 M200 Dual Graphics|15\n@ * 8400E|15\n@(TM) R4 Graphics|15\n@ R5 Graphics|15\n@ * 8610G|15\n@ * 8650G + * 8500M Dual Graphics|15\n@(TM) R7 M260|15\nASUS EAH6450 Series|15\n@ R3 Graphics|15\n@(TM) R6 M340DX|15\n@ R6E Graphics|15\n@ R5 Graphics|15\n@ R2 Series|14\n@ * 6450/7450/8450/R5 230|14\n@ * 8200 / R3 Series|14\n@(TM) R3 Graphics|14\n@ R5 230|14\n@(TM) * 8510G|14\n@(TM) R4 Graphics|14\n@ R5 M435|14\n@ * 8240|14\nASUS R5 230 Series|14\nFirePro M2000|14\n@ * 7500G|14\n@ * 7450|14\nRADEON * 6450|14\n@ * 8400E|14\nRADEON * 6350|14\n@ * 6480G|14\n@(TM) R5E Graphics|14\nCARRIZO 9874|14\nMobility @ * 5000 Series|14\n@ * 6630M|14\n@ * 6370M|14\n@ * 8400 / R3 Series|14\n@(TM) R2 Graphics|14\nASUS EAH6450 Series|14\n@ * 7470M|13\nMobility @ * 5470|13\nMobility @ * 5400 Series|13\n@(TM) R5E Graphics|13\n@(TM) R2 Graphics|13\n@ * 6540|13\n@ * 7450|13\n@ * 5450|13\n@ * 8600M Series|13\n@ * 8400 / R3 Series|13\nKaveri|13\n@(TM) * 6480G|13\n@ * 5400 Series|13\n@ * 8330|13\nRADEON * 6350|13\n@ R4/R5 Graphics|13\n@ * 7600G +™ * Dual Graphics|13\n@ R3 Graphics|13\nASUS R5 230 Series|13\n@(TM) R7 Graphics|13\n@ * 7620G|13\n@ * 8250|13\n@(TM) R7 Graphics|12\n@ * 6450/7450/8450 / R5 230|12\n@ * 6480G|12\n@(TM) R7 Graphics|12\n@ * 5450 Series|12\n@ * 8400 / R3 Series|12\n@(TM) * 6400 Series|12\n@(TM) R4 Graphics|12\nRADEON HD5450|12\n@ R5 Graphics|12\n@ R5 Graphics|12\n@(TM) R6 Graphics|12\n@(TM) R4 Graphics|12\n@(TM) R2 Graphics|12\n@ * 8210|12\n@ R5 230|12\n@ R3 Graphics|12\nFirePro 2270|12\n@(TM) R2E Graphics|12\n@ * 8400 / R3 Series|12\n@ * 8350G|12\n@ * 8400|12\n@ R2 Graphics|12\n@ * 8210 Graphics|12\n@ E6460|12\n@(TM) * 8280E|12\n@ R2 Graphics|11\n@ * 8450G + * 8750M Dual Graphics|11\n@ * 8330|11\n@ * 5470|11\n@ * 7600G + 7500M/7600M Dual Graphics|11\n@ R5 220|11\n@ * 8200 / R3 Series|11\n@ * 8240|11\n@ * 8400 / R3 Series|11\n@ * 8200 / R3 Series|11\n@ * 5450|11\n@(TM) 620|11\n@(TM) Vega 8 Mobile Graphics|11\n@ * 6530D|11\n@(TM) * 6520G|11\n@ * 6300M Series|11\nASUS EAH5450|11\n@ R5 220|11\n@ * 8250|11\n@ * 7340|11\n@ * 7340M|11\n@ * 8210|11\n@ * 7700 Series|10\n@ * 6380G|10\n@ * 5400 Series|10\n@ * 8240|10\n@ * 7640G + 7670M Dual Graphics|10\n@(TM) R6 Graphics|10\nASUS EAH5450 Series|10\n@ * 6320|10\n@ * 7340G|10\n@ * 6410D|10\n@ * 7340|10\n@ * 6320|10\n@(TM) R2 Graphics|10\n@ * 8180|9\nMobility @ * 5430|9\n@ R2 Graphics|9\n@ R2 Series|9\n@ * 8210|9\nFirePro 2270|9\n@ R2E Graphics|9\n@ * 7340|9\n@ * 6320|9\n@ * 7310|9\n@ * 6310|9\n@ R7 Graphics|9\n@ * 7310|8\n@ * 8250|8\n@ * 8180|8\n@ * 6630M|8\n@ * 6230|8\n@ * 6320|8\n@ * 6400M Series|8\n@ * 7290 Graphics|7\n@ * 6290|7\n@ * 6310|7\n@ * 8180|7\nASUS EAH5450 Series|7\n@(TM) R2 Graphics|6\n@ * 6310|6\n@ * 7500G|6\n@ * 8240 / R3 Series|6\n@ * 6250|6\n@ * 6380G|6\n@ * 6300M Series|5\n@ * 7310|5\n@ R3 Graphics|5\n@(TM) R6 Graphics|5\n@ * 6250|5\n@ * 6290|5\n@ * 6250|5\n@ * 7290 Graphics|4\n@ * 5000/6000/7350/8350 Series|3\n@ ^ Vega 56 OpenGL Engine|-1\nFirePro V4800 (FireGL) Graphics Adapter|-1\n@ * 7670M|-1\n@ * 8570D|-1\n7340:C5|-1\n@ * 8550G|-1\n@ R5 Graphics|-1\nASUS R7 360 Series|-1\nBonaire [FirePro W5100]|-1\n@ * 6380G|-1\n@ R7 Graphics|-1\nFireGL V8650|-1\nFirePro S7150|-1\nFirePro V3900 (FireGL V)|-1\nFirePro V7800 (FireGL V)|-1\nFirePro W4100 Graphics Adapter|-1\nFirePro W4170M (FireGL V)|-1\nGigabyte @ ^ 580|-1\nMobility FireGL V5700|-1\nMobility @ 4100|-1\nMobility @ * 2400|-1\nMobility @ * 2400 XT|-1\nMobility @ * 2600|-1\nMobility @ * 2600 XT|-1\nMobility @ * 3200|-1\nMobility @ * 3400 Series|-1\nMobility @ * 3430|-1\nMobility @ * 3470|-1\nMobility @ * 3650|-1\nMobility @ * 4200 Series|-1\nMobility @ * 4250|-1\nMobility @ * 4300 Series|-1\nMobility @ * 4500 Series|-1\nMobility @ * 4500/5100 Series|-1\nMobility @ * 4650|-1\nMobility @ * 4670|-1\nMobility @ * 4850|-1\nR9 270X Devil|-1\n^ 560X|-1\n@|-1\n@(TM) HD8530M|-1\n@ 3000|-1\n@ 3100 Graphics|-1\n@ * 2400 PRO|-1\n@ * 2400 XT|-1\n@ * 2600 Pro|-1\n@ * 2600 XT|-1\n@ * 2900 GT|-1\n@ * 3200 Graphics|-1\n@ * 3300|-1\n@ * 3450|-1\n@ * 3470|-1\n@ * 3600 Series|-1\n@ * 3650|-1\n@ * 3850|-1\n@ * 3870|-1\n@ * 3870 X2|-1\n@ * 4200|-1\n@ * 4250|-1\n@ * 4290|-1\n@ * 4300/4500 Series|-1\n@ * 4550|-1\n@ * 4600 Series|-1\n@ * 4650|-1\n@ * 4670|-1\n@ * 4830|-1\n@ * 4850|-1\n@ * 4870|-1\n@ * 4890|-1\n@ * 5670 640SP Edition|-1\n@ * 5800 Series|-1\n@ * 5850|-1\n@ * 6490M|-1\n@ * 6730M/6770M|-1\n@ * 6750|-1\n@ * 6800M Series|-1\n@ * 7540D + * 6670 Dual Graphics|-1\n@ * 7700M Series|-1\n@ * 7800 Series|-1\n@ * 8350|-1\n@ * 8370D|-1\n@ * 8600/8700M|-1\n@ Pro WX Vega M GL Graphics|-1\n@ R5 200 Series|-1\n@ R7 A370|-1\n@ R9 200 Series|-1\n@ R9 290X/390X|-1\n@ R9 380X|-1\n@ ^ 480|-1\n@ ^ 550X|-1\n@ ^ 6650M|-1\n@ RX6600XT|-1\n@(TM) R8 M435DX|-1\n@(TM) R9 290X|-1\n@(TM) RX540|-1\ninc. @ * 7970|-1\nRadeong 0.4 on AMD CAPE VERDE (DRM 2.43.0, LLVM 3.7.0)|-1\nRadeong 0.4 on AMD CAPE VERDE (DRM 3.9.0 / 4.9.0-rc1+, LLVM 4.0.0)|-1\nRadeong 0.4 on AMD FIJI (DRM 3.2.0 / 4.7.0-rc5+, LLVM 4.0.0)|-1\nRadeong 0.4 on AMD TAHITI (DRM 2.43.0, LLVM 3.9.0)|-1\n";let c=[],l=[],f=[];function h(e){if(!e)return 0;const t=function(e){if(e===i.V.Intel&&c.length)return c;if(e===i.V.Nvidia&&l.length)return l;if(e===i.V.Amd&&f.length)return f;try{const t=function(e){return e===i.V.Intel?a:e===i.V.Nvidia?s:e===i.V.Amd?u:""}(e),n=(0,i.b)(t,e);return e===i.V.Intel&&(c=n),e===i.V.Nvidia&&(l=n),e===i.V.Amd&&(f=n),n}catch{}return[]}(e.vendor);return(0,i.a)((0,i._)(t,e))}const d=class e{static setConfig(t){e.cfg=t}static getGPUVendor(){return(0,i.g)(e.cfg)}static getGPUParsedVendor(t){return(0,i.p)(t||e.getGPUVendor())}static parseVendor(t){try{const n=e.getGPUParsedVendor(t);return n?{...n,score:h(n)}:null}catch{}return null}};(e=>{"cfg"in e?o(e,"cfg",{enumerable:!0,configurable:!0,writable:!0,value:null}):e.cfg=null})(d);let p=d;var v=n(40263),g=n(1151),y=Object.defineProperty,m=(e,t,n)=>((e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class _{constructor(e){m(this,"options"),m(this,"nodes"),this.options=e,this.nodes=[],this._init()}_init(){this.options.plugins&&Object.keys(this.options.plugins).forEach((e=>{const t=this.options.plugins&&this.options.plugins[e];if(t&&!t.ignore&&(!t.instance&&t.plugins&&Object.keys(t.plugins).length>0?t.instance=new _(t):t.cls&&(t.instance=new t.cls(t)),t.instance)){const n=typeof t.weight>"u"?1:t.weight;this.nodes.push({key:e,weight:n,instance:t.instance})}}))}getScore(){return new Promise((e=>{const t=[];this.nodes.forEach((e=>{t.push(new Promise((t=>{e.instance.getScore().then((n=>{t({key:e.key,weight:e.weight,val:n})}))})))})),Promise.all(t).then((t=>{const n={};let r=0,i=0;t.forEach((({weight:e,val:t})=>{t.score>0&&(i+=e)})),i=0===i?1:i;for(let e=0;e<t.length;e++){const o=t[e];r+=o.weight/i*o.val.score,n[o.key]=o.val}n.score=r,e(n)})).catch(console.log)}))}getScoreSync(){const e={};let t=0,n=0;const{nodes:r}=this;r.forEach((e=>{const{weight:t,instance:r}=e,{score:i}=e.val=r.getScoreSync();i>0&&(n+=t)})),n=0===n?1:n;for(let i=0;i<r.length;i++){const o=r[i];t+=o.weight/n*o.val.score,e[o.key]=o.val}return e.score=t,e}}class b extends _{get version(){return"0.1.4-rc.0"}constructor(e){super((0,g.d)({},e))}setPlayer(e,t){var n,r,i;null!=(r=null==(n=this.options.plugins)?void 0:n.render)&&r.instance&&(null==(i=this.options.plugins.render)||i.instance.setPlayer(e,t))}scoreAsync(){return this.getScore()}scoreSync(){return this.getScoreSync()}}var T=Object.defineProperty,k=(e,t,n)=>((e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class S{constructor(e){k(this,"mappingFn"),this.mappingFn=e.mapping}getScore(){return new Promise((e=>{e(this.getScoreSync())}))}getScoreSync(){const e=navigator.hardwareConcurrency;let t=0;return this.mappingFn&&(t=this.mappingFn(e)),{score:t,origin:e}}}class w{constructor(e){k(this,"mappingFn"),k(this,"score",0),k(this,"origin",-1),k(this,"url"),k(this,"_getScoreCallback",(()=>{})),this.url=e.url,this.mappingFn=e.mapping}getScore(){return new Promise((e=>{if(this.url)try{const t=new Image;t.src=this.url,t.onload=()=>{const n=Date.now();"function"==typeof t.decode?t.decode().then((()=>{const t=1e3/(Date.now()-n);let r=0;this.mappingFn&&(r=this.mappingFn(t)),this.score=r,this.origin=t,e({score:r,origin:t})})):e(this.getScoreSync())},t.onerror=()=>{e(this.getScoreSync())}}catch{e(this.getScoreSync())}else e(this.getScoreSync())}))}getScoreSync(){let e=0;return this.mappingFn&&(e=this.mappingFn(-1)),e>0?{score:e,origin:-1}:{score:this.score,origin:this.origin}}}class R{constructor(e){k(this,"mappingFn"),k(this,"score",0),k(this,"origin",-1),this.mappingFn=e.mapping}getScore(){return new Promise((e=>{const t=performance.now();setTimeout((()=>{const n=performance.now()-t;let r=0;this.mappingFn&&(r=this.mappingFn(n)),this.origin=n,this.score=r,e({score:r,origin:n})}),0)}))}getScoreSync(){let e=0;return this.mappingFn&&(e=this.mappingFn(-1)),e>0?{score:e,origin:-1}:{score:this.score,origin:this.origin}}}var M=Object.defineProperty,x=(e,t,n)=>((e,t,n)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class P{constructor(){x(this,"origin",""),x(this,"score",-1)}getScore(){return new Promise((e=>{e(this.getScoreSync())}))}getScoreSync(){const e=p.parseVendor();return e?(this.score=e.score,this.origin=e.origin,{origin:this.origin,score:this.score,vendorParsedInfo:e}):{origin:this.origin,score:this.score}}}var E=Object.defineProperty;class D{constructor(e){((e,t,n)=>{((e,t,n)=>{t in e?E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n)})(this,"mappingFn"),this.mappingFn=e.mapping}getScore(){return new Promise((e=>{e(this.getScoreSync())}))}getScoreSync(){const e=navigator.deviceMemory;let t=0;return this.mappingFn&&(t=this.mappingFn(e)),{score:t,origin:e}}}var O=Object.defineProperty,I=(e,t,n)=>((e,t,n)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class A{constructor(e){I(this,"mappingFn"),this.mappingFn=e.mapping}getScore(){return new Promise((e=>{e(this.getScoreSync())}))}getScoreSync(){var e;const t=null==(e=null==navigator?void 0:navigator.connection)?void 0:e.downlink;let n=0;return this.mappingFn&&(n=this.mappingFn(t)),{score:n,origin:t}}}class L{constructor(e){I(this,"mappingFn"),this.mappingFn=e.mapping}_getBandwidth(){if(!performance.getEntries)return-1;const e=performance.getEntries().filter((({initiatorType:e,decodedBodySize:t,responseEnd:n,responseStart:r})=>("img"===e||"script"===e)&&t>0&&n!==r)),t=e.reduce(((e,{decodedBodySize:t,responseEnd:n,responseStart:r})=>{const i=8e3*t/(n-r)/1024/1024;return e+(i<1e5?i:0)}),0);return e.length?t/e.length:-1}getScore(){return new Promise((e=>{e(this.getScoreSync())}))}getScoreSync(){try{const e=this._getBandwidth();let t=0;return this.mappingFn&&(t=this.mappingFn(e)),{origin:e,score:t}}catch{return{score:0,origin:-1}}}}const C="xg-decodeimg-scores",G=e=>{let t=0;return e>0&&(t=e<=1?0:e<4?3*Math.log2(e):e<8?1.6*(Math.log2(e)-2)+6:.523*(Math.log2(e)-3)+7.6),t},N=e=>{let t=0;if(e>0){const n=Math.log10(e+1);t=n<=1?6*n:n<=2?1.6*(n-1)+6:2.4*(n-2)+7.6,t=Math.round(100*t)/100,t=(e=>{try{const t=localStorage.getItem(C);let n=[],r=e;return t?(n=JSON.parse(t),n.push(e),r=n.reduce(((e,t)=>e+t),0)/n.length,n.length>10&&n.shift()):n.push(e),(e=>{try{localStorage.setItem(C,JSON.stringify(e))}catch{}})(n),r}catch{return e}})(t)}else t=(()=>{const e=localStorage.getItem(C);let t=[],n=0;return e&&(t=JSON.parse(e),n=t.reduce(((e,t)=>e+t),0)/t.length),n})();return t},B=e=>{let t=0;return e>0&&(t=e<=1?0:e<=4?3*Math.log2(e):e<8?2*(Math.log2(e)-2)+6:.337*(Math.log2(e)-3)+8),t},$=e=>{let t=0;return e>0&&e<1e6&&(t=e<=1?0:e<10?6*Math.log10(e):10),t},F=e=>{let t=0;return e>0&&e<1e6&&(t=e<=1?0:e<30?4.06*Math.log10(e):e<60?5.19*(Math.log10(e)-1.47)+6:1.96*(Math.log10(e)-1.778)+7.6),t};class U extends b{constructor(e){super((e=>({plugins:{performance:{plugins:{cpu:{weight:2,plugins:{cpuCoreNumber:{weight:4,instance:new S({mapping:G})},decodeImg:{weight:3,instance:new w({url:e,mapping:N})},timer:{weight:0,instance:new R({})}}},memory:{weight:2,instance:new D({mapping:B})},gpu:{instance:new P}}},net:{plugins:{downlink:{instance:new A({mapping:$})},performanceNet:{instance:new L({mapping:F})}}}}}))(e.decodeImgUrl))}scoreAsync(){return this.getScore()}scoreSync(){return this.getScoreSync()}}function H(){return void 0===typeof window}function j(e,t=2){return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)}const V=["video_detail","one_column","browser_mode"],z=["video_detail","homepage_hot","homepage_follow","others_homepage","general_search","personal_homepage"];function X(e,t=1,n=[]){return!(!e||"unknown"===e)&&((!n||n.length<1)&&(n=2===t?z:V),n.filter((t=>e===t)).length>0)}class K{constructor(){this.dropedRate=0,this.hevcDropedRate=0,this.minDif=10,this.minFrames=60,this.maxDropedRate=10,this.forceNotHevc=!1,this.robustnessTestResult=!1,this.configure={url:"",minDroppedFramesRate:.1,minTotalVideoFrames:10},this.hevcRobustnessResult={isSupportBase:!1,supportRobustness:"unknown",status:!1,errCode:0,errMsg:"",robustErr:!1,date:0}}static getInstance(){return K.instance||(K.instance=new K),K.instance}static setDropRate(e,t,n){const r=K.getInstance();if(t<1||n<r.minFrames)return;const i=t/n*100;e.startsWith("h265")?r.hevcDropedRate=i:r.dropedRate=i;const{hevcDropedRate:o,dropedRate:a,minDif:s,maxDropedRate:u}=r;(o-a>s||o>u)&&(r.forceNotHevc=!0)}static useHevc(e=1){const{forceNotHevc:t,hevcRobustnessResult:n}=K.getInstance();return e<2?(0,r.Zo)()&&function(){if(H())return!1;const e=window.navigator.userAgent;if(!/iPad|iPhone|iPod/.test(e))return!(null==window||!window.MediaSource)&&((null==window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"'))||(null==window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"'))||(null==window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"'))||(null==window?void 0:window.MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')));try{const e=document.createElement("video");return[e.canPlayType('video/mp4; codecs="hvc1.1.L0.0"'),e.canPlayType('video/mp4;codecs="hev1.1.6.L120.90"'),e.canPlayType('video/mp4;codecs="hev1.2.4.L120.90"'),e.canPlayType('video/mp4;codecs="hev1.3.E.L120.90"'),e.canPlayType('video/mp4;codecs="hev1.4.10.L120.90"')].some((e=>"probably"===e||"maybe"===e))}catch{return console.error("check hevc error"),!1}}()&&!t:!t&&(0,r.Zo)()&&n.status}static async hevcDeviceDetect(e,t=2){const n=K.getInstance(),{configure:i,hevcRobustnessResult:o}=n;if(o.isSupportBase=(0,r.Zo)(),o.date>0)return o;const a=function(e){return e?"https://lf16-tiktok-web.tiktokcdn-us.com/obj/tiktok-web-tx/tiktok/webapp/main/webapp-desktop/playback1.mp4":"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/tiktok/webapp/main/webapp-desktop/playback1.mp4"}(e);return void 0===typeof window?o:t<2||!a?(o.isSupportBase=(0,r.Zo)(),o):(o.date=(new Date).getTime(),i.url=a,void(0,r.lg)(i).then((e=>(o.status=e.status,o.robustErr=e.robustErr,o))).catch((e=>(o.errCode=e.errCode,o.errMsg=e.errMsg,o.status=e.status,o.robustErr=e.robustErr,o))))}}const Q="unknown";class W{constructor(){this.isTTP=null,this.abTestVersion="",this.hevcAbVersion="",this.logInitInfo={},this.logConfig={},this.scoreData={score:-2,vendor:"",gpu:""},this.channelInfo={channel:"",domain:"",type:""},this.regionInfo={region:"",uid:"",isLogin:!1},this.hevcTestData={vid:"v0",open:!1,onlySrc:!1,score:-2,playModes:[],pageNames:[],qualityType:20,hevcQualityType:28,closePreload:!1},this.abTestData={},this.prePlayMode=Q,this.curPlayMode=Q,this.curPageName=Q,this.prePageName=Q}static get version(){return v.v}static set channelInfo(e){W.getInstance().channelInfo=e}static get channelInfo(){return W.getInstance().channelInfo}static set regionInfo(e){W.getInstance().regionInfo=e}static get regionInfo(){return W.getInstance().regionInfo}static set playMode(e){const{instance:t}=W;t.prePlayMode=t.curPlayMode,t.curPlayMode=e}static get playMode(){return W.getInstance().curPlayMode}static get prePlayMode(){return W.getInstance().prePlayMode}static set pageName(e){const t=W.getInstance();e!==t.curPageName&&(t.prePageName=t.curPageName,t.curPageName=e)}static get pageName(){return W.getInstance().curPageName}static get prePageName(){return W.getInstance().prePageName}static initDeviceScore(){const{scoreData:e}=W.getInstance();if(e.score<0){p.setConfig({expiration:6048e5});const t=p.parseVendor();t?(e.score=t.score,e.vendor=t.vendor,e.gpu=t.model):e.score=0}}static getInstance(){return W.instance||(W.instance=new W,W.initDeviceScore()),W.instance}static checkHevcResult(){const{hevcTestData:e,curPageName:t,curPlayMode:n,scoreData:r}=W.getInstance();return function(e,t){const{curPlayMode:n,curPageName:r}=t,i=t.score||-2,o=t.vendor||"",a=K.useHevc(2),s={qualityType:20,hevcQualityType:28,open:!1,openSrc:!1,closePreload:!1,vid:null==e?void 0:e.vid,data:e};if(!a||!e||!e.open||i<-1||!o)return s;s.closePreload=e.closePreload;const{playModes:u=[],pageNames:c=[],closePreload:l=!1,onlySrc:f=!1}=e;let{qualityType:h,hevcQualityType:d}=e;28===h&&!d&&(h=20,d=28);const p=function(e,t,n,r){const i=X(e,2,n),o=X(t,1,r);return i&&o}(r,n,c,u);if(!p)return s;const v=function(e,t,n){const{score:r=-2,vendor0:i=[],vendor1:o=[]}=n;return e>0?!r||r<=e:function(e,t=[]){return!(t.length<1||!e)&&t.filter((t=>e===t)).length>0}(t,0===e?i:o)}(i,o,e)&&p;return{...s,qualityType:h,hevcQualityType:d||28,closePreload:l||!1,open:v&&!f,openSrc:v}}(e,{curPageName:t,curPlayMode:n,score:r.score||-2,vendor:r.vendor||""})}static setHevcTestData(e){const{hevcTestData:t}=W.getInstance();Object.keys(e).forEach((n=>{t[n]=e[n]}))}static getHevcTestData(){const{hevcTestData:e}=W.getInstance();return e}static setABTest(e){const{abTestData:t}=W.getInstance();Object.keys(e).forEach((n=>{t[n]=e[n]}))}static getABTest(){const{abTestData:e}=W.getInstance();return e}reset(){this.abTestVersion=""}setHevcAbVersion(e){this.hevcAbVersion=e}getAbVersions(){return`${this.hevcAbVersion},${this.abTestVersion}`}}function q(e){const{performance:t,net:n,score:r=0}=e;if(!t&&!n)return{score:0};const i={score:j(r)};try{if(n){const{downlink:e={},performanceNet:t={},score:r=0}=n;i.link_s=j((null==e?void 0:e.score)||0),i.link_o=j((null==e?void 0:e.origin)||0),i.netper_s=j((null==t?void 0:t.score)||0),i.netper_o=j((null==t?void 0:t.origin)||0),i.net_s=j(r)}if(t){const{cpu:e,memory:n,gpu:r}=t;i.memory_s=j((null==n?void 0:n.score)||0),i.gpu_s=j((null==r?void 0:r.score)||0),i.gpu=(null==r?void 0:r.origin)||"",i.vendor=(null==r?void 0:r.vendor)||"",i.cpu_s=j((null==e?void 0:e.score)||0);const{cpuCoreNumber:o,decodeImg:a,timer:s}=e;i.core_s=j((null==o?void 0:o.score)||0),i.decdeimg_s=j((null==a?void 0:a.score)||0),i.decdeimg_o=j((null==a?void 0:a.origin)||0),i.timer_s=j((null==s?void 0:s.score)||0),i.timer_o=j((null==s?void 0:s.origin)||0)}return i}catch{return i}}function Y(e){var t;const n=null==(t=null==e?void 0:e.performance)?void 0:t.gpu;return n?{score:n.score||-2,gpu:n.origin||"",vendor:n.vendor||""}:null}class J{constructor(){this.asyncDate=0,this.syncDate=0,this.markData={},this.shortData={},this.mark=null,this.curImgUrl="",this.gpuScoreData={score:-2,vendor:"",gpu:""},!H()&&this.syncMark()}syncMark(){if(0!==this.syncDate)return;this.mark||(this.mark=new U({decodeImgUrl:this.curImgUrl})),this.syncDate=(new Date).getTime(),this.markData=this.mark.scoreSync(),this.shortData=q(this.markData);const e=Y(this.markData);e&&(this.gpuScoreData=e)}static getInstance(){return J.instance||(J.instance=new J),J.instance}static syncMark(){return J.getInstance().syncMark()}static async asyncMark(e){const t=J.getInstance();if(0!==t.asyncDate)return;t.curImgUrl=function(e){return e?"https://lf16-tiktok-web.tiktokcdn-us.com/obj/tiktok-web-tx/tiktok/webapp/main/assets/perf_images/performance.jpeg":"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/tiktok/webapp/main/assets/perf_images/performance.jpeg"}(e);const n=new U({decodeImgUrl:t.curImgUrl});t.mark=n,t.asyncDate=(new Date).getTime();const r=await(null==n?void 0:n.scoreAsync());t.markData=r,t.shortData=q(r);const i=Y(r);i&&(t.gpuScoreData=i)}static get shortData(){return J.getInstance().shortData}static get gpuScoreData(){return J.getInstance().gpuScoreData}static markData(){return J.getInstance().markData}}},78447:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(57882),i=n(68955),o=n(40263);const a=['video/mp4;codecs="hvc1.1.L0.0"','video/mp4;codecs="hvc1.1.6.L120"','video/mp4;codecs="hev1.1.6.L120.90"','video/mp4;codecs="hev1.1.6.L120.90"','video/mp4;codecs="hev1.2.4.L120.90"','video/mp4;codecs="hev1.3.E.L120.90"','video/mp4;codecs="hev1.4.10.L120.90"'];class s{constructor(e=""){this.rawUA=e,this.platformType=null,this.platformVersion=0,this.browserType=null,this.browserVersion=0,this.isChromium=!1,this.chromiumVersion=0,this.isMobile=!1,this.parseRowUA(this.rawUA)}parseRowPlatform(e=""){if(/Windows NT 10\.0/.test(e))this.platformType="Windows",this.platformVersion=10;else if(/Windows NT 6\.3/.test(e))this.platformType="Windows",this.platformVersion=8.1;else if(/Windows NT 6\.2/.test(e))this.platformType="Windows",this.platformVersion=8;else if(/Windows NT 6\.1/.test(e))this.platformType="Windows",this.platformVersion=7;else if(/Windows NT 6\.0/.test(e))this.platformType="Windows";else if(/Windows NT 5\.1/.test(e))this.platformType="Windows";else if(/Windows NT 5\.0/.test(e))this.platformType="Windows";else if(/Windows Phone/.test(e))this.platformType="Windows",this.isMobile=!0;else if(/Android/.test(e)){this.platformType="Android";const t=e.match(/Android\s([0-9\.]+)/);t&&t.length>1&&(this.platformVersion=parseFloat(t[1])),this.isMobile=!0}else if(/Linux/.test(e))this.platformType="Linux";else if(/CrOS/.test(e)){this.platformType="ChromeOS";const t=e.match(/CrOS ([a-zA-Z0-9_]+) (\d+\.\d+\.\d+\.\d+)/);t&&t.length>2&&(this.platformVersion=parseFloat(t[2]))}else if(/iPad|iPhone|iPod/.test(e)){this.platformType="iOS";const t=e.match(/OS (\d+)_(\d+)_?(\d+)?/);t&&t.length>2&&(this.platformVersion=parseFloat(t[1]+"."+t[2]+"."+(t[3]||"0"))),this.isMobile=!0}else if(/Mac OS X|Macintosh/.test(e)){this.platformType="MacOS";const t=e.match(/Mac OS X (10[._]\d+(?:[._]\d+)?)/);t&&t.length>1&&(this.platformVersion=parseFloat(t[1].replace(/_/g,".")))}}parseTVPlatform(e=""){e.toLowerCase&&(e=e.toLowerCase()),/tizen/.test(e)?this.platformType="Tizen":/webos/.test(e)?this.platformType="WebOS":/vstvb/.test(e)?this.platformType="VSTVB":/fetchtv/.test(e)?this.platformType="FetchTV":/netgemtv/.test(e)?this.platformType="NetGemTV":/vizio/.test(e)?this.platformType="VIZIO":/wpe/.test(e)?this.platformType="WPE":/vodafone/.test(e)?this.platformType="VODAFONE":/philips/.test(e)?this.platformType="Philips":/netrangemmh/.test(e)?this.platformType="NETRANGEMMH":/cva/.test(e)?this.platformType="CVA":/tlc/.test(e)?this.platformType="TLC":/openmw/.test(e)?this.platformType="OpenMW":/totalplay/.test(e)?this.platformType="Totalplay":/vidaa/.test(e)?this.platformType="VIDAA":/megacable/.test(e)?this.platformType="megacable":/lge/.test(e)&&(this.platformType="LGE")}parseRowBrowser(e=""){if(/MSIE|Trident/.test(e))this.browserType="IE";else if(/Edg|Edge/.test(e)){this.browserType="Edge";const t=e.match(/(?:Edg|Edge)\/(\d+\.?\d*)/);t&&t.length>1&&(this.browserVersion=parseFloat(t[1]))}else if(/Opera|OPR/.test(e)){this.browserType="Opera";const t=e.match(/(?:Opera|OPR)\/(\d+\.?\d*)/);t&&t.length>1&&(this.browserVersion=parseFloat(t[1]))}else if(/Firefox/.test(e)){this.browserType="Firefox";const t=e.match(/Firefox\/(\d+\.?\d*)/);t&&t.length>1&&(this.browserVersion=parseFloat(t[1]))}else if(/Safari/.test(e)&&!/Chrome/.test(e)){this.browserType="Safari";const t=e.match(/Version\/(\d+(\.\d+)+).*Safari/);t&&t.length>1&&(this.browserVersion=parseFloat(t[1]))}else if(/Chrome/.test(e)){this.browserType="Chrome";const t=e.match(/(?:CriOS|Chrome)\/(\d+\.?\d*)/);t&&t.length>1&&(this.browserVersion=parseFloat(t[1]))}if(/Chrome/.test(e)){this.isChromium=!0;const t=e.match(/(?:CriOS|Chrome)\/(\d+\.?\d*)/);t&&t.length>1&&(this.chromiumVersion=parseFloat(t[1]))}}parseRowUA(e=""){this.parseRowPlatform(e),this.parseTVPlatform(e),this.parseRowBrowser(e)}}class u extends r.C{constructor(){super(),this._isMSEAvailable=()=>!(typeof window>"u")&&"MediaSource"in window,this._checkUA=()=>{if("Linux"==this.ua.platformType||"ChromeOS"==this.ua.platformType||"Firefox"==this.ua.browserType||"Opera"==this.ua.browserType||"Edge"==this.ua.browserType&&this.ua.browserVersion<107)return!1;if(this.ua.isChromium){if(this.ua.chromiumVersion<107||"Chrome"==this.ua.browserType&&("Android"==this.ua.platformType&&(this.ua.platformVersion<5||this.ua.browserVersion<117)||"Windows"==this.ua.platformType&&this.ua.platformVersion<8))return!1}else if("Safari"==this.ua.browserType&&this.ua.browserVersion<13)return!1;return!0},this._isHEVCAvailable=()=>!(typeof window>"u"||!window.MediaSource)&&a.reduce(((e,t)=>e||window.MediaSource.isTypeSupported(t)),!1),this.checkHEVCWithPlaybackQuality=(e="",t=.2,n)=>{(0,i.lg)({url:e,minDroppedFramesRate:t,minTotalVideoFrames:10}).then((e=>{n(e)}))},this._player=null,this._element=null,this.ua=new s(this.userAgent),this.isMSESupported=this._isMSEAvailable(),this.isHEVCSupported=this._isHEVCAvailable()&&(0,i.Zo)(),this.shouldUseHEVC=this.isHEVCSupported&&this._checkUA()}static get version(){return o.v}get playbackQuality(){var e,t;return this._element?this._element.getVideoPlaybackQuality?this._element.getVideoPlaybackQuality():{corruptedVideoFrames:0,creationTime:performance.now(),droppedVideoFrames:(null==(e=this.el)?void 0:e.webkitDroppedFrameCount)||0,totalVideoFrames:(null==(t=this.el)?void 0:t.webkitDecodedFrameCount)||0}:null}get cpu(){return typeof navigator>"u"||!navigator.hardwareConcurrency?0:navigator.hardwareConcurrency}get memory(){return typeof navigator>"u"||!navigator.deviceMemory?0:navigator.deviceMemory}get userAgent(){return typeof navigator>"u"||!navigator.userAgent?"":navigator.userAgent}get bandwidth(){return typeof navigator>"u"||!navigator.connection?0:navigator.connection.downlink||0}get networkType(){return typeof navigator>"u"||!navigator.connection?"":navigator.connection.effectiveType||""}get platformType(){return this.ua.platformType||""}get platformVersion(){return this.ua.platformVersion}get browserType(){return this.ua.browserType||""}get browserVersion(){return this.ua.browserVersion}get isChromium(){return this.ua.isChromium}get chromiumVersion(){return this.ua.chromiumVersion}set player(e){var t;this._player=e,this._element=(null==(t=this._player)?void 0:t.el)||null}set element(e){this._element=e}}},52238:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(){o=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch{c=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new M(i||[]);return r(a,"_invoke",{value:k(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var h={};function d(){}function p(){}function v(){}var g={};c(g,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(x([])));m&&m!==t&&n.call(m,a)&&(g=m);var _=v.prototype=d.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function i(r,o,a,s){var u=f(e[r],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,s)}))}s(u.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=v,r(_,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},b(T.prototype),c(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new T(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=x,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,u,"next",e)}function u(e){s(o,r,i,a,u,"throw",e)}a(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,n)}}function m(){return m=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},m.apply(this,arguments)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0!==t)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}n.d(t,{A:()=>K_,M:()=>xN,P:()=>fT,Q:()=>i_,T:()=>ok,a:()=>v$,b:()=>X_});var w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function R(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M=function(e){return e&&e.Math===Math&&e},x=M("object"==typeof globalThis&&globalThis)||M("object"==typeof window&&window)||M("object"==typeof self&&self)||M("object"==typeof w&&w)||M("object"==typeof w&&w)||function(){return this}()||Function("return this")(),P={},E=function(e){try{return!!e()}catch{return!0}},D=!E((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),O=!E((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),I=O,A=Function.prototype.call,L=I?A.bind(A):function(){return A.apply(A,arguments)},C={},G={}.propertyIsEnumerable,N=Object.getOwnPropertyDescriptor,B=N&&!G.call({1:2},1);C.f=B?function(e){var t=N(this,e);return!!t&&t.enumerable}:G;var $,F,U=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},H=O,j=Function.prototype,V=j.call,z=H&&j.bind.bind(V,V),X=H?z:function(e){return function(){return V.apply(e,arguments)}},K=X,Q=K({}.toString),W=K("".slice),q=function(e){return W(Q(e),8,-1)},Y=E,J=q,Z=Object,ee=X("".split),te=Y((function(){return!Z("z").propertyIsEnumerable(0)}))?function(e){return"String"===J(e)?ee(e,""):Z(e)}:Z,ne=function(e){return null==e},re=ne,ie=TypeError,oe=function(e){if(re(e))throw new ie("Can't call method on "+e);return e},ae=te,se=oe,ue=function(e){return ae(se(e))},ce="object"==typeof document&&document.all,le=typeof ce>"u"&&void 0!==ce?function(e){return"function"==typeof e||e===ce}:function(e){return"function"==typeof e},fe=le,he=function(e){return"object"==typeof e?null!==e:fe(e)},de=x,pe=le,ve=function(e,t){return arguments.length<2?function(e){return pe(e)?e:void 0}(de[e]):de[e]&&de[e][t]},ge=X({}.isPrototypeOf),ye=typeof navigator<"u"&&String(navigator.userAgent)||"",me=x,_e=ye,be=me.process,Te=me.Deno,ke=be&&be.versions||Te&&Te.version,Se=ke&&ke.v8;Se&&(F=($=Se.split("."))[0]>0&&$[0]<4?1:+($[0]+$[1])),!F&&_e&&(!($=_e.match(/Edge\/(\d+)/))||$[1]>=74)&&($=_e.match(/Chrome\/(\d+)/))&&(F=+$[1]);var we=F,Re=we,Me=E,xe=x.String,Pe=!!Object.getOwnPropertySymbols&&!Me((function(){var e=Symbol("symbol detection");return!xe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Re&&Re<41})),Ee=Pe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,De=ve,Oe=le,Ie=ge,Ae=Object,Le=Ee?function(e){return"symbol"==typeof e}:function(e){var t=De("Symbol");return Oe(t)&&Ie(t.prototype,Ae(e))},Ce=String,Ge=function(e){try{return Ce(e)}catch{return"Object"}},Ne=le,Be=Ge,$e=TypeError,Fe=function(e){if(Ne(e))return e;throw new $e(Be(e)+" is not a function")},Ue=Fe,He=ne,je=function(e,t){var n=e[t];return He(n)?void 0:Ue(n)},Ve=L,ze=le,Xe=he,Ke=TypeError,Qe={exports:{}},We=x,qe=Object.defineProperty,Ye=function(e,t){try{qe(We,e,{value:t,configurable:!0,writable:!0})}catch{We[e]=t}return t},Je=x,Ze=Ye,et="__core-js_shared__",tt=Qe.exports=Je[et]||Ze(et,{});(tt.versions||(tt.versions=[])).push({version:"3.37.1",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var nt=Qe.exports,rt=nt,it=function(e,t){return rt[e]||(rt[e]=t||{})},ot=oe,at=Object,st=function(e){return at(ot(e))},ut=st,ct=X({}.hasOwnProperty),lt=Object.hasOwn||function(e,t){return ct(ut(e),t)},ft=X,ht=0,dt=Math.random(),pt=ft(1..toString),vt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+pt(++ht+dt,36)},gt=it,yt=lt,mt=vt,_t=Pe,bt=Ee,Tt=x.Symbol,kt=gt("wks"),St=bt?Tt.for||Tt:Tt&&Tt.withoutSetter||mt,wt=function(e){return yt(kt,e)||(kt[e]=_t&&yt(Tt,e)?Tt[e]:St("Symbol."+e)),kt[e]},Rt=L,Mt=he,xt=Le,Pt=je,Et=TypeError,Dt=wt("toPrimitive"),Ot=function(e,t){if(!Mt(e)||xt(e))return e;var n,r=Pt(e,Dt);if(r){if(void 0===t&&(t="default"),n=Rt(r,e,t),!Mt(n)||xt(n))return n;throw new Et("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&ze(n=e.toString)&&!Xe(r=Ve(n,e))||ze(n=e.valueOf)&&!Xe(r=Ve(n,e))||"string"!==t&&ze(n=e.toString)&&!Xe(r=Ve(n,e)))return r;throw new Ke("Can't convert object to primitive value")}(e,t)},It=Ot,At=Le,Lt=function(e){var t=It(e,"string");return At(t)?t:t+""},Ct=he,Gt=x.document,Nt=Ct(Gt)&&Ct(Gt.createElement),Bt=function(e){return Nt?Gt.createElement(e):{}},$t=Bt,Ft=!D&&!E((function(){return 7!==Object.defineProperty($t("div"),"a",{get:function(){return 7}}).a})),Ut=D,Ht=L,jt=C,Vt=U,zt=ue,Xt=Lt,Kt=lt,Qt=Ft,Wt=Object.getOwnPropertyDescriptor;P.f=Ut?Wt:function(e,t){if(e=zt(e),t=Xt(t),Qt)try{return Wt(e,t)}catch{}if(Kt(e,t))return Vt(!Ht(jt.f,e,t),e[t])};var qt={},Yt=D&&E((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Jt=he,Zt=String,en=TypeError,tn=function(e){if(Jt(e))return e;throw new en(Zt(e)+" is not an object")},nn=D,rn=Ft,on=Yt,an=tn,sn=Lt,un=TypeError,cn=Object.defineProperty,ln=Object.getOwnPropertyDescriptor,fn="enumerable",hn="configurable",dn="writable";qt.f=nn?on?function(e,t,n){if(an(e),t=sn(t),an(n),"function"==typeof e&&"prototype"===t&&"value"in n&&dn in n&&!n[dn]){var r=ln(e,t);r&&r[dn]&&(e[t]=n.value,n={configurable:hn in n?n[hn]:r[hn],enumerable:fn in n?n[fn]:r[fn],writable:!1})}return cn(e,t,n)}:cn:function(e,t,n){if(an(e),t=sn(t),an(n),rn)try{return cn(e,t,n)}catch{}if("get"in n||"set"in n)throw new un("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var pn=qt,vn=U,gn=D?function(e,t,n){return pn.f(e,t,vn(1,n))}:function(e,t,n){return e[t]=n,e},yn={exports:{}},mn=D,_n=lt,bn=Function.prototype,Tn=mn&&Object.getOwnPropertyDescriptor,kn=_n(bn,"name"),Sn={EXISTS:kn,PROPER:kn&&"something"===function(){}.name,CONFIGURABLE:kn&&(!mn||mn&&Tn(bn,"name").configurable)},wn=le,Rn=nt,Mn=X(Function.toString);wn(Rn.inspectSource)||(Rn.inspectSource=function(e){return Mn(e)});var xn,Pn,En,Dn=Rn.inspectSource,On=le,In=x.WeakMap,An=On(In)&&/native code/.test(String(In)),Ln=vt,Cn=it("keys"),Gn=function(e){return Cn[e]||(Cn[e]=Ln(e))},Nn={},Bn=An,$n=x,Fn=he,Un=gn,Hn=lt,jn=nt,Vn=Gn,zn=Nn,Xn="Object already initialized",Kn=$n.TypeError,Qn=$n.WeakMap;if(Bn||jn.state){var Wn=jn.state||(jn.state=new Qn);Wn.get=Wn.get,Wn.has=Wn.has,Wn.set=Wn.set,xn=function(e,t){if(Wn.has(e))throw new Kn(Xn);return t.facade=e,Wn.set(e,t),t},Pn=function(e){return Wn.get(e)||{}},En=function(e){return Wn.has(e)}}else{var qn=Vn("state");zn[qn]=!0,xn=function(e,t){if(Hn(e,qn))throw new Kn(Xn);return t.facade=e,Un(e,qn,t),t},Pn=function(e){return Hn(e,qn)?e[qn]:{}},En=function(e){return Hn(e,qn)}}var Yn={set:xn,get:Pn,has:En,enforce:function(e){return En(e)?Pn(e):xn(e,{})},getterFor:function(e){return function(t){var n;if(!Fn(t)||(n=Pn(t)).type!==e)throw new Kn("Incompatible receiver, "+e+" required");return n}}},Jn=X,Zn=E,er=le,tr=lt,nr=D,rr=Sn.CONFIGURABLE,ir=Dn,or=Yn.enforce,ar=Yn.get,sr=String,ur=Object.defineProperty,cr=Jn("".slice),lr=Jn("".replace),fr=Jn([].join),hr=nr&&!Zn((function(){return 8!==ur((function(){}),"length",{value:8}).length})),dr=String(String).split("String"),pr=yn.exports=function(e,t,n){"Symbol("===cr(sr(t),0,7)&&(t="["+lr(sr(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!tr(e,"name")||rr&&e.name!==t)&&(nr?ur(e,"name",{value:t,configurable:!0}):e.name=t),hr&&n&&tr(n,"arity")&&e.length!==n.arity&&ur(e,"length",{value:n.arity});try{n&&tr(n,"constructor")&&n.constructor?nr&&ur(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var r=or(e);return tr(r,"source")||(r.source=fr(dr,"string"==typeof t?t:"")),e};Function.prototype.toString=pr((function(){return er(this)&&ar(this).source||ir(this)}),"toString");var vr=yn.exports,gr=le,yr=qt,mr=vr,_r=Ye,br=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(gr(n)&&mr(n,o,r),r.global)i?e[t]=n:_r(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch{}i?e[t]=n:yr.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},Tr={},kr=Math.ceil,Sr=Math.floor,wr=Math.trunc||function(e){var t=+e;return(t>0?Sr:kr)(t)},Rr=wr,Mr=function(e){var t=+e;return t!=t||0===t?0:Rr(t)},xr=Mr,Pr=Math.max,Er=Math.min,Dr=function(e,t){var n=xr(e);return n<0?Pr(n+t,0):Er(n,t)},Or=Mr,Ir=Math.min,Ar=function(e){var t=Or(e);return t>0?Ir(t,9007199254740991):0},Lr=Ar,Cr=function(e){return Lr(e.length)},Gr=ue,Nr=Dr,Br=Cr,$r=function(e){return function(t,n,r){var i=Gr(t),o=Br(i);if(0===o)return!e&&-1;var a,s=Nr(r,o);if(e&&n!=n){for(;o>s;)if((a=i[s++])!=a)return!0}else for(;o>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},Fr={includes:$r(!0),indexOf:$r(!1)},Ur=lt,Hr=ue,jr=Fr.indexOf,Vr=Nn,zr=X([].push),Xr=function(e,t){var n,r=Hr(e),i=0,o=[];for(n in r)!Ur(Vr,n)&&Ur(r,n)&&zr(o,n);for(;t.length>i;)Ur(r,n=t[i++])&&(~jr(o,n)||zr(o,n));return o},Kr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qr=Xr,Wr=Kr.concat("length","prototype");Tr.f=Object.getOwnPropertyNames||function(e){return Qr(e,Wr)};var qr={};qr.f=Object.getOwnPropertySymbols;var Yr=ve,Jr=Tr,Zr=qr,ei=tn,ti=X([].concat),ni=Yr("Reflect","ownKeys")||function(e){var t=Jr.f(ei(e)),n=Zr.f;return n?ti(t,n(e)):t},ri=lt,ii=ni,oi=P,ai=qt,si=function(e,t,n){for(var r=ii(t),i=ai.f,o=oi.f,a=0;a<r.length;a++){var s=r[a];!ri(e,s)&&(!n||!ri(n,s))&&i(e,s,o(t,s))}},ui=E,ci=le,li=/#|\.prototype\./,fi=function(e,t){var n=di[hi(e)];return n===vi||n!==pi&&(ci(t)?ui(t):!!t)},hi=fi.normalize=function(e){return String(e).replace(li,".").toLowerCase()},di=fi.data={},pi=fi.NATIVE="N",vi=fi.POLYFILL="P",gi=fi,yi=x,mi=P.f,_i=gn,bi=br,Ti=Ye,ki=si,Si=gi,wi=function(e,t){var n,r,i,o,a,s=e.target,u=e.global,c=e.stat;if(n=u?yi:c?yi[s]||Ti(s,{}):yi[s]&&yi[s].prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(a=mi(n,r))&&a.value:n[r],!Si(u?r:s+(c?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;ki(o,i)}(e.sham||i&&i.sham)&&_i(o,"sham",!0),bi(n,r,o,e)}},Ri=q,Mi=X,xi=function(e){if("Function"===Ri(e))return Mi(e)},Pi=Fe,Ei=O,Di=xi(xi.bind),Oi=function(e,t){return Pi(e),void 0===t?e:Ei?Di(e,t):function(){return e.apply(t,arguments)}},Ii=q,Ai=Array.isArray||function(e){return"Array"===Ii(e)},Li={};Li[wt("toStringTag")]="z";var Ci="[object z]"===String(Li),Gi=Ci,Ni=le,Bi=q,$i=wt("toStringTag"),Fi=Object,Ui="Arguments"===Bi(function(){return arguments}()),Hi=Gi?Bi:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch{}}(t=Fi(e),$i))?n:Ui?Bi(t):"Object"===(r=Bi(t))&&Ni(t.callee)?"Arguments":r},ji=X,Vi=E,zi=le,Xi=Hi,Ki=Dn,Qi=function(){},Wi=ve("Reflect","construct"),qi=/^\s*(?:class|function)\b/,Yi=ji(qi.exec),Ji=!qi.test(Qi),Zi=function(e){if(!zi(e))return!1;try{return Wi(Qi,[],e),!0}catch{return!1}},eo=function(e){if(!zi(e))return!1;switch(Xi(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Ji||!!Yi(qi,Ki(e))}catch{return!0}};eo.sham=!0;var to=!Wi||Vi((function(){var e;return Zi(Zi.call)||!Zi(Object)||!Zi((function(){e=!0}))||e}))?eo:Zi,no=Ai,ro=to,io=he,oo=wt("species"),ao=Array,so=function(e,t){return new(function(e){var t;return no(e)&&(t=e.constructor,(ro(t)&&(t===ao||no(t.prototype))||io(t)&&null===(t=t[oo]))&&(t=void 0)),void 0===t?ao:t}(e))(0===t?0:t)},uo=Oi,co=te,lo=st,fo=Cr,ho=so,po=X([].push),vo=function(e){var t=1===e,n=2===e,r=3===e,i=4===e,o=6===e,a=7===e,s=5===e||o;return function(u,c,l,f){for(var h,d,p=lo(u),v=co(p),g=fo(v),y=uo(c,l),m=0,_=f||ho,b=t?_(u,g):n||a?_(u,0):void 0;g>m;m++)if((s||m in v)&&(d=y(h=v[m],m,p),e))if(t)b[m]=d;else if(d)switch(e){case 3:return!0;case 5:return h;case 6:return m;case 2:po(b,h)}else switch(e){case 4:return!1;case 7:po(b,h)}return o?-1:r||i?i:b}},go={forEach:vo(0),map:vo(1),filter:vo(2),some:vo(3),every:vo(4),find:vo(5),findIndex:vo(6),filterReject:vo(7)},yo=E,mo=we,_o=wt("species"),bo=function(e){return mo>=51||!yo((function(){var t=[];return(t.constructor={})[_o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},To=go.filter;wi({target:"Array",proto:!0,forced:!bo("filter")},{filter:function(e){return To(this,e,arguments.length>1?arguments[1]:void 0)}});var ko=Hi,So=Ci?{}.toString:function(){return"[object "+ko(this)+"]"};Ci||br(Object.prototype,"toString",So,{unsafe:!0});var wo=TypeError,Ro=function(e){if(e>9007199254740991)throw wo("Maximum allowed index exceeded");return e},Mo=D,xo=qt,Po=U,Eo=function(e,t,n){Mo?xo.f(e,t,Po(0,n)):e[t]=n},Do=wi,Oo=E,Io=Ai,Ao=he,Lo=st,Co=Cr,Go=Ro,No=Eo,Bo=so,$o=bo,Fo=we,Uo=wt("isConcatSpreadable"),Ho=Fo>=51||!Oo((function(){var e=[];return e[Uo]=!1,e.concat()[0]!==e})),jo=function(e){if(!Ao(e))return!1;var t=e[Uo];return void 0!==t?!!t:Io(e)};Do({target:"Array",proto:!0,arity:1,forced:!Ho||!$o("concat")},{concat:function(e){var t,n,r,i,o,a=Lo(this),s=Bo(a,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(jo(o=-1===t?a:arguments[t]))for(i=Co(o),Go(u+i),n=0;n<i;n++,u++)n in o&&No(s,u,o[n]);else Go(u+1),No(s,u++,o);return s.length=u,s}});var Vo=Hi,zo=String,Xo=function(e){if("Symbol"===Vo(e))throw new TypeError("Cannot convert a Symbol value to a string");return zo(e)},Ko=tn,Qo=function(){var e=Ko(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},Wo=L,qo=lt,Yo=ge,Jo=Qo,Zo=RegExp.prototype,ea=function(e){var t=e.flags;return void 0!==t||"flags"in Zo||qo(e,"flags")||!Yo(Zo,e)?t:Wo(Jo,e)},ta=Sn.PROPER,na=br,ra=tn,ia=Xo,oa=E,aa=ea,sa="toString",ua=RegExp.prototype,ca=ua[sa],la=oa((function(){return"/a/b"!==ca.call({source:"a",flags:"b"})})),fa=ta&&ca.name!==sa;(la||fa)&&na(ua,sa,(function(){var e=ra(this);return"/"+ia(e.source)+"/"+ia(aa(e))}),{unsafe:!0});var ha=X([].slice),da=wi,pa=Ai,va=to,ga=he,ya=Dr,ma=Cr,_a=ue,ba=Eo,Ta=wt,ka=ha,Sa=bo("slice"),wa=Ta("species"),Ra=Array,Ma=Math.max;da({target:"Array",proto:!0,forced:!Sa},{slice:function(e,t){var n,r,i,o=_a(this),a=ma(o),s=ya(e,a),u=ya(void 0===t?a:t,a);if(pa(o)&&(n=o.constructor,(va(n)&&(n===Ra||pa(n.prototype))||ga(n)&&null===(n=n[wa]))&&(n=void 0),n===Ra||void 0===n))return ka(o,s,u);for(r=new(void 0===n?Ra:n)(Ma(u-s,0)),i=0;s<u;s++,i++)s in o&&ba(r,i,o[s]);return r.length=i,r}});var xa=Xr,Pa=Kr,Ea=Object.keys||function(e){return xa(e,Pa)},Da=D,Oa=X,Ia=L,Aa=E,La=Ea,Ca=qr,Ga=C,Na=st,Ba=te,$a=Object.assign,Fa=Object.defineProperty,Ua=Oa([].concat),Ha=!$a||Aa((function(){if(Da&&1!==$a({b:1},$a(Fa({},"a",{enumerable:!0,get:function(){Fa(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!==$a({},e)[n]||La($a({},t)).join("")!==r}))?function(e,t){for(var n=Na(e),r=arguments.length,i=1,o=Ca.f,a=Ga.f;r>i;)for(var s,u=Ba(arguments[i++]),c=o?Ua(La(u),o(u)):La(u),l=c.length,f=0;l>f;)s=c[f++],(!Da||Ia(a,u,s))&&(n[s]=u[s]);return n}:$a,ja=Ha;wi({target:"Object",stat:!0,arity:2,forced:Object.assign!==ja},{assign:ja});var Va={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},za=Bt("span").classList,Xa=za&&za.constructor&&za.constructor.prototype,Ka=Xa===Object.prototype?void 0:Xa,Qa=E,Wa=function(e,t){var n=[][e];return!!n&&Qa((function(){n.call(null,t||function(){return 1},1)}))},qa=go.forEach,Ya=Wa("forEach")?[].forEach:function(e){return qa(this,e,arguments.length>1?arguments[1]:void 0)},Ja=x,Za=Va,es=Ka,ts=Ya,ns=gn,rs=function(e){if(e&&e.forEach!==ts)try{ns(e,"forEach",ts)}catch{e.forEach=ts}};for(var is in Za)Za[is]&&rs(Ja[is]&&Ja[is].prototype);rs(es);var os={},as=D,ss=Yt,us=qt,cs=tn,ls=ue,fs=Ea;os.f=as&&!ss?Object.defineProperties:function(e,t){cs(e);for(var n,r=ls(t),i=fs(t),o=i.length,a=0;o>a;)us.f(e,n=i[a++],r[n]);return e};var hs,ds=ve("document","documentElement"),ps=tn,vs=os,gs=Kr,ys=Nn,ms=ds,_s=Bt,bs="prototype",Ts="script",ks=Gn("IE_PROTO"),Ss=function(){},ws=function(e){return"<"+Ts+">"+e+"</"+Ts+">"},Rs=function(e){e.write(ws("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ms=function(){try{hs=new ActiveXObject("htmlfile")}catch{}Ms=typeof document<"u"?document.domain&&hs?Rs(hs):function(){var e,t=_s("iframe"),n="java"+Ts+":";return t.style.display="none",ms.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(ws("document.F=Object")),e.close(),e.F}():Rs(hs);for(var e=gs.length;e--;)delete Ms[bs][gs[e]];return Ms()};ys[ks]=!0;var xs=Object.create||function(e,t){var n;return null!==e?(Ss[bs]=ps(e),n=new Ss,Ss[bs]=null,n[ks]=e):n=Ms(),void 0===t?n:vs.f(n,t)},Ps=wt,Es=xs,Ds=qt.f,Os=Ps("unscopables"),Is=Array.prototype;void 0===Is[Os]&&Ds(Is,Os,{configurable:!0,value:Es(null)});var As,Ls,Cs,Gs=function(e){Is[Os][e]=!0},Ns={},Bs=!E((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),$s=lt,Fs=le,Us=st,Hs=Bs,js=Gn("IE_PROTO"),Vs=Object,zs=Vs.prototype,Xs=Hs?Vs.getPrototypeOf:function(e){var t=Us(e);if($s(t,js))return t[js];var n=t.constructor;return Fs(n)&&t instanceof n?n.prototype:t instanceof Vs?zs:null},Ks=E,Qs=le,Ws=he,qs=Xs,Ys=br,Js=wt("iterator"),Zs=!1;[].keys&&("next"in(Cs=[].keys())?(Ls=qs(qs(Cs)))!==Object.prototype&&(As=Ls):Zs=!0);var eu=!Ws(As)||Ks((function(){var e={};return As[Js].call(e)!==e}));eu&&(As={}),Qs(As[Js])||Ys(As,Js,(function(){return this}));var tu={IteratorPrototype:As,BUGGY_SAFARI_ITERATORS:Zs},nu=qt.f,ru=lt,iu=wt("toStringTag"),ou=function(e,t,n){e&&!n&&(e=e.prototype),e&&!ru(e,iu)&&nu(e,iu,{configurable:!0,value:t})},au=tu.IteratorPrototype,su=xs,uu=U,cu=ou,lu=Ns,fu=function(){return this},hu=X,du=Fe,pu=he,vu=String,gu=TypeError,yu=he,mu=oe,_u=function(e){if(function(e){return pu(e)||null===e}(e))return e;throw new gu("Can't set "+vu(e)+" as a prototype")},bu=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=function(e,t,n){try{return hu(du(Object.getOwnPropertyDescriptor(e,t)[n]))}catch{}}(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch{}return function(n,r){return mu(n),_u(r),yu(n)&&(t?e(n,r):n.__proto__=r),n}}():void 0),Tu=wi,ku=L,Su=le,wu=Xs,Ru=bu,Mu=ou,xu=gn,Pu=br,Eu=Ns,Du=Sn.PROPER,Ou=Sn.CONFIGURABLE,Iu=tu.IteratorPrototype,Au=tu.BUGGY_SAFARI_ITERATORS,Lu=wt("iterator"),Cu="keys",Gu="values",Nu="entries",Bu=function(){return this},$u=function(e,t,n,r,i,o,a){!function(e,t,n,r){var i=t+" Iterator";e.prototype=su(au,{next:uu(+!r,n)}),cu(e,i,!1),lu[i]=fu}(n,t,r);var s,u,c,l=function(e){if(e===i&&v)return v;if(!Au&&e&&e in d)return d[e];switch(e){case Cu:case Gu:case Nu:return function(){return new n(this,e)}}return function(){return new n(this)}},f=t+" Iterator",h=!1,d=e.prototype,p=d[Lu]||d["@@iterator"]||i&&d[i],v=!Au&&p||l(i),g="Array"===t&&d.entries||p;if(g&&(s=wu(g.call(new e)))!==Object.prototype&&s.next&&(wu(s)!==Iu&&(Ru?Ru(s,Iu):Su(s[Lu])||Pu(s,Lu,Bu)),Mu(s,f,!0)),Du&&i===Gu&&p&&p.name!==Gu&&(Ou?xu(d,"name",Gu):(h=!0,v=function(){return ku(p,this)})),i)if(u={values:l(Gu),keys:o?v:l(Cu),entries:l(Nu)},a)for(c in u)(Au||h||!(c in d))&&Pu(d,c,u[c]);else Tu({target:t,proto:!0,forced:Au||h},u);return d[Lu]!==v&&Pu(d,Lu,v,{name:i}),Eu[t]=v,u},Fu=function(e,t){return{value:e,done:t}},Uu=ue,Hu=Gs,ju=Ns,Vu=Yn,zu=qt.f,Xu=$u,Ku=Fu,Qu=D,Wu="Array Iterator",qu=Vu.set,Yu=Vu.getterFor(Wu),Ju=Xu(Array,"Array",(function(e,t){qu(this,{type:Wu,target:Uu(e),index:0,kind:t})}),(function(){var e=Yu(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,Ku(void 0,!0);switch(e.kind){case"keys":return Ku(n,!1);case"values":return Ku(t[n],!1)}return Ku([n,t[n]],!1)}),"values"),Zu=ju.Arguments=ju.Array;if(Hu("keys"),Hu("values"),Hu("entries"),Qu&&"values"!==Zu.name)try{zu(Zu,"name",{value:"values"})}catch{}var ec,tc,nc,rc,ic="process"===q(x.process),oc=vr,ac=qt,sc=function(e,t,n){return n.get&&oc(n.get,t,{getter:!0}),n.set&&oc(n.set,t,{setter:!0}),ac.f(e,t,n)},uc=ve,cc=sc,lc=D,fc=wt("species"),hc=function(e){var t=uc(e);lc&&t&&!t[fc]&&cc(t,fc,{configurable:!0,get:function(){return this}})},dc=ge,pc=TypeError,vc=function(e,t){if(dc(t,e))return e;throw new pc("Incorrect invocation")},gc=to,yc=Ge,mc=TypeError,_c=function(e){if(gc(e))return e;throw new mc(yc(e)+" is not a constructor")},bc=tn,Tc=_c,kc=ne,Sc=wt("species"),wc=function(e,t){var n,r=bc(e).constructor;return void 0===r||kc(n=bc(r)[Sc])?t:Tc(n)},Rc=O,Mc=Function.prototype,xc=Mc.apply,Pc=Mc.call,Ec="object"==typeof Reflect&&Reflect.apply||(Rc?Pc.bind(xc):function(){return Pc.apply(xc,arguments)}),Dc=TypeError,Oc=/(?:ipad|iphone|ipod).*applewebkit/i.test(ye),Ic=x,Ac=Ec,Lc=Oi,Cc=le,Gc=lt,Nc=E,Bc=ds,$c=ha,Fc=Bt,Uc=Oc,Hc=ic,jc=Ic.setImmediate,Vc=Ic.clearImmediate,zc=Ic.process,Xc=Ic.Dispatch,Kc=Ic.Function,Qc=Ic.MessageChannel,Wc=Ic.String,qc=0,Yc={},Jc="onreadystatechange";Nc((function(){ec=Ic.location}));var Zc=function(e){if(Gc(Yc,e)){var t=Yc[e];delete Yc[e],t()}},el=function(e){return function(){Zc(e)}},tl=function(e){Zc(e.data)},nl=function(e){Ic.postMessage(Wc(e),ec.protocol+"//"+ec.host)};(!jc||!Vc)&&(jc=function(e){!function(e,t){if(e<t)throw new Dc("Not enough arguments")}(arguments.length,1);var t=Cc(e)?e:Kc(e),n=$c(arguments,1);return Yc[++qc]=function(){Ac(t,void 0,n)},tc(qc),qc},Vc=function(e){delete Yc[e]},Hc?tc=function(e){zc.nextTick(el(e))}:Xc&&Xc.now?tc=function(e){Xc.now(el(e))}:Qc&&!Uc?(rc=(nc=new Qc).port2,nc.port1.onmessage=tl,tc=Lc(rc.postMessage,rc)):Ic.addEventListener&&Cc(Ic.postMessage)&&!Ic.importScripts&&ec&&"file:"!==ec.protocol&&!Nc(nl)?(tc=nl,Ic.addEventListener("message",tl,!1)):tc=Jc in Fc("script")?function(e){Bc.appendChild(Fc("script"))[Jc]=function(){Bc.removeChild(this),Zc(e)}}:function(e){setTimeout(el(e),0)});var rl={set:jc,clear:Vc},il=x,ol=D,al=Object.getOwnPropertyDescriptor,sl=function(){this.head=null,this.tail=null};sl.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var ul,cl,ll,fl,hl,dl=sl,pl=/ipad|iphone|ipod/i.test(ye)&&typeof Pebble<"u",vl=/web0s(?!.*chrome)/i.test(ye),gl=x,yl=Oi,ml=rl.set,_l=dl,bl=Oc,Tl=pl,kl=vl,Sl=ic,wl=gl.MutationObserver||gl.WebKitMutationObserver,Rl=gl.document,Ml=gl.process,xl=gl.Promise,Pl=function(e){if(!ol)return il[e];var t=al(il,e);return t&&t.value}("queueMicrotask");if(!Pl){var El=new _l,Dl=function(){var e,t;for(Sl&&(e=Ml.domain)&&e.exit();t=El.get();)try{t()}catch(e){throw El.head&&ul(),e}e&&e.enter()};bl||Sl||kl||!wl||!Rl?!Tl&&xl&&xl.resolve?((fl=xl.resolve(void 0)).constructor=xl,hl=yl(fl.then,fl),ul=function(){hl(Dl)}):Sl?ul=function(){Ml.nextTick(Dl)}:(ml=yl(ml,gl),ul=function(){ml(Dl)}):(cl=!0,ll=Rl.createTextNode(""),new wl(Dl).observe(ll,{characterData:!0}),ul=function(){ll.data=cl=!cl}),Pl=function(e){El.head||ul(),El.add(e)}}var Ol=Pl,Il=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Al=x.Promise,Ll="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Cl=!Ll&&!ic&&"object"==typeof window&&"object"==typeof document,Gl=x,Nl=Al,Bl=le,$l=gi,Fl=Dn,Ul=wt,Hl=Cl,jl=Ll,Vl=we;Nl&&Nl.prototype;var zl=Ul("species"),Xl=!1,Kl=Bl(Gl.PromiseRejectionEvent),Ql=$l("Promise",(function(){var e=Fl(Nl),t=e!==String(Nl);if(!t&&66===Vl)return!0;if(!Vl||Vl<51||!/native code/.test(e)){var n=new Nl((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[zl]=r,!(Xl=n.then((function(){}))instanceof r))return!0}return!t&&(Hl||jl)&&!Kl})),Wl={CONSTRUCTOR:Ql,REJECTION_EVENT:Kl,SUBCLASSING:Xl},ql={},Yl=Fe,Jl=TypeError,Zl=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new Jl("Bad Promise constructor");t=e,n=r})),this.resolve=Yl(t),this.reject=Yl(n)};ql.f=function(e){return new Zl(e)};var ef,tf,nf,rf=wi,of=ic,af=x,sf=L,uf=br,cf=bu,lf=ou,ff=hc,hf=Fe,df=le,pf=he,vf=vc,gf=wc,yf=rl.set,mf=Ol,_f=Il,bf=dl,Tf=Yn,kf=Al,Sf=ql,wf="Promise",Rf=Wl.CONSTRUCTOR,Mf=Wl.REJECTION_EVENT,xf=Wl.SUBCLASSING,Pf=Tf.getterFor(wf),Ef=Tf.set,Df=kf&&kf.prototype,Of=kf,If=Df,Af=af.TypeError,Lf=af.document,Cf=af.process,Gf=Sf.f,Nf=Gf,Bf=!!(Lf&&Lf.createEvent&&af.dispatchEvent),$f="unhandledrejection",Ff=function(e){var t;return!(!pf(e)||!df(t=e.then))&&t},Uf=function(e,t){var n,r,i,o=t.value,a=1===t.state,s=a?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&Xf(t),t.rejection=1),!0===s?n=o:(l&&l.enter(),n=s(o),l&&(l.exit(),i=!0)),n===e.promise?c(new Af("Promise-chain cycle")):(r=Ff(n))?sf(r,n,u,c):u(n)):c(o)}catch(e){l&&!i&&l.exit(),c(e)}},Hf=function(e,t){e.notified||(e.notified=!0,mf((function(){for(var n,r=e.reactions;n=r.get();)Uf(n,e);e.notified=!1,t&&!e.rejection&&Vf(e)})))},jf=function(e,t,n){var r,i;Bf?((r=Lf.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),af.dispatchEvent(r)):r={promise:t,reason:n},!Mf&&(i=af["on"+e])?i(r):e===$f&&function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch{}}("Unhandled promise rejection",n)},Vf=function(e){sf(yf,af,(function(){var t,n=e.facade,r=e.value;if(zf(e)&&(t=_f((function(){of?Cf.emit("unhandledRejection",r,n):jf($f,n,r)})),e.rejection=of||zf(e)?2:1,t.error))throw t.value}))},zf=function(e){return 1!==e.rejection&&!e.parent},Xf=function(e){sf(yf,af,(function(){var t=e.facade;of?Cf.emit("rejectionHandled",t):jf("rejectionhandled",t,e.value)}))},Kf=function(e,t,n){return function(r){e(t,r,n)}},Qf=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Hf(e,!0))},Wf=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new Af("Promise can't be resolved itself");var r=Ff(t);r?mf((function(){var n={done:!1};try{sf(r,t,Kf(Wf,n,e),Kf(Qf,n,e))}catch(t){Qf(n,t,e)}})):(e.value=t,e.state=1,Hf(e,!1))}catch(t){Qf({done:!1},t,e)}}};if(Rf&&(Of=function(e){vf(this,If),hf(e),sf(ef,this);var t=Pf(this);try{e(Kf(Wf,t),Kf(Qf,t))}catch(e){Qf(t,e)}},If=Of.prototype,(ef=function(e){Ef(this,{type:wf,done:!1,notified:!1,parent:!1,reactions:new bf,rejection:!1,state:0,value:void 0})}).prototype=uf(If,"then",(function(e,t){var n=Pf(this),r=Gf(gf(this,Of));return n.parent=!0,r.ok=!df(e)||e,r.fail=df(t)&&t,r.domain=of?Cf.domain:void 0,0===n.state?n.reactions.add(r):mf((function(){Uf(r,n)})),r.promise})),tf=function(){var e=new ef,t=Pf(e);this.promise=e,this.resolve=Kf(Wf,t),this.reject=Kf(Qf,t)},Sf.f=Gf=function(e){return e===Of||void 0===e?new tf(e):Nf(e)},df(kf)&&Df!==Object.prototype)){nf=Df.then,xf||uf(Df,"then",(function(e,t){var n=this;return new Of((function(e,t){sf(nf,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete Df.constructor}catch{}cf&&cf(Df,If)}rf({global:!0,constructor:!0,wrap:!0,forced:Rf},{Promise:Of}),lf(Of,wf,!1),ff(wf);var qf=Ns,Yf=wt("iterator"),Jf=Array.prototype,Zf=function(e){return void 0!==e&&(qf.Array===e||Jf[Yf]===e)},eh=Hi,th=je,nh=ne,rh=Ns,ih=wt("iterator"),oh=function(e){if(!nh(e))return th(e,ih)||th(e,"@@iterator")||rh[eh(e)]},ah=L,sh=Fe,uh=tn,ch=Ge,lh=oh,fh=TypeError,hh=function(e,t){var n=arguments.length<2?lh(e):t;if(sh(n))return uh(ah(n,e));throw new fh(ch(e)+" is not iterable")},dh=L,ph=tn,vh=je,gh=Oi,yh=L,mh=tn,_h=Ge,bh=Zf,Th=Cr,kh=ge,Sh=hh,wh=oh,Rh=function(e,t,n){var r,i;ph(e);try{if(!(r=vh(e,"return"))){if("throw"===t)throw n;return n}r=dh(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return ph(r),n},Mh=TypeError,xh=function(e,t){this.stopped=e,this.result=t},Ph=xh.prototype,Eh=function(e,t,n){var r,i,o,a,s,u,c,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),v=gh(t,l),g=function(e){return r&&Rh(r,"normal",e),new xh(!0,e)},y=function(e){return f?(mh(e),p?v(e[0],e[1],g):v(e[0],e[1])):p?v(e,g):v(e)};if(h)r=e.iterator;else if(d)r=e;else{if(!(i=wh(e)))throw new Mh(_h(e)+" is not iterable");if(bh(i)){for(o=0,a=Th(e);a>o;o++)if((s=y(e[o]))&&kh(Ph,s))return s;return new xh(!1)}r=Sh(e,i)}for(u=h?e.next:r.next;!(c=yh(u,r)).done;){try{s=y(c.value)}catch(e){Rh(r,"throw",e)}if("object"==typeof s&&s&&kh(Ph,s))return s}return new xh(!1)},Dh=wt("iterator"),Oh=!1;try{var Ih=0,Ah={next:function(){return{done:!!Ih++}},return:function(){Oh=!0}};Ah[Dh]=function(){return this},Array.from(Ah,(function(){throw 2}))}catch{}var Lh=function(e,t){try{if(!t&&!Oh)return!1}catch{return!1}var n=!1;try{var r={};r[Dh]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch{}return n},Ch=Al,Gh=Wl.CONSTRUCTOR||!Lh((function(e){Ch.all(e).then(void 0,(function(){}))})),Nh=L,Bh=Fe,$h=ql,Fh=Il,Uh=Eh;wi({target:"Promise",stat:!0,forced:Gh},{all:function(e){var t=this,n=$h.f(t),r=n.resolve,i=n.reject,o=Fh((function(){var n=Bh(t.resolve),o=[],a=0,s=1;Uh(e,(function(e){var u=a++,c=!1;s++,Nh(n,t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise}});var Hh=wi,jh=Wl.CONSTRUCTOR,Vh=Al,zh=ve,Xh=le,Kh=br,Qh=Vh&&Vh.prototype;if(Hh({target:"Promise",proto:!0,forced:jh,real:!0},{catch:function(e){return this.then(void 0,e)}}),Xh(Vh)){var Wh=zh("Promise").prototype.catch;Qh.catch!==Wh&&Kh(Qh,"catch",Wh,{unsafe:!0})}var qh=L,Yh=Fe,Jh=ql,Zh=Il,ed=Eh;wi({target:"Promise",stat:!0,forced:Gh},{race:function(e){var t=this,n=Jh.f(t),r=n.reject,i=Zh((function(){var i=Yh(t.resolve);ed(e,(function(e){qh(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var td=ql;wi({target:"Promise",stat:!0,forced:Wl.CONSTRUCTOR},{reject:function(e){var t=td.f(this);return(0,t.reject)(e),t.promise}});var nd=tn,rd=he,id=ql,od=function(e,t){if(nd(e),rd(t)&&t.constructor===e)return t;var n=id.f(e);return(0,n.resolve)(t),n.promise},ad=wi,sd=Wl.CONSTRUCTOR,ud=od;ve("Promise"),ad({target:"Promise",stat:!0,forced:sd},{resolve:function(e){return ud(this,e)}});var cd=X,ld=Mr,fd=Xo,hd=oe,dd=cd("".charAt),pd=cd("".charCodeAt),vd=cd("".slice),gd=function(e){return function(t,n){var r,i,o=fd(hd(t)),a=ld(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=pd(o,a))<55296||r>56319||a+1===s||(i=pd(o,a+1))<56320||i>57343?e?dd(o,a):r:e?vd(o,a,a+2):i-56320+(r-55296<<10)+65536}},yd={codeAt:gd(!1),charAt:gd(!0)},md=yd.charAt,_d=Xo,bd=Yn,Td=$u,kd=Fu,Sd="String Iterator",wd=bd.set,Rd=bd.getterFor(Sd);Td(String,"String",(function(e){wd(this,{type:Sd,string:_d(e),index:0})}),(function(){var e,t=Rd(this),n=t.string,r=t.index;return r>=n.length?kd(void 0,!0):(e=md(n,r),t.index+=e.length,kd(e,!1))}));var Md=x,xd=Va,Pd=Ka,Ed=Ju,Dd=gn,Od=ou,Id=wt("iterator"),Ad=Ed.values,Ld=function(e,t){if(e){if(e[Id]!==Ad)try{Dd(e,Id,Ad)}catch{e[Id]=Ad}if(Od(e,t,!0),xd[t])for(var n in Ed)if(e[n]!==Ed[n])try{Dd(e,n,Ed[n])}catch{e[n]=Ed[n]}}};for(var Cd in xd)Ld(Md[Cd]&&Md[Cd].prototype,Cd);Ld(Pd,"DOMTokenList");var Gd,Nd,Bd=E,$d=x.RegExp,Fd=Bd((function(){var e=$d("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),Ud=Fd||Bd((function(){return!$d("a","y").sticky})),Hd=Fd||Bd((function(){var e=$d("^r","gy");return e.lastIndex=2,null!==e.exec("str")})),jd={BROKEN_CARET:Hd,MISSED_STICKY:Ud,UNSUPPORTED_Y:Fd},Vd=E,zd=x.RegExp,Xd=Vd((function(){var e=zd(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)})),Kd=E,Qd=x.RegExp,Wd=Kd((function(){var e=Qd("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),qd=L,Yd=X,Jd=Xo,Zd=Qo,ep=jd,tp=xs,np=Yn.get,rp=Xd,ip=Wd,op=it("native-string-replace",String.prototype.replace),ap=RegExp.prototype.exec,sp=ap,up=Yd("".charAt),cp=Yd("".indexOf),lp=Yd("".replace),fp=Yd("".slice),hp=(Nd=/b*/g,qd(ap,Gd=/a/,"a"),qd(ap,Nd,"a"),0!==Gd.lastIndex||0!==Nd.lastIndex),dp=ep.BROKEN_CARET,pp=void 0!==/()??/.exec("")[1];(hp||pp||dp||rp||ip)&&(sp=function(e){var t,n,r,i,o,a,s,u=this,c=np(u),l=Jd(e),f=c.raw;if(f)return f.lastIndex=u.lastIndex,t=qd(sp,f,l),u.lastIndex=f.lastIndex,t;var h=c.groups,d=dp&&u.sticky,p=qd(Zd,u),v=u.source,g=0,y=l;if(d&&(p=lp(p,"y",""),-1===cp(p,"g")&&(p+="g"),y=fp(l,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==up(l,u.lastIndex-1))&&(v="(?: "+v+")",y=" "+y,g++),n=new RegExp("^(?:"+v+")",p)),pp&&(n=new RegExp("^"+v+"$(?!\\s)",p)),hp&&(r=u.lastIndex),i=qd(ap,d?n:u,y),d?i?(i.input=fp(i.input,g),i[0]=fp(i[0],g),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:hp&&i&&(u.lastIndex=u.global?i.index+i[0].length:r),pp&&i&&i.length>1&&qd(op,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&h)for(i.groups=a=tp(null),o=0;o<h.length;o++)a[(s=h[o])[0]]=i[s[1]];return i});var vp=sp;wi({target:"RegExp",proto:!0,forced:/./.exec!==vp},{exec:vp});var gp=wi,yp=Al,mp=E,_p=ve,bp=le,Tp=wc,kp=od,Sp=br,wp=yp&&yp.prototype;if(gp({target:"Promise",proto:!0,real:!0,forced:!!yp&&mp((function(){wp.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=Tp(this,_p("Promise")),n=bp(e);return this.then(n?function(n){return kp(t,e()).then((function(){return n}))}:e,n?function(n){return kp(t,e()).then((function(){throw n}))}:e)}}),bp(yp)){var Rp=_p("Promise").prototype.finally;wp.finally!==Rp&&Sp(wp,"finally",Rp,{unsafe:!0})}var Mp=x,xp=le,Pp=he,Ep=bu,Dp=function(e,t,n){var r,i;return Ep&&xp(r=t.constructor)&&r!==n&&Pp(i=r.prototype)&&i!==n.prototype&&Ep(e,i),e},Op=X(1..valueOf),Ip=oe,Ap=Xo,Lp="\t\n\v\f\r                　\u2028\u2029\ufeff",Cp=X("".replace),Gp=RegExp("^["+Lp+"]+"),Np=RegExp("(^|[^"+Lp+"])["+Lp+"]+$"),Bp=function(e){return function(t){var n=Ap(Ip(t));return 1&e&&(n=Cp(n,Gp,"")),2&e&&(n=Cp(n,Np,"$1")),n}},$p={start:Bp(1),end:Bp(2),trim:Bp(3)},Fp=wi,Up=D,Hp=x,jp=Mp,Vp=X,zp=gi,Xp=lt,Kp=Dp,Qp=ge,Wp=Le,qp=Ot,Yp=E,Jp=Tr.f,Zp=P.f,ev=qt.f,tv=Op,nv=$p.trim,rv="Number",iv=Hp[rv];jp[rv];var ov=iv.prototype,av=Hp.TypeError,sv=Vp("".slice),uv=Vp("".charCodeAt),cv=zp(rv,!iv(" 0o1")||!iv("0b1")||iv("+0x1")),lv=function(e){var t=arguments.length<1?0:iv(function(e){var t=qp(e,"number");return"bigint"==typeof t?t:function(e){var t,n,r,i,o,a,s,u,c=qp(e,"number");if(Wp(c))throw new av("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=nv(c),43===(t=uv(c,0))||45===t){if(88===(n=uv(c,2))||120===n)return NaN}else if(48===t){switch(uv(c,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=sv(c,2)).length,s=0;s<a;s++)if((u=uv(o,s))<48||u>i)return NaN;return parseInt(o,r)}return+c}(t)}(e));return function(e){return Qp(ov,e)&&Yp((function(){tv(e)}))}(this)?Kp(Object(t),this,lv):t};lv.prototype=ov,cv&&(ov.constructor=lv),Fp({global:!0,constructor:!0,wrap:!0,forced:cv},{Number:lv}),cv&&function(e,t){for(var n,r=Up?Jp(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),i=0;r.length>i;i++)Xp(t,n=r[i])&&!Xp(e,n)&&ev(e,n,Zp(t,n))}(jp[rv],iv);var fv=wi,hv=go.find,dv=Gs,pv="find",vv=!0;pv in[]&&Array(1)[pv]((function(){vv=!1})),fv({target:"Array",proto:!0,forced:vv},{find:function(e){return hv(this,e,arguments.length>1?arguments[1]:void 0)}}),dv(pv);var gv=st,yv=Ea;wi({target:"Object",stat:!0,forced:E((function(){yv(1)}))},{keys:function(e){return yv(gv(e))}});var mv=D,_v=Sn.EXISTS,bv=X,Tv=sc,kv=Function.prototype,Sv=bv(kv.toString),wv=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Rv=bv(wv.exec);mv&&!_v&&Tv(kv,"name",{configurable:!0,get:function(){try{return Rv(wv,Sv(this))[1]}catch{return""}}});var Mv=wi,xv=te,Pv=ue,Ev=Wa,Dv=X([].join);Mv({target:"Array",proto:!0,forced:xv!==Object||!Ev("join",",")},{join:function(e){return Dv(Pv(this),void 0===e?",":e)}});var Ov=wi,Iv=go.findIndex,Av=Gs,Lv="findIndex",Cv=!0;Lv in[]&&Array(1)[Lv]((function(){Cv=!1})),Ov({target:"Array",proto:!0,forced:Cv},{findIndex:function(e){return Iv(this,e,arguments.length>1?arguments[1]:void 0)}}),Av(Lv);var Gv=Ge,Nv=TypeError,Bv=function(e,t){if(!delete e[t])throw new Nv("Cannot delete property "+Gv(t)+" of "+Gv(e))},$v=ha,Fv=Math.floor,Uv=function(e,t){var n=e.length;if(n<8)for(var r,i,o=1;o<n;){for(i=o,r=e[o];i&&t(e[i-1],r)>0;)e[i]=e[--i];i!==o++&&(e[i]=r)}else for(var a=Fv(n/2),s=Uv($v(e,0,a),t),u=Uv($v(e,a),t),c=s.length,l=u.length,f=0,h=0;f<c||h<l;)e[f+h]=f<c&&h<l?t(s[f],u[h])<=0?s[f++]:u[h++]:f<c?s[f++]:u[h++];return e},Hv=Uv,jv=ye.match(/firefox\/(\d+)/i),Vv=!!jv&&+jv[1],zv=/MSIE|Trident/.test(ye),Xv=ye.match(/AppleWebKit\/(\d+)\./),Kv=!!Xv&&+Xv[1],Qv=wi,Wv=X,qv=Fe,Yv=st,Jv=Cr,Zv=Bv,eg=Xo,tg=E,ng=Hv,rg=Wa,ig=Vv,og=zv,ag=we,sg=Kv,ug=[],cg=Wv(ug.sort),lg=Wv(ug.push),fg=tg((function(){ug.sort(void 0)})),hg=tg((function(){ug.sort(null)})),dg=rg("sort"),pg=!tg((function(){if(ag)return ag<70;if(!(ig&&ig>3)){if(og)return!0;if(sg)return sg<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)ug.push({k:t+r,v:n})}for(ug.sort((function(e,t){return t.v-e.v})),r=0;r<ug.length;r++)t=ug[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));Qv({target:"Array",proto:!0,forced:fg||!hg||!dg||!pg},{sort:function(e){void 0!==e&&qv(e);var t=Yv(this);if(pg)return void 0===e?cg(t):cg(t,e);var n,r,i=[],o=Jv(t);for(r=0;r<o;r++)r in t&&lg(i,t[r]);for(ng(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:eg(t)>eg(n)?1:-1}}(e)),n=Jv(i),r=0;r<n;)t[r]=i[r++];for(;r<o;)Zv(t,r++);return t}});var vg=go.map;wi({target:"Array",proto:!0,forced:!bo("map")},{map:function(e){return vg(this,e,arguments.length>1?arguments[1]:void 0)}});var gg=D,yg=Ai,mg=TypeError,_g=Object.getOwnPropertyDescriptor,bg=gg&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),Tg=bg?function(e,t){if(yg(e)&&!_g(e,"length").writable)throw new mg("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},kg=wi,Sg=st,wg=Dr,Rg=Mr,Mg=Cr,xg=Tg,Pg=Ro,Eg=so,Dg=Eo,Og=Bv,Ig=bo("splice"),Ag=Math.max,Lg=Math.min;function Cg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bg(r.key),r)}}function Ng(e,t,n){return t&&Gg(e.prototype,t),n&&Gg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bg(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}kg({target:"Array",proto:!0,forced:!Ig},{splice:function(e,t){var n,r,i,o,a,s,u=Sg(this),c=Mg(u),l=wg(e,c),f=arguments.length;for(0===f?n=r=0:1===f?(n=0,r=c-l):(n=f-2,r=Lg(Ag(Rg(t),0),c-l)),Pg(c+n-r),i=Eg(u,r),o=0;o<r;o++)(a=l+o)in u&&Dg(i,o,u[a]);if(i.length=r,n<r){for(o=l;o<c-r;o++)s=o+n,(a=o+r)in u?u[s]=u[a]:Og(u,s);for(o=c;o>c-r+n;o--)Og(u,o-1)}else if(n>r)for(o=c-r;o>l;o--)s=o+n-1,(a=o+r-1)in u?u[s]=u[a]:Og(u,s);for(o=0;o<n;o++)u[o+l]=arguments[o+2];return xg(u,c-r+n),i}});var $g=function(){function e(t,n,r,i){var o=this;Cg(this,e),this.config=e.getDefaultConfig(),Object.keys(i).map((function(e){void 0!==i[e]&&null!==i[e]&&(o.config[e]=i[e])})),this.duration=r,this.player=t,this.updateBitrate(n)}return Ng(e,[{key:"updateBitrate",value:function(e){this.bitrate=e,this.bitrate||(this.bitrate=this.config.minBandwidth)}},{key:"getAdaptLoadDuration",value:function(){var e=this.player,t=this.config;if(!t.rangeControl)return-1;var n=(null==e?void 0:e.bufferedPoint)||null,r=n&&n.end?n.end-e.currentTime:0;return Math.max(t.rangeMaxDuration-r,t.rangeMinDuration)}},{key:"getAdaptCacheBuffer",value:function(){var e=this.player,t=this.config,n=this.bitrate;if(!t.targetCacheControl)return-1;var r=t.estPlayTime,i=r;t.estPTcontrol&&(i=Math.min(r,this.duration-((null==e?void 0:e.currentTime)||0)));var o=1024*(null==e?void 0:e.avgSpeed)||0,a=Math.max(t.safeFactor*o,t.minBandwidth);e&&e.avgSpeed&&(a=t.safeFactor*o);var s=n>0?Math.floor((1-a/n)*i):0;return s=t.minDangerThreshold+Math.max(s,0),Math.min(Math.max(t.cacheSafeFactor*s,t.minTargetCacheDur),t.maxTargetCacheDur)}}],[{key:"getDefaultConfig",value:function(){return{rangeMaxDuration:15,rangeMinDuration:5,rangeMinSize:409600,safeFactor:.1,cacheSafeFactor:3,minDangerThreshold:5,estPlayTime:12,minBandwidth:1e6,estPTcontrol:!1,minTargetCacheDur:30,maxTargetCacheDur:60,targetCacheControl:!1,rangeControl:!1}}}]),e}(),Fg=function(){function e(t,n,r,i){var o=this;Cg(this,e),this.config=e.getDefaultConfig(),Object.keys(i).map((function(e){void 0!==i[e]&&null!==i[e]&&(o.config[e]=i[e])})),this.duration=r,this.player=t,this.updateBitrate(n)}return Ng(e,[{key:"updateBitrate",value:function(e){this.bitrate=e,this.bitrate||(this.bitrate=this.config.minBandwidth)}},{key:"getBuffer",value:function(){var e=this.player,t=(null==e?void 0:e.bufferedPoint)||null;return t&&t.end?t.end-e.currentTime:0}},{key:"getAdaptLoadDuration",value:function(){var e=this.config,t=this.duration;if(!e.rangeControl)return-1;var n=this.getBuffer(),r=t-n,i=Math.min(r,e.rangeMaxDuration-n);return Math.max(i,e.rangeMinDuration)}},{key:"getAdaptRangeSize",value:function(e){var t=this.config,n=this.bitrate,r=this.duration;if(!t.rangeControl)return-1;e||(e=this.getAdaptLoadDuration());var i=r-this.getBuffer(),o=Math.max(t.rangeMinSize,e*n/8),a=i*n/8;return o+t.rangeFloatSize>=a&&(o=a),Math.ceil(o)}},{key:"getAdaptCacheBuffer",value:function(){var e=this.player,t=this.config,n=this.bitrate;if(!t.targetCacheControl)return-1;var r=t.estPlayTime,i=r;t.estPTcontrol&&(i=Math.min(r,this.duration-((null==e?void 0:e.currentTime)||0)));var o=1024*(null==e?void 0:e.avgSpeed)||0,a=Math.max(t.safeFactor*o,t.minBandwidth);e&&e.avgSpeed&&(a=t.safeFactor*o);var s=n>0?Math.floor((1-a/n)*i):0;s=t.minDangerThreshold+Math.max(s,0);var u=Math.max(t.cacheSafeFactor*s,t.minTargetCacheDur);return Math.min(u,t.maxTargetCacheDur)}}],[{key:"getDefaultConfig",value:function(){return{rangeControl:!1,rangeMaxDuration:20,rangeMinDuration:5,rangeMinSize:409600,rangeFloatSize:10240,safeFactor:.1,cacheSafeFactor:3,minDangerThreshold:5,estPlayTime:12,minBandwidth:1e6,estPTcontrol:!1,minTargetCacheDur:30,maxTargetCacheDur:60,targetCacheControl:!1}}}]),e}(),Ug=function(e){return e.CHANGE_FLYING_PLUGIN_CONFIG="CHANGE_FLYING_PLUGIN_CONFIG",e}(Ug||{}),Hg={exports:{}},jg={},Vg=q,zg=ue,Xg=Tr.f,Kg=ha,Qg="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];jg.f=function(e){return Qg&&"Window"===Vg(e)?function(e){try{return Xg(e)}catch{return Kg(Qg)}}(e):Xg(zg(e))};var Wg=E((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),qg=E,Yg=he,Jg=q,Zg=Wg,ey=Object.isExtensible,ty=qg((function(){ey(1)}))||Zg?function(e){return!(!Yg(e)||Zg&&"ArrayBuffer"===Jg(e))&&(!ey||ey(e))}:ey,ny=!E((function(){return Object.isExtensible(Object.preventExtensions({}))})),ry=wi,iy=X,oy=Nn,ay=he,sy=lt,uy=qt.f,cy=Tr,ly=jg,fy=ty,hy=ny,dy=!1,py=vt("meta"),vy=0,gy=function(e){uy(e,py,{value:{objectID:"O"+vy++,weakData:{}}})},yy=Hg.exports={enable:function(){yy.enable=function(){},dy=!0;var e=cy.f,t=iy([].splice),n={};n[py]=1,e(n).length&&(cy.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===py){t(r,i,1);break}return r},ry({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ly.f}))},fastKey:function(e,t){if(!ay(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!sy(e,py)){if(!fy(e))return"F";if(!t)return"E";gy(e)}return e[py].objectID},getWeakData:function(e,t){if(!sy(e,py)){if(!fy(e))return!0;if(!t)return!1;gy(e)}return e[py].weakData},onFreeze:function(e){return hy&&dy&&fy(e)&&!sy(e,py)&&gy(e),e}};oy[py]=!0;var my=Hg.exports,_y=wi,by=x,Ty=X,ky=gi,Sy=br,wy=my,Ry=Eh,My=vc,xy=le,Py=ne,Ey=he,Dy=E,Oy=Lh,Iy=ou,Ay=Dp,Ly=br,Cy=function(e,t,n){for(var r in t)Ly(e,r,t[r],n);return e},Gy=xs,Ny=sc,By=Cy,$y=Oi,Fy=vc,Uy=ne,Hy=Eh,jy=$u,Vy=Fu,zy=hc,Xy=D,Ky=my.fastKey,Qy=Yn.set,Wy=Yn.getterFor,qy={getConstructor:function(e,t,n,r){var i=e((function(e,i){Fy(e,o),Qy(e,{type:t,index:Gy(null),first:void 0,last:void 0,size:0}),Xy||(e.size=0),Uy(i)||Hy(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=Wy(t),s=function(e,t,n){var r,i,o=a(e),s=u(e,t);return s?s.value=n:(o.last=s={index:i=Ky(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),Xy?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},u=function(e,t){var n,r=a(e),i=Ky(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key===t)return n};return By(o,{clear:function(){for(var e=a(this),t=e.first;t;)t.removed=!0,t.previous&&(t.previous=t.previous.next=void 0),t=t.next;e.first=e.last=void 0,e.index=Gy(null),Xy?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=u(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first===r&&(n.first=i),n.last===r&&(n.last=o),Xy?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=$y(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),By(o,n?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Xy&&Ny(o,"size",{configurable:!0,get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=Wy(t),o=Wy(r);jy(e,t,(function(e,t){Qy(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?Vy("keys"===t?n.key:"values"===t?n.value:[n.key,n.value],!1):(e.target=void 0,Vy(void 0,!0))}),n?"entries":"values",!n,!0),zy(t)}};!function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=by[e],s=a&&a.prototype,u=a,c={},l=function(e){var t=Ty(s[e]);Sy(s,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(i&&!Ey(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return i&&!Ey(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(i&&!Ey(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(ky(e,!xy(a)||!(i||s.forEach&&!Dy((function(){(new a).entries().next()})))))u=n.getConstructor(t,e,r,o),wy.enable();else if(ky(e,!0)){var f=new u,h=f[o](i?{}:-0,1)!==f,d=Dy((function(){f.has(1)})),p=Oy((function(e){new a(e)})),v=!i&&Dy((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));p||((u=t((function(e,t){My(e,s);var n=Ay(new a,e,u);return Py(t)||Ry(t,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=u),(d||v)&&(l("delete"),l("has"),r&&l("get")),(v||h)&&l(o),i&&s.clear&&delete s.clear}c[e]=u,_y({global:!0,constructor:!0,forced:u!==a},c),Iy(u,e),i||n.setStrong(u,e,r)}("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),qy);var Yy=X,Jy=Map.prototype,Zy={Map,set:Yy(Jy.set),get:Yy(Jy.get),has:Yy(Jy.has),remove:Yy(Jy.delete),proto:Jy},em=Zy.has,tm=function(e){return em(e),e},nm=tm,rm=Zy.remove;wi({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var e,t=nm(this),n=!0,r=0,i=arguments.length;r<i;r++)e=rm(t,arguments[r]),n=n&&e;return!!n}});var im=L,om=X,am=Zy.Map,sm=Zy.proto,um=om(sm.forEach),cm=om(sm.entries),lm=cm(new am).next,fm=function(e,t,n){return n?function(e,t,n){for(var r,i,o=n?e:e.iterator,a=e.next;!(r=im(a,o)).done;)if(void 0!==(i=t(r.value)))return i}({iterator:cm(e),next:lm},(function(e){return t(e[1],e[0])})):um(e,t)},hm=Oi,dm=tm,pm=fm;wi({target:"Map",proto:!0,real:!0,forced:!0},{every:function(e){var t=dm(this),n=hm(e,arguments.length>1?arguments[1]:void 0);return!1!==pm(t,(function(e,r){if(!n(e,r,t))return!1}),!0)}});var vm=Oi,gm=tm,ym=fm,mm=Zy.Map,_m=Zy.set;wi({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(e){var t=gm(this),n=vm(e,arguments.length>1?arguments[1]:void 0),r=new mm;return ym(t,(function(e,i){n(e,i,t)&&_m(r,i,e)})),r}});var bm=Oi,Tm=tm,km=fm;wi({target:"Map",proto:!0,real:!0,forced:!0},{find:function(e){var t=Tm(this),n=bm(e,arguments.length>1?arguments[1]:void 0),r=km(t,(function(e,r){if(n(e,r,t))return{value:e}}),!0);return r&&r.value}});var Sm=Oi,wm=tm,Rm=fm;wi({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(e){var t=wm(this),n=Sm(e,arguments.length>1?arguments[1]:void 0),r=Rm(t,(function(e,r){if(n(e,r,t))return{key:r}}),!0);return r&&r.key}});var Mm=tm,xm=fm;wi({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(e){return!0===xm(Mm(this),(function(t){if(function(e,t){return e===t||e!=e&&t!=t}(t,e))return!0}),!0)}});var Pm=tm,Em=fm;wi({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(e){var t=Em(Pm(this),(function(t,n){if(t===e)return{key:n}}),!0);return t&&t.key}});var Dm=Oi,Om=tm,Im=fm,Am=Zy.Map,Lm=Zy.set;wi({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(e){var t=Om(this),n=Dm(e,arguments.length>1?arguments[1]:void 0),r=new Am;return Im(t,(function(e,i){Lm(r,n(e,i,t),e)})),r}});var Cm=Oi,Gm=tm,Nm=fm,Bm=Zy.Map,$m=Zy.set;wi({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(e){var t=Gm(this),n=Cm(e,arguments.length>1?arguments[1]:void 0),r=new Bm;return Nm(t,(function(e,i){$m(r,i,n(e,i,t))})),r}});var Fm=tm,Um=Eh,Hm=Zy.set;wi({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(e){for(var t=Fm(this),n=arguments.length,r=0;r<n;)Um(arguments[r++],(function(e,n){Hm(t,e,n)}),{AS_ENTRIES:!0});return t}});var jm=Fe,Vm=tm,zm=fm,Xm=TypeError;wi({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(e){var t=Vm(this),n=arguments.length<2,r=n?void 0:arguments[1];if(jm(e),zm(t,(function(i,o){n?(n=!1,r=i):r=e(r,i,o,t)})),n)throw new Xm("Reduce of empty map with no initial value");return r}});var Km=Oi,Qm=tm,Wm=fm;wi({target:"Map",proto:!0,real:!0,forced:!0},{some:function(e){var t=Qm(this),n=Km(e,arguments.length>1?arguments[1]:void 0);return!0===Wm(t,(function(e,r){if(n(e,r,t))return!0}),!0)}});var qm=Fe,Ym=tm,Jm=TypeError,Zm=Zy.get,e_=Zy.has,t_=Zy.set;wi({target:"Map",proto:!0,real:!0,forced:!0},{update:function(e,t){var n=Ym(this),r=arguments.length;qm(t);var i=e_(n,e);if(!i&&r<3)throw new Jm("Updating absent value");var o=i?Zm(n,e):qm(r>2?arguments[2]:void 0)(e,n);return t_(n,e,t(o,e,n)),n}});var n_={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!r||s.context===r)&&a(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(n_);var r_=n_.exports;const i_=R(r_);function o_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o_(Object(n),!0).forEach((function(t){f_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s_(e){return s_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s_(e)}function u_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T_(r.key),r)}}function l_(e,t,n){return t&&c_(e.prototype,t),n&&c_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f_(e,t,n){return(t=T_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h_(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p_(e,t)}function d_(e){return(d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p_(e,t){return(p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g_(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v_(e)}function y_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=d_(e);if(t){var i=d_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g_(this,n)}}function m_(){return m_=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},m_.apply(this,arguments)}function __(e){return function(e){if(Array.isArray(e))return b_(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b_(e,t)}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T_(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var k_=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,S_={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},w_="%c[xgplayer]",R_={config:{debug:k_?3:0},logInfo:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.config.debug>=3&&(t=console).log.apply(t,[w_,S_.info,e].concat(r))},logWarn:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.config.debug>=1&&(t=console).warn.apply(t,[w_,S_.warn,e].concat(r))},logError:function(e){var t;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];(t=console)[n].apply(t,[w_,S_.error,e].concat(i))}}},M_=function(){function e(t){u_(this,e),this.bufferedList=t}return l_(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),x_={};function P_(e){var t=s_(e);return null!==e&&("object"===t||"function"===t)}function E_(){var e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return"zh-cn"===e&&(e="zh"),e}x_.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(e);return i.className=r,i.innerHTML=t,Object.keys(n).forEach((function(t){var r=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&i.setAttribute(r,o):i.setAttribute(r,o)})),i},x_.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var r=document.createElement("div");r.innerHTML=e;var i=r.children;return r=null,i.length>0?(i=i[0],n&&x_.addClass(i,n),t&&Object.keys(t).forEach((function(e){i.setAttribute(e,t[e])})),i):null}catch(e){return R_.logError("util.createDomFromHtml",e),null}},x_.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch{var n=e.className&&"object"===s_(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},x_.addClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch{x_.hasClass(e,t)||(e.className&&"object"===s_(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},x_.removeClass=function(e,t){if(e&&t)try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch{x_.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===s_(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")}))}},x_.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){x_.hasClass(e,t)?x_.removeClass(e,t):x_.addClass(e,t)}))},x_.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===x_.typeOf(e[n])?t.push(e[n]):"Object"===x_.typeOf(e[n])&&Object.keys(e[n]).map((function(r){e[n][r]&&t.push(r)}))},r=0;r<arguments.length;r++)n(r);return t.join(" ")},x_.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(r){R_.logError("util.findDom",r),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},x_.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},x_.padStart=function(e,t,n){for(var r=String(n),i=0|t,o=Math.ceil(i/r.length),a=[],s=String(e);o--;)a.push(r);return a.join("").substring(0,i-s.length)+s},x_.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=x_.padStart(Math.floor(e/3600),2,0),n=x_.padStart(Math.floor((e-3600*t)/60),2,0),r=x_.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,r]:[t,n,r]).join(":")},x_.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},x_.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},x_.deepCopy=function(e,t){if("Object"===x_.typeOf(t)&&"Object"===x_.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==x_.typeOf(t[n])||t[n]instanceof Node?"Array"===x_.typeOf(t[n])?e[n]="Array"===x_.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:x_.deepCopy(e[n],t[n])})),e},x_.deepMerge=function(e,t){return Object.keys(t).map((function(n){var r;"Array"===x_.typeOf(t[n])&&"Array"===x_.typeOf(e[n])?"Array"===x_.typeOf(e[n])&&(r=e[n]).push.apply(r,__(t[n])):x_.typeOf(e[n])!==x_.typeOf(t[n])||null===e[n]||"Object"!==x_.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):x_.deepMerge(e[n],t[n])})),e},x_.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},x_.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},x_.setInterval=function(e,t,n,r){e._interval[t]||(e._interval[t]=window.setInterval(n.bind(e),r))},x_.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},x_.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var r=setTimeout((function(){t(),x_.clearTimeout(e,r)}),n);return e._timers.push(r),r},x_.clearTimeout=function(e,t){var n=e._timers;if("Array"===x_.typeOf(n)){for(var r=0;r<n.length;r++)if(n[r]===t){n.splice(r,1),clearTimeout(t);break}}else clearTimeout(t)},x_.clearAllTimers=function(e){var t=e._timers;"Array"===x_.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},x_.createImgBtn=function(e,t,n,r){var i,o,a,s=x_.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));return s.style.backgroundImage='url("'.concat(t,'")'),n&&r&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&r.indexOf(e)>-1&&(i=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=parseFloat(r.slice(0,r.indexOf(e)).trim()),a=e,1))})),s.style.width="".concat(i).concat(a),s.style.height="".concat(o).concat(a),s.style.backgroundSize="".concat(i).concat(a," ").concat(o).concat(a),s.style.margin="start"===e?"-".concat(o/2).concat(a," auto auto -").concat(i/2).concat(a):"auto 5px auto 5px"),s},x_.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var r="#";e.replace(/[0-9A-F]/gi,(function(e){r+=e+e})),e=r}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){n.push(parseInt(e,16))})),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},x_.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},x_.checkIsFunction=function(e){return e&&"function"==typeof e},x_.checkIsObject=function(e){return null!==e&&"object"===s_(e)},x_.hide=function(e){e.style.display="none"},x_.show=function(e,t){e.style.display=t||"block"},x_.isUndefined=function(e){if(typeof e>"u"||null===e)return!0},x_.isNotNull=function(e){return null!=e},x_.setStyleFromCsstext=function(e,t){t&&("String"===x_.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})):Object.keys(t).map((function(n){e.style[n]=t[n]})))},x_.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var r=n.replace(/\s+/g,"").split(";"),i={},o={};return r.map((function(e){if(e){var n=e.split(":");n.length>1&&(function(e,t){for(var n=0,r=t.length;n<r;n++)if(e.indexOf(t[n])>-1)return!0;return!1}(n[0],t)?i[n[0]]=n[1]:o[n[0]]=n[1])}})),e.setAttribute("style",""),Object.keys(o).map((function(t){e.style[t]=o[t]})),i},x_.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),r={};return n.map((function(e){if(e){var t=e.split(":");t.length>1&&(r[t[0]]=t[1])}})),r},x_.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var r=new window.Image;r.onload=function(e){r=null,t&&t(e)},r.onerror=function(e){r=null,n&&n(e)},r.src=e}},x_.stopPropagation=function(e){e&&e.stopPropagation()},x_.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},x_.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},x_.checkTouchSupport=function(){return"ontouchstart"in window},x_.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],r=0;r<e.length;r++)n.push({start:e.start(r)<.5?0:e.start(r),end:e.end(r)});n.sort((function(e,t){return e.start-t.start||t.end-e.end}));var i=[];if(t)for(var o=0;o<n.length;o++){var a=i.length;if(a){var s=i[a-1].end;n[o].start-s<t?n[o].end>s&&(i[a-1].end=n[o].end):i.push(n[o])}else i.push(n[o])}else i=n;return new M_(i)},x_.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.touches&&e.touches.length>0&&(e=e.touches[0]),{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},x_.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},x_.getHostFromUrl=function(e){if("String"!==x_.typeOf(e))return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},x_.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)},x_.isMSE=function(e){return e.media&&(e=e.media),!!(e&&e instanceof HTMLMediaElement)&&(/^blob/.test(e.currentSrc)||/^blob/.test(e.src))},x_.isBlob=function(e){return"string"==typeof e&&/^blob/.test(e)},x_.generateSessionId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=(new Date).getTime();try{e=parseInt(e)}catch{e=0}return t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=parseInt(window.performance.now())),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))},x_.createEvent=function(e){var t;return"function"==typeof window.Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t},x_.adjustTimeByDuration=function(e,t,n){return t&&e&&(e>t||n&&e<t)?t:e},x_.createPositionBar=function(e,t){var n=x_.createDom("xg-bar","",{"data-index":-1},e);return t.appendChild(n),n},x_.getTransformStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0,scale:1,rotate:0},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={scale:"".concat(e.scale||1),translate:"".concat(e.x||0,"%, ").concat(e.y||0,"%"),rotate:"".concat(e.rotate||0,"deg")};return Object.keys(n).forEach((function(e){var r=new RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),i="".concat(e,"(").concat(n[e],")");r.test(t)?(r.lastIndex=-1,t=t.replace(r,i)):t+="".concat(i," ")})),t},x_.convertDeg=function(e){return Math.abs(e)<=1?360*e:e%360},x_.getIndexByTime=function(e,t){var n=t.length,r=-1;if(n<1)return r;if(e<=t[0].end||n<2)r=0;else if(e>t[n-1].end)r=n-1;else for(var i=1;i<n;i++)if(e>t[i-1].end&&e<=t[i].end){r=i;break}return r},x_.getOffsetCurrentTime=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if((n=r>=0&&r<t.length?r:x_.getIndexByTime(e,t))<0)return-1;var i=t.length,o=t[n],a=o.start,s=o.end,u=o.cTime,c=o.offset;return e<a?u:e>=a&&e<=s?e-c:e>s&&n>=i-1?s:-1},x_.getCurrentTimeByOffset=function(e,t){var n=-1;if(!t||t.length<0)return e;for(var r=0;r<t.length;r++)if(e<=t[r].duration){n=r;break}if(-1!==n){var i=t[n].start;return n-1<0?i+e:i+(e-t[n-1].duration)}return e};var D_=/(Android)\s([\d.]+)/,O_=/(Version)\/([\d.]+)/,I_=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],A_={get device(){return A_.os.isPc?"pc":"mobile"},get browser(){if(typeof navigator>"u")return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){if(typeof navigator>"u")return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,a=o||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isPhone:s,isIpad:o,isIos:s||o,isAndroid:r,isPc:!(s||r||n||a),isSymbian:n,isWindowsPhone:t,isFireFox:i}},get osVersion(){if(typeof navigator>"u")return 0;var e=navigator.userAgent,t="",n=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?O_:D_)?t.exec(e):[];if(n&&n.length>=3){var r=n[2].split(".");return r.length>0?parseInt(r[0]):0}return 0},get isWeixin(){return!(typeof navigator>"u")&&!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())},isSupportMP4:function(){var e={isSupport:!1,mime:""};if(typeof document>"u")return e;if(this.supportResult)return this.supportResult;var t=document.createElement("video");return"function"==typeof t.canPlayType&&I_.map((function(n){"probably"===t.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(e.isSupport=!0,e.mime+="||".concat(n))})),this.supportResult=e,t=null,e},isMSESupport:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource>"u"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(e)}catch(t){return this._logger.error(e,t),!1}},isHevcSupported:function(){return!(typeof MediaSource>"u"||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))},probeConfigSupported:function(e){var t={supported:!1,smooth:!1,powerEfficient:!1};if(!e||typeof navigator>"u")return Promise.resolve(t);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var n=e.video||{},r=e.audio||{};try{var i=MediaSource.isTypeSupported(n.contentType),o=MediaSource.isTypeSupported(r.contentType);return Promise.resolve({supported:i&&o,smooth:!1,powerEfficient:!1})}catch{return Promise.resolve(t)}}},L_="3.1.0-alpha.8",C_={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},G_={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},N_=l_((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};u_(this,e);var r=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.media){var i=n.mediaError?n.mediaError:t.media.error||{},o=t.duration,a=t.currentTime,s=t.ended,u=t.src,c=t.currentSrc,l=t.media,f=l.readyState,h=l.networkState,d=n.errorCode||i.code;G_[d]&&(d=G_[d]);var p={playerVersion:L_,currentTime:a,duration:o,ended:s,readyState:f,networkState:h,src:u||c,errorType:n.errorType,errorCode:d,message:n.errorMessage||i.message,mediaError:i,originError:n.originError?n.originError.stack:"",host:x_.getHostFromUrl(u||c)};return n.ext&&Object.keys(n.ext).map((function(e){p[e]=n.ext[e]})),p}if(arguments.length>1){for(var v={playerVersion:L_,domain:document.domain},g=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],y=0;y<arguments.length;y++)v[g[y]]=arguments[y];return v.ex=r?(r[arguments[0]]||{}).msg:"",v}})),B_="play",$_="seeked",F_="waiting",U_="canplay",H_="loadeddata",j_="loadstart",V_="focus",z_="blur",X_="autoplay_started",K_="autoplay_was_prevented",Q_="fullscreen_change",W_="cssFullscreen_change",q_="definition_change",Y_="after_definition_change",J_="user_action",Z_=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"];function eb(e,t){!this||!this.emit||("error"===e?this.errorHandler(e,t.error):this.emit(e,t))}Symbol.toStringTag;var tb=function(e){h_(n,e);var t=y_(n);function n(e){var r;u_(this,n),(r=t.call(this,e))._hasStart=!1,r._currentTime=0,r._duration=0,r._internalOp={},r._lastMuted=!1,r.vtype="MP4",r._rate=-1,r.mediaConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:0|e.tabindex,mediaType:e.mediaType||"video","data-index":-1},e.videoConfig,e.videoAttributes);var i=e["x5-video-player-type"]||e.x5VideoPlayerType;return A_.isWeixin&&A_.os.isAndroid&&i&&(r.mediaConfig["x5-video-player-type"]=i,delete r.mediaConfig.playsinline,delete r.mediaConfig["webkit-playsinline"],delete r.mediaConfig["x5-playsinline"]),e.loop&&(r.mediaConfig.loop="loop"),e.autoplayMuted&&!Object.prototype.hasOwnProperty.call(r.mediaConfig,"muted")&&(r.mediaConfig.muted=!0),r.media=x_.createDom(r.mediaConfig.mediaType,"",r.mediaConfig,""),e.defaultPlaybackRate&&(r.media.defaultPlaybackRate=r.media.playbackRate=e.defaultPlaybackRate),"Number"===x_.typeOf(e.volume)&&(r.volume=e.volume),e.autoplayMuted&&(r.media.muted=!0,r._lastMuted=!0),e.autoplay&&(r.media.autoplay=!0),r._interval={},r.mediaEventMiddleware={},r.attachVideoEvents(),r}return l_(n,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(n){t.mediaEventMiddleware[n]=e[n]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.mediaEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers||(this._evHandlers=Z_.map((function(t){var n="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return"function"==typeof e[n]&&e.on(t,e[n]),f_({},t,function(e,t){return function(n,r){var i={player:t,eventName:e,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:t.currentTime,duration:t.duration,paused:t.paused,ended:t.ended,isInternalOp:!!t._internalOp[n.type],muted:t.muted,volume:t.volume,host:x_.getHostFromUrl(t.currentSrc),vtype:t.vtype};if(t.removeInnerOP(n.type),"timeupdate"===e&&(t._currentTime=t.media&&t.media.currentTime),"ratechange"===e){var o=t.media?t.media.playbackRate:0;if(o&&t._rate===o)return;t._rate=t.media&&t.media.playbackRate}if("durationchange"===e&&(t._duration=t.media.duration),"volumechange"===e&&(i.isMutedChange=t._lastMuted!==t.muted,t._lastMuted=t.muted),"error"===e&&(i.error=r||t.video.error),t.mediaEventMiddleware[e]){var a=eb.bind(t,e,i);try{t.mediaEventMiddleware[e].call(t,i,a)}catch(n){throw eb.call(t,e,i),n}}else eb.call(t,e,i)}}(t,e))}))),this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.addEventListener(n,e[n],!1)}))}},{key:"detachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.media;this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.removeEventListener(n,e[n],!1)})),this._evHandlers.forEach((function(t){var n=Object.keys(t)[0],r="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[r]&&e.off(n,e[r])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var n=this;e.removeAttribute("src"),e.load(),t.forEach((function(e,t){n.media.appendChild(x_.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||""),"data-index":t+1}))}));var r=e.children;if(r){this._videoSourceCount=r.length,this._videoSourceIndex=r.length,this._vLoadeddata=function(e){n.emit("source_success",{src:e.target.currentSrc,host:x_.getHostFromUrl(e.target.currentSrc)})};for(var i=null,o=0;o<this._evHandlers.length;o++)if("error"===Object.keys(this._evHandlers[o])[0]){i=this._evHandlers[o];break}!this._sourceError&&(this._sourceError=function(e){var t=parseInt(e.target.getAttribute("data-index"),10);if(n._videoSourceIndex--,0===n._videoSourceIndex||t>=n._videoSourceCount){var r={code:4,message:"sources_load_error"};i?i.error(e,r):n.errorHandler("error",r)}var o=C_[4];n.emit("source_error",new N_(n,{errorType:o,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:e.target.src}))});for(var a=0;a<r.length;a++)r[a].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.media&&(this.media.error||t)){var n=this.media.error||t,r=n.code?C_[n.code]:"other";n.message,this.media.currentSrc||(n={code:6,message:"empty_src"}),this.emit(e,new N_(this,{errorType:r,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){for(var e in this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null,this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){return this.media?this.media.play():null}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return!!this.media&&this.media.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.media)return t;e||(e=this.media.buffered);var n=this.media.currentTime;if(e)for(var r=0,i=e.length;r<i&&(t[0]=e.start(r),t[1]=e.end(r),!(t[0]<=n&&n<=t[1]));r++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.media&&this.media.autoplay},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?x_.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var t=this.media.buffered;if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)if((t.start(n)<=this.currentTime||t.start(n)<.1)&&t.end(n)>=this.currentTime)return{start:t.start(n),end:t.end(n)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?void 0!==this.media.currentTime?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.media&&this.media.defaultMuted},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.media&&this.media.ended}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){return this.media.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.media.error.code-1]:""}},{key:"loop",get:function(){return!!this.media&&this.media.loop},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return!!this.media&&this.media.muted},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return!this.media||this.media.paused}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return!!this.media&&this.media.preload},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return!!this.media&&this.media.seekable}},{key:"seeking",get:function(){return!!this.media&&this.media.seeking}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit("urlchange",e),this.emit(F_),this._currentTime=0,this._duration=0,x_.isMSE(this.media))return void this.onWaiting();this._detachSourceEvents(this.media),"Array"===x_.typeOf(e)?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"aspectRatio",get:function(){return this.media?this.media.videoWidth/this.media.videoHeight:0}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=m_(d_(n.prototype),"emit",this)).call.apply(r,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=m_(d_(n.prototype),"on",this)).call.apply(r,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=m_(d_(n.prototype),"once",this)).call.apply(r,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=m_(d_(n.prototype),"off",this)).call.apply(r,[this,e,t].concat(o))}},{key:"offAll",value:function(){m_(d_(n.prototype),"removeAllListeners",this).call(this)}}]),n}(i_),nb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};u_(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return l_(e,[{key:"openDB",value:function(e){var t=this,n=this,r=this.myDB.version||1,i=n.indexedDB.open(n.myDB.name,r);i.onerror=function(e){},i.onsuccess=function(r){t.myDB.db=r.target.result,e.call(n)},i.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,r=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=0;i<t.length;i++)(n=r.add(t[i])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,r=this.myDB.db.transaction(e,"readwrite").objectStore(e),i=0;i<t.length;i++)(n=r.put(t[i])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var r=this,i=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);i.onerror=function(){n.call(r,null)},i.onsuccess=function(e){var t=e.target.result;n.call(r,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}(),rb=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],ib=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],ob=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],ab="data-xgplayerid";function sb(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=t.call.apply(t,[e].concat(i));!n||"function"!=typeof n||(a&&a.then?a.then((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.call.apply(n,[e].concat(r))})):n.call.apply(n,[e].concat(i)))}function ub(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var r=arguments,i=this;if(n.pre)try{var o;(o=n.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(t.message),t}if(this.__hooks&&this.__hooks[e])try{var a,s=(a=this.__hooks[e]).call.apply(a,[this,this].concat(Array.prototype.slice.call(arguments)));s?s.then?s.then((function(e){!1!==e&&sb.apply(void 0,[i,t,n.next].concat(__(r)))})).catch((function(e){throw e})):sb.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===s&&sb.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(t.message),t}else sb.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function cb(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function lb(e,t){var n=this.__hooks;n&&delete n[e]}function fb(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.useHooks&&t.useHooks.apply(t,r)}}function hb(e){if(this.plugins&&this.plugins[e.toLowerCase()]){var t=this.plugins[e.toLowerCase()];if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.removeHooks&&t.removeHooks.apply(t,r)}}}function db(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function pb(e){e.__hooks=null}function vb(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(i));var a,s=(a=e.__hooks[t]).call.apply(a,[e,e].concat(i));if(s&&s.then)s.then((function(t){return!1===t?null:n.call.apply(n,[e,e].concat(i))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==s)return n.call.apply(n,[e,e].concat(i))}function gb(e,t){R_.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var yb=function(){function e(t){u_(this,e),x_.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),db(this),this.__args=t,this.__events={},this.__onceEvents={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return l_(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){e||(e=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=x_.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&("touch"===this.playerConfig.domEventType||"mouse"===this.playerConfig.domEventType)&&(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){n.__events[e]=t,n.player.on(e,t)})):gb(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__onceEvents[e]=t,this.player.once(e,t)):Array.isArray(e)&&e.forEach((function(r){n.__onceEvents[r]=t,n.player.once(e,t)})):gb(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(r){delete n.__events[e],n.player.off(r,t)})):gb(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;["__events","__onceEvents"].forEach((function(t){Object.keys(e[t]).forEach((function(n){e[t][n]&&e.off(n,e[t][n]),n&&delete e[t][n]}))})),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(e){var t;if(this.player){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.player).emit.apply(t,[e].concat(r))}}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.player){var r=a_(a_({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,r)}}},{key:"hook",value:function(e,t){return ub.call.apply(ub,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return cb.call.apply(cb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return lb.call.apply(lb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),x_.clearAllTimers(this),x_.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(n),pb(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}();if(typeof Element<"u"&&!Element.prototype.matches){var mb=Element.prototype;mb.matches=mb.matchesSelector||mb.mozMatchesSelector||mb.msMatchesSelector||mb.oMatchesSelector||mb.webkitMatchesSelector}var _b=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}};function bb(e,t,n,r,i){var o=Tb.apply(this,arguments);return e.addEventListener(n,o,i),{destroy:function(){e.removeEventListener(n,o,i)}}}function Tb(e,t,n,r){return function(n){n.delegateTarget=_b(n.target,t),n.delegateTarget&&r.call(e,n)}}var kb=function(e,t,n,r,i){return"function"==typeof e.addEventListener?bb.apply(null,arguments):"function"==typeof n?bb.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return bb(e,t,n,r,i)})))};const Sb=R(kb);var wb={CONTROLS:"controls",ROOT:"root"},Rb={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"},Mb="xg-icon-disable";function xb(e){return!!e&&e.indexOf&&/^(?:http|data:|\/)/.test(e)}function Pb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(e instanceof window.Element)return x_.addClass(e,n),Object.keys(r).map((function(t){e.setAttribute(t,r[t])})),e;if(xb(e)||xb(e.url))return r.src=xb(e)?e:e.url||"",o=x_.createDom(e.tag||"img","",r,"xg-img ".concat(n));if("function"==typeof e)try{return(o=e())instanceof window.Element?(x_.addClass(o,n),Object.keys(r).map((function(e){o.setAttribute(e,r[e])})),o):(R_.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(i,"] is a function mast return an Element Object")),null)}catch(e){return R_.logError("Plugin named [".concat(i,"]:createIcon"),e),null}return"string"==typeof e?x_.createDomFromHtml(e,r,n):(R_.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(i,"] is invalid")),null)}var Eb=function(e){h_(n,e);var t=y_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u_(this,n),(e=t.call(this,r)).__delegates=[],e}return l_(n,[{key:"__init",value:function(e){if(m_(d_(n.prototype),"__init",this).call(this,e),e.root){var t=e.root,r=null;this.icons={},this.root=null,this.parent=null,function(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(r){var i=e[r],o=i&&i.class?i.class:"",a=i&&i.attr?i.attr:{},s=null;n&&n[r]&&(o=function(e,t){return"object"===s_(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}(n[r],o),a=function(e,t){return"object"===s_(e)&&e.attr&&"object"===s_(e.attr)&&Object.keys(e.attr).map((function(n){t[n]=e.attr[n]})),t}(n[r],a),s=Pb(n[r],r,o,a,t.pluginName)),!s&&i&&(s=Pb(i.icon?i.icon:i,a,o,{},t.pluginName)),t.icons[r]=s}))}(this.registerIcons()||{},this),this.langText={},function(e,t){Object.keys(e).map((function(n){Object.defineProperty(t.langText,n,{get:function(){var r=t.lang,i=t.i18n;return i[n]?i[n]:e[n]&&e[n][r]||""}})}))}(this.registerLanguageTexts()||{},this);var i="";try{i=this.render()}catch(e){throw R_.logError("Plugin:".concat(this.pluginName,":render"),e),new Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(i)(r=n.insert(i,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(r=x_.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(r)}this.root=r,this.parent=t;var o=this.config.attr||{},a=this.config.style||{};this.setAttr(o),this.setStyle(a),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===s_(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(n){var r,i,o=n,a=t[o],s={root:e.root};"function"==typeof a?(r=e.config[o]||{},i=a):"object"===s_(a)&&"function"==typeof a.plugin&&(r=a.options?x_.deepCopy(e.config[o]||{},a.options):e.config[o]||{},i=a.plugin),s.config=r,void 0!==r.index&&(s.index=r.index),r.root&&(s.root=r.root),e.registerPlugin(i,s,o)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,r=this.langText;t&&function e(t,n){for(var r=0;r<t.children.length;r++)t.children[r].children.length>0?e(t.children[r],n):n(t.children[r])}(t,(function(t){var i=t.getAttribute&&t.getAttribute("lang-key");if(i){var o=n[i.toUpperCase()]||r[i];o&&(t.innerHTML="function"==typeof o?o(e):o)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},r=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var i=n[t]||r[t]||"";i&&(e.innerHTML=i)}},{key:"plugins",value:function(){return this._children}},{key:"disable",value:function(){this.config.disable=!0,x_.addClass(this.find(".xgplayer-icon"),Mb)}},{key:"enable",value:function(){this.config.disable=!1,x_.removeClass(this.find(".xgplayer-icon"),Mb)}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var i=m_(d_(n.prototype),"registerPlugin",this).call(this,e,t,r);return this._children.push(i),i}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,r){var i=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){i.bindEL(e,t)})):this.bindEL(e,t);else{var o=n.delegate.call(this,this.root,e,t,r);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){n.unbindEL(e,t)})):this.unbindEL(e,t);else for(var r="".concat(e,"_").concat(t),i=0;i<this.__delegates.length;i++)if(this.__delegates[i].key===r){this.__delegates[i].destroy(),this.__delegates.splice(i,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root){if("String"===x_.typeOf(e))return this.root.style[e]=t;"Object"===x_.typeOf(e)&&Object.keys(e).map((function(t){n.root.style[t]=e[t]}))}}},{key:"setAttr",value:function(e,t){var n=this;if(this.root){if("String"===x_.typeOf(e))return this.root.setAttribute(e,t);"Object"===x_.typeOf(e)&&Object.keys(e).map((function(t){n.root.setAttribute(t,e[t])}))}}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root&&(this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")))return this.root.style.display="block"}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(e){return R_.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),m_(d_(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.children.length,i=Number(n),o=e instanceof window.Node;if(r){for(var a=0,s=null,u="";a<r;a++){s=t.children[a];var c=Number(s.getAttribute("data-index"));if(c>=i){u="beforebegin";break}c<i&&(u="afterend")}return o?"afterend"===u?t.appendChild(e):t.insertBefore(e,s):s.insertAdjacentHTML(u,e),"afterend"===u?t.children[t.children.length-1]:t.children[a]}return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(e instanceof window.Node&&"function"==typeof r)if(Array.isArray(n))n.forEach((function(n){var a=Sb(e,t,n,r,i);a.key="".concat(t,"_").concat(n),o.push(a)}));else{var a=Sb(e,t,n,r,i);a.key="".concat(t,"_").concat(n),o.push(a)}return o}},{key:"ROOT_TYPES",get:function(){return wb}},{key:"POSITIONS",get:function(){return Rb}}]),n}(yb),Db=function(){function e(){var t=this;if(u_(this,e),f_(this,"__trigger",(function(e){var n=(new Date).getTime();t.timeStamp=n;for(var r=0;r<e.length;r++)t.__runHandler(e[r].target)})),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver(function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return P_(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),function(e,t,n){var r,i,o,a,s,u,c=0,l=!1,f=!1,h=!0,d=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function v(e,t){return d?(window.cancelAnimationFrame(s),window.requestAnimationFrame(e)):setTimeout(e,t)}function g(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-c>=o}function y(){var e=Date.now();if(g(e))return m(e);s=v(y,function(e){var n=e-c,r=t-(e-u);return f?Math.min(r,o-n):r}(e))}function m(e){return s=void 0,h&&r?p(e):(r=i=void 0,a)}function _(){for(var e=Date.now(),n=g(e),o=arguments.length,h=new Array(o),d=0;d<o;d++)h[d]=arguments[d];if(r=h,i=this,u=e,n){if(void 0===s)return function(e){return c=e,s=v(y,t),l?p(e):a}(u);if(f)return s=v(y,t),p(u)}return void 0===s&&(s=v(y,t)),a}return t=+t||0,P_(n)&&(l=!!n.leading,o=(f="maxWait"in n)?Math.max(+n.maxWait||0,t):o,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==s&&function(e){if(d)return window.cancelAnimationFrame(e);clearTimeout(e)}(s),c=0,r=u=i=s=void 0},_.flush=function(){return void 0===s?a:m(Date.now())},_.pending=function(){return void 0!==s},_}(e,100,{leading:r,trailing:i,maxWait:100})}(this.__trigger,0,{trailing:!0})),this.timeStamp=(new Date).getTime()}catch(e){console.error(e)}}return l_(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=e.getAttribute(ab),r=this.__handlers,i=-1,o=0;o<r.length;o++)r[o]&&e===r[o].target&&(i=o);i>-1?this.__handlers[i].handler=t:this.__handlers.push({target:e,handler:t,playerId:n})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,r){e===n.target&&(t=r)}));try{this.observer&&this.observer.unobserve(e)}catch{}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(e){console.error(e)}return!0}return!1}}]),e}(),Ob=null,Ib={pluginGroup:{},init:function(e){var t=e._pluginInfoId;t||(t=x_.generateSessionId(),e._pluginInfoId=t),!e.config.closeResizeObserver&&e.root&&function(e,t){Ob||(Ob=new Db),Ob.addObserver(e,t)}(e.root,(function(){e.resize()})),this.pluginGroup[t]={_originalOptions:e.config||{},_plugins:{}}},formatPluginInfo:function(e,t){var n=null,r=null;return e.plugin&&"function"==typeof e.plugin?(n=e.plugin,r=e.options):(n=e,r={}),t&&(r.config=t||{}),{PLUFGIN:n,options:r}},checkPluginIfExits:function(e,t){for(var n=0;n<t.length;n++)if(e.toLowerCase()===t[n].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(e,t){for(var n=Object.keys(t),r=null,i=0;i<n.length;i++)if(e.toLowerCase()===n[i].toLowerCase()){r=t[n[i]];break}return"Object"===x_.typeOf(r)?{root:r.root,position:r.position}:{}},lazyRegister:function(e,t){var n=this,r=t.timeout||1500;return Promise.race([t.loader().then((function(t){var r;r=t&&t.__esModule?t.default:t,n.register(e,r,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),r)}))])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var r=e._pluginInfoId;if(r&&this.pluginGroup[r]){this.pluginGroup[r]._plugins||(this.pluginGroup[r]._plugins={});var i=this.pluginGroup[r]._plugins,o=this.pluginGroup[r]._originalOptions;n.player=e;var a=n.pluginName||t.pluginName;if(!a)throw new Error("The property pluginName is necessary");if(t.isSupported&&!t.isSupported(e.config.mediaType,e.config.codecType))return void console.warn("not supported plugin [".concat(a,"]"));n.config||(n.config={});for(var s=Object.keys(o),u=0;u<s.length;u++)if(a.toLowerCase()===s[u].toLowerCase()){var c=o[s[u]];"Object"===x_.typeOf(c)?n.config=Object.assign({},n.config,o[s[u]]):"Boolean"===x_.typeOf(c)&&(n.config.disable=!c);break}t.defaultConfig&&Object.keys(t.defaultConfig).forEach((function(e){typeof n.config[e]>"u"&&(n.config[e]=t.defaultConfig[e])})),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{i[a.toLowerCase()]&&(this.unRegister(r,a.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(a,"] exist, destroy the old instance")));var l=new t(n);return i[a.toLowerCase()]=l,i[a.toLowerCase()].func=t,l&&"function"==typeof l.afterCreate&&l.afterCreate(),l}catch(e){throw console.error(e),e}}}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(n){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),n)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!n||!this.pluginGroup[n])return null;var r=t.toLowerCase();return this.pluginGroup[n]._plugins[r]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(r){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var i=e._pluginInfoId;if(t.pluginGroup[i]){var o=t.pluginGroup[i]._plugins,a=[];Object.keys(o).forEach((function(e){if(o[e]&&o[e].beforePlayerInit)try{var t=o[e].beforePlayerInit();a.push(n(t))}catch(e){throw a.push(n(null)),e}})),Promise.all([].concat(a)).then((function(){r()})).catch((function(e){console.error(e),r()}))}else r()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var n=this.pluginGroup[t]._plugins;Object.keys(n).forEach((function(e){n[e]&&n[e].afterPlayerInit&&n[e].afterPlayerInit()}))}},setLang:function(e,t){var n=t._pluginInfoId;if(n&&this.pluginGroup[n]){var r=this.pluginGroup[n]._plugins;Object.keys(r).forEach((function(t){if(r[t].updateLang)r[t].updateLang(e);else try{r[t].lang=e}catch{console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=this,n=e._pluginInfoId;if(n&&this.pluginGroup[n]){var r=[],i=this.pluginGroup[n]._plugins;Object.keys(i).forEach((function(e){"controls"!==e&&i[e]&&(r.push({plugin:i[e].func,options:i[e].__args}),t.unRegister(n,e))})),r.forEach((function(n){t.register(e,n.plugin,n.options)}))}},onPluginsReady:function(e){var t=e._pluginInfoId;if(t&&this.pluginGroup[t]){var n=this.pluginGroup[t]._plugins||{};Object.keys(n).forEach((function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()}))}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){e.root&&function(e){Ob.unObserver(e,void 0)}(e.root);for(var n=this.pluginGroup[t]._plugins,r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];this.unRegister(t,o)}delete this.pluginGroup[t],delete e._pluginInfoId}}},Ab="xgplayer-is-enter",Lb="xgplayer-pause",Cb="xgplayer-playing",Gb="xgplayer-ended",Nb="xgplayer-isloading",Bb="xgplayer-is-error",$b="xgplayer-replay",Fb="xgplayer-nostart",Ub="xgplayer-inactive",Hb="xgplayer-is-fullscreen",jb="xgplayer-is-cssfullscreen",Vb="xgplayer-rotate-fullscreen",zb="xgplayer-rotate-parent",Xb="xgplayer-fullscreen-parent",Kb="xgplayer-fullscreen-inner",Qb="not-allow-autoplay",Wb="seeking",qb="xgplayer-built-in";function Yb(){return{id:"",el:null,isNoRoot:!1,isCustomRoot:!0,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:E_(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var Jb={lang:{},langKeys:[],textKeys:[]};function Zb(e,t){return Object.keys(t).forEach((function(n){var r,i=x_.typeOf(t[n]),o=x_.typeOf(e[n]);"Array"===i?("Array"!==o&&(e[n]=[]),(r=e[n]).push.apply(r,__(t[n]))):"Object"===i?("Object"!==o&&(e[n]={}),Zb(e[n],t[n])):e[n]=t[n]})),e}function eT(){Object.keys(Jb.lang.en).map((function(e){Jb.textKeys[e]=e}))}function tT(e,t){var n=e.LANG;if(t||(t=Jb),t.lang){var r=e.TEXT||{};"zh"===n&&(n="zh-cn"),t.lang[n]?Zb(t.lang[n],r):(t.langKeys.push(n),t.lang[n]=r),eT()}}tT({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var nT={get textKeys(){return Jb.textKeys},get langKeys(){return Jb.langKeys},get lang(){var e={};return Jb.langKeys.map((function(t){e[t]=Jb.lang[t]})),Jb.lang["zh-cn"]&&(e.zh=Jb.lang["zh-cn"]||{}),e},extend:function(e,t){var n=[];if(t||(t=Jb),t.lang){n="Array"!==x_.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e;var r=t.lang;n.map((function(e){"zh"===e.LANG&&(e.LANG="zh-cn"),r[e.LANG]?Zb(r[e.LANG]||{},e.TEXT||{}):tT(e,t)})),eT()}},use:tT,init:function(e){var t,n={lang:{},langKeys:[],textKeys:{},pId:e};return Zb(n.lang,Jb.lang),(t=n.langKeys).push.apply(t,__(Jb.langKeys)),Zb(n.textKeys,Jb.textKeys),n}},rT=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],iT={},oT=null,aT=function(e){h_(n,e);var t=y_(n);function n(){return u_(this,n),t.apply(this,arguments)}return l_(n,[{key:"add",value:function(e){e&&(iT[e.playerId]=e,1===Object.keys(iT).length&&this.setActive(e.playerId,!0))}},{key:"remove",value:function(e){e&&(e.isUserActive,delete iT[e.playerId])}},{key:"_iterate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var n in iT)if(Object.prototype.hasOwnProperty.call(iT,n)){var r=iT[n];if(t){if(e(r))break}else e(r)}}},{key:"forEach",value:function(e){this._iterate(e)}},{key:"find",value:function(e){var t=null;return this._iterate((function(n){var r=e(n);return r&&(t=n),r}),!0),t}},{key:"findAll",value:function(e){var t=[];return this._iterate((function(n){e(n)&&t.push(n)})),t}},{key:"setActive",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(iT[e])return t?this.forEach((function(t){e===t.playerId?(t.isUserActive=!0,t.isInstNext=!1):t.isUserActive=!1})):iT[e].isUserActive=t,e}},{key:"getActiveId",value:function(){for(var e=Object.keys(iT),t=0;t<e.length;t++){var n=iT[e[t]];if(n&&n.isUserActive)return e[t]}return null}},{key:"setNext",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(iT[e])return t?this.forEach((function(t){e===t.playerId?(t.isUserActive=!1,t.isInstNext=!0):t.isInstNext=!1})):iT[e].isInstNext=t,e}}],[{key:"getInstance",value:function(){return oT||(oT=new n),oT}}]),n}(r_.EventEmitter),sT=["play","pause","replay","retry"],uT=0,cT=0,lT=null,fT=function(e){h_(n,e);var t=y_(n);function n(e){var r;u_(this,n);var i=x_.deepMerge(Yb(),e);f_(v_(r=t.call(this,i)),"canPlayFunc",(function(){if(r.config){var e=r.config,t=e.autoplay,n=e.defaultPlaybackRate;R_.logInfo("player","canPlayFunc, startTime",r.__startTime),r.__startTime>0&&r.duration>0&&(r.currentTime=r.__startTime>r.duration?r.duration:r.__startTime,r.__startTime=-1),r.playbackRate=n,(t||r._useAutoplay)&&r.mediaPlay(),r.off(U_,r.canPlayFunc),r.removeClass(Ab)}})),f_(v_(r),"onFullscreenChange",(function(e,t){var n=function(){x_.setTimeout(v_(r),(function(){r.resize()}),100)},i=x_.getFullScreenEl();r._fullActionFrom?r._fullActionFrom="":r.emit(J_,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:r.currentTime,duration:r.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var o=function(e,t,n){if(e){var r=e.getAttribute(n);return!(!r||r!==t||"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName)}}(i,r.playerId,ab);if(t||i&&(i===r._fullscreenEl||o))n(),!r.config.closeFocusVideoFocus&&r.media.focus(),r.fullscreen=!0,r.changeFullStyle(r.root,i,Hb),r.emit(Q_,!0,r._fullScreenOffset),r.cssfullscreen&&r.exitCssFullscreen();else if(r.fullscreen){n();var a=v_(r),s=a._fullScreenOffset;a.config.needFullscreenScroll?(window.scrollTo(s.left,s.top),x_.setTimeout(v_(r),(function(){r.fullscreen=!1,r._fullScreenOffset=null}),100)):(!r.config.closeFocusVideoFocus&&r.media.focus(),r.fullscreen=!1,r._fullScreenOffset=null),r.cssfullscreen?r.removeClass(Hb):r.recoverFullStyle(r.root,r._fullscreenEl,Hb),r._fullscreenEl=null,r.emit(Q_,!1)}})),f_(v_(r),"_onWebkitbeginfullscreen",(function(e){r._fullscreenEl=r.media,r.onFullscreenChange(e,!0)})),f_(v_(r),"_onWebkitendfullscreen",(function(e){r.onFullscreenChange(e,!1)})),db(v_(r),sT),r.config=i,r._pluginInfoId=x_.generateSessionId(),function(e){e.logInfo=R_.logInfo.bind(e),e.logWarn=R_.logWarn.bind(e),e.logError=R_.logError.bind(e)}(v_(r));var o=r.constructor.defaultPreset,a=r.config.presets;if(a.length){var s=a.indexOf("default");s>=0&&o&&(a[s]=o)}else o&&a.push(o);r.userTimer=null,r.waitTimer=null,r.handleSource=!0,r._state=1,r.isError=!1,r._hasStart=!1,r.isSeeking=!1,r.isCanplay=!1,r._useAutoplay=!1,r.__startTime=-1,r.rotateDeg=0,r.isActive=!1,r.fullscreen=!1,r.cssfullscreen=!1,r.isRotateFullscreen=!1,r._fullscreenEl=null,r.timeSegments=[],r._cssfullscreenEl=null,r.curDefinition=null,r._orgCss="",r._fullScreenOffset=null,r._videoHeight=0,r._videoWidth=0,r.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},r.sizeInfo={width:0,height:0,left:0,top:0},r._accPlayed={t:0,acc:0,loopAcc:0},r._offsetInfo={currentTime:-1,duration:0},r.innerContainer=null,r.topBar=null,r.root=null,r.__i18n=nT.init(r._pluginInfoId),A_.os.isAndroid&&A_.osVersion>0&&A_.osVersion<6&&(r.config.autoplay=!1),r.database=new nb,r.isUserActive=!1,r._onceSeekCanplay=null,r._isPauseBeforeSeek=0,r.innerStates={isActiveLocked:!1},r.instManager=lT,r._initMedia();var u=r.config.isNoRoot,c=!u&&r._initDOM();if(!u&&!c)return console.error(new Error("can't find the dom which id is ".concat(r.config.id," or this.config.el does not exist"))),g_(r);Ib.init(v_(r));var l=r.config,f=l.definition,h=void 0===f?{}:f;if(!l.url&&h.list&&h.list.length>0){var d=h.list.find((function(e){return e.definition&&e.definition===h.defaultDefinition}));d||(h.defaultDefinition=h.list[0].definition,d=h.list[0]),r.config.url=d.url,r.curDefinition=d}return r._bindEvents(),r._registerPresets(),r._registerPlugins(),Ib.onPluginsReady(v_(r)),r.getInitDefinition(),r.setState(2),x_.setTimeout(v_(r),(function(){r.emit("ready")}),0),r.onReady&&r.onReady(),(r.config.videoInit||r.config.autoplay)&&(!r.hasStart||r.state<4)&&r.start(),r}return l_(n,[{key:"_initMedia",value:function(){var e=this.constructor.XgVideoProxy;if(e&&this.mediaConfig.mediaType===e.mediaType){var t=this.innerContainer||this.root;this.detachVideoEvents(this.media);var n=new e(t,this.config,this.mediaConfig);this.attachVideoEvents(n),this.media=n}this.media.setAttribute(ab,this.playerId)}},{key:"_initDOM",value:function(){var e,t=this,n=this.config,r=n.id,i=n.el,o=n.isCustomRoot,a=n.controls,s=n.autoplay,u=n.isMobileSimulateMode;if(this.root=r?document.getElementById(r):null,!this.root)if(i&&1===i.nodeType)this.root=i;else{if(o)return this.emit("error",new N_("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=x_.createDom("div","",{id:r,class:qb})}var c=function(e){for(var t=Object.keys(iT),n=0;n<t.length;n++){var r=iT[t[n]];if(r.root===e)return r}return null}(this.root);c&&(R_.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),c.destroy()),this.root.setAttribute(ab,this.playerId),null===(e=lT)||void 0===e||e.add(this),this._initBaseDoms();var l="mobile"===u?"mobile":A_.device;if(this.addClass("".concat("xgplayer"," ").concat(Ub," xgplayer-").concat(l," ").concat(a?"":"no-controls")),s?this.addClass(Ab):this.addClass(Fb),this.config.fluid){var f=this.config,h=f.width,d=f.height;("number"!=typeof h||"number"!=typeof d)&&(h=600,d=337.5);var p={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*d/h,"%")};Object.keys(p).forEach((function(e){t.root.style[e]=p[e]}))}else["width","height"].forEach((function(e){t.config[e]&&("number"!=typeof t.config[e]?t.root.style[e]=t.config[e]:t.root.style[e]="".concat(t.config[e],"px"))}));var v=this.root.getBoundingClientRect(),g=v.width,y=v.height,m=v.left,_=v.top;return this.sizeInfo.width=g,this.sizeInfo.height=y,this.sizeInfo.left=m,this.sizeInfo.top=_,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=x_.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),rb.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),A_.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(H_,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(B_,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root&&this.root.removeEventListener("mousemove",this.mousemoveFunc),rb.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off(B_,this.playFunc),this.off(U_,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_clearUserTimer",value:function(){this.userTimer&&(x_.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"_startInit",value:function(e){var t=this;if(this.media&&(e&&""!==e&&("Array"!==x_.typeOf(e)||0!==e.length)||(e="",this.emit("urlNull"),R_.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.handleSource&&(this._detachSourceEvents(this.media),"Array"===x_.typeOf(e)&&e.length>0?this._attachSourceEvents(this.media,e):this.media.src&&this.media.src===e?e||this.media.removeAttribute("src"):this.media.src=e),"Number"===x_.typeOf(this.config.volume)&&(this.volume=this.config.volume);var n=this.innerContainer?this.innerContainer:this.root;n&&this.media instanceof window.Element&&!n.contains(this.media)&&n.insertBefore(this.media,n.firstChild);var r=this.media.readyState;R_.logInfo("_startInit readyState",r),this.config.autoplay&&(!x_.isMSE(this.media)&&this.load(),(A_.os.isIpad||A_.os.isPhone)&&this.mediaPlay());var i=this.config.startTime;this.__startTime=i>0?i:-1,this.config.startTime=0,r>=2&&this.duration>0?this.canPlayFunc():this.on(U_,this.canPlayFunc),(!this.hasStart||this.state<4)&&Ib.afterInit(this),this.hasStart=!0,this.setState(4),x_.setTimeout(this,(function(){t.emit("complete")}),0)}}},{key:"_registerPlugins",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._loadingPlugins=[];var n=this.config.ignores||[],r=this.config.plugins||[],i=this.config.i18n||[];t&&nT.extend(i,this.__i18n);var o=n.join("||").toLowerCase().split("||"),a=this.plugins;r.forEach((function(n){try{var r=n.plugin?n.plugin.pluginName:n.pluginName;if(r&&o.indexOf(r.toLowerCase())>-1)return null;if(!t&&a[r.toLowerCase()])return;if(n.lazy&&n.loader){var i=Ib.lazyRegister(e,n);return void(n.forceBeforeInit&&(i.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(i),1)})).catch((function(t){R_.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(i),1)})),e._loadingPlugins.push(i)))}return e.registerPlugin(n)}catch(e){R_.logError("_registerPlugins:",e)}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){!function(e,t){var n,r,i=t.preset&&t.options?new t.preset(t.options,e.config):new t({},e.config),o=i.plugins,a=void 0===o?[]:o,s=i.ignores,u=void 0===s?[]:s,c=i.icons,l=void 0===c?{}:c,f=i.i18n,h=void 0===f?[]:f;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(n=e.config.plugins).push.apply(n,__(a)),(r=e.config.ignores).push.apply(r,__(u)),Object.keys(l).map((function(t){e.config.icons[t]||(e.config.icons[t]=l[t])}));var d=e.config.i18n||[];h.push.apply(h,__(d)),e.config.i18n=h}(e,t)}))}},{key:"_getRootByPosition",value:function(e){var t=null;switch(e){case Rb.ROOT_RIGHT:this.rightBar||(this.rightBar=x_.createPositionBar("xg-right-bar",this.root)),t=this.rightBar;break;case Rb.ROOT_LEFT:this.leftBar||(this.leftBar=x_.createPositionBar("xg-left-bar",this.root)),t=this.leftBar;break;case Rb.ROOT_TOP:this.topBar||(this.topBar=x_.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&x_.addClass(this.topBar,"top-bar-autohide")),t=this.topBar;break;default:t=this.innerContainer||this.root}return t}},{key:"registerPlugin",value:function(e,t){var n=Ib.formatPluginInfo(e,t),r=n.PLUFGIN,i=n.options,o=this.config.plugins;!Ib.checkPluginIfExits(r.pluginName,o)&&o.push(r);var a=Ib.getRootByConfig(r.pluginName,this.config);a.root&&(i.root=a.root),a.position&&(i.position=a.position);var s=i.position?i.position:i.config&&i.config.position||r.defaultConfig&&r.defaultConfig.position;return!i.root&&"string"==typeof s&&s.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(r,i,r.pluginName):(i.root||(i.root="controls"===r.pluginName?this.root:this._getRootByPosition(s)),Ib.register(this,r,i))}},{key:"deregister",value:function(e){"string"==typeof e?Ib.unRegister(this,e):e instanceof yb&&Ib.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.deregister(e),t&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var t;if("string"==typeof e?t=e:e instanceof yb&&(t=e.pluginName),t)for(var n=this.config.plugins.length-1;n>-1;n--)if(this.config.plugins[n].pluginName.toLowerCase()===t.toLowerCase()){this.config.plugins.splice(n,1);break}}},{key:"plugins",get:function(){return Ib.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=Ib.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(x_.hasClass(this.root,e)||x_.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&x_.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return x_.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;if(!(this.state>3))return!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(3),this._registerPlugins(!1),Ib.beforeInit(this).then((function(){if(t.config){e||(e=t.url||t.config.url);var n=t._preProcessUrl(e);return t._startInit(n.url)}})).catch((function(e){throw e.fileName="player",e.lineNumber="236",R_.logError("start:beforeInit:",e),e}))}},{key:"switchURL",value:function(e,t){var n=this,r=e;"Object"===x_.typeOf(e)&&(r=e.url),r=this._preProcessUrl(r).url;var i=this.currentTime;this.__startTime=i;var o=this.paused&&!this.isError;return this.src=r,new Promise((function(e,t){var i=function(e){n.off("timeupdate",a),n.off("canplay",a),t(e)},a=function(){n.duration>0&&n.__startTime>0&&(n.currentTime=n.__startTime,n.__startTime=-1),o&&n.pause(),n.off("error",i),e(!0)};n.once("error",i),r?(A_.os.isAndroid?n.once("timeupdate",a):n.once("canplay",a),n.play()):n.errorHandler("error",{code:6,message:"empty_src"})}))}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<4)return this.removeClass(Fb),this.addClass(Ab),this.start(),void(this._useAutoplay=!0);this.state<6&&(this.removeClass(Fb),!this.isCanplay&&this.addClass(Ab));var t=m_(d_(n.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(Qb),e.addClass(Cb),e.state<6&&(R_.logInfo(">>>>playPromise.then"),e.setState(6),e.emit(X_))})).catch((function(t){if(R_.logWarn(">>>>playPromise.catch",t.name),e.media&&e.media.error)return e.onError(),void e.removeClass(Ab);"NotAllowedError"===t.name&&(e._errorTimer=x_.setTimeout(e,(function(){e._errorTimer=null,e.emit(K_),e.addClass(Qb),e.removeClass(Ab),e.pause(),e.setState(5)}),0))})):(R_.logWarn("video.play not return promise"),this.state<6&&(this.setState(6),this.removeClass(Qb),this.removeClass(Fb),this.removeClass(Ab),this.addClass(Cb),this.emit(X_))),t}},{key:"mediaPause",value:function(){m_(d_(n.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){m_(d_(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(Lb),vb(this,"play",(function(){return e.mediaPlay()}))}},{key:"pause",value:function(){var e=this;vb(this,"pause",(function(){m_(d_(n.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var n=this;if(this.media&&!Number.isNaN(Number(e))&&this.hasStart){var r=this.config,i=r.isSeekedPlay,o=r.seekedStatus,a=t||(i?"play":o);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off($_,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(n.removeClass(Ab),n.isSeeking=!1,a){case"play":n.play();break;case"pause":n.pause();break;default:n._isPauseBeforeSeek>1||n.paused?n.pause():n.play()}n._isPauseBeforeSeek=0,n._onceSeekCanplay=null},this.once($_,this._onceSeekCanplay),this.state<6?(this.removeClass(Fb),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,t=this.config,n=t.definition;!t.url&&n&&n.list&&n.list.length>0&&n.defaultDefinition&&n.list.map((function(t){t.definition===n.defaultDefinition&&(e.config.url=t.url,e.curDefinition=t)}))}},{key:"changeDefinition",value:function(e,t){var n=this,r=this.config.definition;if(Array.isArray(null==r?void 0:r.list)&&r.list.forEach((function(t){(null==e?void 0:e.definition)===t.definition&&(n.curDefinition=t)})),null!=e&&e.bitrate&&"number"!=typeof e.bitrate&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(q_,{from:t,to:e}),this.hasStart){var i=this.switchURL(e.url,a_({seamless:!1!==r.seamless&&typeof MediaSource<"u"&&"function"==typeof MediaSource.isTypeSupported},e));i&&i.then?i.then((function(){n.emit(Y_,{from:t,to:e})})):this.emit(Y_,{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(H_,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[Qb,Cb,Fb,Lb,$b,Ab,Gb,Bb,Nb];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,t.forEach((function(t){e.removeClass(t)})),this.addClass(Fb),this.emit("reset")}},{key:"reset",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;if(this.resetState(),this.plugins&&(t.map((function(t){e.deregister(t)})),n)){var r=Yb();Object.keys(this.config).keys((function(t){"undefined"!==e.config[t]&&("plugins"===t||"presets"===t||"el"===t||"id"===t)&&(e.config[t]=r[t])}))}}},{key:"destroy",value:function(){var e,t=this,r=this.innerContainer,i=this.root,o=this.media;if(o){if(this.hasStart=!1,this._useAutoplay=!1,i&&i.removeAttribute(ab),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),x_.clearAllTimers(this),this.emit("destroy"),null===(e=lT)||void 0===e||e.remove(this),Ib.destroy(this),pb(this),m_(d_(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===i&&this.exitFullscreen(),r)for(var a=r.children,s=0;s<a.length;s++)r.removeChild(a[s]);i&&!r&&o instanceof window.Node&&i.contains(o)&&i.removeChild(o),["topBar","leftBar","rightBar","innerContainer"].map((function(e){t[e]&&i.removeChild(t[e]),t[e]=null}));var u=i?i.className.split(" "):[],c=i&&x_.hasClass(i,qb);u.length>0?i.className=u.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):i&&(i.className=""),this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(e){t[e]=!1})),c&&this.root.parentNode&&this.root.parentNode.removeChild(this.root)}}},{key:"replay",value:function(){var e=this;this.removeClass(Gb),this.currentTime=0,this.isSeeking=!1,vb(this,"replay",(function(){e.once($_,(function(){var t=e.mediaPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.emit("replay"),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(Bb),this.addClass(Nb),vb(this,"retry",(function(){var t=e.currentTime,n=e.config.url,r=x_.isMSE(e.media)?{url:n}:e._preProcessUrl(n);e.src=r.url,!e.config.isLive&&(e.currentTime=t),e.once(U_,(function(){e.mediaPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,n,r){e&&(r||(r=Xb),this._orgCss||(this._orgCss=x_.filterStyleFromText(e)),x_.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=x_.filterStyleFromText(t),x_.addClass(t,r),t.setAttribute(ab,this.playerId)))}},{key:"recoverFullStyle",value:function(e,t,n,r){r||(r=Xb),this._orgCss&&(x_.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),x_.removeClass(e,n),t&&t!==e&&this._orgPCss&&(x_.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",x_.removeClass(t,r),t.removeAttribute(ab))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.media;if(e||(e=t),this._fullScreenOffset={top:x_.scrollTop(),left:x_.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get",x_.getFullScreenEl()===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var r=0;r<ib.length;r++){var i=ib[r];if(e[i]){var o="webkitRequestFullscreen"===i?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[i]();return o&&o.then?o:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch{return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||x_.getFullScreenEl()){this.root;var t=this.media;this._fullActionFrom="exit";try{for(var n=0;n<ob.length;n++){var r=ob[n];if(document[r]){var i=document[r]();return i&&i.then?i:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch{return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(Kb," ").concat(jb):jb;this.changeFullStyle(this.root,e,t);var n=this.config.fullscreen,r=void 0===n?{}:n;(!0===r.useCssFullscreen||"function"==typeof r.useCssFullscreen&&r.useCssFullscreen())&&(this.fullscreen=!0,this.emit(Q_,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(W_,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(Kb," ").concat(jb):jb;if(this.fullscreen){var t=this.config.fullscreen,n=void 0===t?{}:t;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(Q_,!1)):this.removeClass(e)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,e);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(W_,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(Kb," ").concat(Vb):Vb;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,zb),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(Q_,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(Kb," ").concat(Vb):Vb;this.recoverFullStyle(this.root,this._fullscreenEl,t,zb),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(Q_,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(V_,a_({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?(this._clearUserTimer(),this.emit(z_,a_({paused:this.paused,ended:this.ended},e))):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!0,delay:3e3},n=this.innerStates;if(this.isActive=!0,this.removeClass(Ub),this._clearUserTimer(),void 0!==t.isLock&&(n.isActiveLocked=t.isLock),!1===t.autoHide||!0===t.isLock||n.isActiveLocked)this._clearUserTimer();else{var r=t&&t.delay?t.delay:this.config.inactive;this.userTimer=x_.setTimeout(this,(function(){e.userTimer=null,e.blur()}),r)}}},{key:"onBlur",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ignorePaused,t=void 0!==e&&e;if(!this.innerStates.isActiveLocked){var n=this.config.closePauseVideoFocus;this.isActive=!1,(t||n||!this.paused&&!this.ended)&&this.addClass(Ub)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(Ab),this.removeClass(Bb),this.removeClass(Nb),this.isCanplay=!0,this.waitTimer&&x_.clearTimeout(this,this.waitTimer)}},{key:"onDurationchange",value:function(){this.__startTime>0&&this.duration>0&&(this.currentTime=this.__startTime,this.__startTime=-1)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(Bb),this.isCanplay=!1}},{key:"onPlay",value:function(){7===this.state&&this.setState(6),this.removeClass(Lb),this.ended&&this.removeClass(Gb),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(Lb),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this._clearUserTimer(),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(Gb),this.setState(7)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(Qb),this.removeClass(Fb),this.removeClass(Ab),this.removeClass(Nb),this.addClass(Bb)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(Wb)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&x_.clearTimeout(this,this.waitTimer),this.removeClass(Nb),this.removeClass(Wb)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&x_.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=x_.setTimeout(this,(function(){e.addClass(Nb),e.emit("loading"),x_.clearTimeout(e,e.waitTimer),e.waitTimer=null}),this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1,[Fb,Lb,Gb,Bb,$b,Nb].forEach((function(t){e.removeClass(t)})),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=(new Date).getTime())}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(Nb))&&this.media.readyState>2&&(this.removeClass(Nb),x_.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<6&&this.duration&&(this.setState(6),this.emit(X_)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===x_.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,n){if(this.media&&t&&e){var r="String"===x_.typeOf(e)?e:e.type||"";n.props&&"Array"!==x_.typeOf(n.props)&&(n.props=[n.props]),this.emit(J_,a_({eventType:r,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=this.media.buffered;if(!t||0===t.length||!this.duration)return!0;for(var n=e||this.media.currentTime||.2,r=t.length,i=0;i<r;i++)if(t.start(i)<=n&&t.end(i)>n)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,t=e.vy,n=e.vx,r=e.h,i=e.w,o=this.videoPos.rotate;if(!(o<0&&r<0&&i<0)){var a=this.videoPos._pi;if(!a&&this.media.videoHeight&&(a=this.media.videoWidth/this.media.videoHeight*100),a){this.videoPos.pi=a;var s={rotate:o=o<0?0:o},u=0,c=0,l=1,f=Math.abs(o/90),h=this.root,d=this.innerContainer,p=h.offsetWidth,v=d?d.offsetHeight:h.offsetHeight,g=v,y=p;if(f%2==0)l=r>0?100/r:i>0?100/i:1,s.scale=l,u=t>0?(100-r)/2-t:0,s.y=2===f?0-u:u,c=n>0?(100-i)/2-n:0,s.x=2===f?0-c:c,this.media.style.width="".concat(y,"px"),this.media.style.height="".concat(g,"px");else if(f%2==1){g=p;var m=v-p;c=-m/2/(y=v)*100,s.x=3===f?c+t/2:c-t/2,u=m/2/g*100,s.y=3===f?u+n/2:u-n/2,s.scale=l,this.media.style.width="".concat(y,"px"),this.media.style.height="".concat(g,"px")}var _=x_.getTransformStyle(s,this.media.style.transform||this.media.style.webkitTransform);this.media.style.transform=_,this.media.style.webkitTransform=_}}}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.media&&e&&e.h){var t=this.videoPos;t.h=100*e.h||0,t.w=100*e.w||0,t.vx=100*e.x||0,t.vy=100*e.y||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).map((function(n){if("plugins"!==n){t.config[n]=e[n];var r=t.plugins[n.toLowerCase()];r&&"Function"===x_.typeOf(r.setConfig)&&r.setConfig(e[n])}}))}},{key:"playNext",value:function(e){var t=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,vb(this,"playnext",(function(){t.start(),t.emit("playnext",e)}))}},{key:"resize",value:function(){var e=this;if(this.media&&this.root){var t=this.root.getBoundingClientRect();this.sizeInfo.width=t.width,this.sizeInfo.height=t.height,this.sizeInfo.left=t.left,this.sizeInfo.top=t.top;var n=this.media,r=n.videoWidth,i=n.videoHeight,o=this.config,a=o.fitVideoSize,s=o.videoFillMode;if(("fill"===s||"cover"===s||"contain"===s)&&this.setAttribute("data-xgfill",s),i&&r){this._videoHeight=i,this._videoWidth=r;var u=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,c=t.width,l=t.height-u,f=parseInt(r/i*1e3,10),h=parseInt(c/l*1e3,10),d=c,p=l,v={};"auto"===a&&h>f||"fixWidth"===a?(p=c/f*1e3,this.config.fluid?v.paddingTop="".concat(100*p/d,"%"):v.height="".concat(p+u,"px")):("auto"===a&&h<f||"fixHeight"===a)&&(d=f*l/1e3,v.width="".concat(d,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(v).forEach((function(t){e.root.style[t]=v[t]})),("fillHeight"===s&&h<f||"fillWidth"===s&&h>f)&&this.setAttribute("data-xgfill","cover");var g={videoScale:f,vWidth:d,vHeight:p,cWidth:d,cHeight:p+u};this.resizePosition(),this.emit("video_resize",g)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.media.updateObjectPosition?this.media.updateObjectPosition(e,t):this.media.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){R_.logInfo("setState","state from:".concat(rT[this.state]," to:").concat(rT[e])),this._state=e}},{key:"_preProcessUrl",value:function(e,t){var n=this.config.preProcessUrl;return x_.isBlob(e)||"function"!=typeof n?{url:e}:n(e,t)}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,!1===e&&this.setState(2),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return 6===this._state||7===this._state},set:function(e){e?this.setState(6):this._state>=6&&this.setState(4)}},{key:"definitionList",get:function(){return this.config&&this.config.definition&&this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition,r=null,i=null;n.list=e,this.emit("resourceReady",e),e.forEach((function(e){var o;(null===(o=t.curDefinition)||void 0===o?void 0:o.definition)===e.definition&&(r=e),n.defaultDefinition===e.definition&&(i=e)})),!i&&e.length>0&&(i=e[0]),r?this.changeDefinition(r):i&&this.changeDefinition(i)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var t=this.media.getVideoPlaybackQuality();return e.dropped=t.droppedVideoFrames||0,e.total=t.totalVideoFrames||0,e.corrupted=t.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"controls",get:function(){return this.plugins.controls}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==nT.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,Ib.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(nT.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return"zh"===e&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return L_}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return m_(d_(n.prototype),"readyState",this)}},{key:"error",get:function(){var e=m_(d_(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return m_(d_(n.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return null!==this._fullScreenOffset}},{key:"cumulateTime",get:function(){var e=this._accPlayed,t=e.acc,n=e.t;return n?(new Date).getTime()-n+t:t}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){(e=x_.convertDeg(e))%90==0&&e!==this.videoPos.rotate&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return cT},set:function(e){cT=e}},{key:"realTimeSpeed",get:function(){return uT},set:function(e){uT=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime||0},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration||0},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,t){return ub.call.apply(ub,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return cb.call.apply(cb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,t){return lb.call.apply(lb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return fb.call.apply(fb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return hb.call.apply(hb,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){var n;"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),x_.typeOf(t)===Boolean&&(this.muted=t)),null===(n=lT)||void 0===n||n.setActive(this.playerId,e)}}],[{key:"debugger",get:function(){return R_.config.debug},set:function(e){R_.config.debug=e}},{key:"version",get:function(){return L_}},{key:"instManager",get:function(){return lT},set:function(e){lT=e}},{key:"getCurrentUserActivePlayerId",value:function(){var e;return null===(e=lT)||void 0===e?void 0:e.getActiveId()}},{key:"setCurrentUserActive",value:function(e,t){var n;null===(n=lT)||void 0===n||n.setActive(e,t)}},{key:"isHevcSupported",value:function(){return A_.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return A_.probeConfigSupported(e)}},{key:"install",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=t)}},{key:"use",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]=t}}]),n}(tb);function hT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hT(Object(n),!0).forEach((function(t){mT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pT(e){return pT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pT(e)}function vT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wT(r.key),r)}}function yT(e,t,n){return t&&gT(e.prototype,t),n&&gT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mT(e,t,n){return(t=wT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _T(e){return(_T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bT(e,t){return(bT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function TT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kT(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return TT(e)}function ST(){return ST=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_T(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ST.apply(this,arguments)}function wT(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}f_(fT,"defaultPreset",null),f_(fT,"XgVideoProxy",null),fT.instManager=aT.getInstance();var RT=/^WEBVTT/,MT=/^STYLE+$/,xT=/^\:\:cue/,PT=/^}+$/,ET=/^\[Script Info\].*/,DT=[/[0-9]{1,3}:[0-9]{2}:[0-9]{2}\.[0-9]{1,3}-->[0-9]{1,3}:[0-9]{2}:[0-9]{2}\.[0-9]{1,3}/,/[0-9]{1,2}:[0-9]{2}\.[0-9]{1,3}-->[0-9]{1,2}:[0-9]{2}\.[0-9]{1,3}/,/[0-9]{1,2}\.[0-9]{1,3}-->[0-9]{1,2}\.[0-9]{1,3}/],OT=/^Format:\s/,IT=/^Style:\s/,AT=/^Dialogue:\s/;function LT(e){var t=e.length;return 3===t?(60*(60*Number(e[0])+Number(e[1]))*1e3+1e3*Number(e[2]))/1e3:2===t?(60*Number(e[0])*1e3+1e3*Number(e[1]))/1e3:Number(e[0])}function CT(e){return/^(\-|\+)?\d+(\.\d+)?$/.test(e)}function GT(e,t){return e>=0&&e<t.length?t[e]:""}var NT=function(){function e(){vT(this,e)}return yT(e,null,[{key:"parseJson",value:function(e){for(var t=[],n=0,r=0;r<e.length;r++){if(n>=50&&(n=0),0===n){var i={start:e[r].start,list:[e[r]],end:e[r].end};t.push(i)}else t[t.length-1].list.push(e[r]),t[t.length-1].end=e[r].end;n++}return t}},{key:"parse",value:function(t,n){var r=e.checkFormat(t);r||n({format:r});try{var i=[];"ass"===r?i=e.parseASS(t):"vtt"===r&&(i=e.parseVTT(t)),n({format:r,list:i.list,styles:i.styles})}catch(e){console.error(e),n({format:r},e)}}},{key:"parseASSItem",value:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),n={},r="";try{var i=t.length-e.length;return r=(r=i>0?t.splice(e.length-1,i+1).join(",")+"":t[t.length-1]+"").replace(/\\n+/g,""),t[e.length-1]=r,e.map((function(e,r){"end"===e||"start"===e?n[e]=LT(t[r].split(":")):"text"===e?n[e]=[t[r]]:"layer"===e?(n[e]=[t[r]],n.textTag=[t[r]]):n[e]="style"===e?[t[r]]:Number(t[r])?Number(t[r]):t[r]})),n}catch(e){return console.error(e),{}}}},{key:"parseASS",value:function(t){for(var n=t.split("\n"),r=[],i=0,o=0,a=[],s=[],u=null;i<n.length;){if(OT.test(n[i]))s=(s=n[i].replace(OT,"").replace(/\s+/g,"").split(",")).map((function(e){return e.toLocaleLowerCase()}));else if(IT.test(n[i]))a.push(n[i].replace(IT,"").replace(/\s+/g,""));else if(AT.test(n[i])){var c=e.parseASSItem(n[i].replace(AT,""),s);if(u&&c.start===u.start&&c.end===u.end)try{var l=u,f=l.text,h=l.textTag,d=l.style;f.push(c.text[0]),h.push(c.textTag[0]),d.push(c.style[0])}catch(e){console.error(e)}else{u=c;var p=null;o%50==0?((p={start:u.start,end:u.end,list:[]}).list.push(u),r.push(p)):((p=r[r.length-1]).end=u.end,p.list.push(u)),o++}}i++}return{list:r,style:{}}}},{key:"parseVTTStyle",value:function(e,t){var n=e.split(":");if(n.length>1){var r=n[0].trim().split("-"),i="";r.length>1?r.map((function(e,t){i+=0===t?e:e.charAt(0).toUpperCase()+e.slice(1)})):i=r[0],t[i]=n[1].trim().replace(/;$/,"")}return t}},{key:"parseVTT",value:function(e){for(var t=(e=e.replace(RT,"")).split("\n"),n=[],r=0,i=0,o=null,a=!1,s=!1,u=null,c=null,l=[];r<t.length;){var f=GT(r,t).trim();if(!f||a&&CT(f))a=!f;else if(xT.test(f)&&MT.test(GT(r-1,t).trim())){s=!0;var h=/\((.+?)\)/g.exec(f);c=h?h[1]:"",u=""}else if(s)PT.test(f)?(l.push({key:c,style:u}),u=null,c=null,s=!1):u+=f;else if(f){a=!1;var d=this.checkIsTime(t[r]);if(d){var p=this.parseVttTime(d);if(!o||p.start!==o.start||p.end!==o.end){(o=p).text=[],o.textTag=[];var v=null;i%50==0?((v={start:o.start,end:o.end,list:[]}).list.push(o),n.push(v)):((v=n[n.length-1]).end=o.end,v.list.push(o)),i++}}else if(o){var g=o,y=g.text,m=g.textTag,_=this.parseVttText(t[r]);y.push(_.text),m.push(_.tag)}a=!1}r++}return{list:n,styles:l}}},{key:"checkIsTime",value:function(e){e=e.replace(/\s+/g,"");for(var t=0,n=null;t<DT.length&&!(n=DT[t].exec(e));)t++;return n?n[0]:null}},{key:"parseVttText",value:function(e){var t=/^(<?.+?>)/g.exec(e),n="",r="default";if(t){r=t[0].replace(/\<|\>|\&/g,"");var i=RegExp("^<".concat(r,">(([\\s\\S])*?)</").concat(r,">$")).exec(e);i?n=i[1]:(n=e,r="")}else n=e;for(var o=/<(\w+).(\w+)>/g,a=o.exec(n);a&&a.length>2;)n=n.replace(a[0],"<".concat(a[1],' class="').concat(a[2],'">')),a=o.exec(n);return{tag:r,text:n.replace(/\\n+/g,"<br/>")}}},{key:"parseVttTime",value:function(e){var t,n=e.split("--\x3e"),r=0;if(2===n.length){var i=n[0].split(":"),o=n[1].split(":");t=LT(i),r=LT(o)}return{start:t,end:r,time:e}}},{key:"isVTT",value:function(e){return RT.test(e)}},{key:"isASS",value:function(e){return ET.test(e)}},{key:"checkFormat",value:function(e){return e?RT.test(e)?"vtt":ET.test(e)?"ass":null:null}}]),e}(),BT=[{code:0,msg:"SUCCESS"},{code:1,msg:"LOAD_ERROR"},{code:2,msg:"PARSER_ERROR"},{code:3,msg:"FORMAT_NOT_SUPPORTED"},{code:4,msg:"ID_OR_LANGUAGE_NOT_EXIST"},{code:5,msg:"PARAMETERS_ERROR"},{code:6,msg:"ABORT"},{code:7,msg:"UNKNOWN"},{code:8,msg:"DATA_ERROR:subtitle.url is null"},{code:9,msg:"DATA_ERROR:subtitle.url length is 0"}];function $T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={code:BT[e].code,msg:BT[e].msg};return Object.keys(t).map((function(e){n[e]=t[e]})),n}var FT=yT((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,r=t.method,i=void 0===r?"GET":r,o=t.type,a=void 0===o?"arraybuffer":o,s=t.timeout,u=void 0===s?1e4:s,c=t.data,l=void 0===c?{}:c,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return vT(this,e),new Promise((function(e,t){var r=new window.XMLHttpRequest,o=i.toUpperCase(),s=[];if(a&&(r.responseType=a),u&&(r.timeout=u),Object.keys(l).forEach((function(e){s.push("k=".concat(l[e]))})),r.onload=function(){200===r.status||206===r.status?e({context:f,res:r}):t(new Error({context:f,res:r,type:"error"}))},r.onerror=function(e){t(new Error({context:f,res:r,type:"error"}))},r.ontimeout=function(e){t(new Error({context:f,res:r,type:"error"}))},r.onabort=function(){t(new Error({context:f,res:r,type:"error"}))},"GET"===o)r.open(o,"".concat(n)),r.send();else{if("post"!==o)throw new Error("xhr ".concat(o," is not supported"));r.open(o,n),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(s.join("&"))}}))})),UT=function(){function e(){vT(this,e);var t,n,r=new Promise((function(e,r){t=e,n=r}));return r.resolve=function(e){t(e),r.state="fulfilled"},r.reject=function(e){n(e),r.state="rejected",r.isBreak="DESTROYED"===e},r.state="pending",r}return yT(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}();function HT(e,t){if(!e)return!1;if(e.classList)return Array.prototype.some.call(e.classList,(function(e){return e===t}));var n=e.className&&"object"===pT(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function jT(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((function(t){t&&e.classList.add(t)})):HT(e,t)||(e.className&&"object"===pT(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t))}function VT(e,t,n){var r=t.length;if(r<1)return-1;if(t[n=n<0?0:n>=r?r-1:n].start<=e&&e<t[n].end)return n;for(var i=t[n].end<=e?n+1:0;i<r;i++){if(t[i].start<=e&&e<t[i].end)return i;if(e>t[i].end&&i+1<r&&e<t[i+1].start)return-1;if(e>t[i].end&&i+1>=r)return-1}return-1}function zT(e,t,n){var r=t.length;if(r<1)return[];var i=[];if((n=n<0?0:n>=r?r-1:n)<r)for(var o=t[n].end<=e?n:0;o<r&&(t[o].start<=e&&e<t[o].end&&i.push(o),!(e<t[o].start));o++);return i}function XT(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}function KT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(e);return i.className=r,i.innerHTML=t,Object.keys(n).forEach((function(t){var r=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&i.setAttribute(r,o):i.setAttribute(r,o)})),i}function QT(e,t,n){if(n||(n=new UT),"json"===t){var r=NT.parseJson(e);n.resolve({list:r,format:"json"})}else"string"===t&&NT.parse(e,(function(e,t){if(t){var r=$T(2,t);n.reject(r,{format:e.format})}else if(e.format)n.resolve({styles:e.styles,list:e.list,format:e.format});else{var i=$T(3);n.reject(i)}}));return n}function WT(e,t){return t||(t=new UT),new FT({url:e.url,type:"text"}).then((function(n){QT(n.res.response,"string").then((function(n){t.resolve(dT(dT({},n),e))})).catch((function(e){t.reject(e)}))})).catch((function(n){var r=$T(1,dT({statusText:n.statusText,status:n.status,type:n.type,message:"http load error",url:e.src},e));t.reject(r)})),t}function qT(e,t){return!!(e.id&&t.id&&e.id===t.id||e.language&&t.language&&e.language===t.language)}function YT(e){return null!==e&&""!==e.trim()&&/^[a-zA-Z]+$/.test(e)}function JT(e){return!!/[\x21-\x2f\x3a-\x40\x5b-\x60\x7B-\x7F]/.test(e)}function ZT(e){return!!/[\u3002|\uff1f|\uff01|\uff0c|\u3001|\uff1b|\uff1a|\u201c|\u201d|\u2018|\u2019|\uff08|\uff09|\u300a|\u300b|\u3008|\u3009|\u3010|\u3011|\u300e|\u300f|\u300c|\u300d|\ufe43|\ufe44|\u3014|\u3015|\u2026|\u2014|\uff5e|\ufe4f|\uffe5]/.test(e)}var ek=function(){function e(){var t=this;vT(this,e),this.__handlers=[],window.ResizeObserver&&(this.observer=new window.ResizeObserver((function(e){t.__trigger(e)})))}return yT(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=this.__handlers,r=-1,i=0;i<n.length;i++)n[i]&&e===n[i].target&&(r=i);r>-1?this.__handlers[r].handler.push(t):this.__handlers.push({target:e,handler:[t]})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,r){e===n.target&&(t=r)})),this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e,t){for(var n=this.__handlers,r=0;r<n.length;r++)if(n[r]&&e===n[r].target){n[r].handler&&n[r].handler.forEach((function(n){try{n(e,t)}catch(e){console.error(e)}}));break}}},{key:"__trigger",value:function(e){var t=this;e.map((function(e){var n=e.contentRect;t.__runHandler(e.target,n)}))}}]),e}(),tk=null;function nk(e){var t=[];return e&&"String"===XT(e)?t.push({url:e,index:0,start:-1,end:-1}):"Array"===XT(e)&&e.forEach((function(e,n){t.push({url:e.url||e.src,index:n,start:e.start||-1,end:e.end||-1})})),t}var rk=!1,ik=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bT(e,t)}(n,e);var t=function(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=_T(e);if(t){var i=_T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kT(this,n)}}(n);function n(e){var r;return vT(this,n),mT(TT(r=t.call(this)),"_onPause",(function(){r.stopRender()})),mT(TT(r),"_onPlay",(function(){r._curRenderTask.length>0&&r.startRender(-1)})),mT(TT(r),"_onTimeupdate",(function(){if(r._isOpen){var e=r.player.video,t=e.videoWidth,n=e.videoHeight;!r._videoMeta.scale&&t&&n&&r._onResize(r.player.root);var i=r._getPlayerCurrentTime();Math.round(Math.abs(1e3*i-r._ctime))<200||(r._ctime=1e3*i,r.currentText&&r.currentText.list&&("live"===r.config.updateMode?r._liveUpdate(i):r._update(i)))}})),mT(TT(r),"_onResize",(function(e){var t=TT(r),n=t._videoMeta;if(t.config.domRender){if((!e||!(e instanceof window.Element))&&(e=r.player.root),r._iId&&(clearTimeout(r._iId),r._iId=null),!n.scale){if(!r.player.video)return;var i=r.player.video,o=i.videoWidth,a=i.videoHeight;if(!o||!a)return;n.videoWidth=o,n.videoHeight=a,n.scale=parseInt(a/o*100,10)}r.__startResize(e)}})),mT(TT(r),"_onCoreEvents",(function(e){try{switch(e.eventName){case"core.subtitlesegments":r._onSubtitleSegment(e.list||[]);break;case"core.subtitleplaylist":r._onSubtitlePlaylist(e.list||[]);break;case"core.seipayloadtime":r._onCoreSeiintime(e)}}catch(e){console.error(e)}})),mT(TT(r),"startRender",(function(e){if(e>0&&r._renderIntervalId&&(window.cancelAnimationFrame(r._renderIntervalId),r._renderIntervalId=-1),r.textTrack){var t=TT(r)._curRenderTask;r._lastTimeStamp=(new Date).getTime();var n=[];t.forEach((function(t,i){var o=t.lastTime,a=t.wordList,s=t.interval,u=t.dom,c=t.ids;if(e<0||r._lastTimeStamp<0||r._lastTimeStamp-o>=s){var l=a.shift();l&&u.appendData(l),t.lastTime=r._lastTimeStamp}a.length<1&&n.push({index:i,ids:c})})),r._log(">>>>_renderByWords emptyArr",n.length,t.length),n.forEach((function(e){t.splice(e.index,1),r._log(">>>_renderByWords remove emptyArr",e.index,t.length)})),t.length>0&&(r._renderIntervalId=window.requestAnimationFrame(r.startRender))}})),mT(TT(r),"destroy",(function(){r.detachPlayer(),r.removeAllListeners(),r.player=null,r.textTrack=null,r._curRenderTask=[],r.stopRender()})),rk=function(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e);return/(?:iPhone)/.test(e)&&!o||r||n||o}(),r.currentText=null,r.currentExtText=null,r.textTrack=[],r._cid=-1,r._gid=-1,r._cids=[],r._iId=null,r._iC=0,r.player=null,r.root=null,r.config={line:"double",bottom:0,mode:"stroke",defaultOpen:!1,baseSizeX:49,baseSizeY:28,minSize:16,minMobileSize:13,fitVideo:!0,offsetBottom:2,fontColor:"#fff",domRender:!0,updateMode:"vod",renderMode:"",debugger:!1},r._ctime=0,r._loadingTrack={},Object.keys(r.config).map((function(t){void 0!==e[t]&&null!==e[t]&&(r.config[t]=e[t])})),r._isOpen=r.config.defaultOpen||!1,r._videoMeta={scale:0,videoHeight:0,videoWidth:0,lwidth:0,lheight:0,vWidth:0,vHeight:0,vBottom:0,vLeft:0,marginBottom:0},e.subTitles&&"Array"===XT(e.subTitles)?(e.player&&r.attachPlayer(e.player),r.seiTime=0,r.lastSeiTime=0,r._curTexts=[],r._curRenderTask=[],r._renderIntervalId=-1,r._lastTimeStamp=-1,r.setSubTitles(e.subTitles,r.config.defaultOpen),r):kT(r)}return yT(n,[{key:"version",get:function(){return"3.0.16"}},{key:"setSubTitles",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._isOpen||n;r&&this.innerRoot&&this.switchOff(),this.currentText=null,this.textTrack=[],t.forEach((function(t){var n={};Object.keys(t).map((function(e){n[e]=t[e]})),n.url=nk(n.url),n.isDefault&&(e.currentText=n),e.textTrack.push(n)})),this._log("setSubTitles",i),i&&this.switch().catch((function(t){e._log("[switch]",t)})),this.currentText&&this._loadTrack(this.currentText).then((function(t){e.addStyles(t)})),this.emit("reset",{list:this.textTrack,isOpen:i})}},{key:"updateSubTitle",value:function(e){for(var t=this,n=-1,r=0;r<this.textTrack.length;r++)if(qT(e,this.textTrack[r])){n=r;break}if(this._log("updateSubTitle",n,e),n>-1){var i=qT(this.currentText,this.textTrack[n]);if(this._log("updateSubTitle","_isCurrent",i,"this.isOpen",this.isOpen,this.currentText),!i)return;var o=nk(e.url);this.isOpen?(o.forEach((function(e){t.textTrack[n].url.push(e)})),this._log("updateSubTitle _loadTrackUrls",this.textTrack[n]),this._loadTrackUrls(this.currentText,2)):this.textTrack[n].url=o}}},{key:"addStyles",value:function(e){var t=e.styles,n=e.format;t&&"vtt"===n&&(t.map((function(e){e.key||(e.key="xg-text-track-span")})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";e.map((function(e){n+=" ".concat(t," ").concat(e.key," {").concat(e.style,"}")}));var r=document.createElement("style"),i=document.head||document.getElementsByTagName("head")[0];if(r.type="text/css",r.id="ssss",r.styleSheet){var o=function(){try{r.styleSheet.cssText=n}catch{}};r.styleSheet.disabled?setTimeout(o,10):o()}else{var a=document.createTextNode(n);r.appendChild(a)}i.appendChild(r)}(t,"xg-text-track"))}},{key:"attachPlayer",value:function(e){var t=this;if(this._log("attachPlayer"),e){this.player&&this.detachPlayer();var n=this.config,r=n.fontColor,i=n.mode,o=n.fitVideo,a=n.domRender;this.player=e,a&&(this.root=document.createElement("xg-text-track"),this.root.className="xg-text-track",!this._isOpen&&jT(this.root,"text-track-hide"),!o&&jT(this.root,"text-track-no-fitvideo"),i&&jT(this.root,"text-track-".concat(i)),this.innerRoot=document.createElement("xg-text-track-inner"),this.root.appendChild(this.innerRoot),r&&(this.root.style.color=r),this.currentText&&["language","id","label"].map((function(e){t.root.setAttribute("data-".concat(e),t.currentText[e]||"")})),this.player.root.appendChild(this.root),function(e,t){tk||(tk=new ek),tk.addObserver(e,t)}(e.root,this._onResize)),this.player.on("destroy",this.destroy),this.player.on("timeupdate",this._onTimeupdate),this.player.on("pause",this._onPause),this.player.on("play",this._onPlay),this.player.on("core_event",this._onCoreEvents),this._isOpen&&this.switch().catch((function(e){t._log("[switch]",e)}))}}},{key:"detachPlayer",value:function(){var e=this.player,t=this.config;e&&(e.off("destroy",this.destroy),e.off("timeupdate",this._onTimeupdate),e.off("pause",this._onPause),e.off("play",this._onPlay),e.off("core_event",this._onCoreEvents),t.domRender&&(e.root&&(function(e,t){tk&&tk.unObserver(e,t)}(e.root,this._onResize),e.root.removeChild(this.root)),this.innerRoot=null,this.root=null),this.player=null)}},{key:"switch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""};return this._log("switch",t),this._loadingTrack=t,new Promise((function(n,r){if(t.id||t.language)if(e.currentText&&qT(t,e.currentText))e._loadingTrack={},e._updateCurrent(e.currentText),e.switchOn(),n($T(0));else{var i=null;e.__removeByTime(e._curTexts,0);for(var o=0;o<e.textTrack.length;o++)if(qT(t,e.textTrack[o])){i=e.textTrack[o];break}if(e._log("nextSubtitle",i),i)e._emitPlayerSwitch(e.currentText,i),i.list?(e._loadingTrack={},e._updateCurrent(i),e.switchOn(),n($T(0))):(e._log("this._loadTrack",i),e._updateCurrent(i),e._loadTrack(i).then((function(t){if(e.addStyles(t),e._loadingTrack.id===i.id||e._loadingTrack.language===t.language)e._loadingTrack={},e._updateCurrent(t),e.switchOn(),n($T(0));else{var o=$T(6,{message:"check _loadingTrack fail id: ".concat(e._loadingTrack.id,"  nextSubtitle:").concat(t.id)});r(o)}})).catch((function(e){r(e)})));else{var a=$T(4,new Error("The is no subtitle with id:[{".concat(t.id,"}] or language:[").concat(t.language,"]")));r(a)}}else{if(e.currentText){e._loadingTrack={},e._updateCurrent(e.currentText),e.switchOn();var s=$T(0,{message:"switch default subtitle success"});return void n(s)}var u=$T(5,{message:"no default subtitle"});r(u)}}))}},{key:"switchExt",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""};return new Promise((function(n,r){if(t.id||t.language){for(var i=null,o=0;o<e.textTrack.length;o++)if(qT(t,e.textTrack[o])){i=e.textTrack[o];break}i&&!qT(i,e.currentText)&&e._loadTrack(i).then((function(t){e.currentExtText=t,n($T(0))}))}else e.currentExtText=null,n($T(0))}))}},{key:"switchOn",value:function(){this._log("switchOn"),this._isOpen=!0,this.show(),this.emit("change",this.currentText)}},{key:"switchOff",value:function(){this._isOpen=!1,this.hide(),this.emit("off")}},{key:"isOpen",get:function(){return this._isOpen}},{key:"_log",value:function(){if(this.config.debugger){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["[xgSubtitle]"].concat(n))}}},{key:"_loadTrack",value:function(e){var t=this;this._log("_loadTrack",e.language,e);var n=new UT,r="",i="";if(e.json?(r="json",i=e.json):e.stringContent&&!e.url&&(r="string",i=e.stringContent),i)return QT(i,r).then((function(t){e.format=t.format,e.styles=t.styles,e.list=t.list,n.resolve(e)})).catch((function(e){n.reject(e)})),n;var o=e.url;return 0===o.length?(n.resolve(e),n):(WT(o.splice(0,1)[0]).then((function(r){e.format=r.format,e.styles=r.styles,e.list||(e.list=[]),t._pushList(e.list,r.list),o.length>1&&t._loadTrackUrls(e,2),n.resolve(e)})).catch((function(e){n.reject(e)})),n)}},{key:"_emitPlayerSwitch",value:function(e,t){e&&"live"===this.config.updateMode&&(e.list=[],e.url=[]);var n=dT({lang:t.language},t);this._log("emit subtile_switch ",t,n),this.player&&this.player.emit("switch_subtitle",n)}},{key:"_loadTrackUrls",value:function(e,t,n){var r=this,i=e.url.length,o=i>t?e.url.splice(0,t):e.url.splice(0,i),a=o.length;this._log("_loadTrackUrls",e.language,i,o.length,a),o.forEach((function(t,i){WT(dT(dT({},t),{},{index:i})).then((function(t){e.format=t.format,e.styles=t.format,e.list||(e.list=[]),r._pushList(e.list,t.list),a--})).catch((function(e){a--})).finally((function(t){0===a&&(n&&n.resolve(e),r._loadTrackUrls(e,2))}))}))}},{key:"_freshUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{url:""},n=-1;e.url.forEach((function(e,r){e.url===t.url&&(n=r)})),n>-1&&e.url.splice(n,1)}},{key:"_pushList",value:function(e,t){var n=t[0].start,r=t[t.length-1].end;if(0===e.length||n>=e[e.length-1].end)t.forEach((function(t){e.push(t)}));else{for(var i=-1,o=0;o<e.length;o++)if(e[o].start>r){i=o;break}i>-1&&t.forEach((function(t,n){e.splice(i+n,0,t)}))}return e}},{key:"_updateCurrent",value:function(e){var t=this;this.currentText=e,this.config.domRender&&this.root&&(["language","id","label"].map((function(e){t.root.setAttribute("data-".concat(e),t.currentText[e]||"")})),this.__remove(this._cids)),this._cids=[],this._gid=-1,this._cid=-1,this._curTexts=[];var n=this._getPlayerCurrentTime();n&&("live"===this.config.updateMode?this._liveUpdate(n):this._update(n))}},{key:"__loadAll",value:function(){var e=this;this.textTrack.forEach((function(t){e._loadTrack(t)}))}},{key:"getDelCid",value:function(e,t){for(var n=[],r=0;r<e.length;r++)t.includes(e[r])||n.push(e[r]);return n}},{key:"getNewCid",value:function(e,t){for(var n=[],r=0;r<t.length;r++)e.includes(t[r])||n.push(t[r]);return n}},{key:"_liveUpdate",value:function(e){var t=this;if(this.currentText&&this.currentText.list&&this.currentText.list.length){var n=[],r=VT(e,this.currentText.list,this._gid);if(r>-1&&(n=zT(e,this.currentText.list[r].list,this._cid)),this.__removeByTime(this._curTexts,e),this._log("_liveUpdate",e,r,n,this.currentText.list[0].list[0].start,this.currentText.list[0].list[0].end),n.length>0){var i=function(e,t,n){if(0===e.length||t<0||t>e.length-1)return[];var r=e[t].list;if(0===n.length)return[];var i=r.splice(n[0],n.length);return t>0&&e.splice(0,t),0===r.length&&e.splice(0,1),i}(this.currentText.list,r,n),o=this._curTexts.length,a=o>0?this._curTexts[o-1].index:0;i.forEach((function(e,n){e.index=n+a,t._curTexts.push(e)})),this.__render(i)}this.emit("update",this._curTexts)}}},{key:"_update",value:function(e){var t=this;if(this.currentText&&this.currentText.list&&this.currentText.list.length){var n=VT(e,this.currentText.list,this._gid),r=[];if(n>-1&&(r=zT(e,this.currentText.list[n].list,this._cid)),r.length<1)return this._cids.length>0&&this.config.domRender&&this.__remove(this._cids),void(this._cids=[]);if(this._cids!==r||n!==this._gid){this._gid=n,this._cid=r[0];var i=this.getDelCid(this._cids,r),o=this.getNewCid(this._cids,r);this._cids=r,this.config.domRender&&this.__remove(i);var a=[];o.map((function(e){var r=t.currentText.list[n].list[e];r.index=e,a.push(r)})),this.currentExtText&&o.map((function(e){var r=t.currentText.list[n].list[e];r.index=e,a.push(r)})),this._log("update",a,e),this.emit("update",a),this.__render(a,e)}}}},{key:"_getPlayerCurrentTime",value:function(){if(!this.player)return 0;var e=this.player.currentTime;return parseInt(1e3*e+1e3*this.seiTime-1e3*this.lastSeiTime,10)/1e3}},{key:"_onSubtitlePlaylist",value:function(e){this._log("_onSubtitlePlaylist",e);var t=e.map((function(e){return{label:e.name,language:e.lang,id:e.id,isDefault:e.default,url:[],mUrl:e.url}}));this.setSubTitles(t)}},{key:"_onSubtitleSegment",value:function(e){if(this._log("_onSubtitleSegment",e.length,e[0].lang,e[0].sn,e[e.length-1].sn,e[0].start,e[e.length-1].end),e&&0!==e.length){var t={language:e[0].lang,url:e.map((function(e){return{id:e.sn,url:e.url,duration:e.duration,start:e.start,end:e.end}}))};qT(t,this.currentText)&&this.updateSubTitle(t)}}},{key:"_onCoreSeiintime",value:function(e){try{var t=e.time/1e3;this._log("_onCoreSeiintime sei",t,this.seiTime,this.lastSeiTime),this.seiTime=t,this.lastSeiTime=this.player?this.player.currentTime:0}catch{}}},{key:"resize",value:function(e,t){var n=this,r=this.config,i=r.baseSizeX,o=r.baseSizeY,a=r.minMobileSize,s=r.minSize,u=r.fitVideo,c=r.offsetBottom,l=this._videoMeta.scale;this._videoMeta.lwidth=e,this._videoMeta.lheight=t;var f,h=0;t/e*100>=l?(h=parseInt(l*e,10)/100,f=e):(h=t,f=parseInt(t/l*100,10)),this._videoMeta.vWidth=f,this._videoMeta.vHeight=h;var d=0,p=0;l>120?(d=o,p=parseInt(d*h/1080,10)):(d=i,p=parseInt(d*f/1920,10));var v=rk?a:s,g={fontSize:p=p<v?v:p>d?d:p},y=parseInt((t-h)/2,10),m=parseInt((e-f)/2,10),_=parseInt(h*c,10)/100;this._videoMeta.vBottom=y,this._videoMeta.vLeft=m,this._videoMeta.marginBottom=_,u&&(g.bottom=y+_,g.left=g.right=m),Object.keys(g).map((function(e){n.root.style[e]="".concat(g[e],"px")})),this.emit("resize",{vLeft:m,vBottom:y,marginBottom:_,vWidth:f,vHeight:h,fontSize:p,scale:l})}},{key:"__startResize",value:function(e){var t=this,n=e.getBoundingClientRect(),r=this._videoMeta,i=n.width,o=n.height;if(this._iId&&(clearTimeout(this._iId),this._iId=null),i>0&&o>0&&(i!==r.lwidth||o!==r.lheight))this._iC=0,this.resize(i,o);else{if(this._iC>=5)return void(this._iC=0);this._iC++,this._iId=setTimeout((function(){t.__startResize(e)}),50)}}},{key:"__removeByTime",value:function(e,t){for(var n=[],r=0;r<e.length;r++)(!t||e[r].end<t)&&n.push(r);0!==n.length&&(e.splice(n[0],n.length),this.config.domRender&&this.__remove(n))}},{key:"__remove",value:function(e){var t=this;if(e&&!(e.length<1)){this._log(">>>>_renderByWords__remove",e);for(var n=this.innerRoot.children,r=[],i=0;i<n.length;i++){var o=Number(n[i].getAttribute("data-index"));e.includes(o)&&r.push(n[i])}r.map((function(e){t.innerRoot.removeChild(e)}))}}},{key:"__render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._log("__render",t.length,this.config.domRender);var n=this.config,r=n.renderMode,i=n.domRender;t.length>0&&i&&t.forEach((function(t){var n="text-track-".concat(e.config.line);t.text.forEach((function(i,o){o>0&&(n+=" text-track-deputy");var a={"data-start":t.start,"data-end":t.end,"data-index":t.index},s=KT("xg-text-track-span","",a,n);if(e.innerRoot.appendChild(s),"step"===r){var u=KT("xg-text-track-span","",a,"".concat(n," text-track-space"));e.innerRoot.appendChild(u),u.innerHTML=i,setTimeout((function(){e._renderByWords(s,o,t.start,t.end,i)}),600)}else s.innerHTML=i}))}))}},{key:"_renderByWords",value:function(e,t,n,r,i){var o=document.createTextNode("");e.appendChild(o);var a=function(e){for(var t=e.split(""),n=[],r=!1,i=0;i<t.length;i++){var o=t[i];if(YT(o))if(r){var a=n.length-1;n[a]="".concat(n[a]).concat(o)}else n.push(o),r=!0;else if(o.match(/^[ ]*$/)||JT(o)||ZT(o)){r=!1;var s=n.length-1;n[s]="".concat(n[s]).concat(o)}else r=!1,n.push(o)}return n}(i),s=this._getPlayerCurrentTime(),u=parseInt(1e3*(r-s),10);if(!(s>=r)){n>=s&&(s=n),u>300&&(u-=50);var c={dom:o,ids:t,wordList:a,interval:u/a.length,start:s,end:r,duration:u,lastTime:0};this._log(">>>>_renderByWords",u,c);for(var l=this._curRenderTask,f=-1,h=0;h<l.length;h++)if(l[h].ids===t){f=h;break}f>-1&&l.slice(f,1),l.push(c),this.startRender(-1)}}},{key:"stopRender",value:function(){this._renderIntervalId&&window.cancelAnimationFrame(this._renderIntervalId)}},{key:"show",value:function(){this.config.domRender&&function(e,t){e&&(e.classList?t.split(/\s+/g).forEach((function(t){e.classList.remove(t)})):HT(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===pT(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")})))}(this.root,"text-track-hide")}},{key:"hide",value:function(){this.config.domRender&&(jT(this.root,"text-track-hide"),this.innerRoot.innerHTML="")}},{key:"emit",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=ST(_T(n.prototype),"emit",this)).call.apply(r,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=ST(_T(n.prototype),"on",this)).call.apply(r,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=ST(_T(n.prototype),"once",this)).call.apply(r,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var r,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(r=ST(_T(n.prototype),"off",this)).call.apply(r,[this,e,t].concat(o))}},{key:"offAll",value:function(){ST(_T(n.prototype),"removeAllListeners",this).call(this)}},{key:"marginBottom",get:function(){var e=this._videoMeta,t=e.bottom,n=e.marginBottom;return this.config.fitVideo?t+n:n}}]),n}(i_),ok=function(e){h_(n,e);var t=y_(n);function n(){var e;u_(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return f_(v_(e=t.call.apply(t,[this].concat(i))),"_onOff",(function(){e.switchOffSubtitle()})),f_(v_(e),"_onChange",(function(t){var n=e.getSubTitleIndex(e.config.list,t);n<0||e.updateCurItem(n,t)})),f_(v_(e),"_onUpdate",(function(t){if(t&&!(t.length<1)){var n=t.map((function(e){return{startTime:e.start,endTime:e.end,text:e.text.length>0?e.text[0]:"",textTag:e.textTag}}));e._updateCallback&&e._updateCallback(n[0]),e.emit("subtitle_update",n[0])}})),f_(v_(e),"_onListReset",(function(t){e.updateList(t)})),e}return l_(n,[{key:"afterCreate",value:function(){this._initExtSubTitle(),this._updateCallback=null}},{key:"_initExtSubTitle",value:function(e){var t=this.config,n=t.list,r=t.style,i=t.isDefaultOpen,o=t.updateMode,a=t.renderMode;i&&e<0&&n.length>0&&(e=0,n[0].isDefault=!0);var s={subTitles:n,defaultOpen:i,updateMode:o,renderMode:a,debugger:this.config.debugger,domRender:!1};Object.keys(r).map((function(e){s[e]=r[e]}));var u=this.player.controls;!this.playerConfig.marginControls&&u&&u.root&&(this.on(V_,this.onPlayerFocus),this.on(z_,this.onPlayerBlur));var c=this.player;c._subTitles?c._subTitles._isOpen&&(e=this.getSubTitleIndex(this.config.list,c._subTitles.currentText)):(c._subTitles=new ik(s),c._subTitles.attachPlayer(this.player)),this.subTitles=c._subTitles,this.subTitles.on("off",this._onOff),this.subTitles.on("change",this._onChange),this.subTitles.on("update",this._onUpdate),this.subTitles.on("reset",this._onListReset),r.follow&&this.subTitles.root&&x_.addClass(this.subTitles.root,"follow-control")}},{key:"show",value:function(e){!this.config.list||this.config.list.length<1||x_.addClass(this.root,"show")}},{key:"getSubTitleIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{id:"",language:""},n=-1;return!t||!t.id&&!t.language||e.forEach((function(e,r){(function(e,t){var n=x_.isNotNull(e.id)&&x_.isNotNull(t.id)&&e.id===t.id,r=x_.isNotNull(e.language)&&x_.isNotNull(t.language)&&e.language===t.language;return n||r})(e,t)&&(n=r)})),n}},{key:"updateSubtitles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e&&("String"===x_.typeOf(e)&&(e=[{id:parseInt(100*Math.random()),isDefault:!0,url:e}]),t&&(this._updateCallback=t),this.updateList({list:e}),this.subTitles&&this.subTitles.setSubTitles(this.config.list,this.curIndex>-1,n))}},{key:"updateList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.list){var t=[];e.list.forEach((function(e){t.push(e)}));var n=function(e){var t=-1;return e.forEach((function(e,n){!e.id&&!e.language&&(e.id=n),e.id=String(e.id),!e.url&&(e.url=e.src),!e.text&&(e.text=e.label),!e.language&&(e.language=e.srclang),void 0===e.isDefault&&(e.isDefault=e.default||!1),(e.isDefault||e.default)&&(t<0?t=n:e.isDefault=e.default=!1)})),t}(t);e.isOpen?(this.curIndex=n,this.curItem=n>-1?t[n]:null):(this.curIndex=-1,this.curItem=null),this.config.list=t,0===t.length&&this.switchOffSubtitle()}}},{key:"switchSubTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",language:""};this.getSubTitleIndex(this.config.list,e)<0||this.subTitles.switch(e).catch((function(e){}))}},{key:"switchOffSubtitle",value:function(e){this.emit("subtitle_change",{off:!0,isListUpdate:!1,list:[]}),this.lastIndex=this.curIndex,this.curIndex=-1,this.curItem=null,this.switchIconState(!1)}},{key:"switchOnSubtitle",value:function(){var e=this.config.list[this.lastIndex>-1?this.lastIndex:0];this.switchIconState(!0),this.switchSubTitle(e)}},{key:"destroy",value:function(){this.subTitles&&(this.subTitles.destroy(),this.subTitles=null),m_(d_(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"texttrack"}},{key:"defaultConfig",get:function(){return{index:6,list:[],isDefaultOpen:!0,style:{follow:!0,mode:"stroke",followBottom:50,fitVideo:!0,offsetBottom:2,baseSizeX:49,baseSizeY:28,minSize:16,minMobileSize:13,line:"double",fontColor:"#fff"},closeText:{text:"不开启",iconText:"字幕"},needCloseText:!0,className:"xgplayer-texttrack",hidePortrait:!1,isShowIcon:!0,renderMode:"normal",mode:"external",debugger:!1}}}]),n}(Eb);function ak(){ak=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch{u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new R(i||[]);return r(a,"_invoke",{value:T(e,n,s)}),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(M([])));y&&y!==t&&n.call(y,o)&&(v=y);var m=p.prototype=h.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,o,a,s){var u=l(e[r],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,s)}))}s(u.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function T(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=p,r(m,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},_(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function sk(e){return sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sk(e)}function uk(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ck(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){uk(o,r,i,a,s,"next",e)}function s(e){uk(o,r,i,a,s,"throw",e)}a(void 0)}))}}function lk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_k(r.key),r)}}function hk(e,t,n){return t&&fk(e.prototype,t),n&&fk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dk(e,t,n){return(t=_k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pk(e){return(pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vk(e,t){return(vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}function yk(e,t,n){return(yk=gk()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&vk(i,n.prototype),i}).apply(null,arguments)}function mk(e){var t="function"==typeof Map?new Map:void 0;return mk=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return yk(e,arguments,pk(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),vk(n,e)},mk(e)}function _k(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function bk(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.used=!1,n.resolve=function(){return n.used=!0,e.apply(void 0,arguments)},n.reject=function(){return n.used=!0,t.apply(void 0,arguments)},n}function Tk(){try{return parseInt(performance.now(),10)}catch{return(new Date).getTime()}}var kk,Sk=function(){function e(){lk(this,e)}return hk(e,null,[{key:"start",value:function(e){return!e||!e.length||1===e.length&&e.end(0)-e.start(0)<1e-6||1===e.length&&e.start(0)<0?0:e.start(0)}},{key:"end",value:function(e){return!e||!e.length||1===e.length&&e.end(0)-e.start(0)<1e-6?0:e.end(e.length-1)}},{key:"get",value:function(e){if(e)try{return e.buffered}catch{}}},{key:"buffers",value:function(e,t){if(!e||!e.length)return[];for(var n=[],r=0,i=e.length;r<i;r++){var o=n.length;if(o&&t){var a=n[o-1],s=a[1];if(e.start(r)-s<=t){var u=e.end(r);u>s&&(a[1]=u)}else n.push([e.start(r),e.end(r)])}else n.push([e.start(r),e.end(r)])}return n}},{key:"totalLength",value:function(e){return e&&e.length?e.reduce((function(e,t){return e+(t[1]-t[0])}),0):0}},{key:"info",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!t||!t.length)return{start:0,end:0,buffers:[]};for(var i=0,o=0,a=0,s=0,u=0,c=0,l=0,f=e.buffers(t,r),h=0,d=f.length;h<d;h++){var p=f[h];if(n+r>=p[0]&&n<=p[1])i=p[0],o=p[1],a=h;else{if(n+r<p[0]){s=p[0],u=p[1];break}n+r>p[1]&&(c=p[0],l=p[1])}}return{start:i,end:o,index:a,buffers:f,nextStart:s,nextEnd:u,prevStart:c,prevEnd:l,currentTime:n,behind:n-i,remaining:o?o-n:0,length:e.totalLength&&e.totalLength(f)}}}]),e}(),wk={MANIFEST:"manifest",NETWORK:"network",NETWORK_TIMEOUT:"network_timeout",NETWORK_FORBIDDEN:"network_forbidden",NETWORK_NOTFOUND:"network_notfound",NETWROK_RANGE_NOT_SATISFIABLE:"network_range_not_satisfiable",DEMUX:"demux",REMUX:"remux",MEDIA:"media",DRM:"drm",OTHER:"other",RUNTIME:"runtime",SUB_TYPES:{FLV:"FLV",HLS:"HLS",MP4:"MP4",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",OPTION:"OPTION",DASH:"DASH",LICENSE:"LICENSE",CUSTOM_LICENSE:"CUSTOM_LICENSE",MSE_HIJACK:"MSE_HIJACK",EME_HIJACK:"EME_HIJACK",SIDX:"SIDX",NO_CANPLAY_ERROR:"NO_CANPLAY_ERROR",BUFFERBREAK_ERROR:"BUFFERBREAK_ERROR",WAITING_TIMEOUT_ERROR:"WAITING_TIMEOUT_ERROR",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_CODEC_NOT_SUPPORTED:"MEDIA_ERR_CODEC_NOT_SUPPORTED",MEDIA_ERR_URL_EMPTY:"MEDIA_ERR_URL_EMPTY"}},Rk=(dk(kk={},wk.MANIFEST,{HLS:1100,DASH:1200}),dk(kk,wk.NETWORK,2100),dk(kk,wk.NETWORK_TIMEOUT,2101),dk(kk,wk.NETWORK_FORBIDDEN,2103),dk(kk,wk.NETWORK_NOTFOUND,2104),dk(kk,wk.NETWROK_RANGE_NOT_SATISFIABLE,2116),dk(kk,wk.DEMUX,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),dk(kk,wk.REMUX,{FMP4:4100,MP4:4200}),dk(kk,wk.MEDIA,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,EME_HIJACK:5301}),dk(kk,wk.DRM,{LICENSE:7100,CUSTOM_LICENSE:7200}),dk(kk,wk.OTHER,8e3),dk(kk,wk.RUNTIME,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),kk),Mk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vk(e,t)}(n,e);var t=function(e){var t=gk();return function(){var n,r=pk(e);if(t){var i=pk(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}(n);function n(e,r,i,o,a){var s;return lk(this,n),(s=t.call(this,a||(null==i?void 0:i.message))).errorType=e===wk.NETWORK_TIMEOUT?wk.NETWORK:e,s.originError=i,s.ext=o,s.errorCode=Rk[e][r]||Rk[e],s.errorMessage=s.message,s.errorCode||(s.errorType=wk.OTHER,s.errorCode=Rk[s.errorType]),s}return hk(n,null,[{key:"create",value:function(e,t,r,i,o){return e instanceof n?e:(e instanceof Error&&(r=e,e=""),e||(e=wk.OTHER),new n(e,t,r,i,o))}},{key:"network",value:function(e){var t;return new n(null!=e&&e.isTimeout?wk.NETWORK_TIMEOUT:wk.NETWORK,null,e instanceof Error?e:null,{url:null==e?void 0:e.url,response:null==e?void 0:e.response,httpCode:null==e||null===(t=e.response)||void 0===t?void 0:t.status})}}]),n}(mk(Error)),xk=typeof window<"u",Pk={DEBUG:1,LOG:2,WARN:3,ERROR:4},Ek=["Boolean","Number","String","Undefined","Null","Date","Object"],Dk=function(){function e(t,n){lk(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),this.logCacheLevel=(null==n?void 0:n.logCacheLevel)||3,this.logMaxSize=(null==n?void 0:n.logMaxSize)||204800,this.logSize=0,this.logTextArray=[]}return hk(e,[{key:"debug",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[Pk.DEBUG].concat(r)),!e.disabled&&(t=console).debug.apply(t,[this._prefix,Ok()].concat(r))}},{key:"log",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[Pk.LOG].concat(r)),!e.disabled&&(t=console).log.apply(t,[this._prefix,Ok()].concat(r))}},{key:"warn",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[Pk.WARN].concat(r)),!e.disabled&&(t=console).warn.apply(t,[this._prefix,Ok()].concat(r))}},{key:"error",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[Pk.ERROR].concat(r)),!e.disabled&&(t=console).error.apply(t,[this._prefix,Ok()].concat(r))}},{key:"logCache",value:function(e){if(!(e<this.logCacheLevel)){var t="";try{for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=r.map((function(e){return Ak(e)}));t=this._prefix+Ok()+JSON.stringify(o)}catch{return}if(e>=this.logCacheLevel&&(this.logSize+=t.length,this.logTextArray.push(t)),this.logSize>this.logMaxSize){var a=this.logTextArray.shift();this.logSize-=a.length}}}},{key:"getLogCache",value:function(){var e=this.logTextArray.join("\n");return this.reset(),e}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var t;e.disabled||(console.group(this._prefix),(t=console).table.apply(t,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(e){this.logCacheLevel=e}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();function Ok(){return(new Date).toLocaleString()}function Ik(e){if("object"!==sk(e))return e;var t=Object.prototype.toString.call(e).slice(8,-1);switch(t){case"Array":case"Uint8Array":case"ArrayBuffer":return t+"["+e.length+"]";case"Object":return"{}";default:return t}}function Ak(e,t,n){n||(n=1),t||(t=2);var r={};if(!e||"object"!==sk(e))return e;var i=Object.prototype.toString.call(e).slice(8,-1);if(!Ek.includes(i))return i;if(!(n>t)){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n===t?r[o]=Ik(e[o]):"object"===sk(e[o])?r[o]=Ak(e[o],t,n+1):r[o]=e[o]);return r}}dk(Dk,"disabled",!0);var Lk=function(){try{return xk?window.MediaSource:null}catch{}}(),Ck="removeBuffer",Gk="updateDuration",Nk=function(){function e(t,n){var r=this;lk(this,e),dk(this,"media",null),dk(this,"mediaSource",null),dk(this,"_openPromise",bk()),dk(this,"_queue",Object.create(null)),dk(this,"_sourceBuffer",Object.create(null)),dk(this,"_mseFullFlag",{}),dk(this,"_st",0),dk(this,"_opst",0),dk(this,"_logger",null),dk(this,"_config",null),dk(this,"_url",null),dk(this,"_onSBUpdateEnd",(function(e){var t=r._queue[e];if(t){var n=t[0];if((null==n?void 0:n.opName)!==Gk&&t.shift(),n){var i=Tk()-r._opst;r._logger.debug("UpdateEnd",n.opName,i,n.context),n.promise.resolve({name:n.opName,context:n.context,costtime:i}),r._startQueue(e)}}})),dk(this,"_onSBUpdateError",(function(e,t){var n=r._queue[e];if(n){var i=n[0];i&&(r._logger.error("UpdateError",e,i.opName,i.context),i.promise.reject(new Mk(wk.MEDIA,wk.SUB_TYPES.MSE_APPEND_BUFFER,t)))}})),this._config=Object.assign(e.getDefaultConfig(),n),t&&this.bindMedia(t),this._logger=new Dk("MSE"),this._config.openLog&&Dk.enable()}return hk(e,[{key:"isOpened",get:function(){var e;return"open"===(null===(e=this.mediaSource)||void 0===e?void 0:e.readyState)}},{key:"url",get:function(){return this._url}},{key:"duration",get:function(){var e;return(null===(e=this.mediaSource)||void 0===e?void 0:e.duration)||-1}},{key:"isEnded",get:function(){return!!this.mediaSource&&"ended"===this.mediaSource.readyState}},{key:"isFull",value:function(t){return t?this._mseFullFlag[t]:this._mseFullFlag[e.VIDEO]}},{key:"updateDuration",value:function(e){var t=this,n=this.mediaSource&&this.mediaSource.duration>e;if(this.mediaSource&&this.mediaSource.duration>e){var r=0;if(Object.keys(this._sourceBuffer).forEach((function(e){try{r=Math.max(t.bufferEnd(e)||0,r)}catch{}})),e<r)return Promise.resolve()}return this._enqueueBlockingOp((function(){t.isEnded?t._logger.debug("[debug mse] setDuration ended"):t.mediaSource&&(t.mediaSource.duration=e,t._logger.debug("[debug mse] setDuration"))}),Gk,{isReduceDuration:n})}},{key:"open",value:function(){var e=this;if(this._openPromise.used&&!this.isOpened&&this.mediaSource){var t=this.mediaSource;t.addEventListener("sourceopen",(function n(){var r=Tk()-e._st;e._logger.debug("MSE OPEN",r),t.removeEventListener("sourceopen",n),e._openPromise.resolve({costtime:r})})),this._openPromise=bk()}return this._openPromise}},{key:"bindMedia",value:function(){var e=ck(ak().mark((function e(t){var n,r,i=this;return ak().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.mediaSource&&!this.media){e.next=3;break}return e.next=3,this.unbindMedia();case 3:if(t&&Lk){e.next=5;break}throw new Error("Param media or MediaSource does not exist");case 5:return this.media=t,n=this.mediaSource=new Lk,this._st=Tk(),r=function e(){var r=Tk()-i._st;i._logger.debug("MSE OPEN"),n.removeEventListener("sourceopen",e),URL.revokeObjectURL(t.src),i._openPromise.resolve({costtime:r})},n.addEventListener("sourceopen",r),this._url=URL.createObjectURL(n),t.src=this._url,e.abrupt("return",this._openPromise);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unbindMedia",value:function(){var e=ck(ak().mark((function e(){var t,n,r,i=this;return ak().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._openPromise.used||this._openPromise.resolve(),t=this.mediaSource){if(Object.keys(this._queue).forEach((function(e){var t=i._queue[e];t&&t.forEach((function(e){var t,n;return null===(t=e.promise)||void 0===t||null===(n=t.resolve)||void 0===n?void 0:n.call(t)}))})),n=!!this.media&&this.media.readyState>=1,r="open"===t.readyState,n&&r)try{t.endOfStream()}catch{}Object.keys(this._sourceBuffer).forEach((function(e){try{t.removeSourceBuffer(i._sourceBuffer[e])}catch{}}))}if(this.media){this.media.removeAttribute("src");try{this.media.load()}catch{}this.media=null}this.mediaSource=null,this._openPromise=bk(),this._queue=Object.create(null),this._sourceBuffer=Object.create(null);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createSource",value:function(e,t){if(!this._sourceBuffer[e]&&this.mediaSource){var n;try{n=this._sourceBuffer[e]=this.mediaSource.addSourceBuffer(t)}catch(e){throw new Mk(wk.MEDIA,wk.SUB_TYPES.MSE_ADD_SB,e)}n.mimeType=t,n.addEventListener("updateend",this._onSBUpdateEnd.bind(this,e)),n.addEventListener("error",this._onSBUpdateError.bind(this,e))}}},{key:"changeType",value:function(e,t){var n=this,r=this._sourceBuffer[e];return this.mediaSource&&r&&r.mimeType!==t?"function"!=typeof r.changeType?Promise.reject():this._enqueueOp(e,(function(){r.changeType(t),r.mimeType=t,n._onSBUpdateEnd(e)}),"changeType",{mimeType:t}):Promise.resolve()}},{key:"createOrChangeSource",value:function(e,t){return this.createSource(e,t),this.changeType(e,t)}},{key:"append",value:function(e,t,n){var r=this;return t&&t.byteLength&&this._sourceBuffer[e]?this._enqueueOp(e,(function(){var i;!r.mediaSource||r.media.error||(r._logger.debug("MSE APPEND START",n),r._opst=Tk(),null===(i=r._sourceBuffer[e])||void 0===i||i.appendBuffer(t))}),"appendBuffer",n):Promise.resolve()}},{key:"remove",value:function(e,t,n,r){var i=this,o=!1;return this._mseFullFlag[e]&&(o=!0),this._enqueueOp(e,(function(){if(i.mediaSource&&!i.media.error){var o=i._sourceBuffer[e];if(t>=n||!o)return void i._onSBUpdateEnd(e);i._opst=Tk(),i._logger.debug("MSE REMOVE START",e,t,n,r),o.remove(t,n)}}),Ck,r,o)}},{key:"clearBuffer",value:function(e,t){var n,r=this;return Object.keys(this._sourceBuffer).forEach((function(i){n=r._enqueueOp(i,(function(){if(r.mediaSource&&!r.media.error){var n=r._sourceBuffer[i];r._logger.debug("MSE clearBuffer START",i,e,t),n.remove(e,t)}}),Ck)})),n||Promise.resolve()}},{key:"clearAllBuffer",value:function(){var e,t=this;return Object.keys(this._sourceBuffer).forEach((function(n){e=t._enqueueOp(n,(function(){if(t.mediaSource&&!t.media.error){var e=t._sourceBuffer[n];t._logger.debug("MSE clearAllBuffer START",n),e.remove(0,Sk.end(Sk.get(e)))}}))})),e}},{key:"clearOpQueues",value:function(e,t){var n;this._logger.debug("MSE clearOpQueue START");var r=this._queue[e];if(t&&r)this._queue[e]=[];else if(r&&r[e]&&!(r.length<5)){var i=[];r.forEach((function(e){e.context&&e.context.isinit&&i.push(e)})),this._queue[e]=r.slice(0,2),i.length>0&&(n=this._queue[e]).push.apply(n,i)}}},{key:"endOfStream",value:function(e){var t=this;return this.mediaSource&&"open"===this.mediaSource.readyState?this._enqueueBlockingOp((function(){var n=t.mediaSource;!n||"open"!==n.readyState||(t._logger.debug("MSE endOfStream START"),e?n.endOfStream(e):n.endOfStream())}),"endOfStream"):Promise.resolve()}},{key:"setLiveSeekableRange",value:function(e,t){var n=this.mediaSource;e<0||t<e||null==n||!n.setLiveSeekableRange||"open"!==n.readyState||n.setLiveSeekableRange(e,t)}},{key:"getSourceBuffer",value:function(e){return this._sourceBuffer[e]}},{key:"buffered",value:function(e){return Sk.get(this._sourceBuffer[e])}},{key:"bufferStart",value:function(e){return Sk.start(this.buffered(e))}},{key:"bufferEnd",value:function(e){return Sk.end(this.buffered(e))}},{key:"_enqueueOp",value:function(e,t,n,r,i){var o=this;if(!this.mediaSource)return Promise.resolve();var a=this._queue[e]=this._queue[e]||[],s={exec:t,promise:bk(),opName:n,context:r};return i?(a.splice(0,0,s),this._mseFullFlag[e]=!1,this._startQueue(e)):a.push(s),this.isOpened||this.isEnded?1===a.length&&this._startQueue(e):this._openPromise.then((function(){1===a.length&&o._startQueue(e)})),s.promise}},{key:"_enqueueBlockingOp",value:function(){var e=ck(ak().mark((function e(t,n,r){var i,o,a=this;return ak().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mediaSource){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if((i=Object.keys(this._sourceBuffer)).length){e.next=5;break}return e.abrupt("return",t());case 5:return o=[],i.forEach((function(e){var t=a._queue[e],i=bk();o.push(i),t.push({exec:function(){i.resolve()},promise:i,opName:n,context:r}),1===t.length&&a._startQueue(e)})),e.abrupt("return",Promise.all(o).then((function(){try{return t()}finally{i.forEach((function(e){var t=a._queue[e],n=a._sourceBuffer[e];null==t||t.shift(),(!n||!n.updating)&&a._startQueue(e)}))}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_startQueue",value:function(e){var t=this._queue[e];if(t){var n=t[0];if(n&&!this._mseFullFlag[e])try{n.exec()}catch(r){r&&r.message&&r.message.indexOf("SourceBuffer is full")>=0?(this._mseFullFlag[e]=!0,this._logger.error("[MSE error],  context,",n.context," ,name,",n.opName,",err,SourceBuffer is full"),n.promise.reject(new Mk(wk.MEDIA,wk.SUB_TYPES.MSE_FULL,r))):(this._logger.error(r),n.promise.reject(new Mk(wk.MEDIA,wk.SUB_TYPES.MSE_OTHER,r)),t.shift(),this._startQueue(e))}}}},{key:"setTimeoffset",value:function(e,t,n){var r=this;return this._enqueueOp(e,(function(){t<0&&(t+=.001),r._sourceBuffer[e].timestampOffset=t,r._onSBUpdateEnd(e)}),"setTimeoffset",n)}},{key:"abort",value:function(e,t){var n=this;return this.isOpened?this._enqueueOp(e,(function(){n._sourceBuffer[e].abort(),n._onSBUpdateEnd(e)}),"abort",t):Promise.resolve()}}],[{key:"getDefaultConfig",value:function(){return{openLog:!1}}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(!Lk)return!1;try{return Lk.isTypeSupported(e)}catch(t){return this._logger.error(e,t),!1}}}]),e}();dk(Nk,"VIDEO","video"),dk(Nk,"AUDIO","audio");var Bk={MEDIA_EXPIRED:"MEDIA_EXPIRED",INIT_FAIL:"INIT_FAIL",PARSE_ERROR:"PARSE_ERROR",PLAYER_LOG:"PLAYER_LOG",BUFFERED_RESET:"BUFFERED_RESET"},$k="real_time_speed",Fk="is unsupported",Uk="buffer_control",Hk="cdn",jk="pcdn",Vk=new Map,zk=new Map,Xk=new Map,Kk="gop",Qk="size",Wk={BUFFER_CONTROLS:"buffer_control"},qk="timer_update",Yk="h264",Jk="h265",Zk="h266",eS=function(){function e(t){var n=this;c(this,e),h(this,"onTick",(function(e){n.cancelPending&&n.cancelPending(),n.alive&&(n.onTick_&&n.onTick_(),e&&e())})),this.onTick_=t,this.timeoutId=null,this.alive=!0}return f(e,[{key:"tickAfter",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cancelPending?this.cancelPending():this.cancelPending=function(){clearTimeout(t.timeoutId),t.timeoutId=null},this.alive=!0,this.timeoutId=setTimeout(this.onTick,1e3*e,n),this}},{key:"tickEvery",value:function(e){var t=this;this.tickAfter(e,(function(){t.tickEvery(e)}))}},{key:"stop",value:function(){this.alive=!1,this.cancelPending&&(this.cancelPending(),this.cancelPending=null)}}]),e}(),tS=function(e){d(n,e);var t=y(n);function n(e){var r;return c(this,n),(r=t.call(this)).masterTimer=null,r.onVisibleChange=function(){var e=r.masterTimer||r.workerTimer;r.stop(),e&&r.start()},r.options=e,document.addEventListener("visibilitychange",r.onVisibleChange),r}return f(n,[{key:"start",value:function(){var e=this,t=this.options.frequency;this.stop(),this.masterTimer=new eS((function(){try{(e.masterTimer||e.workerTimer)&&e.emit(qk)}catch{}})),this.masterTimer.tickEvery(t)}},{key:"stop",value:function(){this.workerTimer&&(this.workerTimer=null),this.masterTimer&&(this.masterTimer.stop(),this.masterTimer=null)}},{key:"destroy",value:function(){this.removeAllListeners(),document.removeEventListener("visibilitychange",this.onVisibleChange),this.stop()}}]),n}(r_.EventEmitter);const nS="3.1.15";var rS,iS,oS,aS={416:Rk[wk.NETWROK_RANGE_NOT_SATISFIABLE],403:Rk[wk.NETWORK_FORBIDDEN],404:Rk[wk.NETWORK_NOTFOUND],timeout:Rk[wk.NETWORK_TIMEOUT],"4xx":"".concat(Rk[wk.NETWORK],"4XX"),"5xx":"".concat(Rk[wk.NETWORK],"5XX"),networkError:Rk[wk.NETWORK],contentError:"".concat(Rk[wk.NETWORK],"contentError"),mse:Rk[wk.MEDIA][wk.SUB_TYPES.MSE_OTHER],mseOpen:Rk[wk.MEDIA][wk.SUB_TYPES.MSE_ADD_SB],mseAppend:Rk[wk.MEDIA][wk.SUB_TYPES.MSE_APPEND_BUFFER],mse_hijack:Rk[wk.MEDIA][wk.SUB_TYPES.MSE_HIJACK],eme_hijack:Rk[wk.MEDIA][wk.SUB_TYPES.EME_HIJACK],metaError:Rk[wk.DEMUX][wk.SUB_TYPES.MP4],muxError:Rk[wk.REMUX][wk.SUB_TYPES.FMP4],other:Rk[wk.OTHER],waitTimeout:Rk[wk.RUNTIME][wk.SUB_TYPES.BUFFERBREAK_ERROR],waitTimeoutWithHidden:Rk[wk.RUNTIME][wk.SUB_TYPES.WAITING_TIMEOUT_ERROR],drm:Rk[wk.DRM][wk.SUB_TYPES.LICENSE]},sS=wk,uS=f((function e(t,n,r){c(this,e);var i=0,o=0;r&&r.range&&r.range.length>1&&(i=r.range[0],o=r.range[1]);var a=function(e){return aS[e]||e}(n);return{errorCode:a,errorType:t,errorMessage:(null==r?void 0:r.httpText)||(null==r?void 0:r.message),url:null==r?void 0:r.url,httpCode:n,version:nS,rangeStart:i,rangeEnd:o,ext:r,mediaError:{code:a,message:(null==r?void 0:r.httpText)||(null==r?void 0:r.message)}}})),cS=f((function e(t,n,r){return c(this,e),{errorCode:n,errorType:t,version:nS,errorMessage:r.msg,ext:r,mediaError:{code:n,message:r.msg}}})),lS={exports:{}},fS=typeof ArrayBuffer<"u"&&typeof DataView<"u",hS=fS,dS=D,pS=x,vS=le,gS=he,yS=lt,mS=Hi,_S=Ge,bS=gn,TS=br,kS=sc,SS=ge,wS=Xs,RS=bu,MS=wt,xS=vt,PS=Yn.enforce,ES=Yn.get,DS=pS.Int8Array,OS=DS&&DS.prototype,IS=pS.Uint8ClampedArray,AS=IS&&IS.prototype,LS=DS&&wS(DS),CS=OS&&wS(OS),GS=Object.prototype,NS=pS.TypeError,BS=MS("toStringTag"),$S=xS("TYPED_ARRAY_TAG"),FS="TypedArrayConstructor",US=hS&&!!RS&&"Opera"!==mS(pS.opera),HS=!1,jS={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},VS={BigInt64Array:8,BigUint64Array:8},zS=function(e){var t=wS(e);if(gS(t)){var n=ES(t);return n&&yS(n,FS)?n[FS]:zS(t)}},XS=function(e){if(!gS(e))return!1;var t=mS(e);return yS(jS,t)||yS(VS,t)};for(rS in jS)(oS=(iS=pS[rS])&&iS.prototype)?PS(oS)[FS]=iS:US=!1;for(rS in VS)(oS=(iS=pS[rS])&&iS.prototype)&&(PS(oS)[FS]=iS);if((!US||!vS(LS)||LS===Function.prototype)&&(LS=function(){throw new NS("Incorrect invocation")},US))for(rS in jS)pS[rS]&&RS(pS[rS],LS);if((!US||!CS||CS===GS)&&(CS=LS.prototype,US))for(rS in jS)pS[rS]&&RS(pS[rS].prototype,CS);if(US&&wS(AS)!==CS&&RS(AS,CS),dS&&!yS(CS,BS))for(rS in HS=!0,kS(CS,BS,{configurable:!0,get:function(){return gS(this)?this[$S]:void 0}}),jS)pS[rS]&&bS(pS[rS],$S,rS);var KS={NATIVE_ARRAY_BUFFER_VIEWS:US,TYPED_ARRAY_TAG:HS&&$S,aTypedArray:function(e){if(XS(e))return e;throw new NS("Target is not a typed array")},aTypedArrayConstructor:function(e){if(vS(e)&&(!RS||SS(LS,e)))return e;throw new NS(_S(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(dS){if(n)for(var i in jS){var o=pS[i];if(o&&yS(o.prototype,e))try{delete o.prototype[e]}catch{try{o.prototype[e]=t}catch{}}}(!CS[e]||n)&&TS(CS,e,n?t:US&&OS[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(dS){if(RS){if(n)for(r in jS)if((i=pS[r])&&yS(i,e))try{delete i[e]}catch{}if(LS[e]&&!n)return;try{return TS(LS,e,n?t:US&&LS[e]||t)}catch{}}for(r in jS)(i=pS[r])&&(!i[e]||n)&&TS(i,e,t)}},getTypedArrayConstructor:zS,isView:function(e){if(!gS(e))return!1;var t=mS(e);return"DataView"===t||yS(jS,t)||yS(VS,t)},isTypedArray:XS,TypedArray:LS,TypedArrayPrototype:CS},QS=x,WS=E,qS=Lh,YS=KS.NATIVE_ARRAY_BUFFER_VIEWS,JS=QS.ArrayBuffer,ZS=QS.Int8Array,ew=!YS||!WS((function(){ZS(1)}))||!WS((function(){new ZS(-1)}))||!qS((function(e){new ZS,new ZS(null),new ZS(1.5),new ZS(e)}),!0)||WS((function(){return 1!==new ZS(new JS(2),1,void 0).length})),tw=Mr,nw=Ar,rw=RangeError,iw=function(e){if(void 0===e)return 0;var t=tw(e),n=nw(t);if(t!==n)throw new rw("Wrong length or index");return n},ow=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1},aw=ow,sw=Math.abs,uw=2220446049250313e-31,cw=1/uw,lw=Math.fround||function(e){return function(e,t,n,r){var i=+e,o=sw(i),a=aw(i);if(o<r)return a*function(e){return e+cw-cw}(o/r/t)*r*t;var s=(1+t/uw)*o,u=s-(s-o);return u>n||u!=u?a*(1/0):a*u}(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)},fw=Array,hw=Math.abs,dw=Math.pow,pw=Math.floor,vw=Math.log,gw=Math.LN2,yw={pack:function(e,t,n){var r,i,o,a=fw(n),s=8*n-t-1,u=(1<<s)-1,c=u>>1,l=23===t?dw(2,-24)-dw(2,-77):0,f=e<0||0===e&&1/e<0?1:0,h=0;for((e=hw(e))!=e||e===1/0?(i=e!=e?1:0,r=u):(r=pw(vw(e)/gw),e*(o=dw(2,-r))<1&&(r--,o*=2),(e+=r+c>=1?l/o:l*dw(2,1-c))*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(e*o-1)*dw(2,t),r+=c):(i=e*dw(2,c-1)*dw(2,t),r=0));t>=8;)a[h++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)a[h++]=255&r,r/=256,s-=8;return a[--h]|=128*f,a},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,u=r-1,c=e[u--],l=127&c;for(c>>=7;s>0;)l=256*l+e[u--],s-=8;for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;)n=256*n+e[u--],s-=8;if(0===l)l=1-a;else{if(l===o)return n?NaN:c?-1/0:1/0;n+=dw(2,t),l-=a}return(c?-1:1)*n*dw(2,l-t)}},mw=st,_w=Dr,bw=Cr,Tw=function(e){for(var t=mw(this),n=bw(t),r=arguments.length,i=_w(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:_w(o,n);a>i;)t[i++]=e;return t},kw=x,Sw=X,ww=D,Rw=fS,Mw=gn,xw=sc,Pw=Cy,Ew=E,Dw=vc,Ow=Mr,Iw=Ar,Aw=iw,Lw=lw,Cw=yw,Gw=Xs,Nw=bu,Bw=Tw,$w=ha,Fw=Dp,Uw=si,Hw=ou,jw=Yn,Vw=Sn.PROPER,zw=Sn.CONFIGURABLE,Xw="ArrayBuffer",Kw="DataView",Qw="prototype",Ww="Wrong index",qw=jw.getterFor(Xw),Yw=jw.getterFor(Kw),Jw=jw.set,Zw=kw[Xw],eR=Zw,tR=eR&&eR[Qw],nR=kw[Kw],rR=nR&&nR[Qw],iR=Object.prototype,oR=kw.Array,aR=kw.RangeError,sR=Sw(Bw),uR=Sw([].reverse),cR=Cw.pack,lR=Cw.unpack,fR=function(e){return[255&e]},hR=function(e){return[255&e,e>>8&255]},dR=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},pR=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},vR=function(e){return cR(Lw(e),23,4)},gR=function(e){return cR(e,52,8)},yR=function(e,t,n){xw(e[Qw],t,{configurable:!0,get:function(){return n(this)[t]}})},mR=function(e,t,n,r){var i=Yw(e),o=Aw(n),a=!!r;if(o+t>i.byteLength)throw new aR(Ww);var s=i.bytes,u=o+i.byteOffset,c=$w(s,u,u+t);return a?c:uR(c)},_R=function(e,t,n,r,i,o){var a=Yw(e),s=Aw(n),u=r(+i),c=!!o;if(s+t>a.byteLength)throw new aR(Ww);for(var l=a.bytes,f=s+a.byteOffset,h=0;h<t;h++)l[f+h]=u[c?h:t-h-1]};if(Rw){var bR=Vw&&Zw.name!==Xw;Ew((function(){Zw(1)}))&&Ew((function(){new Zw(-1)}))&&!Ew((function(){return new Zw,new Zw(1.5),new Zw(NaN),1!==Zw.length||bR&&!zw}))?bR&&zw&&Mw(Zw,"name",Xw):(eR=function(e){return Dw(this,tR),Fw(new Zw(Aw(e)),this,eR)},eR[Qw]=tR,tR.constructor=eR,Uw(eR,Zw)),Nw&&Gw(rR)!==iR&&Nw(rR,iR);var TR=new nR(new eR(2)),kR=Sw(rR.setInt8);TR.setInt8(0,2147483648),TR.setInt8(1,2147483649),(TR.getInt8(0)||!TR.getInt8(1))&&Pw(rR,{setInt8:function(e,t){kR(this,e,t<<24>>24)},setUint8:function(e,t){kR(this,e,t<<24>>24)}},{unsafe:!0})}else eR=function(e){Dw(this,tR);var t=Aw(e);Jw(this,{type:Xw,bytes:sR(oR(t),0),byteLength:t}),ww||(this.byteLength=t,this.detached=!1)},tR=eR[Qw],nR=function(e,t,n){Dw(this,rR),Dw(e,tR);var r=qw(e),i=r.byteLength,o=Ow(t);if(o<0||o>i)throw new aR("Wrong offset");if(o+(n=void 0===n?i-o:Iw(n))>i)throw new aR("Wrong length");Jw(this,{type:Kw,buffer:e,byteLength:n,byteOffset:o,bytes:r.bytes}),ww||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},rR=nR[Qw],ww&&(yR(eR,"byteLength",qw),yR(nR,"buffer",Yw),yR(nR,"byteLength",Yw),yR(nR,"byteOffset",Yw)),Pw(rR,{getInt8:function(e){return mR(this,1,e)[0]<<24>>24},getUint8:function(e){return mR(this,1,e)[0]},getInt16:function(e){var t=mR(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=mR(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return pR(mR(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return pR(mR(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return lR(mR(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return lR(mR(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){_R(this,1,e,fR,t)},setUint8:function(e,t){_R(this,1,e,fR,t)},setInt16:function(e,t){_R(this,2,e,hR,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){_R(this,2,e,hR,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){_R(this,4,e,dR,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){_R(this,4,e,dR,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){_R(this,4,e,vR,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){_R(this,8,e,gR,t,arguments.length>2&&arguments[2])}});Hw(eR,Xw),Hw(nR,Kw);var SR={ArrayBuffer:eR,DataView:nR},wR=he,RR=Math.floor,MR=Number.isInteger||function(e){return!wR(e)&&isFinite(e)&&RR(e)===e},xR=Mr,PR=RangeError,ER=RangeError,DR=function(e,t){var n=function(e){var t=xR(e);if(t<0)throw new PR("The argument can't be less than 0");return t}(e);if(n%t)throw new ER("Wrong offset");return n},OR=Math.round,IR=Hi,AR=Ot,LR=TypeError,CR=function(e){var t=AR(e,"number");if("number"==typeof t)throw new LR("Can't convert number to bigint");return BigInt(t)},GR=Oi,NR=L,BR=_c,$R=st,FR=Cr,UR=hh,HR=oh,jR=Zf,VR=KS.aTypedArrayConstructor,zR=CR,XR=Cr,KR=function(e,t,n){for(var r=0,i=arguments.length>2?n:XR(t),o=new e(i);i>r;)o[r]=t[r++];return o},QR=wi,WR=x,qR=L,YR=D,JR=ew,ZR=KS,eM=SR,tM=vc,nM=U,rM=gn,iM=MR,oM=Ar,aM=iw,sM=DR,uM=Lt,cM=lt,lM=Hi,fM=he,hM=Le,dM=xs,pM=ge,vM=bu,gM=Tr.f,yM=function(e){var t,n,r,i,o,a,s,u,c=BR(this),l=$R(e),f=arguments.length,h=f>1?arguments[1]:void 0,d=void 0!==h,p=HR(l);if(p&&!jR(p))for(u=(s=UR(l,p)).next,l=[];!(a=NR(u,s)).done;)l.push(a.value);for(d&&f>2&&(h=GR(h,arguments[2])),n=FR(l),i=function(e){var t=IR(e);return"BigInt64Array"===t||"BigUint64Array"===t}(r=new(VR(c))(n)),t=0;n>t;t++)o=d?h(l[t],t):l[t],r[t]=i?zR(o):+o;return r},mM=go.forEach,_M=hc,bM=sc,TM=qt,kM=P,SM=KR,wM=Dp,RM=Yn.get,MM=Yn.set,xM=Yn.enforce,PM=TM.f,EM=kM.f,DM=WR.RangeError,OM=eM.ArrayBuffer,IM=OM.prototype,AM=eM.DataView,LM=ZR.NATIVE_ARRAY_BUFFER_VIEWS,CM=ZR.TYPED_ARRAY_TAG,GM=ZR.TypedArray,NM=ZR.TypedArrayPrototype,BM=ZR.isTypedArray,$M="BYTES_PER_ELEMENT",FM="Wrong length",UM=function(e,t){bM(e,t,{configurable:!0,get:function(){return RM(this)[t]}})},HM=function(e){var t;return pM(IM,e)||"ArrayBuffer"===(t=lM(e))||"SharedArrayBuffer"===t},jM=function(e,t){return BM(e)&&!hM(t)&&t in e&&iM(+t)&&t>=0},VM=function(e,t){return t=uM(t),jM(e,t)?nM(2,e[t]):EM(e,t)},zM=function(e,t,n){return t=uM(t),!(jM(e,t)&&fM(n)&&cM(n,"value"))||cM(n,"get")||cM(n,"set")||n.configurable||cM(n,"writable")&&!n.writable||cM(n,"enumerable")&&!n.enumerable?PM(e,t,n):(e[t]=n.value,e)};YR?(LM||(kM.f=VM,TM.f=zM,UM(NM,"buffer"),UM(NM,"byteOffset"),UM(NM,"byteLength"),UM(NM,"length")),QR({target:"Object",stat:!0,forced:!LM},{getOwnPropertyDescriptor:VM,defineProperty:zM}),lS.exports=function(e,t,n){var r=e.match(/\d+/)[0]/8,i=e+(n?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=WR[i],u=s,c=u&&u.prototype,l={},f=function(e,t){PM(e,t,{get:function(){return function(e,t){var n=RM(e);return n.view[o](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var o=RM(e);o.view[a](t*r+o.byteOffset,n?function(e){var t=OR(e);return t<0?0:t>255?255:255&t}(i):i,!0)}(this,t,e)},enumerable:!0})};LM?JR&&(u=t((function(e,t,n,i){return tM(e,c),wM(fM(t)?HM(t)?void 0!==i?new s(t,sM(n,r),i):void 0!==n?new s(t,sM(n,r)):new s(t):BM(t)?SM(u,t):qR(yM,u,t):new s(aM(t)),e,u)})),vM&&vM(u,GM),mM(gM(s),(function(e){e in u||rM(u,e,s[e])})),u.prototype=c):(u=t((function(e,t,n,i){tM(e,c);var o,a,s,l=0,h=0;if(fM(t)){if(!HM(t))return BM(t)?SM(u,t):qR(yM,u,t);o=t,h=sM(n,r);var d=t.byteLength;if(void 0===i){if(d%r)throw new DM(FM);if((a=d-h)<0)throw new DM(FM)}else if((a=oM(i)*r)+h>d)throw new DM(FM);s=a/r}else s=aM(t),o=new OM(a=s*r);for(MM(e,{buffer:o,byteOffset:h,byteLength:a,length:s,view:new AM(o)});l<s;)f(e,l++)})),vM&&vM(u,GM),c=u.prototype=dM(NM)),c.constructor!==u&&rM(c,"constructor",u),xM(c).TypedArrayConstructor=u,CM&&rM(c,CM,i);var h=u!==s;l[i]=u,QR({global:!0,constructor:!0,forced:h,sham:!LM},l),$M in u||rM(u,$M,r),$M in c||rM(c,$M,r),_M(i)}):lS.exports=function(){},(0,lS.exports)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var XM=st,KM=Dr,QM=Cr,WM=Bv,qM=Math.min,YM=[].copyWithin||function(e,t){var n=XM(this),r=QM(n),i=KM(e,r),o=KM(t,r),a=arguments.length>2?arguments[2]:void 0,s=qM((void 0===a?r:KM(a,r))-o,r-i),u=1;for(o<i&&i<o+s&&(u=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:WM(n,i),i+=u,o+=u;return n},JM=KS,ZM=X(YM),ex=JM.aTypedArray;(0,JM.exportTypedArrayMethod)("copyWithin",(function(e,t){return ZM(ex(this),e,t,arguments.length>2?arguments[2]:void 0)}));var tx=go.every,nx=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("every",(function(e){return tx(nx(this),e,arguments.length>1?arguments[1]:void 0)}));var rx=Tw,ix=CR,ox=Hi,ax=L,sx=E,ux=KS.aTypedArray,cx=KS.exportTypedArrayMethod,lx=X("".slice),fx=sx((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e}));cx("fill",(function(e){var t=arguments.length;ux(this);var n="Big"===lx(ox(this),0,3)?ix(e):+e;return ax(rx,this,n,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),fx);var hx=wc,dx=KS.aTypedArrayConstructor,px=KS.getTypedArrayConstructor,vx=function(e){return dx(hx(e,px(e)))},gx=KR,yx=vx,mx=go.filter,_x=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("filter",(function(e){return function(e,t){return gx(yx(e),t)}(this,mx(_x(this),e,arguments.length>1?arguments[1]:void 0))}));var bx=go.find,Tx=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("find",(function(e){return bx(Tx(this),e,arguments.length>1?arguments[1]:void 0)}));var kx=go.findIndex,Sx=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("findIndex",(function(e){return kx(Sx(this),e,arguments.length>1?arguments[1]:void 0)}));var wx=go.forEach,Rx=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("forEach",(function(e){wx(Rx(this),e,arguments.length>1?arguments[1]:void 0)}));var Mx=Fr.includes,xx=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("includes",(function(e){return Mx(xx(this),e,arguments.length>1?arguments[1]:void 0)}));var Px=Fr.indexOf,Ex=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("indexOf",(function(e){return Px(Ex(this),e,arguments.length>1?arguments[1]:void 0)}));var Dx=x,Ox=E,Ix=X,Ax=KS,Lx=Ju,Cx=wt("iterator"),Gx=Dx.Uint8Array,Nx=Ix(Lx.values),Bx=Ix(Lx.keys),$x=Ix(Lx.entries),Fx=Ax.aTypedArray,Ux=Ax.exportTypedArrayMethod,Hx=Gx&&Gx.prototype,jx=!Ox((function(){Hx[Cx].call([1])})),Vx=!!Hx&&Hx.values&&Hx[Cx]===Hx.values&&"values"===Hx.values.name,zx=function(){return Nx(Fx(this))};Ux("entries",(function(){return $x(Fx(this))}),jx),Ux("keys",(function(){return Bx(Fx(this))}),jx),Ux("values",zx,jx||!Vx,{name:"values"}),Ux(Cx,zx,jx||!Vx,{name:"values"});var Xx=KS.aTypedArray,Kx=KS.exportTypedArrayMethod,Qx=X([].join);Kx("join",(function(e){return Qx(Xx(this),e)}));var Wx=Ec,qx=ue,Yx=Mr,Jx=Cr,Zx=Wa,eP=Math.min,tP=[].lastIndexOf,nP=!!tP&&1/[1].lastIndexOf(1,-0)<0,rP=Zx("lastIndexOf"),iP=nP||!rP?function(e){if(nP)return Wx(tP,this,arguments)||0;var t=qx(this),n=Jx(t);if(0===n)return-1;var r=n-1;for(arguments.length>1&&(r=eP(r,Yx(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:tP,oP=Ec,aP=iP,sP=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return oP(aP,sP(this),t>1?[e,arguments[1]]:[e])}));var uP=go.map,cP=vx,lP=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("map",(function(e){return uP(lP(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(cP(e))(t)}))}));var fP=Fe,hP=st,dP=te,pP=Cr,vP=TypeError,gP="Reduce of empty array with no initial value",yP=function(e){return function(t,n,r,i){var o=hP(t),a=dP(o),s=pP(o);if(fP(n),0===s&&r<2)throw new vP(gP);var u=e?s-1:0,c=e?-1:1;if(r<2)for(;;){if(u in a){i=a[u],u+=c;break}if(u+=c,e?u<0:s<=u)throw new vP(gP)}for(;e?u>=0:s>u;u+=c)u in a&&(i=n(i,a[u],u,o));return i}},mP={left:yP(!1),right:yP(!0)},_P=mP.left,bP=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return _P(bP(this),e,t,t>1?arguments[1]:void 0)}));var TP=mP.right,kP=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return TP(kP(this),e,t,t>1?arguments[1]:void 0)}));var SP=KS.aTypedArray,wP=KS.exportTypedArrayMethod,RP=Math.floor;wP("reverse",(function(){for(var e,t=this,n=SP(t).length,r=RP(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t}));var MP=x,xP=L,PP=KS,EP=Cr,DP=DR,OP=st,IP=E,AP=MP.RangeError,LP=MP.Int8Array,CP=LP&&LP.prototype,GP=CP&&CP.set,NP=PP.aTypedArray,BP=PP.exportTypedArrayMethod,$P=!IP((function(){var e=new Uint8ClampedArray(2);return xP(GP,e,{length:1,0:3},1),3!==e[1]})),FP=$P&&PP.NATIVE_ARRAY_BUFFER_VIEWS&&IP((function(){var e=new LP(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));BP("set",(function(e){NP(this);var t=DP(arguments.length>1?arguments[1]:void 0,1),n=OP(e);if($P)return xP(GP,this,n,t);var r=this.length,i=EP(n),o=0;if(i+t>r)throw new AP("Wrong length");for(;o<i;)this[t+o]=n[o++]}),!$P||FP);var UP=vx,HP=ha,jP=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("slice",(function(e,t){for(var n=HP(jP(this),e,t),r=UP(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a}),E((function(){new Int8Array(1).slice()})));var VP=go.some,zP=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("some",(function(e){return VP(zP(this),e,arguments.length>1?arguments[1]:void 0)}));var XP=xi,KP=E,QP=Fe,WP=Hv,qP=Vv,YP=zv,JP=we,ZP=Kv,eE=KS.aTypedArray,tE=KS.exportTypedArrayMethod,nE=x.Uint16Array,rE=nE&&XP(nE.prototype.sort),iE=!(!rE||KP((function(){rE(new nE(2),null)}))&&KP((function(){rE(new nE(2),{})}))),oE=!!rE&&!KP((function(){if(JP)return JP<74;if(qP)return qP<67;if(YP)return!0;if(ZP)return ZP<602;var e,t,n=new nE(516),r=Array(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(rE(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));tE("sort",(function(e){return void 0!==e&&QP(e),oE?rE(this,e):WP(eE(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!oE||iE);var aE=Ar,sE=Dr,uE=vx,cE=KS.aTypedArray;(0,KS.exportTypedArrayMethod)("subarray",(function(e,t){var n=cE(this),r=n.length,i=sE(e,r);return new(uE(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,aE((void 0===t?r:sE(t,r))-i))}));var lE=Ec,fE=KS,hE=E,dE=ha,pE=x.Int8Array,vE=fE.aTypedArray,gE=fE.exportTypedArrayMethod,yE=[].toLocaleString,mE=!!pE&&hE((function(){yE.call(new pE(1))}));gE("toLocaleString",(function(){return lE(yE,mE?dE(vE(this)):vE(this),dE(arguments))}),hE((function(){return[1,2].toLocaleString()!==new pE([1,2]).toLocaleString()}))||!hE((function(){pE.prototype.toLocaleString.call([1,2])})));var _E=KS.exportTypedArrayMethod,bE=E,TE=X,kE=x.Uint8Array,SE=kE&&kE.prototype||{},wE=[].toString,RE=TE([].join);bE((function(){wE.call({})}))&&(wE=function(){return RE(this)});var ME=SE.toString!==wE;function xE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xE(Object(n),!0).forEach((function(t){LE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EE(){EE=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch{u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new R(i||[]);return r(a,"_invoke",{value:T(e,n,s)}),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(M([])));y&&y!==t&&n.call(y,o)&&(v=y);var m=p.prototype=h.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,o,a,s){var u=l(e[r],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,s)}))}s(u.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function T(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=p,r(m,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},_(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function DE(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function OE(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){DE(o,r,i,a,s,"next",e)}function s(e){DE(o,r,i,a,s,"throw",e)}a(void 0)}))}}function IE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AE(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HE(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LE(e,t,n){return(t=HE(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CE(e){return(CE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GE(e,t){return(GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0!==t)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||FE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $E(e){return function(e){if(Array.isArray(e))return UE(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||FE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FE(e,t){if(e){if("string"==typeof e)return UE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UE(e,t)}}function UE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function HE(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function jE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jE(Object(n),!0).forEach((function(t){JE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zE(){zE=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch{u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new R(i||[]);return r(a,"_invoke",{value:T(e,n,s)}),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(M([])));y&&y!==t&&n.call(y,o)&&(v=y);var m=p.prototype=h.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,o,a,s){var u=l(e[r],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return i("throw",e,a,s)}))}s(u.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function T(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function M(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=p,r(m,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},_(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(m),u(m,s,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function XE(e){return XE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XE(e)}function KE(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function QE(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){KE(o,r,i,a,s,"next",e)}function s(e){KE(o,r,i,a,s,"throw",e)}a(void 0)}))}}function WE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cD(r.key),r)}}function YE(e,t,n){return t&&qE(e.prototype,t),n&&qE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function JE(e,t,n){return(t=cD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZE(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tD(e,t)}function eD(e){return(eD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tD(e,t){return(tD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}function rD(e,t,n){return(rD=nD()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&tD(i,n.prototype),i}).apply(null,arguments)}function iD(e){var t="function"==typeof Map?new Map:void 0;return iD=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return rD(e,arguments,eD(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),tD(n,e)},iD(e)}function oD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aD(e){var t=nD();return function(){var n,r=eD(e);if(t){var i=eD(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oD(e)}(this,n)}}function sD(){return sD=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eD(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},sD.apply(this,arguments)}function uD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cD(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}_E("toString",wE,ME);var lD={DEBUG:1,LOG:2,WARN:3,ERROR:4},fD=["Boolean","Number","String","Undefined","Null","Date","Object"],hD=function(){function e(t,n){WE(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),this.logCacheLevel=(null==n?void 0:n.logCacheLevel)||3,this.logMaxSize=(null==n?void 0:n.logMaxSize)||204800,this.logSize=0,this.logTextArray=[]}return YE(e,[{key:"debug",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[lD.DEBUG].concat(r)),!e.disabled&&(t=console).debug.apply(t,[this._prefix,dD()].concat(r))}},{key:"log",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[lD.LOG].concat(r)),!e.disabled&&(t=console).log.apply(t,[this._prefix,dD()].concat(r))}},{key:"warn",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[lD.WARN].concat(r)),!e.disabled&&(t=console).warn.apply(t,[this._prefix,dD()].concat(r))}},{key:"error",value:function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[lD.ERROR].concat(r)),!e.disabled&&(t=console).error.apply(t,[this._prefix,dD()].concat(r))}},{key:"logCache",value:function(e){if(!(e<this.logCacheLevel)){var t="";try{for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=r.map((function(e){return vD(e)}));t=this._prefix+dD()+JSON.stringify(o)}catch{return}if(e>=this.logCacheLevel&&(this.logSize+=t.length,this.logTextArray.push(t)),this.logSize>this.logMaxSize){var a=this.logTextArray.shift();this.logSize-=a.length}}}},{key:"getLogCache",value:function(){var e=this.logTextArray.join("\n");return this.reset(),e}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var t;e.disabled||(console.group(this._prefix),(t=console).table.apply(t,arguments),console.groupEnd())}},{key:"setLogLevel",value:function(e){this.logCacheLevel=e}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();function dD(){return(new Date).toLocaleString()}function pD(e){if("object"!==XE(e))return e;var t=Object.prototype.toString.call(e).slice(8,-1);switch(t){case"Array":case"Uint8Array":case"ArrayBuffer":return t+"["+e.length+"]";case"Object":return"{}";default:return t}}function vD(e,t,n){n||(n=1),t||(t=2);var r={};if(!e||"object"!==XE(e))return e;var i=Object.prototype.toString.call(e).slice(8,-1);if(!fD.includes(i))return i;if(!(n>t)){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n===t?r[o]=pD(e[o]):"object"===XE(e[o])?r[o]=vD(e[o],t,n+1):r[o]=e[o]);return r}}JE(hD,"disabled",!0);var gD="fetch",yD="arraybuffer",mD="text",_D=function(e){ZE(n,e);var t=aD(n);function n(e,r,i,o){var a;return WE(this,n),JE(oD(a=t.call(this,o)),"retryCount",0),JE(oD(a),"isTimeout",!1),JE(oD(a),"loaderType",gD),JE(oD(a),"startTime",0),JE(oD(a),"endTime",0),JE(oD(a),"options",{}),a.url=e,a.request=r,a.response=i,a}return YE(n)}(iD(Error)),bD=Object.prototype.toString;function TD(e){if("[object Object]"!==bD.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function kD(e){if(e&&null!==e[0]&&void 0!==e[0]&&(0!==e[0]||null!==e[1]&&void 0!==e[1])){var t="bytes="+e[0]+"-";return e[1]&&(t+=e[1]),t}}function SD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wD(e,t){if(e){if(!t)return e;var n,r=Object.keys(t).map((function(e){if(null!=(n=t[e]))return Array.isArray(n)?e+="[]":n=[n],n.map((function(t){return function(e){return"[object Date]"===bD.call(e)}(t)?t=t.toISOString():function(e){return null!==e&&"object"===XE(e)}(t)&&(t=JSON.stringify(t)),"".concat(SD(e),"=").concat(SD(t))})).join("&")})).filter(Boolean).join("&");if(r){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}}function RD(e,t,n,r,i,o,a,s,u,c,l){return i=null!=i?parseFloat(i):null,r=parseInt(r||"0",10),Number.isNaN(r)&&(r=0),{data:e,done:t,options:{range:u,vid:c,index:s,contentLength:r,age:i,startTime:o,firstByteTime:a,endTime:Date.now(),priOptions:l},response:n}}function MD(e,t){return Math.round(8*e*1e3/t/1024)}var xD="real_time_speed",PD=2097152,ED=function(e){ZE(r,e);var t,n=aD(r);function r(){var e;return WE(this,r),JE(oD(e=n.call(this)),"_abortController",null),JE(oD(e),"_timeoutTimer",null),JE(oD(e),"_reader",null),JE(oD(e),"_response",null),JE(oD(e),"_aborted",!1),JE(oD(e),"_index",-1),JE(oD(e),"_range",null),JE(oD(e),"_receivedLength",0),JE(oD(e),"_running",!1),JE(oD(e),"_logger",null),JE(oD(e),"_vid",""),JE(oD(e),"_onProcessMinLen",0),JE(oD(e),"_onCancel",null),JE(oD(e),"_priOptions",null),e}return YE(r,[{key:"load",value:function(e){var t,n=this,r=e.url,i=e.vid,o=e.timeout,a=e.responseType,s=e.onProgress,u=e.index,c=e.onTimeout,l=e.onCancel,f=e.range,h=e.transformResponse,d=e.request,p=e.params,v=e.logger,g=e.method,y=e.headers,m=e.body,_=e.mode,b=e.credentials,T=e.cache,k=e.redirect,S=e.referrer,w=e.referrerPolicy,R=e.onProcessMinLen,M=e.priOptions;this._logger=v,this._aborted=!1,this._onProcessMinLen=R,this._onCancel=l,this._abortController=typeof AbortController<"u"&&new AbortController,this._running=!0,this._index=u,this._range=f||[0,0],this._vid=i||r,this._priOptions=M||{};var x={method:g,headers:y,body:m,mode:_,credentials:b,cache:T,redirect:k,referrer:S,referrerPolicy:w,signal:null===(t=this._abortController)||void 0===t?void 0:t.signal},P=!1;clearTimeout(this._timeoutTimer),r=wD(r,p);var E=kD(f);E&&(y=d?d.headers:x.headers=x.headers||(Headers?new Headers:{}),Headers&&y instanceof Headers?y.append("Range",E):y.Range=E),o&&(this._timeoutTimer=setTimeout((function(){if(P=!0,n.cancel(),c){var e=new _D(r,x,null,"timeout");e.isTimeout=!0,c(e,{index:n._index,range:n._range,vid:n._vid,priOptions:n._priOptions})}}),o));var D=Date.now();return this._logger.debug("[fetch load start], index,",u,",range,",f),new Promise((function(e,t){fetch(d||r,d?void 0:x).then(function(){var i=QE(zE().mark((function i(o){var c,l,d,p;return zE().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(clearTimeout(n._timeoutTimer),n._response=o,!n._aborted&&n._running){i.next=4;break}return i.abrupt("return");case 4:if(h&&(o=h(o,r)||o),o.ok){i.next=7;break}throw new _D(r,x,o,"bad network response");case 7:if(c=Date.now(),a!==mD){i.next=15;break}return i.next=11,o.text();case 11:l=i.sent,n._running=!1,i.next=37;break;case 15:if("json"!==a){i.next=22;break}return i.next=18,o.json();case 18:l=i.sent,n._running=!1,i.next=37;break;case 22:if(!s){i.next=29;break}return n.resolve=e,n.reject=t,n._loadChunk(o,s,D,c),i.abrupt("return");case 29:return i.next=31,o.arrayBuffer();case 31:l=i.sent,l=new Uint8Array(l),n._running=!1,d=Date.now()-D,p=MD(l.byteLength,d),n.emit(xD,{speed:p,len:l.byteLength,time:d,vid:n._vid,index:n._index,range:n._range,priOptions:n._priOptions});case 37:n._logger.debug("[fetch load end], index,",u,",range,",f),e(RD(l,!0,o,o.headers.get("Content-Length"),o.headers.get("age"),D,c,u,f,n._vid,n._priOptions));case 39:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()).catch((function(e){var i;clearTimeout(n._timeoutTimer),n._running=!1,(!n._aborted||P)&&((e=e instanceof _D?e:new _D(r,x,null,null===(i=e)||void 0===i?void 0:i.message)).startTime=D,e.endTime=Date.now(),e.isTimeout=P,e.options={index:n._index,range:n._range,vid:n._vid,priOptions:n._priOptions},t(e))}))}))}},{key:"cancel",value:(t=QE(zE().mark((function e(){return zE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._aborted){e.next=2;break}return e.abrupt("return");case 2:if(this._aborted=!0,this._running=!1,!this._response){e.next=14;break}if(e.prev=5,!this._reader){e.next=9;break}return e.next=9,this._reader.cancel();case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(5);case 13:this._response=this._reader=null;case 14:if(this._abortController){try{this._abortController.abort()}catch{}this._abortController=null}this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions});case 16:case"end":return e.stop()}}),e,this,[[5,11]])}))),function(){return t.apply(this,arguments)})},{key:"_loadChunk",value:function(e,t,n,r){var i=this;if(!e.body||!e.body.getReader){this._running=!1;var o=new _D(e.url,"",e,"onProgress of bad response.body.getReader");return o.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},void this.reject(o)}this._onProcessMinLen>0&&(this._cache=new Uint8Array(PD),this._writeIdx=0);var a,s,u,c=this._reader=e.body.getReader(),l=function(){var o=QE(zE().mark((function o(){var f,h,d,p,v,g,y,m;return zE().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=Date.now(),o.prev=1,o.next=4,c.read();case 4:a=o.sent,u=Date.now(),o.next=13;break;case 8:return o.prev=8,o.t0=o.catch(1),u=Date.now(),i._aborted||(i._running=!1,o.t0.options={index:i._index,range:i._range,vid:i._vid,priOptions:i._priOptions},i.reject(o.t0)),o.abrupt("return");case 13:if(h=(null===(f=i._range)||void 0===f?void 0:f.length)>0?i._range[0]:0,d=h+i._receivedLength,!i._aborted){o.next=19;break}return i._running=!1,t(void 0,!1,{range:[d,d],vid:i._vid,index:i._index,startTime:s,endTime:u,st:n,firstByteTime:r,priOptions:i._priOptions},e),o.abrupt("return");case 19:p=a.value?a.value.byteLength:0,i._receivedLength+=p,i._logger.debug("【fetchLoader,onProgress call】,task,",i._range,", start,",d,", end,",h+i._receivedLength,", done,",a.done),i._onProcessMinLen>0?i._writeIdx+p>=i._onProcessMinLen||a.done?((v=new Uint8Array(i._writeIdx+p)).set(i._cache.slice(0,i._writeIdx),0),p>0&&v.set(a.value,i._writeIdx),i._writeIdx=0,i._logger.debug("【fetchLoader,onProgress enough】,done,",a.done,",len,",v.byteLength,", writeIdx,",i._writeIdx)):p>0&&i._writeIdx+p<PD?(i._cache.set(a.value,i._writeIdx),i._writeIdx+=p,i._logger.debug("【fetchLoader,onProgress cache】,len,",p,", writeIdx,",i._writeIdx)):p>0&&(g=new Uint8Array(i._writeIdx+p+2048),i._logger.debug("【fetchLoader,onProgress extra start】,size,",i._writeIdx+p+2048,", datalen,",p,", writeIdx,",i._writeIdx),g.set(i._cache.slice(0,i._writeIdx),0),p>0&&g.set(a.value,i._writeIdx),i._writeIdx+=p,delete i._cache,i._cache=g,i._logger.debug("【fetchLoader,onProgress extra end】,len,",p,", writeIdx,",i._writeIdx)):v=a.value,(v&&v.byteLength>0||a.done)&&t(v,a.done,{range:[i._range[0]+i._receivedLength-(v?v.byteLength:0),i._range[0]+i._receivedLength],vid:i._vid,index:i._index,startTime:s,endTime:u,st:n,firstByteTime:r,priOptions:i._priOptions},e),a.done?(y=Date.now()-n,m=MD(i._receivedLength,y),i.emit(xD,{speed:m,len:i._receivedLength,time:y,vid:i._vid,index:i._index,range:i._range,priOptions:i._priOptions}),i._running=!1,i._logger.debug("[fetchLoader onProgress end],task,",i._range,",done,",a.done),i.resolve(RD(a,!0,e,e.headers.get("Content-Length"),e.headers.get("age"),n,r,i._index,i._range,i._vid,i._priOptions))):l();case 25:case"end":return o.stop()}}),o,null,[[1,8]])})));return function(){return o.apply(this,arguments)}}();l()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}}],[{key:"isSupported",value:function(){return typeof fetch<"u"}}]),r}(i_),DD=function(e){ZE(n,e);var t=aD(n);function n(){var e;return WE(this,n),JE(oD(e=t.call(this)),"_xhr",null),JE(oD(e),"_aborted",!1),JE(oD(e),"_timeoutTimer",null),JE(oD(e),"_range",null),JE(oD(e),"_receivedLength",0),JE(oD(e),"_url",null),JE(oD(e),"_onProgress",null),JE(oD(e),"_index",-1),JE(oD(e),"_headers",null),JE(oD(e),"_currentChunkSizeKB",384),JE(oD(e),"_timeout",null),JE(oD(e),"_xhr",null),JE(oD(e),"_withCredentials",null),JE(oD(e),"_startTime",-1),JE(oD(e),"_loadCompleteResolve",null),JE(oD(e),"_loadCompleteReject",null),JE(oD(e),"_runing",!1),JE(oD(e),"_logger",!1),JE(oD(e),"_vid",""),JE(oD(e),"_responseType",void 0),JE(oD(e),"_credentials",void 0),JE(oD(e),"_method",void 0),JE(oD(e),"_transformResponse",void 0),JE(oD(e),"_firstRtt",void 0),JE(oD(e),"_onCancel",null),JE(oD(e),"_priOptions",null),e}return YE(n,[{key:"load",value:function(e){var t=this;clearTimeout(this._timeoutTimer),this._logger=e.logger,this._range=e.range,this._onProgress=e.onProgress,this._index=e.index,this._headers=e.headers,this._withCredentials="include"===e.credentials||"same-origin"===e.credentials,this._body=e.body||null,e.method&&(this._method=e.method),this._timeout=e.timeout||null,this._runing=!0,this._vid=e.vid||e.url,this._responseType=e.responseType,this._firstRtt=-1,this._onTimeout=e.onTimeout,this._onCancel=e.onCancel,this._request=e.request,this._priOptions=e.priOptions||{},this._logger.debug("【xhrLoader task】, range",this._range),this._url=wD(e.url,e.params);var n=Date.now();return new Promise((function(e,n){t._loadCompleteResolve=e,t._loadCompleteReject=n,t._startLoad()})).catch((function(e){if(clearTimeout(t._timeoutTimer),t._runing=!1,!t._aborted)throw(e=e instanceof _D?e:new _D(t._url,t._request)).startTime=n,e.endTime=Date.now(),e.options={index:t._index,vid:t._vid,priOptions:t._priOptions},e}))}},{key:"_startLoad",value:function(){var e=null;if(this._responseType===yD&&this._range&&this._range.length>1)if(this._onProgress){this._firstRtt=-1;var t=1024*this._currentChunkSizeKB,n=this._range[0]+this._receivedLength,r=this._range[1];t<this._range[1]-n&&(r=n+t),e=[n,r],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",e)}else e=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",e);this._internalOpen(e)}},{key:"_internalOpen",value:function(e){var t=this;try{this._startTime=Date.now();var n=this._xhr=new XMLHttpRequest;n.open(this._method||"GET",this._url,!0),n.responseType=this._responseType,this._timeout&&(n.timeout=this._timeout),n.withCredentials=this._withCredentials,n.onload=this._onLoad.bind(this),n.onreadystatechange=this._onReadyStatechange.bind(this),n.onerror=function(e){var n,r,i;t._running=!1;var o=new _D(t._url,t._request,null==e||null===(n=e.currentTarget)||void 0===n?void 0:n.response,"xhr.onerror.status:"+(null==e||null===(r=e.currentTarget)||void 0===r?void 0:r.status)+",statusText,"+(null==e||null===(i=e.currentTarget)||void 0===i?void 0:i.statusText));o.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(o)},n.ontimeout=function(e){t.cancel();var n=new _D(t._url,t._request,{status:408},"timeout");t._onTimeout&&(n.isTimeout=!0,t._onTimeout(n,{index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions})),n.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(n)};var r=this._headers||{},i=kD(e);i&&(r.Range=i),r&&Object.keys(r).forEach((function(e){n.setRequestHeader(e,r[e])})),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",e),n.send(this._body)}catch(t){t.options={index:this._index,range:e,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(t)}}},{key:"_onReadyStatechange",value:function(e){2===e.target.readyState&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(e){var t,n=e.target.status;if(n<200||n>299){var r=new _D(this._url,null,VE(VE({},e.target.response),{},{status:n}),"bad response,status:"+n);return r.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(r)}var i,o=null,a=!1,s=(null===(t=this._range)||void 0===t?void 0:t.length)>0?this._range[0]:0;if(this._responseType===yD){var u,c=new Uint8Array(e.target.response);if(i=s+this._receivedLength,c&&c.byteLength>0){this._receivedLength+=c.byteLength;var l=Date.now()-this._startTime,f=MD(this._receivedLength,l);this.emit(xD,{speed:f,len:this._receivedLength,time:l,vid:this._vid,index:this._index,range:[i,s+this._receivedLength],priOptions:this._priOptions})}o=c,a=!((null===(u=this._range)||void 0===u?void 0:u.length)>1&&this._range[1]&&this._receivedLength<this._range[1]-this._range[0]),this._logger.debug("[xhr load done->], tast :",this._range,", start",i,"end ",s+this._receivedLength,",dataLen,",c?c.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",a)}else a=!0,o=e.target.response;var h={ok:n>=200&&n<300,status:n,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(h=this._transformResponse(h,this._url)||h),this._onProgress&&this._onProgress(o,a,{index:this._index,vid:this._vid,range:[i,s+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},h),a?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve(RD(this._onProgress?null:o,a,h,h.headers["content-length"],h.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted&&(this._aborted=!0,this._runing=!1,sD(eD(n.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr))return this._xhr.abort()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}},{key:"_getHeaders",value:function(e){var t,n={},r=function(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return uD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uD(e,t)}}(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{!a&&null!=n.return&&n.return()}finally{if(s)throw o}}}}(e.getAllResponseHeaders().trim().split("\r\n"));try{for(r.s();!(t=r.n()).done;){var i=t.value.split(": ");n[i[0].toLowerCase()]=i.slice(1).join(": ")}}catch(e){r.e(e)}finally{r.f()}return n}}],[{key:"isSupported",value:function(){return typeof XMLHttpRequest<"u"}}]),n}(i_),OD=["retry","retryDelay","onRetryError","transformError"],ID=function(){function e(t,n){WE(this,e),this.promise=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.used=!1,n.resolve=function(){return n.used=!0,e.apply(void 0,arguments)},n.reject=function(){return n.used=!0,t.apply(void 0,arguments)},n}(),this.alive=!!n.onProgress,!n.logger&&(n.logger=new hD("Loader")),this._loaderType=t,this._loader=t===gD&&window.fetch?new ED:new DD,this._config=n,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=n.retryCheckFunc,this._logger=n.logger}return YE(e,[{key:"exec",value:function(){var e=this,t=this._config,n=t.retry,r=t.retryDelay,i=t.onRetryError,o=t.transformError,a=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,OD),s=function(){var t=QE(zE().mark((function t(){var u,c,l;return zE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._loader.load(a);case 3:u=t.sent,e.promise.resolve(u),t.next=27;break;case 7:if(t.prev=7,t.t0=t.catch(0),e._loader.running=!1,e._logger.debug("[task request catch err]",t.t0),!e._canceled){t.next=13;break}return t.abrupt("return");case 13:if(t.t0.loaderType=e._loaderType,t.t0.retryCount=e._retryCount,c=t.t0,o&&(c=o(c)||c),i&&e._retryCount>0&&i(c,e._retryCount,{index:a.index,vid:a.vid,range:a.range,priOptions:a.priOptions}),e._retryCount++,l=!0,e._retryCheckFunc&&(l=e._retryCheckFunc(t.t0)),!(l&&e._retryCount<=n)){t.next=26;break}return clearTimeout(e._retryTimer),e._logger.debug("[task request setTimeout],retry",e._retryCount,",retry range,",a.range),e._retryTimer=setTimeout(s,r),t.abrupt("return");case 26:e.promise.reject(c);case 27:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return s(),this.promise}},{key:"cancel",value:function(){var e=QE(zE().mark((function e(){return zE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,e.abrupt("return",this._loader.cancel());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),e}();function AD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if((t=t.filter(Boolean)).length<2)return t[0];var r=new Uint8Array(t.reduce((function(e,t){return e+t.byteLength}),0)),i=0;return t.forEach((function(e){r.set(e,i),i+=e.byteLength})),r}function LD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))}var CD=function(e){ZE(r,e);var t,n=aD(r);function r(e){var t;return WE(this,r),JE(oD(t=n.call(this,e)),"type",gD),JE(oD(t),"_queue",[]),JE(oD(t),"_alive",[]),JE(oD(t),"_currentTask",null),JE(oD(t),"_finnalUrl",""),JE(oD(t),"_config",void 0),t._config=function(e){return VE({loaderType:gD,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:mD,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},e)}(e),("xhr"===t._config.loaderType||!ED.isSupported())&&(t.type="xhr"),t.log=e.logger,t}return YE(r,[{key:"isFetch",value:function(){return this.type===gD}},{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"!=typeof e&&e?n=e:n.url=e||n.url||this._config.url,(n=Object.assign({},this._config,n)).params&&(n.params=Object.assign({},n.params)),n.headers&&TD(n.headers)&&(n.headers=Object.assign({},n.headers)),n.body&&TD(n.body)&&(n.body=Object.assign({},n.body)),n.transformRequest&&(n=n.transformRequest(n)||n),n.logger=this.log;var r=new ID(this.type,n);return r.loader.on(xD,(function(e){t.emit(xD,e)})),this._queue.push(r),1===this._queue.length&&(!this._currentTask||!this._currentTask.running)&&this._processTask(),r.promise}},{key:"cancel",value:(t=QE(zE().mark((function e(){var t;return zE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._queue.map((function(e){return e.cancel()})).concat(this._alive.map((function(e){return e.cancel()}))),this._currentTask&&t.push(this._currentTask.cancel()),this._queue=[],this._alive=[],e.next=6,Promise.all(t);case 6:return e.next=8,LD();case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_processTask",value:function(){var e=this;if(this._currentTask=this._queue.shift(),this._currentTask){this._currentTask.alive&&this._alive.push(this._currentTask);var t=this._currentTask.exec().catch((function(e){}));t&&"function"==typeof t.finally&&t.finally((function(){var t,n;null!==(t=e._currentTask)&&void 0!==t&&t.alive&&(null===(n=e._alive)||void 0===n?void 0:n.length)>0&&(e._alive=e._alive.filter((function(t){return t&&t!==e._currentTask}))),e._processTask()}))}}}],[{key:"isFetchSupport",value:function(){return ED.isSupported()}}]),r}(i_);function GD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ND(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jD(r.key),r)}}function BD(e,t,n){return t&&ND(e.prototype,t),n&&ND(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $D(e,t,n){return(t=jD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FD(e){return function(e){if(Array.isArray(e))return HD(e)}(e)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||UD(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UD(e,t){if(e){if("string"==typeof e)return HD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HD(e,t)}}function HD(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jD(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var VD="video",zD="hevc",XD="vvcC",KD=function(){function e(){GD(this,e),$D(this,"id",1),$D(this,"type",VD),$D(this,"codecType","avc"),$D(this,"pid",-1),$D(this,"hvcC",void 0),$D(this,"codec",""),$D(this,"timescale",0),$D(this,"formatTimescale",0),$D(this,"sequenceNumber",0),$D(this,"baseMediaDecodeTime",0),$D(this,"baseDts",0),$D(this,"duration",0),$D(this,"warnings",[]),$D(this,"samples",[]),$D(this,"pps",[]),$D(this,"sps",[]),$D(this,"vps",[]),$D(this,"fpsNum",0),$D(this,"fpsDen",0),$D(this,"sarRatio",[]),$D(this,"width",0),$D(this,"height",0),$D(this,"nalUnitSize",4),$D(this,"present",!1),$D(this,"isVideoEncryption",!1),$D(this,"isAudioEncryption",!1),$D(this,"isVideo",!0),$D(this,"kid",null),$D(this,"pssh",null),$D(this,"ext",void 0)}return BD(e,[{key:"reset",value:function(){this.sequenceNumber=this.width=this.height=this.fpsDen=this.fpsNum=this.duration=this.baseMediaDecodeTime=this.timescale=0,this.codec="",this.present=!1,this.pid=-1,this.pps=[],this.sps=[],this.vps=[],this.sarRatio=[],this.samples=[],this.warnings=[],this.hvcC=null}},{key:"exist",value:function(){return!!(this.pps.length&&this.sps.length&&this.codec)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isVideoEncryption}}]),e}(),QD=function(){function e(){GD(this,e),$D(this,"id",2),$D(this,"type","audio"),$D(this,"codecType","aac"),$D(this,"pid",-1),$D(this,"codec",""),$D(this,"sequenceNumber",0),$D(this,"sampleDuration",0),$D(this,"timescale",0),$D(this,"formatTimescale",0),$D(this,"baseMediaDecodeTime",0),$D(this,"duration",0),$D(this,"warnings",[]),$D(this,"samples",[]),$D(this,"baseDts",0),$D(this,"sampleSize",16),$D(this,"sampleRate",0),$D(this,"channelCount",0),$D(this,"objectType",0),$D(this,"sampleRateIndex",0),$D(this,"config",[]),$D(this,"present",!1),$D(this,"isVideoEncryption",!1),$D(this,"isAudioEncryption",!1),$D(this,"kid",null),$D(this,"ext",void 0)}return BD(e,[{key:"reset",value:function(){this.sequenceNumber=0,this.timescale=0,this.sampleDuration=0,this.sampleRate=0,this.channelCount=0,this.baseMediaDecodeTime=0,this.present=!1,this.pid=-1,this.codec="",this.samples=[],this.config=[],this.warnings=[]}},{key:"exist",value:function(){return!!(this.sampleRate&&this.channelCount&&this.codec&&"aac"===this.codecType)}},{key:"hasSample",value:function(){return!!this.samples.length}},{key:"isEncryption",get:function(){return this.isAudioEncryption}}]),e}(),WD=function(){function e(t,n,r){GD(this,e),$D(this,"flag",{}),$D(this,"keyframe",!1),$D(this,"gopId",0),$D(this,"duration",0),$D(this,"size",0),$D(this,"units",[]),$D(this,"chromaFormat",420),this.originPts=this.pts=t,this.originDts=this.dts=n,r&&(this.units=r)}return BD(e,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),e}(),qD=BD((function e(t,n,r,i){GD(this,e),$D(this,"duration",1024),$D(this,"flag",{dependsOn:2,isNonSyncSample:0}),$D(this,"keyframe",!0),this.originPts=this.pts=this.dts=t,this.data=n,this.size=n.byteLength,this.sampleOffset=i,r&&(this.duration=r)})),YD=function(){function e(){GD(this,e),$D(this,"id",3),$D(this,"type","metadata"),$D(this,"timescale",0),$D(this,"flvScriptSamples",[]),$D(this,"seiSamples",[])}return BD(e,[{key:"exist",value:function(){return!(!this.flvScriptSamples.length&&!this.seiSamples.length||!this.timescale)}},{key:"reset",value:function(){this.timescale=0,this.flvScriptSamples=[],this.seiSamples=[]}},{key:"hasSample",value:function(){return!(!this.flvScriptSamples.length&&!this.seiSamples.length)}}]),e}(),JD=typeof window<"u",ZD=JD&&navigator.userAgent.toLocaleLowerCase(),eO=JD&&ZD.includes("firefox"),tO=JD&&ZD.includes("android"),nO=function(){function e(){GD(this,e)}return BD(e,null,[{key:"getRateIndexByRate",value:function(t){return e.FREQ.indexOf(t)}},{key:"parseADTS",value:function(t,n){for(var r=t.length,i=0;i+2<r&&(255!==t[i]||240!=(246&t[i+1]));)i++;if(!(i>=r)){var o=i,a=[],s=(60&t[i+2])>>>2,u=e.FREQ[s];if(!u)throw new Error("Invalid sampling index: ".concat(s));for(var c,l,f=1+((192&t[i+2])>>>6),h=(1&t[i+2])<<2|(192&t[i+3])>>>6,d=e._getConfig(s,h,f),p=d.config,v=d.codec,g=0,y=e.getFrameDuration(u);i+7<r;)if(255===t[i]&&240==(246&t[i+1])){if(r-i<(l=(3&t[i+3])<<11|t[i+4]<<3|(224&t[i+5])>>5))break;c=2*(1&~t[i+1]),a.push({pts:n+g*y,data:t.subarray(i+7+c,i+l)}),g++,i+=l}else i++;return{skip:o,remaining:i>=r?void 0:t.subarray(i),frames:a,samplingFrequencyIndex:s,sampleRate:u,objectType:f,channelCount:h,codec:v,config:p,originCodec:"mp4a.40.".concat(f)}}}},{key:"parseAudioSpecificConfig",value:function(t){if(t.length){var n=t[0]>>>3,r=(7&t[0])<<1|t[1]>>>7,i=(120&t[1])>>>3,o=e.FREQ[r];if(o){var a=e._getConfig(r,i,n);return{samplingFrequencyIndex:r,sampleRate:o,objectType:n,channelCount:i,config:a.config,codec:a.codec,originCodec:"mp4a.40.".concat(n)}}}}},{key:"getFrameDuration",value:function(e){return 1024*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4)/e}},{key:"_getConfig",value:function(e,t,n){var r,i,o=[];return eO?e>=6?(r=5,i=e-3):(r=2,i=e):tO?(r=2,i=e):(r=2===n||5===n?n:5,i=e,e>=6?i=e-3:1===t&&(r=2,i=e)),o[0]=r<<3,o[0]|=(14&e)>>1,o[1]=(1&e)<<7,o[1]|=t<<3,5===r&&(o[1]|=(14&i)>>1,o[2]=(1&i)<<7,o[2]|=8,o[3]=0),{config:o,codec:"mp4a.40.".concat(r)}}},{key:"getSilentFrame",value:function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}]),e}();function rO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.filter(Boolean);var r=new Uint8Array(t.reduce((function(e,t){return e+t.byteLength}),0)),i=0;return t.forEach((function(e){r.set(e,i),i+=e.byteLength})),r}$D(nO,"FREQ",[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]);var iO=Math.pow(2,32);function oO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<8)+(e[t+1]||0)}function aO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<24>>>0)+(e[t+1]<<16)+(e[t+2]<<8)+(e[t+3]||0)}function sO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return aO(e,t)*iO+aO(e,t+4)}function uO(e){if(!Array.isArray(e)){for(var t=[],n="",r=0;r<e.length;r++)r%2&&(n=e[r-1]+e[r],t.push(parseInt(n,16)),n="");return t}return e.map((function(e){return parseInt(e,16)}))}var cO=function(){function e(t){if(GD(this,e),$D(this,"_bytesAvailable",void 0),$D(this,"_bitsAvailable",0),$D(this,"_word",0),!t)throw new Error("ExpGolomb data params is required");this._data=t,this._bytesAvailable=t.byteLength,this._bytesAvailable&&this._loadWord()}return BD(e,[{key:"_loadWord",value:function(){var e=this._data.byteLength-this._bytesAvailable,t=Math.min(4,this._bytesAvailable);if(0===t)throw new Error("No bytes available");var n=new Uint8Array(4);n.set(this._data.subarray(e,e+t)),this._word=new DataView(n.buffer).getUint32(0),this._bitsAvailable=8*t,this._bytesAvailable-=t}},{key:"bitsPos",value:function(){return 8*this._bytesAvailable-this._bitsAvailable}},{key:"bitsLeft",value:function(){return 8*this._data.length-this.bitsPos()}},{key:"byteAligned",value:function(){return 0===this.bitsPos()||this.bitsPos()%8==0}},{key:"skipBits",value:function(e){if(this._bitsAvailable>e)this._word<<=e,this._bitsAvailable-=e;else{e-=this._bitsAvailable;var t=Math.floor(e/8);e-=8*t,this._bytesAvailable-=t,this._loadWord(),this._word<<=e,this._bitsAvailable-=e}}},{key:"readBits",value:function(e){if(e>32)throw new Error("Cannot read more than 32 bits");var t=Math.min(this._bitsAvailable,e),n=this._word>>>32-t;return this._bitsAvailable-=t,this._bitsAvailable>0?this._word<<=t:this._bytesAvailable>0&&this._loadWord(),(t=e-t)>0&&this._bitsAvailable?n<<t|this.readBits(t):n}},{key:"skipLZ",value:function(){var e;for(e=0;e<this._bitsAvailable;++e)if(this._word&2147483648>>>e)return this._word<<=e,this._bitsAvailable-=e,e;return this._loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"skipScalingList",value:function(e){for(var t=8,n=8,r=0;r<e;r++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n}}]),e}(),lO=function(){function e(t){GD(this,e),this._buffer=t,this._offset=0,this._heldBits=0,this._numHeldBits=0}return BD(e,[{key:"readUint8",value:function(){return this._buffer[this._offset++]}},{key:"readUint16",value:function(){return this._buffer[this._offset++]<<8|this._buffer[this._offset++]}},{key:"readUint32",value:function(){return this._buffer[this._offset++]<<24|this._buffer[this._offset++]<<16|this._buffer[this._offset++]<<8|this._buffer[this._offset++]}},{key:"readUint8Array",value:function(e){var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t}},{key:"streamRead1Bytes",value:function(){this._heldBits=this.readUint8(),this._numHeldBits=8}},{key:"streamRead2Bytes",value:function(){this._heldBits=this.readUint16(),this._numHeldBits=16}},{key:"extractBits",value:function(e){var t=this._heldBits>>this._numHeldBits-e&(1<<e)-1;return this._numHeldBits-=e,t}}]),e}(),fO=function(){function e(){GD(this,e)}return BD(e,null,[{key:"parseVVCDecoderConfigurationRecord",value:function(t){var n=new lO(t),r=n.readUint8();n.streamRead1Bytes(),n.extractBits(5);var i,o,a,s,u,c,l,f,h=n.extractBits(2)+1,d=n.extractBits(1),p={};d&&(n.streamRead2Bytes(),s=n.extractBits(2),u=n.extractBits(3),o=n.extractBits(3),a=n.extractBits(2),n.extractBits(6),p=e.parseVVCPTLRecord(n,o),i=n.readUint16(),c=n.readUint16(),l=n.readUint16(),f=n.readUint16());for(var v=n.readUint8(),g=[],y=[],m=[],_=null,b=0;b<v;b++){n.streamRead1Bytes(),n.extractBits(1),n.extractBits(2);var T=n.extractBits(5),k=1;13!==T&&12!==T&&(k=n.readUint16());for(var S=0;S<k;S++){var w=n.readUint16();switch(T){case 14:g.push(n.readUint8Array(w));break;case 15:var R=n.readUint8Array(w);_||(_=e.parseSPS(e.removeEPB(R))),y.push(R);break;case 16:m.push(n.readUint8Array(w))}}}return{data:t,configurationVersion:r,codec:"bvc2.1.6.L93.B0",nalUnitSize:h,ptlPresentFlag:d,olsIdx:i,numSublayers:o,constantFrameRate:a,chromaFormatIdc:s,bitDepthLumaMinus8:u,ptlRecord:p,width:c,height:l,sampleRate:f,numOfArrays:v,vps:g,sps:y,pps:m,spsParsed:_}}},{key:"parseVVCPTLRecord",value:function(e,t){e.streamRead2Bytes(),e.extractBits(2);var n=e.extractBits(6),r=e.extractBits(7),i=e.extractBits(1),o=e.readUint8();e.streamRead1Bytes();var a=e.extractBits(1),s=e.extractBits(1),u=new Uint8Array(n);if(n){for(var c=0;c<n-1;c++){var l=e.extractBits(6);e.streamRead1Bytes();var f=e.extractBits(2);u[c]=l<<2|f}u[n-1]=e.extractBits(6)}else e.extractBits(6);var h=[];if(t>1){e.streamRead1Bytes();for(var d=0,p=t-2;p>=0;--p)d|=e.extractBits(1)<<p;for(var v=t;v<=8&&t>1;++v)e.extractBits(1);for(var g=t-2;g>=0;--g)d&1<<g&&(h[g]=e.readUint8())}var y=e.readUint8(),m=[];if(y)for(var _=0;_<y;_++)m.push(e.readUint32());return{generalProfileIdc:r,generalTierFlag:i,generalLevelIdc:o,ptlFrameOnlyConstraintFlag:a,ptlMultilayerEnabledFlag:s,generalConstraintInfo:u,subLayerLevelIdc:h,generalSubProfileIdc:m,ptlNumSubProfiles:y,numBytesConstraintInfo:n}}},{key:"getAvccNals",value:function(e){for(var t=[];e.position<e.length-4;){var n=e.dataview.getInt32(e.dataview.position);if(!(e.length-e.position>=n))break;var r=e.buffer.slice(e.position,e.position+4);e.skip(4);var i=new Uint8Array(e.buffer.slice(e.position,e.position+n));e.skip(n),t.push({header:r,body:i})}return t}},{key:"analyseNal",value:function(e){var t=(248&e.body[1])>>3;switch(e.type=t,t){case 23:case 24:break;case 7:case 8:e.key=!0;break;case 14:e.vps=!0;break;case 15:e.sps=!0;break;case 16:e.pps=!0;break;case 17:e.aps=!0}}},{key:"removeEPB",value:function(e){for(var t=e.byteLength,n=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(!n.length)return e;var i=t-n.length,o=new Uint8Array(i),a=0;for(r=0;r<i;a++,r++)a===n[0]&&(a++,n.shift()),o[r]=e[a];return o}},{key:"parseVps",value:function(){}},{key:"parseSPS",value:function(t){var n=new cO(t);n.readUByte(),n.readUByte(),n.skipBits(4);var r=n.readBits(4),i=n.readBits(3),o=n.readBits(2),a=420;o<=3&&(a=[0,420,422,444][o]),n.readBits(2),n.readBits(1);var s=e._parseProfileTierLevel(n,1,i);return n.readBits(1),n.readBits(1)&&n.readBits(1),{width:n.readUEG(),height:n.readUEG(),spsMaxSubLayerMinus1:i,spsVideoParameterSetId:r,chromaFormatIdc:o,chromaFormat:a,ptlInfo:s}}},{key:"_parseProfileTierLevel",value:function(t,n,r){var i,o=t.readBits(7),a=t.readBits(1),s=t.readBits(8),u=t.readBits(1),c=t.readBits(1);n&&(i=e._parseGeneralConstraintsInfo(t));for(var l=r-1,f=[],h=[],d=[],p=l;p>=0;--p)f[p]=t.readBits(1);for(;!t.byteAligned();)t.readBits(1);for(var v=l;v>=0;--v)f[v]&&(h[v]=t.readUByte());if(n)for(var g=t.readUByte(),y=0;y<g;y++)d[y]=t.readBits(32);return{generalProfileIdc:o,generalTierFlag:a,generalLevelIdc:s,ptlFrameOnlyConstraintFlag:u,ptlMultilayerEnabledFlag:c,ptlSublayerLevelPresentFlags:f,ptlSublayerLevelIdcs:h,ptlSubProfileIdcs:d,gciInfo:i}}},{key:"_parseGeneralConstraintsInfo",value:function(e){var t=e.readBits(1);if(t){e.skipBits(71);var n=e.readBits(8);n&&e.skipBits(n)}var r=8-e.bitsPos()%8;return e.skipBits(r),{gciPresentFlag:t}}}]),e}(),hO=function(){function e(){GD(this,e)}return BD(e,null,[{key:"findBox",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[];if(!t)return i;for(var o=0,a="",s=0;t.length>7;){if(o=aO(t),a=String.fromCharCode.apply(null,t.subarray(4,8)),s=8,1===o?(o=sO(t,8),s+=8):o||(o=t.length),!n[0]||a===n[0]){var u=t.subarray(0,o);if(!(n.length<2))return e.findBox(u.subarray(s),n.slice(1),r+s);i.push({start:r,size:o,headerSize:s,type:a,data:u})}r+=o,t=t.subarray(o)}return i}},{key:"tfhd",value:function(e){return gO(e,!0,(function(e,t){e.trackId=aO(t);var n=4,r=1&e.flags,i=2&e.flags,o=8&e.flags,a=16&e.flags,s=32&e.flags;r&&(n+=4,e.baseDataOffset=aO(t,n),n+=4),i&&(e.sampleDescriptionIndex=aO(t,n),n+=4),o&&(e.defaultSampleDuration=aO(t,n),n+=4),a&&(e.defaultSampleSize=aO(t,n),n+=4),s&&(e.defaultSampleFlags=aO(t,n))}))}},{key:"sidx",value:function(e){return gO(e,!0,(function(e,t){var n=0;e.reference_ID=aO(t,n),n+=4,e.timescale=aO(t,n),n+=4,0===e.version?(e.earliest_presentation_time=aO(t,n),n+=4,e.first_offset=aO(t,n),n+=4):(e.earliest_presentation_time=sO(t,n),n+=8,e.first_offset=sO(t,n),n+=8),n+=2,e.references=[];var r=oO(t,n);n+=2;for(var i=0;i<r;i++){var o={};e.references.push(o);var a=aO(t,n);n+=4,o.reference_type=a>>31&1,o.referenced_size=2147483647&a,o.subsegment_duration=aO(t,n),a=aO(t,n+=4),n+=4,o.starts_with_SAP=a>>31&1,o.SAP_type=a>>28&7,o.SAP_delta_time=268435455&a}}))}},{key:"moov",value:function(t){return gO(t,!1,(function(t,n,r){t.mvhd=e.mvhd(e.findBox(n,["mvhd"],r)[0]),t.trak=e.findBox(n,["trak"],r).map((function(t){return e.trak(t)})),t.pssh=e.pssh(e.findBox(n,["pssh"],r)[0])}))}},{key:"mvhd",value:function(e){return gO(e,!0,(function(e,t){var n=0;1===e.version?(e.timescale=aO(t,16),e.duration=sO(t,20),n+=28):(e.timescale=aO(t,8),e.duration=aO(t,12),n+=16),e.nextTrackId=aO(t,n+76)}))}},{key:"trak",value:function(t){return gO(t,!1,(function(t,n,r){t.tkhd=e.tkhd(e.findBox(n,["tkhd"],r)[0]),t.mdia=e.mdia(e.findBox(n,["mdia"],r)[0]),t.edts=e.edts(e.findBox(n,["edts"],r)[0])}))}},{key:"tkhd",value:function(e){return gO(e,!0,(function(e,t){var n=0;1===e.version?(e.trackId=aO(t,16),e.duration=sO(t,24),n+=32):(e.trackId=aO(t,8),e.duration=aO(t,16),n+=20),e.width=aO(t,n+52),e.height=aO(t,n+56)}))}},{key:"mdia",value:function(t){return gO(t,!1,(function(t,n,r){t.mdhd=e.mdhd(e.findBox(n,["mdhd"],r)[0]),t.hdlr=e.hdlr(e.findBox(n,["hdlr"],r)[0]),t.minf=e.minf(e.findBox(n,["minf"],r)[0])}))}},{key:"edts",value:function(t){return gO(t,!1,(function(t,n,r){t.elst=e.elst(e.findBox(n,["elst"],r)[0])}))}},{key:"elst",value:function(e){return gO(e,!0,(function(e,t,n){e.entries=[],e.entriesData=t;var r=0,i=aO(t,r);r+=4;for(var o=0;o<i;o++){var a={};e.entries.push(a),1===e.version?(a.segment_duration=sO(t,r),r+=8,a.media_time=sO(t,r),r+=8):(a.segment_duration=aO(t,r),r+=4,a.media_time=aO(t,r),r+=4),a.media_rate_integer=oO(t,r),r+=2,a.media_rate_fraction=oO(t,n),r+=2}}))}},{key:"mdhd",value:function(e){return gO(e,!0,(function(e,t){var n=0;1===e.version?(e.timescale=aO(t,16),e.duration=sO(t,20),n+=28):(e.timescale=aO(t,8),e.duration=aO(t,12),n+=16);var r=oO(t,n);e.language=String.fromCharCode(96+(r>>10&31),96+(r>>5&31),96+(31&r))}))}},{key:"hdlr",value:function(e){return gO(e,!0,(function(e,t){0===e.version&&(e.handlerType=String.fromCharCode.apply(null,t.subarray(4,8)))}))}},{key:"minf",value:function(t){return gO(t,!1,(function(t,n,r){t.vmhd=e.vmhd(e.findBox(n,["vmhd"],r)[0]),t.smhd=e.smhd(e.findBox(n,["smhd"],r)[0]),t.stbl=e.stbl(e.findBox(n,["stbl"],r)[0])}))}},{key:"vmhd",value:function(e){return gO(e,!0,(function(e,t){e.graphicsmode=oO(t),e.opcolor=[oO(t,2),oO(t,4),oO(t,6)]}))}},{key:"smhd",value:function(e){return gO(e,!0,(function(e,t){e.balance=oO(t)}))}},{key:"stbl",value:function(t){return gO(t,!1,(function(t,n,r){var i,o,a;t.stsd=e.stsd(e.findBox(n,["stsd"],r)[0]),t.stts=e.stts(e.findBox(n,["stts"],r)[0]),t.ctts=e.ctts(e.findBox(n,["ctts"],r)[0]),t.stsc=e.stsc(e.findBox(n,["stsc"],r)[0]),t.stsz=e.stsz(e.findBox(n,["stsz"],r)[0]),t.stco=e.stco(e.findBox(n,["stco"],r)[0]),t.stco||(t.co64=e.co64(e.findBox(n,["co64"],r)[0]),t.stco=t.co64);var s=null===(i=t.stsd.entries[0])||void 0===i||null===(o=i.sinf)||void 0===o||null===(a=o.schi)||void 0===a?void 0:a.tenc.default_IV_size;t.stss=e.stss(e.findBox(n,["stss"],r)[0]),t.senc=e.senc(e.findBox(n,["senc"],r)[0],s)}))}},{key:"senc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return gO(e,!0,(function(e,n){var r=0,i=aO(n,r);r+=4,e.samples=[];for(var o=0;o<i;o++){for(var a={InitializationVector:[]},s=0;s<t;s++)a.InitializationVector[s]=n[r+s];if(r+=t,2&e.flags){a.subsamples=[];var u=oO(n,r);r+=2;for(var c=0;c<u;c++){var l={};l.BytesOfClearData=oO(n,r),r+=2,l.BytesOfProtectedData=aO(n,r),r+=4,a.subsamples.push(l)}}e.samples.push(a)}}))}},{key:"pssh",value:function(e){return gO(e,!0,(function(e,t){for(var n=[],r=[],i=0,o=0;o<16;o++)r.push(yO(t[i+o]));if(i+=16,e.version>0){var a=aO(t,i);i+=4;for(var s=0;s<(""+a).length;s++)for(var u=0;u<16;u++){var c=t[i];i+=1,n.push(yO(c))}}var l=aO(t,i);e.data_size=l,i+=4,e.kid=n,e.system_id=r,e.buffer=t}))}},{key:"bvc2",value:function(t){return gO(t,!1,(function(t,n,r){var i=pO(t,n),o=n.subarray(i);r+=i,t.vvcC=e.bv2C(e.findBox(o,["bv2C"],r)[0]),t.pasp=e.pasp(e.findBox(o,["pasp"],r)[0])}))}},{key:"bv2C",value:function(e){return gO(e,!1,(function(e,t,n){var r=fO.parseVVCDecoderConfigurationRecord(t);for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}))}},{key:"stsd",value:function(t){return gO(t,!0,(function(t,n,r){t.entryCount=aO(n),t.entries=e.findBox(n.subarray(4),[],r+4).map((function(t){switch(t.type){case"avc1":case"avc2":case"avc3":case"avc4":return e.avc1(t);case"hvc1":case"hev1":return e.hvc1(t);case"bvc2":return e.bvc2(t);case"mp4a":return e.mp4a(t);case"alaw":case"ulaw":return e.alaw(t);case"enca":return gO(t,!1,(function(t,n,r){t.channelCount=oO(n,16),t.samplesize=oO(n,18),t.sampleRate=aO(n,24)/65536,n=n.subarray(28),t.sinf=e.sinf(e.findBox(n,["sinf"],r)[0]),t.esds=e.esds(e.findBox(n,["esds"],r)[0])}));case"encv":return gO(t,!1,(function(t,n,r){t.width=oO(n,24),t.height=oO(n,26),t.horizresolution=aO(n,28),t.vertresolution=aO(n,32),n=n.subarray(78),t.sinf=e.sinf(e.findBox(n,["sinf"],r)[0]),t.avcC=e.avcC(e.findBox(n,["avcC"],r)[0]),t.hvcC=e.hvcC(e.findBox(n,["hvcC"],r)[0]),t.pasp=e.pasp(e.findBox(n,["pasp"],r)[0])}))}})).filter(Boolean)}))}},{key:"tenc",value:function(e){return gO(e,!1,(function(e,t){var n=6;e.default_IsEncrypted=t[n],n+=1,e.default_IV_size=t[n],n+=1,e.default_KID=[];for(var r=0;r<16;r++)e.default_KID.push(yO(t[n])),n+=1}))}},{key:"schi",value:function(t){return gO(t,!1,(function(t,n,r){t.tenc=e.tenc(e.findBox(n,["tenc"],r)[0])}))}},{key:"sinf",value:function(t){return gO(t,!1,(function(t,n,r){t.schi=e.schi(e.findBox(n,["schi"],r)[0]),t.frma=e.frma(e.findBox(n,["frma"],r)[0])}))}},{key:"frma",value:function(e){return gO(e,!1,(function(e,t){e.data_format="";for(var n=0;n<4;n++)e.data_format+=String.fromCharCode(t[n])}))}},{key:"avc1",value:function(t){return gO(t,!1,(function(t,n,r){var i=pO(t,n),o=n.subarray(i);r+=i,t.avcC=e.avcC(e.findBox(o,["avcC"],r)[0]),t.pasp=e.pasp(e.findBox(o,["pasp"],r)[0])}))}},{key:"avcC",value:function(e){return gO(e,!1,(function(e,t){e.configurationVersion=t[0],e.AVCProfileIndication=t[1],e.profileCompatibility=t[2],e.AVCLevelIndication=t[3],e.codec=function(e){for(var t,n="avc1.",r=0;r<3;r++)(t=e[r].toString(16)).length<2&&(t="0".concat(t)),n+=t;return n}([t[1],t[2],t[3]]),e.lengthSizeMinusOne=3&t[4],e.spsLength=31&t[5],e.sps=[];for(var n=6,r=0;r<e.spsLength;r++){var i=oO(t,n);n+=2,e.sps.push(t.subarray(n,n+i)),n+=i}e.ppsLength=t[n],n+=1,e.pps=[];for(var o=0;o<e.ppsLength;o++){var a=oO(t,n);n+=2,e.pps.push(t.subarray(n,n+=a)),n+=a}}))}},{key:"hvc1",value:function(t){return gO(t,!1,(function(t,n,r){var i=pO(t,n),o=n.subarray(i);r+=i,t.hvcC=e.hvcC(e.findBox(o,["hvcC"],r)[0]),t.pasp=e.pasp(e.findBox(o,["pasp"],r)[0])}))}},{key:"hvcC",value:function(e){return gO(e,!1,(function(t,n){t.data=e.data,t.codec="hev1.1.6.L93.B0",t.configurationVersion=n[0];var r=n[1];t.generalProfileSpace=r>>6,t.generalTierFlag=(32&r)>>5,t.generalProfileIdc=31&r,t.generalProfileCompatibility=aO(n,2),t.generalConstraintIndicatorFlags=n.subarray(6,12),t.generalLevelIdc=n[12],t.avgFrameRate=oO(n,19),t.numOfArrays=n[22],t.vps=[],t.sps=[],t.pps=[];for(var i=23,o=0,a=0,s=0,u=0;u<t.numOfArrays;u++){o=63&n[i],a=oO(n,i+1),i+=3;for(var c=[],l=0;l<a;l++)s=oO(n,i),i+=2,c.push(n.subarray(i,i+s)),i+=s;var f;if(32===o)(f=t.vps).push.apply(f,c);else if(33===o){var h;(h=t.sps).push.apply(h,c)}else if(34===o){var d;(d=t.pps).push.apply(d,c)}}}))}},{key:"pasp",value:function(e){return gO(e,!1,(function(e,t){e.hSpacing=aO(t),e.vSpacing=aO(t,4)}))}},{key:"mp4a",value:function(t){return gO(t,!1,(function(t,n,r){var i=vO(t,n);t.esds=e.esds(e.findBox(n.subarray(i),["esds"],r+i)[0])}))}},{key:"esds",value:function(e){return gO(e,!0,(function(e,t){e.codec="mp4a.";for(var n=0,r=0,i=0,o=0;t.length;){for(o=t[n=0],r=t[n+1],n+=2;128&r;)i=(127&r)<<7,r=t[n],n+=1;if(i+=127&r,3===o)t=t.subarray(n+3);else{if(4!==o){if(5===o){var a=e.config=t.subarray(n,n+i),s=(248&a[0])>>3;return 31===s&&a.length>=2&&(s=32+((7&a[0])<<3)+((224&a[1])>>5)),e.objectType=s,e.codec+=s.toString(16),void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}return void("."===e.codec[e.codec.length-1]&&(e.codec=e.codec.substring(0,e.codec.length-1)))}e.codec+=(t[n].toString(16)+".").padStart(3,"0"),t=t.subarray(n+13)}}}))}},{key:"alaw",value:function(e){return gO(e,!1,(function(e,t){vO(e,t)}))}},{key:"stts",value:function(e){return gO(e,!0,(function(e,t){for(var n=aO(t),r=[],i=4,o=0;o<n;o++)r.push({count:aO(t,i),delta:aO(t,i+4)}),i+=8;e.entryCount=n,e.entries=r}))}},{key:"ctts",value:function(e){return gO(e,!0,(function(e,t){var n=aO(t),r=[],i=4;if(1===e.version)for(var o=0;o<n;o++)r.push({count:aO(t,i),offset:aO(t,i+4)}),i+=8;else for(var a=0;a<n;a++)r.push({count:aO(t,i),offset:-(1+~aO(t,i+4))}),i+=8;e.entryCount=n,e.entries=r}))}},{key:"stsc",value:function(e){return gO(e,!0,(function(e,t){for(var n=aO(t),r=[],i=4,o=0;o<n;o++)r.push({firstChunk:aO(t,i),samplesPerChunk:aO(t,i+4),sampleDescriptionIndex:aO(t,i+8)}),i+=12;e.entryCount=n,e.entries=r}))}},{key:"stsz",value:function(e){return gO(e,!0,(function(e,t){var n=aO(t),r=aO(t,4),i=[];if(!n)for(var o=8,a=0;a<r;a++)i.push(aO(t,o)),o+=4;e.sampleSize=n,e.sampleCount=r,e.entrySizes=i}))}},{key:"stco",value:function(e){return gO(e,!0,(function(e,t){for(var n=aO(t),r=[],i=4,o=0;o<n;o++)r.push(aO(t,i)),i+=4;e.entryCount=n,e.entries=r}))}},{key:"co64",value:function(e){return gO(e,!0,(function(e,t){for(var n=aO(t),r=[],i=4,o=0;o<n;o++)r.push(sO(t,i)),i+=8;e.entryCount=n,e.entries=r}))}},{key:"stss",value:function(e){return gO(e,!0,(function(e,t){for(var n=aO(t),r=[],i=4,o=0;o<n;o++)r.push(aO(t,i)),i+=4;e.entryCount=n,e.entries=r}))}},{key:"moof",value:function(t){return gO(t,!1,(function(t,n,r){t.mfhd=e.mfhd(e.findBox(n,["mfhd"],r)[0]),t.traf=e.findBox(n,["traf"],r).map((function(t){return e.traf(t)}))}))}},{key:"mfhd",value:function(e){return gO(e,!0,(function(e,t){e.sequenceNumber=aO(t)}))}},{key:"traf",value:function(t){return gO(t,!1,(function(t,n,r){t.tfhd=e.tfhd(e.findBox(n,["tfhd"],r)[0]),t.tfdt=e.tfdt(e.findBox(n,["tfdt"],r)[0]),t.trun=e.trun(e.findBox(n,["trun"],r)[0])}))}},{key:"trun",value:function(e){return gO(e,!0,(function(e,t){var n=e.version,r=e.flags,i=t.length,o=e.sampleCount=aO(t),a=4;if(i>a&&1&r&&(e.dataOffset=-(1+~aO(t,a)),a+=4),i>a&&4&r&&(e.firstSampleFlags=aO(t,a),a+=4),e.samples=[],i>a)for(var s,u=0;u<o;u++)s={},256&r&&(s.duration=aO(t,a),a+=4),512&r&&(s.size=aO(t,a),a+=4),1024&r&&(s.flags=aO(t,a),a+=4),2048&r&&(s.cts=n?-(1+~aO(t,a+4)):aO(t,a),a+=4),e.samples.push(s)}))}},{key:"tfdt",value:function(e){return gO(e,!0,(function(e,t){1===e.version?e.baseMediaDecodeTime=sO(t):e.baseMediaDecodeTime=aO(t)}))}},{key:"probe",value:function(t){return!!e.findBox(t,["ftyp"])}},{key:"parseSampleFlags",value:function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}},{key:"moovToTrack",value:function(e,t,n){var r,i,o=e.trak;if(o&&o.length){var a=o.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),s=o.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)}));if(a&&t){var u,c,l,f,h,d,p,v,g=t;null!=(null===(u=a.tkhd)||void 0===u?void 0:u.trackId)&&(g.id=a.tkhd.trackId),g.tkhdDuration=a.tkhd.duration,g.mvhdDurtion=e.mvhd.duration,g.mvhdTimecale=e.mvhd.timescale,g.timescale=g.formatTimescale=a.mdia.mdhd.timescale,g.duration=a.mdia.mdhd.duration||g.mvhdDurtion/g.mvhdTimecale*g.timescale,null!==(c=a.edts)&&void 0!==c&&c.elst&&(g.editList=a.edts.elst);var y,m,_,b,T,k,S,w,R=a.mdia.minf.stbl.stsd.entries[0];if(g.width=R.width,g.height=R.height,R.pasp&&(g.sarRatio=[R.pasp.hSpacing,R.pasp.vSpacing]),R.hvcC)g.codecType=zD,g.codec=R.hvcC.codec,g.vps=R.hvcC.vps,g.sps=R.hvcC.sps,g.pps=R.hvcC.pps,g.hvcC=R.hvcC.data;else if(R.avcC)g.codec=R.avcC.codec,g.sps=R.avcC.sps,g.pps=R.avcC.pps;else{if(!R.vvcC)throw new Error("unknown video stsd entry");g.codecType=XD,g.codec=R.vvcC.codec,g.sps=R.vvcC.sps,g.pps=R.vvcC.pps,g.vps=R.vvcC.vps,g.vvcC=R.vvcC.data}g.present=!0,g.ext={},g.ext.stss=null===(l=a.mdia)||void 0===l||null===(f=l.minf)||void 0===f||null===(h=f.stbl)||void 0===h?void 0:h.stss,g.ext.ctts=null===(d=a.mdia)||void 0===d||null===(p=d.minf)||void 0===p||null===(v=p.stbl)||void 0===v?void 0:v.ctts,R&&"encv"===R.type&&(g.isVideoEncryption=!0,R.default_KID=null===(y=R.sinf)||void 0===y||null===(m=y.schi)||void 0===m?void 0:m.tenc.default_KID,R.default_IsEncrypted=null===(_=R.sinf)||void 0===_||null===(b=_.schi)||void 0===b?void 0:b.tenc.default_IsEncrypted,R.default_IV_size=null===(T=R.sinf)||void 0===T||null===(k=T.schi)||void 0===k?void 0:k.tenc.default_IV_size,g.videoSenc=a.mdia.minf.stbl.senc&&a.mdia.minf.stbl.senc.samples,R.data_format=null===(S=R.sinf)||void 0===S||null===(w=S.frma)||void 0===w?void 0:w.data_format,g.useEME=e.useEME,g.kidValue=e.kidValue,g.pssh=e.pssh,g.encv=R)}if(s&&n){var M,x,P,E,D,O,I,A,L,C,G=n;null!=(null===(M=s.tkhd)||void 0===M?void 0:M.trackId)&&(G.id=s.tkhd.trackId),G.tkhdDuration=s.tkhd.duration,G.mvhdDurtion=e.mvhd.duration,G.mvhdTimecale=e.mvhd.timescale,G.timescale=G.formatTimescale=s.mdia.mdhd.timescale,G.duration=s.mdia.mdhd.duration||G.mvhdDurtion/G.mvhdTimecale*G.timescale,null!==(x=s.edts)&&void 0!==x&&x.elst&&(G.editList=s.edts.elst);var N,B,$,F,U,H,j,V,z=s.mdia.minf.stbl.stsd.entries[0];switch(G.sampleSize=z.sampleSize,G.sampleRate=z.sampleRate,G.channelCount=z.channelCount,G.present=!0,z.type){case"alaw":G.codecType=G.codec="g7110a",G.sampleRate=8e3;break;case"ulaw":G.codecType=G.codec="g7110m",G.sampleRate=8e3;break;default:G.sampleDuration=nO.getFrameDuration(G.sampleRate,G.timescale),G.sampleRateIndex=nO.getRateIndexByRate(G.sampleRate),G.objectType=(null===(r=z.esds)||void 0===r?void 0:r.objectType)||2,z.esds&&(G.config=Array.from(z.esds.config)),G.codec=(null===(i=z.esds)||void 0===i?void 0:i.codec)||"mp4a.40.2"}G.sampleDuration=nO.getFrameDuration(G.sampleRate,G.timescale),G.objectType=(null===(P=z.esds)||void 0===P?void 0:P.objectType)||2,z.esds&&(z.esds.config?G.config=Array.from(z.esds.config):console.warn("esds config is null")),G.codec=(null===(E=z.esds)||void 0===E?void 0:E.codec)||"mp4a.40.2",G.sampleRateIndex=nO.getRateIndexByRate(G.sampleRate),G.ext={},G.ext.stss=null===(D=s.mdia)||void 0===D||null===(O=D.minf)||void 0===O||null===(I=O.stbl)||void 0===I?void 0:I.stss,G.ext.ctts=null===(A=s.mdia)||void 0===A||null===(L=A.minf)||void 0===L||null===(C=L.stbl)||void 0===C?void 0:C.ctts,G.present=!0,z&&"enca"===z.type&&(G.isAudioEncryption=!0,z.data_format=null===(N=z.sinf)||void 0===N||null===(B=N.frma)||void 0===B?void 0:B.data_format,z.default_KID=null===($=z.sinf)||void 0===$||null===(F=$.schi)||void 0===F?void 0:F.tenc.default_KID,z.default_IsEncrypted=null===(U=z.sinf)||void 0===U||null===(H=U.schi)||void 0===H?void 0:H.tenc.default_IsEncrypted,z.default_IV_size=null===(j=z.sinf)||void 0===j||null===(V=j.schi)||void 0===V?void 0:V.tenc.default_IV_size,G.audioSenc=s.mdia.minf.stbl.senc&&s.mdia.minf.stbl.senc.samples,G.useEME=e.useEME,G.kidValue=e.kidValue,G.enca=z)}if(n&&(n.isVideoEncryption=!!t&&t.isVideoEncryption),t&&(t.isAudioEncryption=!!n&&n.isAudioEncryption),null!=t&&t.encv||null!=n&&n.enca){var X,K,Q=null==t||null===(X=t.encv)||void 0===X?void 0:X.default_KID,W=null==n||null===(K=n.enca)||void 0===K?void 0:K.default_KID,q=Q||W?(Q||W).join(""):null;t&&(t.kid=q),n&&(n.kid=q)}return t&&(t.flags=3841),n&&(n.flags=1793),{videoTrack:t,audioTrack:n}}}},{key:"evaluateDefaultDuration",value:function(e,t,n){var r,i=null==t||null===(r=t.samples)||void 0===r?void 0:r.length;return i?1024*i/t.timescale*e.timescale/n:1024}},{key:"moofToSamples",value:function(t,n,r){var i={};return t.mfhd&&(n&&(n.sequenceNumber=t.mfhd.sequenceNumber),r&&(r.sequenceNumber=t.mfhd.sequenceNumber)),t.traf.forEach((function(t){var o=t.tfhd,a=t.tfdt,s=t.trun;if(o&&s){a&&(n&&n.id===o.trackId&&(n.baseMediaDecodeTime=a.baseMediaDecodeTime),r&&r.id===o.trackId&&(r.baseMediaDecodeTime=a.baseMediaDecodeTime));var u=o.defaultSampleSize||0,c=o.defaultSampleDuration||e.evaluateDefaultDuration(n,r,s.samples.length||s.sampleCount),l=s.dataOffset||0,f=0,h=-1;if(!s.samples.length&&s.sampleCount){i[o.trackId]=[];for(var d=0;d<s.sampleCount;d++)i[o.trackId].push({offset:l,dts:f,duration:c,size:u}),f+=c,l+=u}else i[o.trackId]=s.samples.map((function(e,t){return(e={offset:l,dts:f,pts:f+(e.cts||0),duration:e.duration||c,size:e.size||u,gopId:h,keyframe:0===t||null!==e.flags&&void 0!==e.flags&&(65536&e.flags)>>>0!=65536}).keyframe&&(h++,e.gopId=h),f+=e.duration,l+=e.size,e}))}})),i}},{key:"moovToSamples",value:function(e){var t=e.trak;if(t&&t.length){var n=t.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),r=t.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)}));if(n||r){var i,o;if(n){var a,s,u=null===(a=n.mdia)||void 0===a||null===(s=a.minf)||void 0===s?void 0:s.stbl;if(!u)return;var c=u.stts,l=u.stsc,f=u.stsz,h=u.stco,d=u.stss,p=u.ctts;if(!(c&&l&&f&&h&&d))return;i=dO(c,l,f,h,p,d)}if(r){var v,g,y,m=null===(v=r.mdia)||void 0===v||null===(g=v.minf)||void 0===g?void 0:g.stbl;if(!m)return;var _=null===(y=r.mdia.mdhd)||void 0===y?void 0:y.timescale,b=m.stts,T=m.stsc,k=m.stsz,S=m.stco;if(!(_&&b&&T&&k&&S))return;o=dO(b,T,k,S)}return{videoSamples:i,audioSamples:o}}}}}]),e}();function dO(e,t,n,r,i,o){var a,s,u=[],c=null==i?void 0:i.entries,l=t.entries,f=r.entries,h=n.entrySizes,d=null==o?void 0:o.entries;d&&(a={},d.forEach((function(e){a[e-1]=!0}))),c&&(s=[],c.forEach((function(e){for(var t=e.count,n=e.offset,r=0;r<t;r++)s.push(n)})));var p,v=-1,g=0,y=0,m=0,_=0,b=0,T=l[0].samplesPerChunk,k=l[1]?l[1].firstChunk-1:1/0;return e.entries.forEach((function(e){for(var t=e.count,r=e.delta,i=0;i<t;i++)p={dts:g,duration:r,size:h[y]||n.sampleSize,offset:f[m]+b,index:y},d&&(p.keyframe=a[y],p.keyframe&&v++,p.gopId=v),s&&y<s.length&&(p.pts=p.dts+s[y]),u.push(p),g+=r,++y<T?b+=p.size:(m++,b=0,m>=k&&(_++,k=l[_+1]?l[_+1].firstChunk-1:1/0),T+=l[_].samplesPerChunk)})),u}function pO(e,t){return e.dataReferenceIndex=oO(t,6),e.width=oO(t,24),e.height=oO(t,26),e.horizresolution=aO(t,28),e.vertresolution=aO(t,32),e.frameCount=oO(t,40),e.depth=oO(t,74),78}function vO(e,t){return e.dataReferenceIndex=oO(t,6),e.channelCount=oO(t,16),e.sampleSize=oO(t,18),e.sampleRate=aO(t,24)/65536,28}function gO(e,t,n){if(e){if(e.size!==e.data.length)throw new Error("box ".concat(e.type," size !== data.length"));var r={start:e.start,size:e.size,headerSize:e.headerSize,type:e.type};return t&&(r.version=e.data[e.headerSize],r.flags=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e[t]<<16)+(e[t+1]<<8)+(e[t+2]||0)}(e.data,e.headerSize+1),r.headerSize+=4),n(r,e.data.subarray(r.headerSize),r.start+r.headerSize),r}}var yO=function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.push(function(e){for(var t=String(0),n=Math.ceil(2/t.length),r=[],i=String(e);n--;)r.push(t);return r.join("").substring(0,2-i.length)+i}(Number(t).toString(16)))})),e[0]},mO=function(){function e(){GD(this,e),this.buffer=new Uint8Array(0)}return BD(e,[{key:"write",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){t?e.buffer=function(e){for(var t=0,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r.forEach((function(e){t+=e.length}));var o=new e(t),a=0;return r.forEach((function(e){o.set(e,a),a+=e.length})),o}(Uint8Array,e.buffer,t):window.console.warn(t)}))}}],[{key:"writeUint16",value:function(e){return new Uint8Array([e>>8&255,255&e])}},{key:"writeUint32",value:function(e){return new Uint8Array([e>>24,e>>16&255,e>>8&255,255&e])}}]),e}(),_O=Math.pow(2,32)-1,bO=function(){function e(){GD(this,e)}return BD(e,null,[{key:"box",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=8+(n=n.filter(Boolean)).reduce((function(e,t){return e+t.byteLength}),0),o=new Uint8Array(i);o[0]=i>>24&255,o[1]=i>>16&255,o[2]=i>>8&255,o[3]=255&i,o.set(e,4);var a=8;return n.forEach((function(e){o.set(e,a),a+=e.byteLength})),o}},{key:"FullBox",value:function(t,n,r){for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return e.box.apply(e,[t,new Uint8Array([n,r>>16&255,r>>8&255,255&r])].concat(o))}},{key:"ftyp",value:function(t){return t.find((function(e){return e.type===VD&&e.codecType===zD}))?e.FTYPHEV1:e.FTYPAVC1}},{key:"initSegment",value:function(t){return rO(e.ftyp(t),e.moov(t))}},{key:"pssh",value:function(t){var n=new Uint8Array([1,0,0,0].concat([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75],[0,0,0,1],uO(t.kid),[0,0,0,0]));return e.box(e.types.pssh,n)}},{key:"moov",value:function(t){if(t[0].useEME&&(t[0].encv||t[0].enca)){t[0].pssh||(t[0].pssh={kid:t[0].kid});var n=this.pssh(t[0].pssh);return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale),e.mvex(t)].concat(FD(t.map((function(t){return e.trak(t)}))),[n]))}return e.box.apply(e,[e.types.moov,e.mvhd(t[0].mvhdDurtion||t[0].duration,t[0].mvhdTimecale||t[0].timescale)].concat(FD(t.map((function(t){return e.trak(t)}))),[e.mvex(t)]))}},{key:"mvhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.tkhdDuration||0,t.width,t.height),e.mdia(t))}},{key:"tkhd",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}},{key:"edts",value:function(t){return e.box(e.types.edts,e.elst(t))}},{key:"elst",value:function(t){t.entries;var n=t.entriesData,r=t.version;return e.FullBox(e.types.elst,r,0,n)}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minf(t))}},{key:"mdhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,85,196,0,0]))}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"minf",value:function(t){return e.box(e.types.minf,t.type===VD?e.VMHD:e.SMHD,e.DINF,e.stbl(t))}},{key:"stbl",value:function(t){var n=[];return t&&t.ext&&t.ext.stss&&n.push(e.stss(t.ext.stss.entries)),e.box(e.types.stbl,e.stsd(t),e.STTS,n[0],e.STSC,e.STSZ,e.STCO)}},{key:"stsd",value:function(t){var n;return n="audio"===t.type?t.useEME&&t.enca?e.enca(t):e.mp4a(t):t.useEME&&t.encv?e.encv(t):e.avc1hev1vvc1(t),e.box(e.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),n)}},{key:"enca",value:function(t){var n=t.enca.channelCount,r=t.enca.sampleRate,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n,0,16,0,0,0,0,r>>8&255,255&r,0,0]),o=e.esds(t.config),a=e.sinf(t.enca);return e.box(e.types.enca,i,o,a)}},{key:"encv",value:function(t){var n,r,i=t.sps.length>0?t.sps[0]:[],o=t.pps.length>0?t.pps[0]:[],a=t.width,s=t.height,u=t.sarRatio[0],c=t.sarRatio[1],l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a>>8&255,255&a,s>>8&255,255&s,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),f=new Uint8Array((n=(r=[1,i[1],i[2],i[3],255,225,i.length>>>8&255,255&i.length]).concat.apply(r,FD(i)).concat([1,o.length>>>8&255,255&o.length])).concat.apply(n,FD(o))),h=new Uint8Array([0,0,88,57,0,15,200,192,0,4,86,72]),d=e.sinf(t.encv),p=new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c]);return e.box(e.types.encv,l,e.box(e.types.avcC,f),e.box(e.types.btrt,h),d,e.box(e.types.pasp,p))}},{key:"schi",value:function(t){var n=new Uint8Array([]),r=e.tenc(t);return e.box(e.types.schi,n,r)}},{key:"tenc",value:function(t){var n=new Uint8Array([0,0,0,0,0,0,255&t.default_IsEncrypted,255&t.default_IV_size].concat(uO(t.default_KID)));return e.box(e.types.tenc,n)}},{key:"sinf",value:function(t){var n=new Uint8Array([]),r=new Uint8Array([t.data_format.charCodeAt(0),t.data_format.charCodeAt(1),t.data_format.charCodeAt(2),t.data_format.charCodeAt(3)]),i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),o=e.schi(t);return e.box(e.types.sinf,n,e.box(e.types.frma,r),e.box(e.types.schm,i),o)}},{key:"avc1hev1vvc1",value:function(t){var n,r;t.codecType===zD?(n=e.hvcC(t),r=e.types.hvc1):t.codecType===XD?(n=e.vvcC(t),r=e.types.bvc2):(n=e.avcC(t),r=e.types.avc1);var i=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n];return t.codecType===zD?i.push(e.box(e.types.fiel,new Uint8Array([1,0]))):t.sarRatio&&t.sarRatio.length>1&&i.push(e.pasp(t.sarRatio)),e.box.apply(e,[r].concat(i))}},{key:"avcC",value:function(t){var n,r,i,o=[],a=[];return t.sps.forEach((function(e){i=e.byteLength,o.push(i>>>8&255),o.push(255&i),o.push.apply(o,FD(e))})),t.pps.forEach((function(e){i=e.byteLength,a.push(i>>>8&255),a.push(255&i),a.push.apply(a,FD(e))})),e.box(e.types.avcC,new Uint8Array((n=(r=[1,o[3],o[4],o[5],255,224|t.sps.length]).concat.apply(r,o).concat([t.pps.length])).concat.apply(n,a)))}},{key:"vvcC",value:function(t){var n=t.vvcC;return e.box(e.types.bv2C,new Uint8Array(n))}},{key:"hvcC",value:function(t){var n=t.hvcC;if(n instanceof ArrayBuffer||n instanceof Uint8Array)return n;var r,i=t.vps,o=t.sps,a=t.pps;if(n){var s=n.generalProfileCompatibilityFlags,u=n.generalConstraintIndicatorFlags,c=(i.length&&1)+(o.length&&1)+(a.length&&1);r=[1,n.generalProfileSpace<<6|n.generalTierFlag<<5|n.generalProfileIdc,s>>>24,s>>>16,s>>>8,s,u[0],u[1],u[2],u[3],u[4],u[5],n.generalLevelIdc,240,0,252,252|n.chromaFormatIdc,248|n.bitDepthLumaMinus8,248|n.bitDepthChromaMinus8,0,0,n.numTemporalLayers<<3|n.temporalIdNested<<2|3,c];var l=function(e){var t;r.push(e.length>>8,e.length),(t=r).push.apply(t,FD(e))};i.length&&(r.push(160,0,i.length),i.forEach(l)),o.length&&(r.push(161,0,o.length),o.forEach(l)),a.length&&(r.push(162,0,a.length),a.forEach(l))}else r=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return e.box(e.types.hvcC,new Uint8Array(r))}},{key:"pasp",value:function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0!==t)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||UD(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),r=n[0],i=n[1];return e.box(e.types.pasp,new Uint8Array([r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i]))}},{key:"mp4a",value:function(t){return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),t.config.length?e.esds(t.config):void 0)}},{key:"esds",value:function(t){var n=t.length;return e.box(e.types.esds,new Uint8Array([0,0,0,0,3,23+n,0,0,0,4,15+n,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([n]).concat(t).concat([6,1,2])))}},{key:"mvex",value:function(t){return e.box.apply(e,[e.types.mvex].concat(FD(t.map((function(t){return e.trex(t.id)})))))}},{key:"trex",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trex1",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,2,0,0,0,0,0,0,1,0,0]))}},{key:"trex2",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,4,0,0,0,0,0,2,0,0,0]))}},{key:"moof",value:function(t){return e.box.apply(e,[e.types.moof,e.mfhd(t[0].samples?t[0].samples[0].gopId:0)].concat(FD(t.map((function(t){return e.traf(t)})))))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"traf",value:function(t){var n=e.tfhd(t.id),r=e.tfdt(t,t.baseMediaDecodeTime),i=0;if(t.isVideo&&t.videoSenc&&t.videoSenc.forEach((function(e){i+=8,e.subsamples&&e.subsamples.length&&(i+=2,i+=6*e.subsamples.length)})),t.videoSencLength=i,t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)){if(t.isVideoEncryption){if(t.isVideo){var o=e.saiz(t),a=e.saio(t),s=e.trun1(t),u=e.senc(t);return e.box(e.types.traf,n,r,o,a,s,u)}if(t.isAudioEncryption){var c=e.sbgp(),l=e.saiz(t),f=e.saio(t),h=e.senc(t),d=e.trun1(t);return e.box(e.types.traf,n,r,c,l,f,h,d)}var p=e.sbgp(),v=e.trun1(t);return e.box(e.types.traf,n,r,p,v)}if(t.isVideo){var g=e.trun1(t);return e.box(e.types.traf,n,r,g)}var y=e.sbgp(),m=e.saiz(t),_=e.saio(t),b=e.senc(t),T=e.trun1(t);return e.box(e.types.traf,n,r,y,m,_,b,T)}var k=e.sdtp(t);return e.box(e.types.traf,n,r,k,e.trun(t.samples,k.byteLength+76))}},{key:"sdtp",value:function(t){var n=new mO;return t.samples.forEach((function(e){n.write(new Uint8Array(t.isVideo?[e.keyframe?32:16]:[16]))})),e.box(e.types.sdtp,this.extension(0,0),n.buffer)}},{key:"trun1",value:function(t){var n=new mO,r=mO.writeUint32(t.samples.length),i=null;if(t.isVideo){var o=t.videoSencLength;i=mO.writeUint32(16*t.samples.length+o+149),!t.isVideoEncryption&&t.isAudioEncryption&&(i=mO.writeUint32(16*t.samples.length+92))}else{var a=12*t.samples.length+124;t.isAudioEncryption&&(a=12*t.samples.length+8*t.audioSenc.length+177),i=mO.writeUint32(a)}return t.samples.forEach((function(e){n.write(mO.writeUint32(e.duration)),n.write(mO.writeUint32(e.size)),n.write(mO.writeUint32(e.keyframe?33554432:65536)),t.isVideo&&n.write(mO.writeUint32(e.cts?e.cts:0))})),e.box(e.types.trun,this.extension(0,t.flags),r,i,n.buffer)}},{key:"senc",value:function(t){var n=new mO,r=t.samples.length,i=t.isVideo?16:8,o=t.isVideo?2:0,a=[],s=0;return t.isVideo?(a=t.videoSenc,s=t.videoSencLength):a=t.audioSenc,s=s||i*r,n.write(mO.writeUint32(16+s),e.types.senc,this.extension(0,o)),n.write(mO.writeUint32(r)),a.forEach((function(e){for(var t=0;t<e.InitializationVector.length;t++)n.write(new Uint8Array([e.InitializationVector[t]]));e.subsamples&&e.subsamples.length&&(n.write(mO.writeUint16(e.subsamples.length)),e.subsamples.forEach((function(e){n.write(mO.writeUint16(e.BytesOfClearData)),n.write(mO.writeUint32(e.BytesOfProtectedData))})))})),n.buffer}},{key:"saio",value:function(t){var n=12*t.samples.length+141;!t.isVideo&&t.isAudioEncryption&&(n=149);var r=new Uint8Array([1,0,0,0,0,0,0,1,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n]);return e.box(e.types.saio,r)}},{key:"saiz",value:function(t){var n=t.samples.length,r=new Uint8Array([0,0,0,0,16,n>>24&255,n>>16&255,n>>8&255,255&n]);return e.box(e.types.saiz,r)}},{key:"sbgp",value:function(){var t=new Uint8Array([114,111,108,108,0,0,0,1,0,0,1,25,0,0,0,1]);return e.box(e.types.sbgp,this.extension(0,0),t)}},{key:"extension",value:function(e,t){return new Uint8Array([e,t>>16&255,t>>8&255,255&t])}},{key:"tfhd",value:function(t){return e.box(e.types.tfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"tfdt",value:function(t,n){var r=Math.floor(n/(_O+1)),i=Math.floor(n%(_O+1));return t.useEME&&(t.isVideoEncryption||t.isAudioEncryption)?e.box(e.types.tfdt,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])):e.box(e.types.tfdt,new Uint8Array([1,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i]))}},{key:"trun",value:function(t,n){var r=t.length,i=12+16*r;n+=8+i;var o=new Uint8Array(i);o.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var a=0;a<r;a++){var s=t[a],u=s.duration,c=s.size,l=s.flag,f=void 0===l?{}:l,h=s.cts,d=void 0===h?0:h;o.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,c>>>24&255,c>>>16&255,c>>>8&255,255&c,f.isLeading<<2|(null===f.dependsOn||void 0===f.dependsOn?1:f.dependsOn),f.isDependedOn<<6|f.hasRedundancy<<4|f.paddingValue<<1|(null===f.isNonSyncSample||void 0===f.isNonSyncSample?1:f.isNonSyncSample),61440&f.degradationPriority,15&f.degradationPriority,d>>>24&255,d>>>16&255,d>>>8&255,255&d],12+16*a)}return e.box(e.types.trun,o)}},{key:"moovMP4",value:function(t){return e.box.apply(e,[e.types.moov,e.mvhd(t[0].duration,t[0].timescale)].concat(FD(t.map((function(t){return e.trackMP4(t)})))))}},{key:"trackMP4",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.duration,t.width,t.height),e.mdiaMP4(t))}},{key:"mdiaMP4",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minfMP4(t))}},{key:"minfMP4",value:function(t){return e.box(e.types.minf,t.type===VD?e.VMHD:e.SMHD,e.DINF,e.stblMP4(t))}},{key:"stblMP4",value:function(t){var n=t.ext,r=[e.stsd(t),e.stts(n.stts),e.stsc(n.stsc),e.stsz(n.stsz),e.stco(n.stco)];return n.stss.length&&r.push(e.stss(n.stss)),n.ctts.length&&r.push(e.ctts(n.ctts)),e.box.apply(e,[e.types.stbl].concat(r))}},{key:"stts",value:function(t){var n=t.length,r=new Uint8Array(8*n),i=0;return t.forEach((function(e){var t=e.value,n=e.count;r.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8})),e.box(e.types.stts,rO(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stsc",value:function(t){var n=t.length,r=new Uint8Array(12*n),i=0;return t.forEach((function(e){var t=e.firstChunk,n=e.samplesPerChunk,o=e.sampleDescIndex;r.set([t>>24,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,o>>24,o>>16&255,o>>8&255,255&o],i),i+=12})),e.box(e.types.stsc,rO(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stsz",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach((function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4})),e.box(e.types.stsz,rO(new Uint8Array([0,0,0,0,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stco",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach((function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4})),e.box(e.types.stco,rO(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stss",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach((function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4})),e.box(e.types.stss,rO(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"ctts",value:function(t){var n=t.length,r=new Uint8Array(8*n),i=0;return t.forEach((function(e){var t=e.value,n=e.count;r.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8})),e.box(e.types.ctts,rO(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"styp",value:function(){return e.box(e.types.styp,new Uint8Array([109,115,100,104,0,0,0,0,109,115,100,104,109,115,105,120]))}},{key:"sidx",value:function(t){var n=t.timescale,r=t.samples[0].duration,i=r*t.samples.length,o=t.samples[0].sampleOffset*r,a=8;t.samples.forEach((function(e){a+=e.size}));var s=0;if(t.isVideo){var u,c=0;t.videoSenc&&(u=t.videoSenc),t.isVideo&&u.forEach((function(e){c+=8,e.subsamples&&e.subsamples.length&&(c+=2,c+=6*e.subsamples.length)})),t.videoSencLength=c,s=a+141+16*t.samples.length+c,t.useEME&&t.isAudioEncryption&&!t.isVideoEncryption&&(s=a+16*t.samples.length+84)}else s=a+116+12*t.samples.length,t.useEME&&t.isAudioEncryption&&(s=a+169+12*t.samples.length+8*t.audioSenc.length);var l=new Uint8Array([0,0,0,0,0,0,0,255&t.id,n>>24&255,n>>16&255,n>>8&255,255&n,o>>24&255,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,1,0,s>>16&255,s>>8&255,255&s,i>>24&255,i>>16&255,i>>8&255,255&i,144,0,0,0]);return e.box(e.types.sidx,l)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}}]),e}();$D(bO,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","edts","elst","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trex","tkhd","vmhd","smhd","ctts","stss","styp","pssh","sidx","sbgp","saiz","saio","senc","trun","encv","enca","sinf","btrt","frma","tenc","schm","schi","mehd","fiel","sdtp","bvc2","bv2C"].reduce((function(e,t){return e[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)],e}),Object.create(null))),$D(bO,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),$D(bO,"FTYPAVC1",bO.box(bO.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))),$D(bO,"FTYPHEV1",bO.box(bO.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49]))),$D(bO,"DINF",bO.box(bO.types.dinf,bO.box(bO.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))),$D(bO,"VMHD",bO.box(bO.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))),$D(bO,"SMHD",bO.box(bO.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0]))),$D(bO,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0])),$D(bO,"STTS",bO.box(bO.types.stts,bO.StblTable)),$D(bO,"STSC",bO.box(bO.types.stsc,bO.StblTable)),$D(bO,"STSZ",bO.box(bO.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]))),$D(bO,"STCO",bO.box(bO.types.stco,bO.StblTable));var TO=function(){function e(t,n){GD(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),e.disabled=n}return BD(e,[{key:"debug",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).debug.apply(t,[this._prefix].concat(r))}}},{key:"log",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).log.apply(t,[this._prefix].concat(r))}}},{key:"warn",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).warn.apply(t,[this._prefix].concat(r))}}},{key:"error",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).error.apply(t,[this._prefix].concat(r))}}},{key:"table",value:function(){var t;e.disabled||(console.group(this._prefix),(t=console).table.apply(t,arguments),console.groupEnd())}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();$D(TO,"disabled",!0);var kO=function(){function e(t,n,r){GD(this,e),this.videoTrack=t,this.audioTrack=n;var i=/Chrome\/([^.]+)/.exec(navigator.userAgent);this.forceFirstIDR=i&&Number(i[1])<50,this.log=new TO("FMP4Remuxer",!r||!r.openLog||!r.openLog)}return BD(e,[{key:"remux",value:function(){var e,t,n,r,i,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.videoTrack,u=this.audioTrack,c=s.exist(),l=u.exist(),f=[];return o&&(a&&a.initMerge?(c&&f.push(this.videoTrack),l&&f.push(this.audioTrack),n=bO.initSegment(f)):(c&&(e=bO.initSegment([this.videoTrack])),l&&(t=bO.initSegment([this.audioTrack])))),c&&s.hasSample()&&(r=this._remuxVideo()),l&&u.hasSample()&&(i=this._remuxAudio()),s.samples=[],u.samples=[],{initSegment:n,videoInitSegment:e,audioInitSegment:t,videoSegment:r,audioSegment:i}}},{key:"_remuxVideo",value:function(){var e=this.videoTrack;this.forceFirstIDR&&(e.samples[0].flag={dependsOn:2,isNonSyncSample:0});var t=e.samples,n=0;t.forEach((function(e){n+=e.units.reduce((function(e,t){return e+t.byteLength}),0),n+=4*e.units.length}));for(var r,i=new Uint8Array(n),o=new DataView(i.buffer),a=function(e,n){n=t[s];var a=0;n.units.forEach((function(t){o.setUint32(e,t.byteLength),e+=4,i.set(t,e),e+=t.byteLength,a+=4+t.byteLength})),n.size=a,c=e,r=n},s=0,u=t.length,c=0;s<u;s++)a(c,r);var l=bO.mdat(i);return rO(bO.moof([e]),l)}},{key:"_remuxAudio",value:function(){var e=this.audioTrack,t=new Uint8Array(e.samples.reduce((function(e,t){return e+t.size}),0));e.samples.reduce((function(e,n){return t.set(n.data,e),e+n.size}),0);var n=bO.mdat(t);return rO(bO.moof([e]),n)}},{key:"reset",value:function(){this.videoTrack.reset(),this.audioTrack.reset()}}]),e}();class SO{static create(...e){return new this(...e)}mixIn(e){return Object.assign(this,e)}clone(){const e=new this.constructor;return Object.assign(e,this),e}}class wO extends SO{constructor(e=[],t=4*e.length){super();let n=e;if(n instanceof ArrayBuffer&&(n=new Uint8Array(n)),(n instanceof Int8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array)&&(n=new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),n instanceof Uint8Array){const e=n.byteLength,t=[];for(let r=0;r<e;r+=1)t[r>>>2]|=n[r]<<24-r%4*8;this.words=t,this.sigBytes=e}else this.words=e,this.sigBytes=t}static random(e){const t=[],n=e=>{let t=e,n=987654321;const r=4294967295;return()=>{n=36969*(65535&n)+(n>>16)&r,t=18e3*(65535&t)+(t>>16)&r;let e=(n<<16)+t&r;return e/=4294967296,e+=.5,e*(Math.random()>.5?1:-1)}};for(let r,i=0;i<e;i+=4){const e=n(4294967296*(r||Math.random()));r=987654071*e(),t.push(4294967296*e()|0)}return new wO(t,e)}toString(e=RO){return e.stringify(this)}concat(e){const t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(let e=0;e<i;e+=1){const i=n[e>>>2]>>>24-e%4*8&255;t[r+e>>>2]|=i<<24-(r+e)%4*8}else for(let e=0;e<i;e+=4)t[r+e>>>2]=n[e>>>2];return this.sigBytes+=i,this}clamp(){const{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){const e=super.clone.call(this);return e.words=this.words.slice(0),e}}const RO={stringify(e){const{words:t,sigBytes:n}=e,r=[];for(let e=0;e<n;e+=1){const n=t[e>>>2]>>>24-e%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse(e){const t=e.length,n=[];for(let r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new wO(n,t/2)}},MO={stringify(e){const{words:t,sigBytes:n}=e,r=[];for(let e=0;e<n;e+=1){const n=t[e>>>2]>>>24-e%4*8&255;r.push(String.fromCharCode(n))}return r.join("")},parse(e){const t=e.length,n=[];for(let r=0;r<t;r+=1)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new wO(n,t)}},xO={stringify(e){try{return decodeURIComponent(escape(MO.stringify(e)))}catch{throw new Error("Malformed UTF-8 data")}},parse:e=>MO.parse(unescape(encodeURIComponent(e)))};class PO extends SO{constructor(){super(),this._minBufferSize=0}reset(){this._data=new wO,this._nDataBytes=0}_append(e){let t=e;"string"==typeof t&&(t=xO.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let t;const{_data:n,blockSize:r}=this,i=n.words,o=n.sigBytes;let a=o/(4*r);a=e?Math.ceil(a):Math.max((0|a)-this._minBufferSize,0);const s=a*r,u=Math.min(4*s,o);if(s){for(let e=0;e<s;e+=r)this._doProcessBlock(i,e);t=i.splice(0,s),n.sigBytes-=u}return new wO(t,u)}clone(){const e=super.clone.call(this);return e._data=this._data.clone(),e}}class EO extends PO{constructor(e){super(),this.blockSize=16,this.cfg=Object.assign(new SO,e),this.reset()}static _createHelper(e){return(t,n)=>new e(n).finalize(t)}static _createHmacHelper(e){return(t,n)=>new DO(e,n).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){return e&&this._append(e),this._doFinalize()}}class DO extends SO{constructor(e,t){super();const n=new e;this._hasher=n;let r=t;"string"==typeof r&&(r=xO.parse(r));const i=n.blockSize,o=4*i;r.sigBytes>o&&(r=n.finalize(t)),r.clamp();const a=r.clone();this._oKey=a;const s=r.clone();this._iKey=s;const u=a.words,c=s.words;for(let e=0;e<i;e+=1)u[e]^=1549556828,c[e]^=909522486;a.sigBytes=o,s.sigBytes=o,this.reset()}reset(){const e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){const t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}}const OO={stringify(e){const{words:t,sigBytes:n}=e,r=this._map;e.clamp();const i=[];for(let e=0;e<n;e+=3){const o=(t[e>>>2]>>>24-e%4*8&255)<<16|(t[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|t[e+2>>>2]>>>24-(e+2)%4*8&255;for(let t=0;t<4&&e+.75*t<n;t+=1)i.push(r.charAt(o>>>6*(3-t)&63))}const o=r.charAt(64);if(o)for(;i.length%4;)i.push(o);return i.join("")},parse(e){let t=e.length;const n=this._map;let r=this._reverseMap;if(!r){this._reverseMap=[],r=this._reverseMap;for(let e=0;e<n.length;e+=1)r[n.charCodeAt(e)]=e}const i=n.charAt(64);if(i){const n=e.indexOf(i);-1!==n&&(t=n)}return((e,t,n)=>{const r=[];let i=0;for(let o=0;o<t;o+=1)if(o%4){const t=n[e.charCodeAt(o-1)]<<o%4*2|n[e.charCodeAt(o)]>>>6-o%4*2;r[i>>>2]|=t<<24-i%4*8,i+=1}return wO.create(r,i)})(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},IO=[];for(let e=0;e<64;e+=1)IO[e]=4294967296*Math.abs(Math.sin(e+1))|0;const AO=(e,t,n,r,i,o,a)=>{const s=e+(t&n|~t&r)+i+a;return(s<<o|s>>>32-o)+t},LO=(e,t,n,r,i,o,a)=>{const s=e+(t&r|n&~r)+i+a;return(s<<o|s>>>32-o)+t},CO=(e,t,n,r,i,o,a)=>{const s=e+(t^n^r)+i+a;return(s<<o|s>>>32-o)+t},GO=(e,t,n,r,i,o,a)=>{const s=e+(n^(t|~r))+i+a;return(s<<o|s>>>32-o)+t};class NO extends EO{_doReset(){this._hash=new wO([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(e,t){const n=e;for(let r=0;r<16;r+=1){const i=t+r,o=e[i];n[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}const r=this._hash.words,i=n[t+0],o=n[t+1],a=n[t+2],s=n[t+3],u=n[t+4],c=n[t+5],l=n[t+6],f=n[t+7],h=n[t+8],d=n[t+9],p=n[t+10],v=n[t+11],g=n[t+12],y=n[t+13],m=n[t+14],_=n[t+15];let b=r[0],T=r[1],k=r[2],S=r[3];b=AO(b,T,k,S,i,7,IO[0]),S=AO(S,b,T,k,o,12,IO[1]),k=AO(k,S,b,T,a,17,IO[2]),T=AO(T,k,S,b,s,22,IO[3]),b=AO(b,T,k,S,u,7,IO[4]),S=AO(S,b,T,k,c,12,IO[5]),k=AO(k,S,b,T,l,17,IO[6]),T=AO(T,k,S,b,f,22,IO[7]),b=AO(b,T,k,S,h,7,IO[8]),S=AO(S,b,T,k,d,12,IO[9]),k=AO(k,S,b,T,p,17,IO[10]),T=AO(T,k,S,b,v,22,IO[11]),b=AO(b,T,k,S,g,7,IO[12]),S=AO(S,b,T,k,y,12,IO[13]),k=AO(k,S,b,T,m,17,IO[14]),T=AO(T,k,S,b,_,22,IO[15]),b=LO(b,T,k,S,o,5,IO[16]),S=LO(S,b,T,k,l,9,IO[17]),k=LO(k,S,b,T,v,14,IO[18]),T=LO(T,k,S,b,i,20,IO[19]),b=LO(b,T,k,S,c,5,IO[20]),S=LO(S,b,T,k,p,9,IO[21]),k=LO(k,S,b,T,_,14,IO[22]),T=LO(T,k,S,b,u,20,IO[23]),b=LO(b,T,k,S,d,5,IO[24]),S=LO(S,b,T,k,m,9,IO[25]),k=LO(k,S,b,T,s,14,IO[26]),T=LO(T,k,S,b,h,20,IO[27]),b=LO(b,T,k,S,y,5,IO[28]),S=LO(S,b,T,k,a,9,IO[29]),k=LO(k,S,b,T,f,14,IO[30]),T=LO(T,k,S,b,g,20,IO[31]),b=CO(b,T,k,S,c,4,IO[32]),S=CO(S,b,T,k,h,11,IO[33]),k=CO(k,S,b,T,v,16,IO[34]),T=CO(T,k,S,b,m,23,IO[35]),b=CO(b,T,k,S,o,4,IO[36]),S=CO(S,b,T,k,u,11,IO[37]),k=CO(k,S,b,T,f,16,IO[38]),T=CO(T,k,S,b,p,23,IO[39]),b=CO(b,T,k,S,y,4,IO[40]),S=CO(S,b,T,k,i,11,IO[41]),k=CO(k,S,b,T,s,16,IO[42]),T=CO(T,k,S,b,l,23,IO[43]),b=CO(b,T,k,S,d,4,IO[44]),S=CO(S,b,T,k,g,11,IO[45]),k=CO(k,S,b,T,_,16,IO[46]),T=CO(T,k,S,b,a,23,IO[47]),b=GO(b,T,k,S,i,6,IO[48]),S=GO(S,b,T,k,f,10,IO[49]),k=GO(k,S,b,T,m,15,IO[50]),T=GO(T,k,S,b,c,21,IO[51]),b=GO(b,T,k,S,g,6,IO[52]),S=GO(S,b,T,k,s,10,IO[53]),k=GO(k,S,b,T,p,15,IO[54]),T=GO(T,k,S,b,o,21,IO[55]),b=GO(b,T,k,S,h,6,IO[56]),S=GO(S,b,T,k,_,10,IO[57]),k=GO(k,S,b,T,l,15,IO[58]),T=GO(T,k,S,b,y,21,IO[59]),b=GO(b,T,k,S,u,6,IO[60]),S=GO(S,b,T,k,v,10,IO[61]),k=GO(k,S,b,T,a,15,IO[62]),T=GO(T,k,S,b,d,21,IO[63]),r[0]=r[0]+b|0,r[1]=r[1]+T|0,r[2]=r[2]+k|0,r[3]=r[3]+S|0}_doFinalize(){const e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32;const i=Math.floor(n/4294967296),o=n;t[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process();const a=this._hash,s=a.words;for(let e=0;e<4;e+=1){const t=s[e];s[e]=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8)}return a}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}class BO extends SO{constructor(e){super(),this.cfg=Object.assign(new SO,{keySize:4,hasher:NO,iterations:1},e)}compute(e,t){let n;const{cfg:r}=this,i=r.hasher.create(),o=wO.create(),a=o.words,{keySize:s,iterations:u}=r;for(;a.length<s;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(let e=1;e<u;e+=1)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*s,o}}class $O extends PO{constructor(e,t,n){super(),this.cfg=Object.assign(new SO,n),this._xformMode=e,this._key=t,this.reset()}static createEncryptor(e,t){return this.create(this._ENC_XFORM_MODE,e,t)}static createDecryptor(e,t){return this.create(this._DEC_XFORM_MODE,e,t)}static _createHelper(e){const t=e=>"string"==typeof e?WO:KO;return{encrypt:(n,r,i)=>t(r).encrypt(e,n,r,i),decrypt:(n,r,i)=>t(r).decrypt(e,n,r,i)}}reset(){super.reset.call(this),this._doReset()}process(e){return this._append(e),this._process()}finalize(e){return e&&this._append(e),this._doFinalize()}}$O._ENC_XFORM_MODE=1,$O._DEC_XFORM_MODE=2,$O.keySize=4,$O.ivSize=4;class FO extends SO{constructor(e,t){super(),this._cipher=e,this._iv=t}static createEncryptor(e,t){return this.Encryptor.create(e,t)}static createDecryptor(e,t){return this.Decryptor.create(e,t)}}function UO(e,t,n){const r=e;let i;const o=this._iv;o?(i=o,this._iv=void 0):i=this._prevBlock;for(let e=0;e<n;e+=1)r[t+e]^=i[e]}class HO extends FO{}HO.Encryptor=class extends HO{processBlock(e,t){const n=this._cipher,{blockSize:r}=n;UO.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}},HO.Decryptor=class extends HO{processBlock(e,t){const n=this._cipher,{blockSize:r}=n,i=e.slice(t,t+r);n.decryptBlock(e,t),UO.call(this,e,t,r),this._prevBlock=i}};const jO={pad(e,t){const n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[];for(let e=0;e<r;e+=4)o.push(i);const a=wO.create(o,r);e.concat(a)},unpad(e){const t=e,n=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=n}};class VO extends $O{constructor(e,t,n){super(e,t,Object.assign({mode:HO,padding:jO},n)),this.blockSize=4}reset(){let e;super.reset.call(this);const{cfg:t}=this,{iv:n,mode:r}=t;this._xformMode===this.constructor._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e}_doProcessBlock(e,t){this._mode.processBlock(e,t)}_doFinalize(){let e;const{padding:t}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e}}class zO extends SO{constructor(e){super(),this.mixIn(e)}toString(e){return(e||this.formatter).stringify(this)}}const XO={stringify(e){let t;const{ciphertext:n,salt:r}=e;return t=r?wO.create([1398893684,1701076831]).concat(r).concat(n):n,t.toString(OO)},parse(e){let t;const n=OO.parse(e),r=n.words;return 1398893684===r[0]&&1701076831===r[1]&&(t=wO.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),zO.create({ciphertext:n,salt:t})}};class KO extends SO{static encrypt(e,t,n,r){const i=Object.assign(new SO,this.cfg,r),o=e.createEncryptor(n,i),a=o.finalize(t),s=o.cfg;return zO.create({ciphertext:a,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:o.blockSize,formatter:i.format})}static decrypt(e,t,n,r){let i=t;const o=Object.assign(new SO,this.cfg,r);return i=this._parse(i,o.format),e.createDecryptor(n,o).finalize(i.ciphertext)}static _parse(e,t){return"string"==typeof e?t.parse(e,this):e}}KO.cfg=Object.assign(new SO,{format:XO});const QO={execute(e,t,n,r){let i=r;i||(i=wO.random(8));const o=BO.create({keySize:t+n}).compute(e,i),a=wO.create(o.words.slice(t),4*n);return o.sigBytes=4*t,zO.create({key:o,iv:a,salt:i})}};class WO extends KO{static encrypt(e,t,n,r){const i=Object.assign(new SO,this.cfg,r),o=i.kdf.execute(n,e.keySize,e.ivSize);i.iv=o.iv;const a=KO.encrypt.call(this,e,t,o.key,i);return a.mixIn(o),a}static decrypt(e,t,n,r){let i=t;const o=Object.assign(new SO,this.cfg,r);i=this._parse(i,o.format);const a=o.kdf.execute(n,e.keySize,e.ivSize,i.salt);return o.iv=a.iv,KO.decrypt.call(this,e,i,a.key,o)}}WO.cfg=Object.assign(KO.cfg,{kdf:QO});const qO=[],YO=[],JO=[],ZO=[],eI=[],tI=[],nI=[],rI=[],iI=[],oI=[],aI=[];for(let e=0;e<256;e+=1)aI[e]=e<128?e<<1:e<<1^283;let sI=0,uI=0;for(let e=0;e<256;e+=1){let e=uI^uI<<1^uI<<2^uI<<3^uI<<4;e=e>>>8^255&e^99,qO[sI]=e,YO[e]=sI;const t=aI[sI],n=aI[t],r=aI[n];let i=257*aI[e]^16843008*e;JO[sI]=i<<24|i>>>8,ZO[sI]=i<<16|i>>>16,eI[sI]=i<<8|i>>>24,tI[sI]=i,i=16843009*r^65537*n^257*t^16843008*sI,nI[e]=i<<24|i>>>8,rI[e]=i<<16|i>>>16,iI[e]=i<<8|i>>>24,oI[e]=i,sI?(sI=t^aI[aI[aI[r^t]]],uI^=aI[aI[uI]]):(uI=1,sI=uI)}const cI=[0,1,2,4,8,16,32,64,128,27,54];class lI extends VO{_doReset(){let e;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;const t=this._keyPriorReset,n=t.words,r=t.sigBytes/4;this._nRounds=r+6;const i=4*(this._nRounds+1);this._keySchedule=[];const o=this._keySchedule;for(let t=0;t<i;t+=1)t<r?o[t]=n[t]:(e=o[t-1],t%r?r>6&&t%r==4&&(e=qO[e>>>24]<<24|qO[e>>>16&255]<<16|qO[e>>>8&255]<<8|qO[255&e]):(e=e<<8|e>>>24,e=qO[e>>>24]<<24|qO[e>>>16&255]<<16|qO[e>>>8&255]<<8|qO[255&e],e^=cI[t/r|0]<<24),o[t]=o[t-r]^e);this._invKeySchedule=[];const a=this._invKeySchedule;for(let t=0;t<i;t+=1){const n=i-t;e=t%4?o[n]:o[n-4],a[t]=t<4||n<=4?e:nI[qO[e>>>24]]^rI[qO[e>>>16&255]]^iI[qO[e>>>8&255]]^oI[qO[255&e]]}}encryptBlock(e,t){this._doCryptBlock(e,t,this._keySchedule,JO,ZO,eI,tI,qO)}decryptBlock(e,t){const n=e;let r=n[t+1];n[t+1]=n[t+3],n[t+3]=r,this._doCryptBlock(n,t,this._invKeySchedule,nI,rI,iI,oI,YO),r=n[t+1],n[t+1]=n[t+3],n[t+3]=r}_doCryptBlock(e,t,n,r,i,o,a,s){const u=e,c=this._nRounds;let l=u[t]^n[0],f=u[t+1]^n[1],h=u[t+2]^n[2],d=u[t+3]^n[3],p=4;for(let e=1;e<c;e+=1){const e=r[l>>>24]^i[f>>>16&255]^o[h>>>8&255]^a[255&d]^n[p];p+=1;const t=r[f>>>24]^i[h>>>16&255]^o[d>>>8&255]^a[255&l]^n[p];p+=1;const s=r[h>>>24]^i[d>>>16&255]^o[l>>>8&255]^a[255&f]^n[p];p+=1;const u=r[d>>>24]^i[l>>>16&255]^o[f>>>8&255]^a[255&h]^n[p];p+=1,l=e,f=t,h=s,d=u}const v=(s[l>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^n[p];p+=1;const g=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^n[p];p+=1;const y=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&f])^n[p];p+=1;const m=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^n[p];p+=1,u[t]=v,u[t+1]=g,u[t+2]=y,u[t+3]=m}}lI.keySize=8;const fI=VO._createHelper(lI);class hI extends FO{}hI.Encryptor=class extends hI{processBlock(e,t){const n=e,r=this._cipher,{blockSize:i}=r,o=this._iv;let a=this._counter;o&&(this._counter=o.slice(0),a=this._counter,this._iv=void 0);const s=a.slice(0);r.encryptBlock(s,0),a[i-1]=a[i-1]+1|0;for(let e=0;e<i;e+=1)n[t+e]^=s[e]}},hI.Decryptor=hI.Encryptor;const dI={pad(){},unpad(){}};var pI={decryptWordArray:function(e,t,n){var r=RO.parse(t),i=RO.parse(function(e){var t="";if(e.forEach((function(e){t+=function(e){return("0"+Number(e).toString(16)).slice(-2).toUpperCase()}(e)})),t.length<=32)for(var n=32-t.length,r=0;r<n;r++)t+="0";return t}(n)),o=wO.create(new Uint8Array(e)),a=fI.decrypt(zO.create({ciphertext:o}),r,{iv:i,mode:hI,padding:dI});return pI.wordArrayToUint8Array(a)},wordArrayToUint8Array:function(e){for(var t=e.sigBytes,n=e.words,r=new Uint8Array(t),i=0,o=0;i!==t;){var a=n[o++];if(r[i++]=(4278190080&a)>>>24,i===t||(r[i++]=(16711680&a)>>>16,i===t)||(r[i++]=(65280&a)>>>8,i===t))break;r[i++]=255&a}return r},decoderAESCTRData:function(e,t,n){if(e.videoSenc){var r=e.kidValue,i=e.videoSenc;e.samples.forEach((function(t,o){var a=i[o],s=t.data,u=[],c=[],l=a.InitializationVector;if(a.subsamples&&a.subsamples.length)a.subsamples.forEach((function(e){var t=e.BytesOfClearData+e.BytesOfProtectedData,n=s.slice(0,t);u.push(n.slice(0,e.BytesOfClearData)),c.push(n.slice(e.BytesOfClearData)),s=s.slice(t)}));else{var f=t.size;u.push(s.slice(0,0)),c.push(s.slice(0,f)),s=s.slice(f)}var h=new mO;h.write.apply(h,c);var d=n?n(h.buffer,r,l):pI.decryptWordArray(h.buffer,r,l),p=new mO;u.forEach((function(e,t){var n=c[t].length,r=d.slice(0,n);p.write(e),p.write(r),d=d.slice(n)})),e.samples[o].data=p.buffer}))}if(t.audioSenc){var o=t.kidValue,a=t.audioSenc;t.samples.forEach((function(e,r){var i=a[r],s=n?n(e.data,o,i.InitializationVector):pI.decryptWordArray(e.data,o,i.InitializationVector);t.samples[r].data=s}))}}},vI=function(){function e(t,n,r,i){var o=this;GD(this,e),$D(this,"_videoSamples",[]),$D(this,"_audioSamples",[]),$D(this,"_lastRemainBuffer",[]),$D(this,"_lastRemainBufferStartPos",0),this.videoTrack=new KD,this.audioTrack=new QD,this.metadataTrack=r||new YD,this.log=new TO("MP4Demuxer",!i||!i.openLog||!i.openLog),t&&t.forEach((function(e){var t;(t=o._videoSamples).push.apply(t,FD(e.frames))})),n&&n.forEach((function(e){var t;(t=o._audioSamples).push.apply(t,FD(e.frames))}))}return BD(e,[{key:"parseSamples",value:function(e){if(!e)throw new Error("moov is required");if(!this.videoTrack.codec&&!this.audioTrack.codec&&(hO.moovToTrack(e,this.videoTrack,this.audioTrack),this.videoSenc=this.videoTrack.videoSenc,this.audioSenc=this.audioTrack.audioSenc),!this._audioSamples.length&&!this._videoSamples.length){var t=hO.moovToSamples(e);if(!t)throw new Error("cannot parse samples from moov box");this._videoSamples=t.videoSamples||[],this._audioSamples=t.audioSamples||[]}}},{key:"demux",value:function(e,t,n,r,i){this.parseSamples(i);var o,a,s,u=this.videoTrack,c=this.audioTrack;if(u.samples=[],c.samples=[],n){for(var l,f=0,h=n[0],d=n[1];h<=d;h++){if(!(o=this._videoSamples[h]))throw new Error("cannot found video frame #".concat(h));s=o.offset-t,a=e.subarray(s,s+o.size),(l=new WD(o.pts||o.dts,o.dts)).duration=o.duration,l.gopId=o.gopId,o.keyframe&&l.setToKeyframe();for(var p=0,v=a.length-1;p<v;)f=aO(a,p),p+=4,l.units.push(a.subarray(p,p+f)),p+=f;u.samples.push(l)}u.baseMediaDecodeTime=u.samples[0].dts}if(r){for(var g=r[0],y=r[1];g<=y;g++){if(!(o=this._audioSamples[g]))throw new Error("cannot found video frame #".concat(g));s=o.offset-t,a=e.subarray(s,s+o.size),c.samples.push(new qD(o.dts,a,o.duration))}c.baseMediaDecodeTime=c.samples[0].dts}return{videoTrack:u,audioTrack:c,metadataTrack:this.metadataTrack}}},{key:"demuxPart",value:function(e,t,n,r,i,o,a,s){if(this.parseSamples(i),this.videoTrack.useEME=o,this.audioTrack.useEME=o,this._lastRemainBuffer&&this._lastRemainBuffer.byteLength>0&&t>this._lastRemainBufferStartPos&&t<=this._lastRemainBufferStartPos+this._lastRemainBuffer.byteLength)for(var u=0;u<20;)try{var c=this._lastRemainBuffer.subarray(0,t-this._lastRemainBufferStartPos),l=new Uint8Array(e.byteLength+c.byteLength);l.set(c,0),l.set(new Uint8Array(e),c.byteLength),e=l,t-=c.byteLength,this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0;break}catch(e){if(!(u<20))throw new Error("new Uint8Array error:,"+e.errorMessage);u++}var f=this.videoTrack,h=this.audioTrack;f.samples=[],h.samples=[],f.videoSenc=null,h.audioSenc=null;var d,p,v,g=0,y=0;if(this._videoSamples.length>0&&n.length>0){for(var m,_=e.byteLength+t,b=n[0];b<=n[1];b++){if(!(d=this._videoSamples[b]))throw new Error("cannot found video frame #".concat(b));d.offset>=t&&d.offset+d.size<=_&&(g=(v=d.offset-t)+d.size,p=e.subarray(v,g),(m=new WD(d.pts||d.dts,d.dts)).duration=d.duration,m.gopId=d.gopId,m.sampleOffset=d.index,d.keyframe&&m.setToKeyframe(),m.data=p,m.size=d.size,f.samples.push(m))}f.samples.length>0&&(f.gopId=f.samples[0].gopId,f.baseMediaDecodeTime=f.samples[0].dts,f.startPts=f.samples[0].pts/f.timescale,f.endPts=f.samples[f.samples.length-1].pts/f.timescale,this.videoSenc&&(f.videoSenc=this.videoSenc.slice(f.samples[0].sampleOffset,f.samples[0].sampleOffset+f.samples.length),f.kidValue=a))}if(this._audioSamples.length>0&&r.length>0){for(var T=r[0];T<=r[1];T++){if(!(d=this._audioSamples[T]))throw new Error("cannot found video frame #".concat(T));d.offset>=t&&d.offset+d.size<=e.byteLength+t&&(y=(v=d.offset-t)+d.size,p=e.subarray(v,y),h.samples.push(new qD(d.dts,p,d.duration,d.index)))}h.samples.length>0&&(h.gopId=h.samples[0].gopId||f.gopId,h.baseMediaDecodeTime=h.samples[0].dts,h.startPts=h.samples[0].pts/h.timescale,h.endPts=h.samples[h.samples.length-1].pts/h.timescale,this.audioSenc&&(h.audioSenc=this.audioSenc.slice(h.samples[0].sampleOffset,h.samples[0].sampleOffset+h.samples.length),h.kidValue=a))}this.decoderData(f,h,s);for(var k=0,S=0;S<f.samples.length;S++)for(var w=0,R=f.samples[S].data,M=R.length-1;w<M;)k=aO(R,w),w+=4,f.samples[S].units.push(R.subarray(w,w+k)),w+=k;return this._lastRemainBuffer=e.subarray(Math.max(g,y)),this._lastRemainBuffer.byteLength>0?this._lastRemainBufferStartPos=t+e.byteLength-this._lastRemainBuffer.byteLength:this._lastRemainBufferStartPos=0,{videoTrack:f,audioTrack:h,metadataTrack:this.metadataTrack}}},{key:"reset",value:function(){this._videoSamples=[],this._audioSamples=[],this._lastRemainBuffer=null,this._lastRemainBufferStartPos=0,this.videoTrack.reset(),this.audioTrack.reset(),this.metadataTrack.reset()}},{key:"decoderData",value:function(e,t,n){e.useEME||t.useEME||pI.decoderAESCTRData(e,t,n)}}],[{key:"probe",value:function(e){return hO.probe(e)}}]),e}(),gI=AE((function e(t,n){IE(this,e),this.type="file",this.message=t,this.data=n})),yI=function(){function e(){IE(this,e),LE(this,"_data",Object.create(null))}return AE(e,[{key:"set",value:function(e,t){this._data[e]=t}},{key:"get",value:function(e){return this._data[e]}},{key:"clear",value:function(){this._data=Object.create(null)}}]),e}();function mI(e,t){var n=t.segmentDuration,r=t.fixEditListOffset,i=e.trak;if(i&&i.length){var o=i.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),a=i.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)}));if(o||a){var s,u=[],c=[];return o&&(s=(u=_I("video",o,n,r)).map((function(e){return e.duration}))),a&&(c=_I("audio",a,n,r,s)),{videoSegments:u,audioSegments:c}}}}function _I(e,t,n,r){var i,o,a,s,u,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],l=null===(i=t.mdia)||void 0===i||null===(o=i.minf)||void 0===o?void 0:o.stbl;if(!l)return[];var f=0,h=null===(a=t.edts)||void 0===a||null===(s=a.elst)||void 0===s?void 0:s.entries;if(r&&Array.isArray(h)&&h.length>0){var d=h[0].media_time;d>0&&(f=d)}var p=null===(u=t.mdia.mdhd)||void 0===u?void 0:u.timescale,v=l.stts,g=l.stsc,y=l.stsz,m=l.stco,_=l.stss,b=l.ctts;if(!(p&&v&&g&&y&&m)||"video"===e&&!_)return[];var T,k,S=[],w=[],R=[],M=[],x=[],P=g.entries,E=m.entries,D=y.entrySizes,O=null==_?void 0:_.entries,I=null==b?void 0:b.entries;I&&(T=[],I.forEach((function(e){for(var t=e.count,n=e.offset,r=0;r<t;r++)T.push(n)}))),O&&(k={},O.forEach((function(e){k[e-1]=!0})));var A,L,C=0,G=0,N=0,B=0,$=P[0].samplesPerChunk,F=P[1]?P[1].firstChunk-1:1/0,U=0,H=-1;v.entries.forEach((function(e){var t=e.count,n=e.delta;L=n;for(var r=0;r<t;r++){if(A={dts:U,duration:L,size:D[C]||y.sampleSize,offset:E[G]+B,index:C},O&&(A.keyframe=k[C],A.keyframe?(H++,w.push([A]),R.push(A.duration)):(w[w.length-1].push(A),R[w.length-1]+=A.duration),A.gopId=H),T&&C<T.length&&(A.pts=U+T[C]-f),0===f&&0===C&&(A.pts=0),void 0===A.pts&&(A.pts=A.dts),A.keyframe?M.push(A.pts):A.pts<M[w.length-1]&&(M[w.length-1]=A.pts),A.keyframe)x.push(A.index);else if(w.length>0&&void 0!==x[w.length-1]){var i,o=null===(i=S[x[w.length-1]])||void 0===i?void 0:i.pts;void 0!==o&&A.pts>o&&(x[w.length-1]=A.index)}S.push(A),U+=n,++C<$?B+=A.size:(G++,B=0,G>=F&&(N++,F=P[N+1]?P[N+1].firstChunk-1:1/0),$+=P[N].samplesPerChunk)}}));var j=S.length;if(j&&(!_||S[0].keyframe)){var V,z=[],X=[],K=0,Q=0,W=0,q=0,Y=function(e,t,n){V=X[X.length-1],W=M[t],q=S[x[n]],0===z.length&&(e=(q.pts+q.duration-W)/p),z.push({index:z.length,startTime:W/p,endTime:(q.pts+q.duration)/p,duration:e,range:[X[0].offset,V.offset+V.size-1],frames:X}),K=0,X=[]},J=0;if(_)for(var Z=n*p,ee=0,te=w.length;ee<te;ee++){var ne;K+=R[ee],(ne=X).push.apply(ne,$E(w[ee])),ee+1<te?(0===ee||K>Z)&&(Y(K/p,J,ee),J=ee+1):(Y(K/p,J,ee),J=ee+1)}else{M=[],x=[];for(var re,ie=c[0]||n,oe=0;oe<j;oe++){var ae=S[oe],se=S[oe+1],ue=oe===j-1;X.push(ae),K+=ae.duration;var ce=re||K/p;re=(se?K+se.duration:0)/p,(ue||re+Q>=ie)&&(Q+=re-ie,M.push(X[0].pts),x.push(X[X.length-1].index),Y(ce,z.length,z.length),ie=c[z.length]||n)}}return z}}function bI(e){var t="",n="",r=0,i=0,o=0,a=0,s=0,u=0,c=0;e.mvhd&&(s=e.mvhd.duration/e.mvhd.timescale);var l=e.trak;if(l){var f,h,d,p,v,g,y,m,_,b,T,k,S,w,R,M,x,P=l.find((function(e){var t,n;return"vide"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),E=l.find((function(e){var t,n;return"soun"===(null===(t=e.mdia)||void 0===t||null===(n=t.hdlr)||void 0===n?void 0:n.handlerType)})),D=null;return P&&(D=null===(h=P.mdia)||void 0===h||null===(d=h.minf)||void 0===d||null===(p=d.stbl)||void 0===p?void 0:p.stsd.entries[0])&&(r=D.width,i=D.height,u=null===(v=P.mdia)||void 0===v||null===(g=v.mdhd)||void 0===g?void 0:g.timescale,t=null===(y=D.avcC||D.hvcC||D.vvcC)||void 0===y?void 0:y.codec,"encv"===D.type&&(f=null===(m=D.sinf)||void 0===m||null===(_=m.schi)||void 0===_?void 0:_.tenc.default_KID)),E&&(D=null===(b=E.mdia)||void 0===b||null===(T=b.minf)||void 0===T||null===(k=T.stbl)||void 0===k?void 0:k.stsd.entries[0])&&(o=D.channelCount,a=D.sampleRate,n=null===(S=D.esds)||void 0===S?void 0:S.codec,c=null===(w=E.mdia)||void 0===w||null===(R=w.mdhd)||void 0===R?void 0:R.timescale,"enca"===D.type&&(f=f||(null===(M=D.sinf)||void 0===M||null===(x=M.schi)||void 0===x?void 0:x.tenc.default_KID))),{kid:f?f.join(""):null,videoCodec:t,audioCodec:n,width:r,height:i,videoTimescale:u,audioChannelCount:o,audioSampleRate:a,duration:s,audioTimescale:c,moov:e}}}function TI(e){return"number"==typeof e&&!Number.isNaN(e)}var kI=["vid","cache"],SI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GE(e,t)}(r,e);var t,n=function(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=CE(e);if(t){var i=CE(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return NE(e)}(this,n)}}(r);function r(e){var t;IE(this,r),LE(NE(t=n.call(this)),"vid",""),LE(NE(t),"url",""),LE(NE(t),"meta",{}),LE(NE(t),"downloadInfo",[]),LE(NE(t),"videoSegments",[]),LE(NE(t),"audioSegments",[]),LE(NE(t),"cache",null),LE(NE(t),"_currentSegmentIndex",-1),LE(NE(t),"_currentLoadingSegmentIndex",-1),LE(NE(t),"buffer",void 0),LE(NE(t),"_error",void 0),LE(NE(t),"_transformError",(function(e){return e})),t._config=function(e){return"boolean"!=typeof e.fixEditListOffset&&delete e.fixEditListOffset,PE({vid:"",moovEnd:8e4,segmentDuration:2,maxDownloadInfoSize:30,responseType:"arraybuffer",fixEditListOffset:!0,cache:null},e)}(e);var i=t._config,o=i.vid,a=i.cache,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(i,kI);return t.cache=a||new yI,t.vid=o||s.url,t.url=s.url,s.transformError=t._transformError,t.logger=new hD("MP4Loader_"+t.vid),e.openLog&&hD.enable(),s.logger=t.logger,t._loader=new CD(s),t._loader.on(xD,(function(e){t.emit(xD,e)})),t}return AE(r,[{key:"isMetaLoaded",get:function(){return this.videoSegments.length||this.audioSegments.length}},{key:"setCurrentSegment",value:function(e){TI(e)&&(this._currentSegmentIndex=e)}},{key:"isLastSegment",value:function(e){var t,n;return!!TI(e)&&e>=((null===(t=this.videoSegments[this.videoSegments.length-1])||void 0===t?void 0:t.index)||(null===(n=this.audioSegments[this.audioSegments.length-1])||void 0===n?void 0:n.index)||0)}},{key:"isSegmentLoading",value:function(e){return e===this._currentLoadingSegmentIndex}},{key:"changeUrl",value:(t=OE(EE().mark((function e(t){var n,r,i,o=arguments;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:t,r=o.length>2?o[2]:void 0,i=o.length>3?o[3]:void 0,e.next=5,this.reset(i);case 5:t&&(this.url=t),n&&(this.vid=n),r&&(this._config.moovEnd=r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"getOrLoadMeta",value:function(){var e=OE(EE().mark((function e(t){return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isMetaLoaded){e.next=3;break}return e.next=3,this.loadMeta(t);case 3:return e.abrupt("return",this.meta);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadMetaProcess",value:function(){var e=OE(EE().mark((function e(t,n,r,i){var o,a,s,u,c=this;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=BE(n,2),a=o[0],s=o[1],this._error=!1,this.logger.debug("[loadMetaProcess start], range,",[a,s]),u=function(){var e=OE(EE().mark((function e(n,o,u,l){var f,h,d,p,v,g,y,m;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.meta&&null!=u&&u.range&&u.range.length>0&&u.range[1]>=s&&(o=!0,c.logger.debug("[loadMetaProcess],data done,setstate true,[",a,s,"]")),o&&null!=u&&u.range&&u.range.length>0&&u.range[1]<s&&(o=!1,c.logger.debug("[loadMetaProcess],data not done,setstate false,[",a,s,"]")),c.logger.debug("[loadMetaProcess],task,[",a,s,"], range,",u.range,",dataLen,",n?n.byteLength:void 0,", state,",o,",err,",c._error),!c._error&&n&&n.byteLength>0&&r(n,o,u,null,l),!c.meta.moov&&!c._error){e.next=6;break}return e.abrupt("return");case 6:if(!(n&&n.byteLength>0)){e.next=44;break}if(c.buffer=AD(c.buffer,n),f=hO.findBox(c.buffer,["moov"])[0]){e.next=23;break}if(h=hO.findBox(c.buffer,["mdat"])[0],!o){e.next=23;break}if(h){e.next=18;break}return c._error=!0,r(null,o,u,{err:"cannot find moov or mdat box"},l),e.abrupt("return");case 18:return d=h.start+h.size,e.next=21,c.loadData([d,""],t,i);case 21:(p=e.sent)&&(f=hO.findBox(p.data,["moov"])[0]);case 23:if(!(f&&o&&f.size>f.data.length)){e.next=27;break}return c.logger.debug("[loadMetaProcess],moov not all, range,",u.range[1],",dataLen,",c.buffer.byteLength,", state,",o),e.next=27,c.loadMetaProcess(t,[u.range[1],f.start+f.size-1],r);case 27:if(!(f&&f.size<=f.data.length)||c.meta.moov){e.next=44;break}if(v=hO.moov(f)){e.next=33;break}return c._error=!0,r(null,o,u,{err:"cannot parse moov box"},l),e.abrupt("return");case 33:if(g=mI(v,c._config)){e.next=38;break}return c._error=!0,r(null,o,u,{err:"cannot parse segments"},l),e.abrupt("return");case 38:c.meta=bI(v),y=g.videoSegments,m=g.audioSegments,c.videoSegments=y,c.audioSegments=m,c.logger.debug("[loadMetaProcess] moov ok"),r(void 0,o,{meta:{meta:c.meta,videoSegments:y,audioSegments:m}},null,l);case 44:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),e.next=6,this.loadData([a,s||this._config.moovEnd],t,PE({onProgress:u},i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"loadMeta",value:function(){var e=OE(EE().mark((function e(t,n,r){var i,o,a,s,u,c,l,f,h;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],this.logger.debug("[loadMeta start]"),e.next=4,this.loadData([0,n||this._config.moovEnd],t,r);case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return");case 7:if(i.push(o),a=hO.findBox(o.data,["moov"])[0]){e.next=23;break}if(s=hO.findBox(o.data,["mdat"])[0]){e.next=13;break}throw new gI("cannot find moov or mdat box",o.data);case 13:return u=s.start+s.size,e.next=16,this.loadData([u],t,r);case 16:if(o=e.sent){e.next=19;break}return e.abrupt("return");case 19:if(i.push(o),a=hO.findBox(o.data,["moov"],u)[0]){e.next=23;break}throw new gI("cannot find moov box",o.data);case 23:if(!(a.size>a.data.length)){e.next=31;break}return e.next=26,this.loadData([o.data.length,a.start+a.size-1],t,r);case 26:if(o=e.sent){e.next=29;break}return e.abrupt("return");case 29:i.push(o),a.data=AD(a.data,o.data);case 31:if(c=hO.moov(a)){e.next=34;break}throw new gI("cannot parse moov box",a.data);case 34:if(l=mI(c,this._config)){e.next=37;break}throw new gI("cannot parse segments",a.data);case 37:return this.meta=bI(c),f=l.videoSegments,h=l.audioSegments,this.videoSegments=f,this.audioSegments=h,this.logger.debug("[load moov end!!!!!]"),e.abrupt("return",{meta:this.meta,videoSegments:f,audioSegments:h,responses:i});case 43:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"loadCacheMeta",value:function(e,t){var n=mI(e.moov,this._config),r=n.videoSegments,i=n.audioSegments;this.videoSegments=r,this.audioSegments=i,this._currentSegmentIndex=t,this.meta=e}},{key:"getSegmentByTime",value:function(e){var t,n;return this.videoSegments.length?(t=this.videoSegments.find((function(t){return t.startTime<=e&&t.endTime>e})))&&(n=this.audioSegments[t.index]):n=this.audioSegments.find((function(t){return t.startTime<=e&&t.endTime>e})),{video:t,audio:n}}},{key:"loadSegmentByTime",value:function(){var e=OE(EE().mark((function e(t,n){var r,i,o,a,s,u=arguments;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(u.length>2&&void 0!==u[2])||u[2],i=u.length>3&&void 0!==u[3]?u[3]:{},this.isMetaLoaded){e.next=5;break}return e.next=5,this.loadMeta(n);case 5:return o=this.getSegmentByTime(t),a=o.video,s=o.audio,e.abrupt("return",this._loadSegment(a,s,n,r,i));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadNextSegment",value:function(){var e=OE(EE().mark((function e(t){var n,r,i,o,a=arguments;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(a.length>1&&void 0!==a[1])||a[1],r=a.length>2&&void 0!==a[2]?a[2]:{},this.isMetaLoaded){e.next=5;break}return e.next=5,this.loadMeta();case 5:return i=this.videoSegments[this._currentSegmentIndex+1],o=this.audioSegments[this._currentSegmentIndex+1],e.abrupt("return",this._loadSegment(i,o,t,n,r));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"preload",value:function(){var e=OE(EE().mark((function e(t){var n,r,i,o,a,s,u,c=this;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isMetaLoaded){e.next=3;break}return e.next=3,this.loadMeta(!0);case 3:if(t&&!(t<0)){e.next=5;break}return e.abrupt("return");case 5:if(n=this.getSegmentByTime(t),r=n.video,i=n.audio,o=Math.max((null==r?void 0:r.index)||0,(null==i?void 0:i.index)||0)){e.next=9;break}return e.abrupt("return");case 9:return a=this.videoSegments.slice(0,o),s=this.audioSegments.slice(0,o),u=function(){var e=OE(EE().mark((function e(t){return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>o)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c._loadSegment(a[t],s[t],!0,!1);case 4:return e.next=6,u(t+1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=14,u(0);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancel",value:function(){return this._loader.cancel()}},{key:"reset",value:function(){var e=OE(EE().mark((function e(){var t=arguments;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length>0&&void 0!==t[0]&&t[0]){e.next=5;break}return this.logger.debug("[MP4loader reset func call loader.cancel]"),e.next=5,this._loader.cancel();case 5:this.vid=this.url="",this.meta={},this.downloadInfo=[],this.videoSegments=[],this.audioSegments=[],this._currentSegmentIndex=-1,this._currentLoadingSegmentIndex=-1;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=OE(EE().mark((function e(){return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reset();case 2:this.cache.clear();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_loadSegment",value:function(){var e=OE(EE().mark((function e(t,n,r,i,o){var a,s;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||n){e.next=2;break}return e.abrupt("return");case 2:return a=(null==t?void 0:t.index)||(null==n?void 0:n.index)||0,this._currentLoadingSegmentIndex=a,e.prev=4,e.next=7,this.loadData([Math.min((null==t?void 0:t.range[0])||1/0,(null==n?void 0:n.range[0])||1/0),Math.max((null==t?void 0:t.range[1])||0,(null==n?void 0:n.range[1])||0)],r,o);case 7:s=e.sent;case 8:return e.prev=8,this._currentLoadingSegmentIndex=-1,e.finish(8);case 11:if(s){e.next=13;break}return e.abrupt("return");case 13:return i&&(this._currentSegmentIndex=a),s.video=t,s.audio=n,e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this,[[4,,8,11]])})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=OE(EE().mark((function e(t,n,r){var i,o,a,s;return EE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._getCacheKey(t),e.next=3,this.cache.get(i);case 3:if(o=e.sent){e.next=11;break}return s=r&&r.url?r.url:this.url,e.next=8,this._loader.load(s,PE({range:t,vid:this.vid},r));case 8:a=e.sent,e.next=12;break;case 11:a={data:o,state:!0,options:{fromCache:!0,range:t,vid:this.vid}};case 12:if(a){e.next=14;break}return e.abrupt("return");case 14:return o||(a.data&&this.downloadInfo.push({startTime:a.startTime,endTime:a.endTime,size:a.data.byteLength,range:t}),this.downloadInfo&&this.downloadInfo.length>this._config.maxDownloadInfoSize&&(this.downloadInfo=this.downloadInfo.slice(-this._config.maxDownloadInfoSize))),e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_getCacheKey",value:function(e){return(this.vid||this.url)+":"+e}}]),r}(i_),wI=[{range:[0,90],size:614400},{range:[90,120],size:819200},{range:[120,Number.MAX_VALUE],size:1024e3}];function RI(e,t,n){var r=n>51200?Math.min(n,t):t;if(!e)return r;for(var i=0;i<wI.length;i++)if(e>=wI[i].range[0]&&e<wI[i].range[1]){r=Math.min(Math.max(r,wI[i].size),n>0?n:t);break}return r}var MI=function(){try{return typeof localStorage<"u"&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch{return!1}}()&&!function(){var e="_localstorage_support_test";try{return window.localStorage.setItem(e,!0),window.localStorage.removeItem(e),!1}catch{return!0}}(),xI=DI(),PI=function(){if(MI)try{return!!window.localStorage.getItem("playertestlog")}catch{return!1}return!1}(),EI={1:"debug",2:"log",3:"warn",4:"error"};function DI(){if(MI)try{return!!window.localStorage.getItem("playerlog")}catch{return!1}return!1}function OI(e,t,n){var r=EI[t];if(r&&e&&e[r]){for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];e[r].apply(e,[n].concat(o))}}var II=L,AI=br,LI=vp,CI=E,GI=wt,NI=gn,BI=GI("species"),$I=RegExp.prototype,FI=function(e,t,n,r){var i=GI(e),o=!CI((function(){var t={};return t[i]=function(){return 7},7!==""[e](t)})),a=o&&!CI((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[BI]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||n){var s=/./[i],u=t(i,""[e],(function(e,t,n,r,i){var a=t.exec;return a===LI||a===$I.exec?o&&!i?{done:!0,value:II(s,t,n,r)}:{done:!0,value:II(e,n,t,r)}:{done:!1}}));AI(String.prototype,e,u[0]),AI($I,i,u[1])}r&&NI($I[i],"sham",!0)},UI=yd.charAt,HI=function(e,t,n){return t+(n?UI(e,t).length:1)},jI=L,VI=tn,zI=le,XI=q,KI=vp,QI=TypeError,WI=function(e,t){var n=e.exec;if(zI(n)){var r=jI(n,e,t);return null!==r&&VI(r),r}if("RegExp"===XI(e))return jI(KI,e,t);throw new QI("RegExp#exec called on incompatible receiver")},qI=L,YI=tn,JI=ne,ZI=Ar,eA=Xo,tA=oe,nA=je,rA=HI,iA=WI;FI("match",(function(e,t,n){return[function(t){var n=tA(this),r=JI(t)?void 0:nA(t,e);return r?qI(r,t,n):new RegExp(t)[e](eA(n))},function(e){var r=YI(this),i=eA(e),o=n(t,r,i);if(o.done)return o.value;if(!r.global)return iA(r,i);var a=r.unicode;r.lastIndex=0;for(var s,u=[],c=0;null!==(s=iA(r,i));){var l=eA(s[0]);u[c]=l,""===l&&(r.lastIndex=rA(i,ZI(r.lastIndex),a)),c++}return 0===c?null:u}]}));var oA=he,aA=q,sA=wt("match"),uA=qt.f,cA=D,lA=x,fA=X,hA=gi,dA=Dp,pA=gn,vA=xs,gA=Tr.f,yA=ge,mA=Xo,_A=ea,bA=jd,TA=function(e,t,n){n in e||uA(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})},kA=br,SA=E,wA=lt,RA=Yn.enforce,MA=hc,xA=Xd,PA=Wd,EA=wt("match"),DA=lA.RegExp,OA=DA.prototype,IA=lA.SyntaxError,AA=fA(OA.exec),LA=fA("".charAt),CA=fA("".replace),GA=fA("".indexOf),NA=fA("".slice),BA=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$A=/a/g,FA=/a/g,UA=new DA($A)!==$A,HA=bA.MISSED_STICKY,jA=bA.UNSUPPORTED_Y;if(hA("RegExp",cA&&(!UA||HA||xA||PA||SA((function(){return FA[EA]=!1,DA($A)!==$A||DA(FA)===FA||"/a/i"!==String(DA($A,"i"))}))))){for(var VA=function(e,t){var n,r,i,o,a,s,u=yA(OA,this),c=function(e){var t;return oA(e)&&(void 0!==(t=e[sA])?!!t:"RegExp"===aA(e))}(e),l=void 0===t,f=[],h=e;if(!u&&c&&l&&e.constructor===VA)return e;if((c||yA(OA,e))&&(e=e.source,l&&(t=_A(h))),e=void 0===e?"":mA(e),t=void 0===t?"":mA(t),h=e,xA&&"dotAll"in $A&&(r=!!t&&GA(t,"s")>-1)&&(t=CA(t,/s/g,"")),n=t,HA&&"sticky"in $A&&(i=!!t&&GA(t,"y")>-1)&&jA&&(t=CA(t,/y/g,"")),PA&&(o=function(e){for(var t,n=e.length,r=0,i="",o=[],a=vA(null),s=!1,u=!1,c=0,l="";r<=n;r++){if("\\"===(t=LA(e,r)))t+=LA(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:AA(BA,NA(e,r+1))&&(r+=2,u=!0),i+=t,c++;continue;case">"===t&&u:if(""===l||wA(a,l))throw new IA("Invalid capture group name");a[l]=!0,o[o.length]=[l,c],u=!1,l="";continue}u?l+=t:i+=t}return[i,o]}(e),e=o[0],f=o[1]),a=dA(DA(e,t),u?this:OA,VA),(r||i||f.length)&&(s=RA(a),r&&(s.dotAll=!0,s.raw=VA(function(e){for(var t,n=e.length,r=0,i="",o=!1;r<=n;r++)"\\"!==(t=LA(e,r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+LA(e,++r);return i}(e),n)),i&&(s.sticky=!0),f.length&&(s.groups=f)),e!==h)try{pA(a,"source",""===h?"(?:)":h)}catch{}return a},zA=gA(DA),XA=0;zA.length>XA;)TA(VA,DA,zA[XA++]);OA.constructor=VA,VA.prototype=OA,kA(lA,"RegExp",VA,{constructor:!0})}function KA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=document.createElement(e);return i.className=r,i.innerHTML=t,Object.keys(n).forEach((function(t){var r=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&i.setAttribute(r,o):i.setAttribute(r,o)})),i}function QA(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}function WA(){try{return parseInt(performance.now(),10)}catch{return(new Date).getTime()}}function qA(e,t){try{var n=e.indexOf("?");return n<0?Object.keys(t).forEach((function(n,r){e+=0===r?"?".concat(n,"=").concat(t[n]):"&".concat(n,"=").concat(t[n])})):Object.keys(t).forEach((function(r){n===e.length-1?e+="".concat(r,"=").concat(t[r]):e+="&".concat(r,"=").concat(t[r])})),e}catch{return e}}function YA(e,t){return Object.keys(t).forEach((function(n){var r,i=QA(t[n]),o=QA(e[n]);"Array"===i?("Array"!==o&&(e[n]=[]),(r=e[n]).push.apply(r,b(t[n]))):"Object"===i?("Object"!==o&&(e[n]={}),YA(e[n],t[n])):e[n]=t[n]})),e}function JA(e){var t=[];if(!e||!e.length||0===e.length)return t;for(var n=0;n<e.length;n++){var r=e[n],i={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o]);t.push(i)}return t}function ZA(e,t){try{return e&&t?parseInt(t*e/8,10):0}catch{return 0}}function eL(e,t){var n=[],r=0;e&&n.push(e),t&&n.push(t),n.every((function(e){return e&&(r+=e.byteLength),!0}));var i=new Uint8Array(r),o=0;return n.every((function(e){return e&&(i.set(e,o),o+=e.byteLength),!0})),i}function tL(e,t,n){var r,i,o,a,s,u;return s=e<t.length-1?t[e]:t[t.length-1],u=e<n.length-1?n[e]:n[n.length-1],[Math.min((null===(r=s)||void 0===r?void 0:r.range[0])||1/0,(null===(i=u)||void 0===i?void 0:i.range[0])||1/0),Math.max(null===(o=s)||void 0===o?void 0:o.range[1],null===(a=u)||void 0===a?void 0:a.range[1])]}function nL(e){if("String"!==QA(e)||!e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n}function rL(e){for(var t,n=0;n<10;)try{if((t=new Uint8Array(e))&&t.byteLength>0)break;n++}catch{n<10?n++:console.error("repeat data cache  new array failed final",10)}return t}MA("RegExp");var iL={playBtnClick:function(e,t,n,r){e.paused||e.waitingMoreBuffer&&(e.waitingMoreBuffer=!1),r.call(e,t,n)}},oL={waiting:function(e,t){var n=e.player,r=e.eventName;n.waitingMoreBuffer=!0,t(r,e)},play:function(e,t){var n=e.player,r=e.eventName;n.waitingMoreBuffer||t(r,e)},pause:function(e,t){var n=e.player,r=e.eventName;n.waitingMoreBuffer||t(r,e)},seeking:function(e,t){var n=e.player,r=e.eventName;n.isSeekingStart=!0,t(r,e)},progress:function(e,t){OI(">>>>progress");var n=e.player,r=e.eventName;if(n.waitingMoreBuffer){var i=n.getBufferedRange(n.buffered2);0===i[0]&&0===i[1]||(void 0===n.inWaitingStart||n.isSeekingStart?(OI("progress startplay or seek ended"),i[1]-n.currentTime>=(n.config.canplayWaterLevel||1)||i[1]>n.duration-1?(OI("progress out bufferWaterLevel"),n.play()):(OI("progress not out bufferWaterLevel"),n.emit("waiting"))):(OI("progress video waiting end"),i[1]-n.currentTime>=(n.config.bufferWaterLevel||5)||i[1]>n.duration-1?(OI("progress out bufferWaterLevel"),n.play()):(OI("progress not out bufferWaterLevel"),n.emit("waiting"))))}t(r,e)},playing:function(e,t){var n=e.player,r=e.eventName;OI("playing");var i=n.getBufferedRange(n.buffered2);if(0===i[0]&&0===i[1])return OI("playing currentTime no buffer, not out bufferWaterLevel"),n.waitingMoreBuffer=!0,n.pause(),void t.call("waiting",e);void 0===n.inWaitingStart||n.isSeekingStart?(OI("playing startplay or seek ended"),i[1]-n.currentTime>=(n.config.canplayWaterLevel||1)||i[1]>n.duration-1?(OI("playing out bufferWaterLevel"),n.waitingMoreBuffer=!1,n.isSeekingStart=!1,t(r,e)):(OI("playing not out bufferWaterLevel"),n.waitingMoreBuffer=!0,n.pause(),t.call("waiting",e))):(OI("playing video waiting ended"),i[1]-n.currentTime>=(n.config.bufferWaterLevel||5)||i[1]>n.duration-1?(OI("playing out bufferWaterLevel"),n.waitingMoreBuffer=!1,t(r,e)):(OI("playing not out bufferWaterLevel"),n.waitingMoreBuffer=!0,n.pause(),t.call("waiting",e)))}};function aL(e,t){return Math.round(8*e*1e3/t/1024)}function sL(e){var t,n;return!((null==e||null===(t=e.message)||void 0===t?void 0:t.indexOf("Failed to fetch"))>=0||null!=e&&e.response&&(null===(n=e.response)||void 0===n?void 0:n.status)>=400&&e.response.status<=599)}function uL(e,t,n){e.video&&e.video.addEventListener(t,n)}function cL(e,t,n){e.video&&e.video.removeEventListener(t,n)}function lL(e){return e&&e.video&&"function"==typeof e.video.getStats?e.video.getStats():null}function fL(e,t){var n=e&&e.checkCodecH265(),r=e&&e.checkCodecH266(),i=!!t.videoCodec,o=!!t.audioCodec;return i&&o?n?'video/mp4; codecs="hev1.1.6.L93.B0, mp4a.40.5"':r?'video/mp4; codecs="bvc2.1.6.L93.B0, mp4a.40.5"':'video/mp4; codecs="avc1.64001E, mp4a.40.5"':i?n?'video/mp4; codecs="hev1.1.6.L93.B0"':r?'video/mp4; codecs="bvc2.1.6.L93.B0"':'video/mp4; codecs="avc1.64001E"':'video/mp4; codecs="mp4a.40.5"'}function hL(e){var t=e.kid,n=e.drmKeyToken,r=e.secretKey,i=e.keyValue,o=e.drm;return t||n||r||i||o}function dL(e){return{buffer_dur:e.cachedBufferDur||-1,load_tar_dur:e.loadTarDuration||-1,load_dur:e.loadDuration||-1,force_set_min:e.forceSetMin,in_buf:e.PCDNInBuffer||-1,out_buf:e.PCDNOutBuffer||-1,load_size:e.loadSize||-1}}var pL={"x-cache":"x_cache","x-response-sinfo":"server_ip","x-response-cinfo":"x-response-cinfo","content-range":"content-range","content-length":"content-length","content-type":"content-type"};function vL(e){var t={};return!e||!e.get||Object.keys(pL).forEach((function(n){var r=pL[n];e.get(n)&&(t[r]=e.get(n))})),t}function gL(e){var t=pL["content-range"];if(e&&e.get&&e.get(t)){var n=e.get(t).split("/");if(2===(null==n?void 0:n.length))return n[1]}return null}function yL(e){try{var t=Object.keys(e).filter((function(e){return"content-range"===e}));if(t.length>0){var n=e[t[0]].split("/");if(2===(null==n?void 0:n.length))return parseInt(n[1],10)}return 0}catch(e){return console.error(e),0}}var mL="error",_L="metaReady",bL="moov_request_Progress",TL="progress_event",kL="updateEME",SL="init_MSE",wL="chaneg_url",RL="update_load_fragmentIdx",ML="remove_pcdn_node",xL="load_error",PL="cancel_loaded_len",EL="load_len_not_match_error",DL="close",OL="forbidden",IL={},AL=function(e){d(r,e);var t,n=y(r);function r(e,t,a){var s,l,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],d=arguments.length>4?arguments[4]:void 0;return c(this,r),h(g(l=n.call(this)),"markErrHost",(function(e){e&&(IL[e]=!0,l.log(Pk.WARN,"[mp4loader markErrHost]",e))})),h(g(l),"onprogressDataArrive",function(){var e=u(o().mark((function e(t,n,r,i){var a,s,u,c,f,h,d,p,v,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(null==r||null===(a=r.priOptions)||void 0===a?void 0:a.type)||Hk,u=l.adaptTimeRange[r.index].range,t&&t.byteLength>0?(!l._optionDataLenInfo[s]&&(l._optionDataLenInfo[s]=0),l._optionDataLenInfo[s]+=t.byteLength,l._receiveDataPos=null==r?void 0:r.range[1],u&&r.range[1]>u[1]&&!n&&(n=!0,l.log(Pk.LOG,"[onprogressDataArrive] receive data, check state set true >>> index,",r.index,",range,",JSON.stringify(r.range))),l.cacheRepeatData(l.adaptTimeRange[r.index].repeatRange,r.range,t),l.log(Pk.LOG,"[onprogressDataArrive] receive data, >>> index,",r.index,",range,",JSON.stringify(r.range),", dataLen,",t.byteLength,",loadType,",s,n),l._mux(t,r.range[0],r.index,n)):l.log(Pk.LOG,"[onprogressDataArrive] receive data null, >>> index,",r.index,",range,",JSON.stringify(r.range),", dataLen,",null==t?void 0:t.byteLength,",loadType,",s,n),!n){e.next=23;break}if(l._optionDataLenInfo[s]=0,c=vL(i.headers),l.totalSize||(l.totalSize=yL(c)),f=u&&u.length>=0?Number(u[1]):0,!((null==u?void 0:u.length)>0)||f&&(!f||(null==r?void 0:r.range[1])!==f+1&&l.totalSize!==f)){e.next=13;break}l.adaptTimeRange[r.index].downloaded=!0,l.log(Pk.LOG,"[FragLoadDowned],fragmentIdx,",r.index,",rangeEnd,",r.range[1]),e.next=23;break;case 13:return e.next=15,l.cancelLoading();case 15:return h=l.adaptTimeRange[r.index],d=h.startTime,p=h.endTime,l.emit(EL,[d,p]),v=s===Hk?l.url:l._pcdnNodeList[0].url,g=nL(v),l.emit(xL,{src:v,host:g,errorCode:aS.contentError,message:"progress dataLen not match",range:JSON.stringify(u),headers:c}),l.log(Pk.LOG,"[FragLoadDowned check false, len is not match],fragmentIdx,",r.index,",rangeEnd,",r.range[1],JSON.stringify(u),JSON.stringify(c),v,null==i?void 0:i.url),e.next=23,l.loadAllFragmentData(l._curLoadSegIdx,l._loadSuccessCallBack);case 23:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()),l.timeRecord={startMuxTime:-1,startLoadTime:-1,newMP4Time:WA(),startLoadMetaTime:-1},l.updateUrl(e,f||[]),l._bitRate=t||0,l.options=r.getDefaultConfig(),Object.keys(a).map((function(e){void 0!==a[e]&&null!==a[e]&&(l.options[e]=a[e])})),l.logger=a.logger,l.timeRange=[],l.adaptTimeRange=[],l.firstFrameTime=d||{},l.fileSize=null==a?void 0:a.fileSize,l.totalSize=0,l.CHUNK_SIZE=(null===(s=l.options)||void 0===s?void 0:s.firstLoadSize)||RI(a.duration,l.options.chunkSize,l.fileSize),l._firstLoadSize=l.CHUNK_SIZE,l.log(Pk.LOG,"[getFirstLoadSize], firstLoadSize ",l._firstLoadSize,",dur,",a.duration,",chunkSize,",l.CHUNK_SIZE,",fileSize,",l.fileSize),l._repeatInfo={startPos:-1,curDataPos:0,usedPos:0,data:rL(1048576)},l.meta=null,l.preloadCache=null,l.videoTrak=null,l.audioTrak=null,l._loadSuccessCallBack=null,l._isPending=!1,l.metaLoading=!1,l.MP4Loader=new SI(i(i({url:e,vid:"".concat(a.vid,"-").concat(t),retry:a.retryCount||2,retryDelay:a.retryDelay||1e3,timeout:a.timeout||3e3,segmentDuration:a.segmentDuration,fixEditListOffset:a.fixEditListOffset},a.reqOptions),{},{loaderType:a.loaderType,retryCheckFunc:sL,openLog:xI})),l.MP4Demuxer=null,l.FMP4Remuxer=null,l._needInitSegment=!0,l._bitRateInfoMap=new Map,l._switchBitRate=!1,l._segmentToBitRateMap=new Map,l.useEME=!1,l.secretKey=null,l.decryptKey=null,l.keyValue=null,l.initTransMuxWorker(),l.seekTime=-1,l.changeBitRateTime=-1,l._PCDNState=DL,l._pcdnNodeList=[],l.loadInfo={},l.pcdnTraceInfo=null,l._loadedDataState=!1,l._PCDNSwitchCnt=0,l._isUseCDN=!0,l._curLoadSegIdx=0,l._receiveDataPos=-1,l._optionDataLenInfo={},l._lastPCDNUrl="",l._lastTargetDur=0,l.pcdnVVStat=l.resetPCDNVVStat(),l.pSCCancelCnt=0,l._lastDemuxSampleIdxRange={video:0,audio:0},l._mediaEndTime=-1,l}return f(r,[{key:"size",get:function(){return this.fileSize}},{key:"initTransMuxWorker",value:function(){}},{key:"updateSecretKey",value:function(e,t,n,r){var i;this.useEME=e,!e&&t?(this.log(Pk.LOG,"[updateSecretKey] ,force enableWorker"),this.options.enableWorker=!0,this.transmuxerWorkerControl||this.initTransMuxWorker()):!e&&r&&(this.keyValue=r),this.log(Pk.LOG,"[updateSecretKey] ,useEME, ",e,",secretKey,",t,",decryptKey",n),null===(i=this.transmuxerWorkerControl)||void 0===i||i.updateValue({secretKey:t,decryptKey:n})}},{key:"updateLoadedDataDone",value:function(){this._loadedDataState=!0}},{key:"PCDNSwitchCnt",get:function(){return this._PCDNSwitchCnt}},{key:"updateLoadInfo",value:function(e,t){this.loadInfo||(this.loadInfo={}),this.loadInfo[e]||(this.loadInfo[e]={},this.loadInfo[e].loadLen=0),this.loadInfo[e].loadLen+=t}},{key:"updatePCDNState",value:(t=u(o().mark((function e(t){var n,r,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._PCDNState!==OL&&this._PCDNState!==t&&this.log(Pk.LOG,"[pcdn state update]",this._PCDNState," - ",t),t!==OL){e.next=5;break}this._PCDNState=t,e.next=25;break;case 5:if(this._PCDNState===OL||this._PCDNState===t){e.next=25;break}if(this._isUseCDN||t!==DL){e.next=23;break}if(this._PCDNState=t,!this.adaptTimeRange[this._curLoadSegIdx].downloaded&&!this._switchBitRate){e.next=11;break}return this.log(Pk.LOG,"[pcdn] switch cdn ",this._curLoadSegIdx,"downloaded",",switchBitRate, ",this._switchBitRate),e.abrupt("return");case 11:return e.next=13,this.cancelLoading();case 13:return this.pSCCancelCnt++,n=this._curLoadSegIdx,this.log(Pk.LOG,"[pcdn] cancelLoading ",n,"switch cdn load"),r=this.getFragRange(n),this._receiveDataPos&&this._receiveDataPos>=r[0]&&this._receiveDataPos<=r[1]&&(i=r[0],r[0]=this._receiveDataPos,this.log(Pk.LOG,"[pcdn] switch cdn, adject range",n,JSON.stringify(r),",oldRange,","".concat(i," - ").concat(r[1]))),this._receiveDataPos=-1,e.next=21,this.startLoad(r,n);case 21:e.next=24;break;case 23:this._PCDNState=t;case 24:this.log(Pk.LOG,"[pcdn] openPCDN ",t);case 25:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateNode",value:function(e){if(e&&e.length>0){var t=e.filter((function(e){if(!Object.prototype.hasOwnProperty.call(IL,nL(null==e?void 0:e.url)))return e}));this._pcdnNodeList=t}}},{key:"clearPCDNNodeList",value:function(){this.log(Pk.LOG,"[pcdn] clearPCDNNodeList"),this._pcdnNodeList=[]}},{key:"isUpdateNode",get:function(){return!this._pcdnNodeList||!this._pcdnNodeList.length}},{key:"isUsePCDN",value:function(){var e;return"open"===this._PCDNState&&(null===(e=this._pcdnNodeList)||void 0===e?void 0:e.length)>0}},{key:"changeBitRate",value:function(){var e=u(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bitrate===this._bitRate){e.next=11;break}return this.updateUrl(t._mainURL,t._backupURL),this._bitRate=t.bitrate,this._receiveDataPos=-1,e.next=6,this.MP4Loader.changeUrl(this.url,"".concat(this.options.vid,"-").concat(this._bitRate),this.CHUNK_SIZE);case 6:this._pcdnNodeList=null,this.emit(wL,this.url),this._switchBitRate=!0,this._mediaEndTime=-1,this.log(Pk.LOG,"[switchBitrate] changeUrl, bitRate,",this._bitRate,"url",this.url);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getByPreload",value:function(e,t,n,r){try{if(e&&e.byteLength>=t){var i={endTime:(new Date).getTime(),startTime:(new Date).getTime(),index:r,range:[],vid:this.options.vid,from:"local"};if(n<=e.byteLength){var o=e.slice(t,n);return i.range=[t,n],i.state=!0,{buffer:o,context:i,state:!0}}var a=e.byteLength-1,s=e.slice(t,a);return i.range=[t,a],{context:i,buffer:s,state:!1}}return null}catch(e){return console.error("[MP4] _getByPreload",t,n,e),null}}},{key:"log",value:function(e,t){for(var n=this.options,r=n&&n.vid?"[MP4]".concat(this._logTag," ").concat(n.vid," ").concat(t):"[MP4]".concat(this._logTag," ").concat(t),i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];OI.apply(void 0,[this.logger,e,r].concat(o))}},{key:"errorHandler",value:function(){var e=u(o().mark((function e(t,n){var r,i,a,s,u,c,l,f,h,d=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:{},i=t.response,a=t.message,s=this.options?this.options.vid:"",u=null,this._isPending=!0,!i){e.next=36;break}if(c=vL(i.headers),u=new uS("network",i.status,{httpText:i.httpText,message:a,url:i.url,range:r.range,headers:c}),this.log(Pk.LOG,"[MP4] [".concat(s,"] errorHandler error state:[").concat(n,"],\n          _isPending:[").concat(this._isPending,"] "),null==i?void 0:i.status,a),!(this.backUrl&&this.backUrl.length>0)){e.next=30;break}if(l=this.backUrl.shift(),this.updateUrl(l,this.backUrl),this.log(Pk.LOG,"[".concat(s,"] errorHandler start backUpUrl retry"),this.backUrl.length,l),this._isPending=!1,!this.MP4Loader){e.next=18;break}return e.next=17,this.MP4Loader.changeUrl(this.url,"".concat(this.url,"-").concat(this._bitRate),this.CHUNK_SIZE);case 17:this.emit(wL,this.url);case 18:if(this.emit(TL,{type:"error",error:t}),"getMetaInfo"!==n){e.next=24;break}return this.getMetaInfo(),e.abrupt("return");case 24:if("loadFragment"!==n){e.next=30;break}if(f=r.fragIndex,h=r.range,!(null!==f&&f>=0&&h)){e.next=30;break}return this.resetFragmentLoadState(f),this.loadFragment(f,h),e.abrupt("return");case 30:u.context=r,u.response=i,this.log(Pk.LOG,"errorHandler end, ".concat(JSON.stringify(r))),this.emit(mL,u,n),e.next=40;break;case 36:this.log(Pk.LOG,"errorHandler other end, ".concat(n,",").concat(null==i?void 0:i.status,", ").concat(a)),(u=t).context=r,this.emit(mL,u,n);case 40:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=u(o().mark((function e(t){var n,r,i,a,s,u,c,l,f,h,d,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.url){e.next=3;break}return e.next=3,this.MP4Loader.changeUrl(this.url,"".concat(this.options.vid,"-").concat(this._bitRate),this.CHUNK_SIZE);case 3:if(this.emit(wL,this.url),this.meta=null,n=t.meta,r=t.mediaSegList,i=t.buffer,a=t.fileSize,s=t.initSeg,u=t.bitrate,c=t.adaptTimeRange,l=t.repeatData,!n||!n.ext){e.next=24;break}for(a&&(this.fileSize=a),this.meta=n,this.videoTrak=n.ext.videoTrak,this.audioTrak=n.ext.audioTrak,this.meta.videoSamplesLen=this.videoTrak.reduce((function(e,t){return e+t.frames.length}),0),this.meta.audioSamplesLen=this.audioTrak.reduce((function(e,t){return e+t.frames.length}),0),this._bitRate=u,this.timeRange=this.getTimeRange(),this.adaptTimeRange=JA(c),r?(this.preloadCache={segList:r||[],initSeg:s},(null===(f=this.adaptTimeRange)||void 0===f?void 0:f.length)>0&&(null==l?void 0:l.byteLength)>0&&this.cacheRepeatData(this.adaptTimeRange[0].repeatRange,this.adaptTimeRange[0].repeatRange,l)):i&&(null===(h=this.adaptTimeRange)||void 0===h?void 0:h.length)>0&&(null==i?void 0:i.byteLength)>0&&this.cacheRepeatData(this.adaptTimeRange[0].range,this.adaptTimeRange[0].range,i),this.adaptTimeRange.map((function(e){e.downloaded=!1,e.isLoading=!1})),d=0;d<this.adaptTimeRange.length;d++)null===(p=this.updateTimeRangeInAdaptTimeRangeIdx)||void 0===p||p.call(this,this.adaptTimeRange[d].timeRangeIdx,d);v={meta:n,videoSegments:n.ext.videoTrak,audioSegments:n.ext.audioTrak,bufferLoaded:i||null},this._bitRateInfoMap.set(this._bitRate,v),this.emit(_L,this.meta),e.next=26;break;case 24:return e.next=26,this.getMetaInfo();case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTimeRange",value:function(){for(var e=[],t=null,n=0;this.videoTrak&&n<this.videoTrak.length;n++){var r=this.videoTrak[n].startTime,i=this.videoTrak[n].endTime;t={startTime:r,endTime:i,duration:i-r,downloaded:!1,isLoading:!1},e.push(t)}if(this.audioTrak&&this.audioTrak.length>e.length)for(var o=e.length;o<this.audioTrak.length;o++){var a=Math.max(this.audioTrak[o].startTime,t?t.endTime:0),s=Math.max(this.audioTrak[o].endTime,t?t.endTime:0);t={startTime:a,endTime:s,duration:s-a,downloaded:!1,isLoading:!1},e.push(t)}return e}},{key:"getMetaInfo",value:function(){var e=u(o().mark((function e(){var t,n,r,a,s,c=this,l=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(l.length>0&&void 0!==l[0])||l[0],e.prev=1,n=WA(),this.metaLoading=!0,this.log(Pk.LOG,"getMetaInfo start, bitRate,",this._bitRate,",url,",this.MP4Loader.url),this.resetRepeatInfo(),r=function(){var e=u(o().mark((function e(r,a,s,u,l){var f,h,d,p,v,g,y;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=6;break}return e.next=3,c.cancelLoading();case 3:return h=new cS(sS.DEMUX,aS.metaError,{msg:JSON.stringify(u)}),c.errorHandler(h,"getMetaInfo",{range:[0,c._firstLoadSize]}),e.abrupt("return");case 6:!c.fileSize&&l&&(c.fileSize=Number(gL(l.headers))),d=(null==s||null===(f=s.priOptions)||void 0===f?void 0:f.type)||Hk,r&&(c.cacheRepeatData([0,c._firstLoadSize],s.range,r),!c._optionDataLenInfo[d]&&(c._optionDataLenInfo[d]=0),c._optionDataLenInfo[d]+=r.byteLength),a&&c._optionDataLenInfo[d]&&(c._optionDataLenInfo[d]=0),s.meta&&!c.meta&&(c.firstFrameTime.metaload=WA()-n,p=s.meta,c.videoTrak=p.videoSegments,c.audioTrak=p.audioSegments,c.timeRange=c.getTimeRange(),v=c.videoTrak.reduce((function(e,t){return e+t.frames.length}),0),g=c.audioTrak.reduce((function(e,t){return e+t.frames.length}),0),c.meta=i(i({},p.meta),{},{ext:{videoTrak:c.videoTrak,audioTrak:c.audioTrak},videoSamplesLen:v,audioSamplesLen:g,fileSize:c.fileSize}),c._bitRateInfoMap.set(c._bitRate,p),c.log(Pk.LOG,"meta reach, bitRate,",c._bitRate,c._repeatInfo.curDataPos),t&&c.emit(_L,c.meta)),c.meta&&a&&(c.log(Pk.LOG,"[getMetaInfo req end]",c._repeatInfo.curDataPos),c.metaLoading=!1),c._loadedDataState?(y=!1,c._repeatInfo.curDataPos-c._repeatInfo.usedPos>=c.options.afterLoadeddataCallBackLen&&(y=!0),c.meta&&(y||a)&&(c.log(Pk.LOG,"emit moov_req_progress loadeddata after",JSON.stringify(s.range)),c.emit(bL))):c.meta&&(r||a)&&(c.log(Pk.LOG,"emit moov_req_progress loadeddata before",JSON.stringify(s.range)),c.emit(bL));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),a=this._firstLoadSize-1,e.next=10,this.MP4Loader.loadMetaProcess(this.MP4Loader.cache,[0,a],r);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),this.log(Pk.ERROR,"[MP4] trigger errorHandler getMetaInfo",null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status,null===e.t0||void 0===e.t0?void 0:e.t0.message),this.loadError(e.t0,"getMetaInfo",!1,{url:e.t0.url||this.url,range:[0,this._firstLoadSize]});case 16:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getFragmentIdx",value:function(e){var t,n;if(this.videoTrak.length){if(t=this.videoTrak.find((function(t){return t.startTime<=e&&t.endTime>e})),n=this.audioTrak.find((function(t){return t.startTime<=e&&t.endTime>e})),t&&n)return Math.min(t.index,n.index);if(t||n)return t?t.index:n.index;var r=Number.MAX_VALUE;return this.videoTrak&&this.videoTrak.length>0&&(r=this.videoTrak.length-1),this.audioTrak&&this.audioTrak.length>0&&(r=Math.min(this.audioTrak.length-1,r)),r}return(n=this.audioTrak.find((function(t){return t.startTime<=e&&t.endTime>e})))?n.index:0}},{key:"_checkHasMeta",value:function(){var e=u(o().mark((function e(){var t,n,r,a,s,u,c,l,f,h,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._bitRateInfoMap.get(this._bitRate)){e.next=21;break}return this.log(Pk.LOG,"[switchBitrate], need load InitSegment, bitRate, ",this._bitRate),this.metaLoading=!0,e.next=6,this.MP4Loader.loadMeta(this.MP4Loader.cache,Math.round(this.CHUNK_SIZE/2));case 6:s=e.sent,this.log(Pk.LOG,"[switchBitrate], loadMeta end, ",this._bitRate),this.metaLoading=!1,u=this.videoTrak,c=this.audioTrak,l=u.reduce((function(e,t){return e+t.frames.length}),0),f=c.reduce((function(e,t){return e+t.frames.length}),0),h=Number(gL(null==s||null===(n=s.responses)||void 0===n||null===(r=n[0])||void 0===r||null===(a=r.response)||void 0===a?void 0:a.headers)),this.fileSize=h,this.log(Pk.LOG,"[switchBitrate], fileSize set , ",h),this.meta=i(i({},s.meta),{},{ext:{videoTrak:s.videoSegments,audioTrak:s.videoSegments},videoSamplesLen:l,audioSamplesLen:f,fileSize:h}),(t=s).fileSize=h,this._bitRateInfoMap.set(this._bitRate,s),e.next=23;break;case 21:this.log(Pk.LOG,"[switchBitrate], not need load InitSegment, bitRate, ",this._bitRate),this.meta=t.meta;case 23:for(this.videoTrak=t.videoSegments,this.audioTrak=t.audioSegments,this.fileSize=t.fileSize,this.emit(kL,this.meta),this.emit(SL,this.meta),this.timeRange=this.getTimeRange(),d=0;d<this.adaptTimeRange.length;d++)null===(p=this.updateTimeRangeInAdaptTimeRangeIdx)||void 0===p||p.call(this,this.adaptTimeRange[d].timeRangeIdx,d);return this._firstLoadSize=0,e.abrupt("return",!0);case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=u(o().mark((function e(t,n){var r,i,a,s,u,c,l,f,h,d,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._loadSuccessCallBack=n,!this._switchBitRate||this.metaLoading){e.next=26;break}return this.log(Pk.LOG,"[switchBitrate], switch bitRate start load, bitRate,",this._bitRate,", fragIndex,",t),e.next=5,this._checkHasMeta();case 5:if(r=e.sent,!(this.changeBitRateTime>0)){e.next=22;break}if(this.resetFragmentLoadState(t,!0),this.resetRepeatInfo(),i=this.getFragmentIdx(this.changeBitRateTime),a=t,!((t=this.getAdaptIdxBySrcIdx(i))<0)){e.next=15;break}return this.log(Pk.ERROR,"[switchBitrate] start new bitrate fragIndex error"),e.abrupt("return");case 15:a!==t&&this.resetFragmentLoadState(t),this._curLoadSegIdx=t,s=this.adaptTimeRange[t],this.log(Pk.LOG,"[switchBitrate], need update load fragIndex",t,",oldFragIndex",a,",stTime,",this.changeBitRateTime,",newBitrateadaptTimeRange,",s.startTime,"-",s.endTime),this.emit(RL,t),this.seekTime=this.changeBitRateTime,this.changeBitRateTime=-1;case 22:this.log(Pk.LOG,"[switchBitrate], reset adaptTimeRange state,",t),this._needInitSegment=!0,this.resetTansmuxer(),r&&(this._switchBitRate=!1);case 26:if(!this._switchBitRate||!this.metaLoading){e.next=28;break}return e.abrupt("return");case 28:u=this.getFragRange(t),(c=this.getFragmentFromCache(t,u))&&this._needInitSegment&&!c.initSeg&&(c=null,this.log(Pk.LOG,"[mp4.load], segment ,",t,"Data In Cache but not has init, so not use cacheData")),c?(l=c.muxSampleIdxRange,f=l.video,h=l.audio,this._lastDemuxSampleIdxRange.video=f,this._lastDemuxSampleIdxRange.audio=h,this.log(Pk.LOG,"[mp4.load], segment ,",t,"Data In Cache",JSON.stringify(u),", needInit,",this._needInitSegment,",muxSampleIdxRange,",JSON.stringify(c.muxSampleIdxRange)),(d=this.adaptTimeRange[t]).downloaded=!0,d.isLoading=!0,this._needInitSegment=!1,this._loadSuccessCallBack&&this._loadSuccessCallBack(c)):(this.log(Pk.LOG,"loadFragment,",t,",bitRate,",this._bitRate,",range,",JSON.stringify(u)),this.seekTime>0?(v=this.getSubRange(t,this.seekTime,u),null===(p=this.resetDemuxSampleIdx)||void 0===p||p.call(this,this.seekTime,v),this.loadFragment(t,v),this.seekTime=-1):this.loadFragment(t,u));case 32:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFragmentFromCache",value:function(e,t){var n=this.preloadCache;if(!n||!n.segList)return null;for(var r=-1,i=n.segList,o=n.initSeg,a=0;a<i.length;a++)if(i[a].index===e){r=a;break}if(r<0)return null;var s=i[r];if(s.range[1]>=t[1]){var u=[this.adaptTimeRange[e].startTime,this.adaptTimeRange[e].endTime];return{buffer:s.buffer,range:t,muxSampleIdxRange:s.muxSampleIdxRange,context:{range:t,fragIndex:e,state:!0,adaptTimeRange:[u[0],u[1]]},state:!0,initSeg:this._needInitSegment?o:void 0}}return null}},{key:"cacheRepeatData",value:function(e,t,n){var r;if(e&&null!=e&&e.length&&null!==(r=this._repeatInfo.data)&&void 0!==r&&r.byteLength&&(this._repeatInfo.startPos<0&&t[0]+n.byteLength>=e[0]&&t[0]+n.byteLength<=e[1]+1&&(this._repeatInfo.startPos=e[0]),this._repeatInfo.startPos>=0&&t[0]+n.byteLength>=e[0]&&t[0]+n.byteLength<=e[1]+1)){var i=this._repeatInfo.startPos+this._repeatInfo.curDataPos-t[0];if(i<0)return;var o=n.slice(i);if(this._repeatInfo.curDataPos+o.byteLength<this._repeatInfo.data.byteLength)this._repeatInfo.data.set(o,this._repeatInfo.curDataPos),this._repeatInfo.curDataPos+=o.byteLength,this.log(Pk.LOG,", repeatInfo,startPos,",this._repeatInfo.startPos,", curDataPos,",this._repeatInfo.startPos+this._repeatInfo.curDataPos,",curAppendLen,",o.byteLength);else try{var a=rL(Math.max(2*this._repeatInfo.data.byteLength,2*(e[1]-e[0])));if(!a)return;a.set(this._repeatInfo.data.slice(0,this._repeatInfo.curDataPos),0),a.set(o,this._repeatInfo.curDataPos),this._repeatInfo.curDataPos+=o.byteLength,delete this._repeatInfo.data,this._repeatInfo.data=a,this.log(Pk.LOG,"_repeatInfo,startPos,",this._repeatInfo.startPos,", curDataPos,",this._repeatInfo.curDataPos)}catch{console.error("repeat data cache  new array failed")}}}},{key:"_mux",value:function(e,t,n,r){var i=this.firstFrameTime,o=this.timeRecord;i.firstmux<0&&o.startMuxTime<0&&(this.timeRecord.startMuxTime=WA(),i.startMuxTime=WA()-o.startLoadTime);var a=this.getSamplesRange(n,"video"),s=this.getSamplesRange(n,"audio");this.log(Pk.LOG,"mux videoSampleRange,",a,s);var u=[t,t+e.byteLength];if(this.transmuxerWorkerControl){var c={range:u,state:r,fragIndex:n};this.log(Pk.LOG,"[transmuxerworker start] ,range, ",JSON.stringify(u),",dataLen,",e.byteLength,c),this.transmuxerWorkerControl.transmux(this.workerSequence,e,t,a,s,this.meta.moov,this.useEME,this.secretKey,c)}else try{this.MP4Demuxer||(this.MP4Demuxer=new vI(this.videoTrak,this.audioTrak,null,{openLog:xI}));var l=this.MP4Demuxer.demuxPart(e,t,a,s,this.meta.moov,this.useEME,this.keyValue);!this.FMP4Remuxer&&(!this.checkCodecH265()||this.options.supportHevc)&&(this.FMP4Remuxer=new kO(this.MP4Demuxer.videoTrack,this.MP4Demuxer.audioTrack,{openLog:xI}));var f,h=l.videoTrack,d=l.audioTrack,p=null==h?void 0:h.samples,v=(null==p?void 0:p.length)>0?p[0].sampleOffset:-1,g=(null==p?void 0:p.length)>0?p[p.length-1].sampleOffset:-1,y=null==d?void 0:d.samples,m=(null==y?void 0:y.length)>0?y[0].sampleOffset:-1,_=(null==y?void 0:y.length)>0?y[y.length-1].sampleOffset:-1;this.updateDemuxSampleIdxRange([v,g],[m,_]),this.log(Pk.LOG,"[mux],videoTimeRange,",null==h?void 0:h.startPts,"-",null==h?void 0:h.endPts,",videoSampleIdx",v,"-",g,",audioTimeRange,",null==d?void 0:d.startPts,"-",null==d?void 0:d.endPts,",audioSampleIdx",m,"-",_,n,JSON.stringify(u),r);var b=r||(null==p?void 0:p.length)>0?null==h?void 0:h.startPts:-1,T=r||(null==p?void 0:p.length)>0?null==h?void 0:h.endPts:-1,k=r||(null==y?void 0:y.length)>0?null==d?void 0:d.startPts:-1,S=r||(null==y?void 0:y.length)>0?null==d?void 0:d.endPts:-1,w=[Math.min(b,k),Math.max(T,S)];if(this.FMP4Remuxer){var R=this.FMP4Remuxer.remux(this._needInitSegment,{initMerge:!0,range:u});R.initSegment&&(this._needInitSegment=!1),f={buffer:eL(R.audioSegment,R.videoSegment),range:u,state:r,context:{range:u,fragIndex:n,timeRange:w},initSeg:R.initSegment}}else f={videoTrack:h,audioTrack:d,buffer:null,range:u,state:r,context:{range:u,fragIndex:n,timeRange:w}};i.firstmux<0&&o.startMuxTime>0&&(i.firstmux=WA()-o.startMuxTime),this._loadSuccessCallBack&&this._loadSuccessCallBack(f)}catch(r){var M=null==r?void 0:r.message;this.log(Pk.ERROR,"mux err:",M);var x=new cS(sS.REMUX,aS.muxError,{msg:M});this.errorHandler(x,"mux",{fragIndex:n,range:[t,t+e.byteLength]})}}},{key:"updateDemuxSampleIdxRange",value:function(e,t){(null==e?void 0:e[1])>=0&&(this._lastDemuxSampleIdxRange.video=e[1]),(null==t?void 0:t[1])>=0&&(this._lastDemuxSampleIdxRange.audio=t[1]),this.log(Pk.LOG,"updateDemuxSampleIdxRange",JSON.stringify(this._lastDemuxSampleIdxRange))}},{key:"loadFragment",value:function(){var e=u(o().mark((function e(t,n){var r,i,a,s,u,c,l,f,h,d,p,v,g,y,m,_,b,T,k,S,w,R;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._curLoadSegIdx=t,r=this.adaptTimeRange[t],!this._isPending&&0!==(null==n?void 0:n[1])&&r&&!r.isLoading&&0!==(null==n?void 0:n.length)){e.next=4;break}return e.abrupt("return");case 4:if(this._segmentToBitRateMap.set(t,this._bitRate),this.timeRecord.startLoadTime<0&&(this.timeRecord.startLoadTime=WA()),i=this._repeatInfo,a=i.startPos,s=i.curDataPos,u=this._repeatInfo.usedPos,!(n.length>=2&&n[1]&&n[1]>0&&n[0]>=a&&n[1]<a+s)){e.next=19;break}r.isLoading=!0,c=Math.max(n[0],a+u),l=new Uint8Array(this._repeatInfo.data.slice(c-a,n[1]-a+1)),this.log(Pk.LOG,"[mp4.loadFragment] has all data: ",c,n[1]),this.log(Pk.LOG,"[mp4.loadFragment] ",",repeatInfo, startPos,",a,", usedPos,",a+u,",curDataPos, ",a+s),r.downloaded=!0,this.metaLoading||0===a?(this._repeatInfo.usedPos=0,this.log(Pk.LOG,"[mp4.loadFragment] has all data set repeatInfo.usedPos = 0")):(f=r.range[0]-a,h=r.range[1]+1-a,d=new Uint8Array(this._repeatInfo.data.slice(f,h)),this.resetRepeatInfo(),this.cacheRepeatData(r.repeatRange,r.range,d)),this._mux(l,c,t,!0),e.next=47;break;case 19:if(!(n.length>=2&&n[0]&&n[0]>=a&&n[0]<=a+s)){e.next=41;break}if(r.isLoading){e.next=39;break}if(p=Math.max(n[0],a+u),v=Math.min(n[1]+1,a+s),!((g=new Uint8Array(this._repeatInfo.data.slice(p-a,v-a))).byteLength>0)){e.next=31;break}return this._repeatInfo.usedPos=v-this._repeatInfo.startPos,y=this._repeatInfo.usedPos,this.log(Pk.LOG,"[mp4.loadFragment] has part data: ",p,p+g.byteLength),this.log(Pk.LOG,"[mp4.loadFragment] ",",repeatInfo, startPos,",a,", usedPos,",a+y,",curDataPos, ",a+s),this._mux(g,p,t,n[1]<=a+y),e.abrupt("return");case 31:if(this.metaLoading||r.isLoading){e.next=39;break}return this.log(Pk.LOG,"[mp4.loadFragment] load part data >>> ",a+s,n[1]),r.isLoading=!0,m=[a+u,n[1]],(_=null==r?void 0:r.repeatRange)&&_[0]<m[0]?(b=[r.repeatRange[0],m[0]],T=this._repeatInfo,k=T.startPos,S=T.curDataPos,w=T.data,R=w.slice(b[0]-k,S),this.resetRepeatInfo(),this.cacheRepeatData(r.repeatRange,b,R)):this.resetRepeatInfo(),e.next=39,this.startLoad(m,t);case 39:e.next=47;break;case 41:if(this.metaLoading&&!(n[0]>a)||r.isLoading){e.next=47;break}return r.isLoading=!0,this.log(Pk.LOG,"[mp4.loadFragment],ready to load all data ,segmentIdx, ",t,",range >>> ",n),this.resetRepeatInfo(),e.next=47,this.startLoad(n,t);case 47:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"resetRepeatInfo",value:function(){this.log(Pk.LOG,", resetRepeatInfo"),this._repeatInfo.startPos=-1,this._repeatInfo.curDataPos=0,this._repeatInfo.usedPos=0}},{key:"setSwitchPCDNCallBack",value:function(e){this._switchPCDNCallBack=e}},{key:"updateChangeBitRateTime",value:function(e){this.changeBitRateTime=e}},{key:"startLoad",value:function(){var e=u(o().mark((function e(t,n){var i,a,s,u,c,l,f,h,d,p,v,g=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=g.length>2&&void 0!==g[2]&&g[2],a=this.firstFrameTime,0===n&&(null==a?void 0:a.first_gop_req_cnt)<0?a.first_gop_req_cnt=1:n>0&&(null==a?void 0:a.first_gop_req_cnt)<0&&(a.first_gop_req_cnt=0),s=this.selectedPCDN(i),u=s||this.url,this.log(Pk.LOG,"[startLoad], ",n,JSON.stringify(t),u),e.prev=6,e.next=9,this.MP4Loader.loadData(t,this.MP4Loader.cache,{index:n,onProgress:this.onprogressDataArrive,onProcessMinLen:this.options.onProcessMinLen,url:u,headers:s?{"X-Origin-Server-Host":this._domain}:null,priOptions:{type:s?jk:Hk}});case 9:e.next=28;break;case 11:if(e.prev=11,e.t0=e.catch(6),f=(null===e.t0||void 0===e.t0||null===(c=e.t0.options)||void 0===c||null===(l=c.priOptions)||void 0===l?void 0:l.type)===jk||!!s,d=e.t0.url||(f?s:this.url),!f){e.next=26;break}return this.pcdnVVStat.conn_fail_num++,r.pcdn_download_failed_cnt++,h=this._pcdnNodeList.shift(),this.emit(ML,h),this.log(Pk.ERROR,"pcdn load err, retry use cdn,range",t,",fragIndex",n,(null===e.t0||void 0===e.t0?void 0:e.t0.isTimeout)||(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p?void 0:p.status),null===e.t0||void 0===e.t0?void 0:e.t0.message,d),e.next=24,this.startLoad(t,n,!0);case 24:e.next=27;break;case 26:this.log(Pk.ERROR,"cdn load err,range",JSON.stringify(t),",fragIndex",n,(null===e.t0||void 0===e.t0?void 0:e.t0.isTimeout)||(null===e.t0||void 0===e.t0||null===(v=e.t0.response)||void 0===v?void 0:v.status),null===e.t0||void 0===e.t0?void 0:e.t0.message,d);case 27:this.loadError(e.t0,"loadFragment",f,{range:t,fragIndex:n,url:d});case 28:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadError",value:function(e,t,n,r){var i,o;!e.response&&(e.response={}),e.isTimeout?e.response.status=aS.timeout:null!=e&&null!==(i=e.response)&&void 0!==i&&i.status||(e.response.status=aS.networkError);var a=nL(null==r?void 0:r.url);this.markErrHost(a),this.emit(xL,{src:null==r?void 0:r.url,host:a,errorCode:null==e||null===(o=e.response)||void 0===o?void 0:o.status,message:null==e?void 0:e.message,range:(null==r?void 0:r.range)&&JSON.stringify(r.range),headers:null==r?void 0:r.headers}),n||this.errorHandler(e,t,r)}},{key:"loadAllFragmentData",value:function(){var e=u(o().mark((function e(t,n,i){var a,s,u,c,l,f,h,d,p,v,g,y,m,_,b,T,k,S=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=S.length>3&&void 0!==S[3]&&S[3],!this.hasDestroyed){e.next=3;break}return e.abrupt("return");case 3:return this.resetRepeatInfo(),u=(null===(a=this.adaptTimeRange[t])||void 0===a?void 0:a.range)||this.getFragRange(t),this._curLoadSegIdx=t,c=this.selectedPCDN(s),l=qA(c||this.url,{__rand:(new Date).getTime()}),e.prev=8,this.log(Pk.LOG,",[loadAllFragmentData], index,",t,",rang,",JSON.stringify(u),", use-pcdn,",!!c),e.next=12,this.MP4Loader.loadData(u,this.MP4Loader.cache,{index:t,url:l,headers:c?{"X-Origin-Server-Host":this._domain}:null,priOptions:{type:c?jk:Hk}});case 12:if(f=e.sent,this.log(Pk.LOG,"loadAllFragmentData after",t,JSON.stringify(u)),f&&f.data){e.next=18;break}return h=new Error("response null"),i?i(h):this.loadError(h,"loadFragment",!!c,{range:u,fragIndex:t,url:c||this.url}),e.abrupt("return");case 18:(null==(d=f.data)?void 0:d.byteLength)>0&&u&&u.length>=2?(this._receiveDataPos=u[0]+(null==d?void 0:d.byteLength),this._loadSuccessCallBack=n,this.adaptTimeRange[t].downloaded=!0,this.cacheRepeatData(this.adaptTimeRange[t].repeatRange,u,d),this._mux(d,u[0],t,!0)):(v=vL(null==f||null===(p=f.response)||void 0===p?void 0:p.headers),this.log(Pk.LOG,"[FragLoadDowned check false, retry load],fragmentIdx,",t,",dataLen,",null==d?void 0:d.byteLength,JSON.stringify(u),JSON.stringify(v),l),g=new Error("dataLen not match"),this.resetRepeatInfo(),y=this.adaptTimeRange[t],this.emit(EL,[y.startTime,y.endTime]),this.loadError(g,"loadFragment",!!c,{range:u,fragIndex:t,url:l,headers:v})),e.next=36;break;case 23:if(e.prev=23,e.t0=e.catch(8),!(b=(null===e.t0||void 0===e.t0||null===(m=e.t0.options)||void 0===m||null===(_=m.priOptions)||void 0===_?void 0:_.type)===jk||!!c)){e.next=34;break}return r.pcdn_download_failed_cnt++,this._pcdnNodeList.shift(),this.log(Pk.ERROR,"[loadAllFragmentData] ,pcdn load err, retry use cdn,fragIndex",t,e.t0.isTimeout||(null===e.t0||void 0===e.t0||null===(T=e.t0.response)||void 0===T?void 0:T.status),null===e.t0||void 0===e.t0?void 0:e.t0.message),e.next=32,this.loadAllFragmentData(t,n,i,!0);case 32:e.next=35;break;case 34:this.log(Pk.ERROR,"[MP4] loadAllFragmentData error",{fragIndex:t,range:JSON.stringify(u)},e.t0.isTimeout||(null===e.t0||void 0===e.t0||null===(k=e.t0.response)||void 0===k?void 0:k.status),null===e.t0||void 0===e.t0?void 0:e.t0.message);case 35:this.loadError(e.t0,"loadFragment",b,{range:u,fragIndex:t,url:e.t0.url||(b?c:this.url)});case 36:case"end":return e.stop()}}),e,this,[[8,23]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"currentLoadUseUrl",value:function(){return this._isUseCDN?this.url:(null===(e=this._pcdnNodeList)||void 0===e?void 0:e.length)>0?this._pcdnNodeList[0].url:"";var e}},{key:"getCurSwitchPCDNCnt",value:function(){return this._PCDNSwitchCnt}},{key:"selectedPCDN",value:function(e){if(this._PCDNState!==OL&&!e){var t;if(this.isUsePCDN()){if(this._isUseCDN){if(this._switchPCDNCallBack){var n=this._switchPCDNCallBack();n>0&&(this.options.switchPCDNMaxCnt=n)}if(this._PCDNSwitchCnt>=this.options.switchPCDNMaxCnt)return this._isUseCDN=!0,this.log(Pk.LOG,"cdn switch pcdn outlimit, curSwitchCnt ,",this._PCDNSwitchCnt,",maxCnt,",this.options.switchPCDNMaxCnt),null;this._PCDNSwitchCnt++,this.log(Pk.LOG,"cdn switch pcdn, curSwitchCnt,",this._PCDNSwitchCnt,",maxCnt,",this.options.switchPCDNMaxCnt)}this._isUseCDN=!1,t=qA(this._pcdnNodeList[0].url,{__vid:this.options.vid}),this._lastPCDNUrl!==t&&(this.emit(wL,t),this._lastPCDNUrl=t,this.pcdnVVStat.conn_req_num+=1),r.pcdn_download_request_cnt++}else this._isUseCDN||(this.log(Pk.LOG,"pcdn switch cdn PCDNSwitchCnt,",this._PCDNSwitchCnt,",maxCnt,",this.options.switchPCDNMaxCnt),this.pcdnVVStat.conn_jump_num+=1),this._isUseCDN=!0;return t}this._isUseCDN=!0}},{key:"cancelLoading",value:function(){var e=u(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.MP4Loader){e.next=3;break}return e.next=3,this.MP4Loader.cancel();case 3:this._optionDataLenInfo[jk]&&this._optionDataLenInfo[jk]>0&&(this.emit(PL,{load_type:jk,len:this._optionDataLenInfo[jk]}),this._optionDataLenInfo[jk]=0),this._optionDataLenInfo[Hk]&&this._optionDataLenInfo[Hk]>0&&(this.emit(PL,{load_type:Hk,len:this._optionDataLenInfo[Hk]}),this._optionDataLenInfo[Hk]=0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateUrl",value:function(e,t){var n=nL(e);this._defaultDomain||(this._defaultDomain=n),n.indexOf("www.")<0?this._domain=n:this._domain=this._defaultDomain,this.url=e,this.backUrl=t||[]}},{key:"getDataBitRate",value:function(e){return this._segmentToBitRateMap.get(e)}},{key:"checkCodecH265",value:function(){return this.meta&&(this.meta.videoCodec.indexOf("hvc1")>-1||this.meta.videoCodec.indexOf("hev1")>-1)}},{key:"checkCodecH266",value:function(){return this.meta&&this.meta.videoCodec.indexOf("bvc2")>-1}},{key:"destroy",value:function(){this.hasDestroyed||(this.resetTansmuxer(),this.transmuxerWorkerControl&&this.transmuxerWorkerControl.destroy(),this.fileSize=0,this.totalSize=0,this._isPending=!1,this.metaLoading=!1,this.resetRepeatInfo(),delete this._repeatInfo.data,this._bitRateInfoMap.clear(),this._segmentToBitRateMap.clear(),this.MP4Loader&&(this.MP4Loader.cancel(),this.MP4Loader.destroy()),this.removeAllListeners(),this.hasDestroyed=!0,this.pcdnVVStat=this.resetPCDNVVStat())}},{key:"resetPCDNVVStat",value:function(){return{try_req_node:0,req_node_succ:0,has_ret_node:0,conn_req_num:0,conn_fail_num:0,conn_jump_num:0}}},{key:"resetTansmuxer",value:function(){var e;null===(e=this.resetDemuxSampleIdx)||void 0===e||e.call(this),this.MP4Demuxer&&this.MP4Demuxer.reset(),this.MP4Demuxer=null,this.FMP4Remuxer&&this.FMP4Remuxer.reset(),this.FMP4Remuxer=null,this.transmuxerWorkerControl&&this.transmuxerWorkerControl.reset()}},{key:"getMediaEndTime",value:function(){if(this._mediaEndTime>0)return this._mediaEndTime;var e=this.videoTrak,t=this.audioTrak;if((null==e?void 0:e.length)>0){var n=e[e.length-1].endTime;this._mediaEndTime=this._mediaEndTime<0?n:Math.min(n,this._mediaEndTime)}if((null==t?void 0:t.length)>0){var r=t[t.length-1].endTime;this._mediaEndTime=this._mediaEndTime<0?r:Math.min(r,this._mediaEndTime)}return this._mediaEndTime}}],[{key:"pcdnDownLoadReqCnt",get:function(){var e=r.pcdn_download_request_cnt,t=r.pcdn_download_failed_cnt;return r.pcdn_download_request_cnt=0,r.pcdn_download_failed_cnt=0,{pcdn_download_request_cnt:e,pcdn_download_failed_cnt:t}}},{key:"getDefaultConfig",value:function(){return{onProcessMinLen:1024,xhrSetup:null,chunkSize:8e5,isCache:!1,playerId:"",vid:"",afterLoadeddataCallBackLen:0,ext:{}}}}]),r}(i_);h(AL,"pcdn_download_request_cnt",0),h(AL,"pcdn_download_failed_cnt",0);var LL=function(e){d(n,e);var t=y(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0;return c(this,n),(o=t.call(this,e,r,i,a,s,u))._logTag="".concat(u,"_").concat(Kk)||"",o}return f(n,[{key:"updateAdaptTimeRange",value:function(e,t){this._lastTargetDur=t;for(var n=this.adaptTimeRange,r=0;r<n.length;r++){var i=n[r].timeRangeIdx;if(e>=i[0]&&e<i[1])return this.log(Pk.LOG,"has adaptTimeRange,startSrcIdx, ",e,",adaptTimeRangeIdx",r,", dur,",t,JSON.stringify(n[r])),r}var o=n.length>0?n[n.length-1].timeRangeIdx[1]:0;if(o>=this.timeRange.length)return n.length-1;for(;o<e;){var a=this.timeRange[o].startTime,s=this.timeRange[o].endTime,u={startTime:a,endTime:s,timeRangeIdx:[o,o+1],duration:s-a,downloaded:!1,isLoading:!1};this.adaptTimeRange.push(u),this.updateTimeRangeInAdaptTimeRangeIdx(u.timeRangeIdx,this.adaptTimeRange.length-1),this.log(Pk.LOG,"gap adaptTimeRange,adaptTimeRangeIdx, ",this.adaptTimeRange.length-1,JSON.stringify(u)),o++}for(var c=0,l=o,f=o;f<this.timeRange.length;f++){if(!(c<t)){l=f;break}c+=this.timeRange[f].endTime-this.timeRange[f].startTime}f===this.timeRange.length&&(l=this.timeRange.length);var h=[o,l],d=this.timeRange[h[0]].startTime,p=h[1]===this.timeRange.length?this.timeRange[h[1]-1].endTime:this.timeRange[h[1]].startTime,v={startTime:d,endTime:p,timeRangeIdx:h,duration:p-d,downloaded:!1,isLoading:!1};return this.log(Pk.LOG,"update adaptTimeRange,startIdx,",h[0],", dur,",t,JSON.stringify(v)),this.adaptTimeRange.push(v),this.updateTimeRangeInAdaptTimeRangeIdx(h,this.adaptTimeRange.length-1),this.adaptTimeRange.length-1}},{key:"updateTimeRangeInAdaptTimeRangeIdx",value:function(e,t){for(var n=e[0];n<e[1];n++)n<this.timeRange.length&&(this.timeRange[n].adaptTimeRangeIdx=t)}},{key:"getAdaptIdxBySrcIdx",value:function(e,t){var n,r=this.adaptTimeRange.length;if(!t&&e>=(null===(n=this.adaptTimeRange[r-1])||void 0===n?void 0:n.timeRangeIdx[1])){var i=this._lastTargetDur||5;this.updateAdaptTimeRange(e,i)}for(var o=0;o<this.adaptTimeRange.length;o++){var a=this.adaptTimeRange[o].timeRangeIdx;if(a&&e>=a[0]&&e<a[1])return o}return-1}},{key:"getFragmentIdx",value:function(e){var t,n;if(this.videoTrak.length){if(t=this.videoTrak.find((function(t){return t.startTime<=e&&t.endTime>e})),n=this.audioTrak.find((function(t){return t.startTime<=e&&t.endTime>e})),t&&n)return Math.min(t.index,n.index);if(t||n)return t?t.index:n.index;var r=Number.MAX_VALUE;return this.videoTrak&&this.videoTrak.length>0&&(r=this.videoTrak.length-1),this.audioTrak&&this.audioTrak.length>0&&(r=Math.min(this.audioTrak.length-1,r)),r}return(n=this.audioTrak.find((function(t){return t.startTime<=e&&t.endTime>e})))?n.index:0}},{key:"resetFragmentLoadState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.log(Pk.LOG,", resetFragmentLoadState, fragIndex, ",e,",changeBitrate,",t);for(var n=0;n<this.adaptTimeRange.length;n++)if(n<e?(this.adaptTimeRange[n].downloaded=!0,this.adaptTimeRange[n].isLoading=!0):(this.adaptTimeRange[n].downloaded=!1,this.adaptTimeRange[n].isLoading=!1),t){this.adaptTimeRange[n].range=null;var r=this.adaptTimeRange[n].timeRangeIdx;if(r[0]>=this.timeRange.length){this.log(Pk.WARN,"fix adaptTimeRange fragIndex",e," ,timeRangeIdx[0] >= this.timeRange.length, so end",r[0],this.timeRange.length,",endFragment,",n),this.adaptTimeRange=this.adaptTimeRange.slice(0,n);break}r[1]>=this.timeRange.length&&(this.log(Pk.WARN,"fix adaptTimeRange fragIndex",e," ,timeRangeIdx[1],",r[1],">>>>",this.timeRange.length,",endFragment,",n),r[1]=this.timeRange.length,this.adaptTimeRange=this.adaptTimeRange.slice(0,n+1)),this.adaptTimeRange[n].startTime=this.timeRange[r[0]].startTime,this.adaptTimeRange[n].endTime=r[1]>=this.timeRange.length?this.timeRange[this.timeRange.length-1].endTime:this.timeRange[r[1]].endTime,this.adaptTimeRange[n].range=this.getFragRange(n)}}},{key:"calculateRange",value:function(e){var t,n,r,i,o=null,a=null,s=null,u=null,c=e<this.adaptTimeRange.length?this.adaptTimeRange[e].timeRangeIdx:null;if(!c)return this.log(Pk.warn,"calculateRange err",e,JSON.stringify(this.adaptTimeRange)),[];var l=c[0],f=c[1];this.log(Pk.LOG,"getFragRange, timeRangeIdx,",JSON.stringify(c));var h=this.videoTrak;h&&(o=l<h.length?h[l]:h[h.length-1],a=f<h.length?h[f-1]:h[h.length-1]);var d=this.audioTrak;d&&(s=l<d.length?d[l]:d[d.length-1],u=f<d.length?d[f-1]:d[d.length-1]);var p=Math.min((null===(t=o)||void 0===t?void 0:t.range[0])||1/0,(null===(n=s)||void 0===n?void 0:n.range[0])||1/0),v=[p,Math.max(p,(null===(r=a)||void 0===r?void 0:r.range[1])||0,(null===(i=u)||void 0===i?void 0:i.range[1])||0)];return this.log(Pk.LOG,"calculateRange",e,v[0],"-",v[1]),v}},{key:"getTimeRangeByIdx",value:function(e){var t,n,r,i,o=null,a=this.videoTrak;a&&(o=e<a.length?a[e]:a[a.length-1]);var s=null,u=this.audioTrak;return u&&(s=e<u.length?u[e]:u[u.length-1]),[Math.min((null===(t=o)||void 0===t?void 0:t.range[0])||1/0,(null===(n=s)||void 0===n?void 0:n.range[0])||1/0),Math.max((null===(r=o)||void 0===r?void 0:r.range[1])-1||0,(null===(i=s)||void 0===i?void 0:i.range[1])-1||0)]}},{key:"getFragRange",value:function(e){var t;if(e<this.adaptTimeRange.length&&null!==(t=this.adaptTimeRange[e])&&void 0!==t&&t.range)return this.log(Pk.LOG,"getFragRange exist",e,JSON.stringify(this.adaptTimeRange[e].range)),this.adaptTimeRange[e].range;var n=this.calculateRange(e);if(e<this.adaptTimeRange.length){this.adaptTimeRange[e].range=n;var r=this.adaptTimeRange[e].timeRangeIdx[1];if(r<this.timeRange.length){var i=this.getTimeRangeByIdx(r);(null==i?void 0:i.length)>1&&i[0]<i[1]&&n[1]>i[0]&&(this.adaptTimeRange[e].repeatRange=[i[0],n[1]])}}return n}},{key:"getSubRange",value:function(e,t,n){for(var r=this.adaptTimeRange[e].timeRangeIdx,i=r[0],o=r[0];o<r[1];o++)if(t>=this.timeRange[o].startTime&&t<this.timeRange[o].endTime){i=o;break}var a=[this.getSrcFragRange(i)[0],n[1]];return this.log(Pk.LOG,">>>>>getSubRange finalRange ",JSON.stringify(a),",oldRange,",JSON.stringify(n)),a}},{key:"getSrcFragRange",value:function(e){var t,n,r,i,o=null,a=null;this.log(Pk.LOG,"getFragRange, timeRangeIdx, srcFragment,",JSON.stringify(e));var s=this.videoTrak;s&&(o=e<s.length?s[e]:s[s.length-1]);var u=this.audioTrak;u&&(a=e<u.length?u[e]:u[u.length-1]);var c=[Math.min((null===(t=o)||void 0===t?void 0:t.range[0])||1/0,(null===(n=a)||void 0===n?void 0:n.range[0])||1/0),Math.max((null===(r=o)||void 0===r?void 0:r.range[1])-1||0,(null===(i=a)||void 0===i?void 0:i.range[1])-1||0)];return this.log(Pk.LOG,",getSrcFragRange",e,c),c}},{key:"getSamplesRange",value:function(e,t){var n=[],r=this.adaptTimeRange[e].timeRangeIdx;switch(t){case"video":if(this.videoTrak&&r[0]<this.videoTrak.length){var i=this.videoTrak[r[0]].frames;n.push(i[0].index);var o=this.videoTrak.length,a=r[1]-1,s=a<o?this.videoTrak[a].frames:this.videoTrak[o-1].frames;n.push(s[s.length-1].index)}break;case"audio":if(this.audioTrak&&r[0]<this.audioTrak.length){var u=this.audioTrak[r[0]].frames;n.push(u[0].index);var c=this.audioTrak.length,l=r[1]-1,f=l<c?this.audioTrak[l].frames:this.audioTrak[c-1].frames;n.push(f[f.length-1].index)}break;default:console.warn("[getSamplesRange] type ",t," is invalid")}return n}}]),n}(AL),CL={},GL=wt;CL.f=GL;var NL=Mp,BL=lt,$L=CL,FL=qt.f,UL=L,HL=ve,jL=wt,VL=br,zL=wi,XL=x,KL=L,QL=X,WL=D,qL=Pe,YL=E,JL=lt,ZL=ge,eC=tn,tC=ue,nC=Lt,rC=Xo,iC=U,oC=xs,aC=Ea,sC=Tr,uC=jg,cC=qr,lC=P,fC=qt,hC=os,dC=C,pC=br,vC=sc,gC=it,yC=Nn,mC=vt,_C=wt,bC=CL,TC=ou,kC=Yn,SC=go.forEach,wC=Gn("hidden"),RC="Symbol",MC="prototype",xC=kC.set,PC=kC.getterFor(RC),EC=Object[MC],DC=XL.Symbol,OC=DC&&DC[MC],IC=XL.RangeError,AC=XL.TypeError,LC=XL.QObject,CC=lC.f,GC=fC.f,NC=uC.f,BC=dC.f,$C=QL([].push),FC=gC("symbols"),UC=gC("op-symbols"),HC=gC("wks"),jC=!LC||!LC[MC]||!LC[MC].findChild,VC=function(e,t,n){var r=CC(EC,t);r&&delete EC[t],GC(e,t,n),r&&e!==EC&&GC(EC,t,r)},zC=WL&&YL((function(){return 7!==oC(GC({},"a",{get:function(){return GC(this,"a",{value:7}).a}})).a}))?VC:GC,XC=function(e,t){var n=FC[e]=oC(OC);return xC(n,{type:RC,tag:e,description:t}),WL||(n.description=t),n},KC=function(e,t,n){e===EC&&KC(UC,t,n),eC(e);var r=nC(t);return eC(n),JL(FC,r)?(n.enumerable?(JL(e,wC)&&e[wC][r]&&(e[wC][r]=!1),n=oC(n,{enumerable:iC(0,!1)})):(JL(e,wC)||GC(e,wC,iC(1,oC(null))),e[wC][r]=!0),zC(e,r,n)):GC(e,r,n)},QC=function(e,t){eC(e);var n=tC(t),r=aC(n).concat(JC(n));return SC(r,(function(t){(!WL||KL(WC,n,t))&&KC(e,t,n[t])})),e},WC=function(e){var t=nC(e),n=KL(BC,this,t);return!(this===EC&&JL(FC,t)&&!JL(UC,t))&&(!(n||!JL(this,t)||!JL(FC,t)||JL(this,wC)&&this[wC][t])||n)},qC=function(e,t){var n=tC(e),r=nC(t);if(n!==EC||!JL(FC,r)||JL(UC,r)){var i=CC(n,r);return i&&JL(FC,r)&&!(JL(n,wC)&&n[wC][r])&&(i.enumerable=!0),i}},YC=function(e){var t=NC(tC(e)),n=[];return SC(t,(function(e){!JL(FC,e)&&!JL(yC,e)&&$C(n,e)})),n},JC=function(e){var t=e===EC,n=NC(t?UC:tC(e)),r=[];return SC(n,(function(e){JL(FC,e)&&(!t||JL(EC,e))&&$C(r,FC[e])})),r};qL||(DC=function(){if(ZL(OC,this))throw new AC("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?rC(arguments[0]):void 0,t=mC(e),n=function(e){var r=void 0===this?XL:this;r===EC&&KL(n,UC,e),JL(r,wC)&&JL(r[wC],t)&&(r[wC][t]=!1);var i=iC(1,e);try{zC(r,t,i)}catch(e){if(!(e instanceof IC))throw e;VC(r,t,i)}};return WL&&jC&&zC(EC,t,{configurable:!0,set:n}),XC(t,e)},pC(OC=DC[MC],"toString",(function(){return PC(this).tag})),pC(DC,"withoutSetter",(function(e){return XC(mC(e),e)})),dC.f=WC,fC.f=KC,hC.f=QC,lC.f=qC,sC.f=uC.f=YC,cC.f=JC,bC.f=function(e){return XC(_C(e),e)},WL&&(vC(OC,"description",{configurable:!0,get:function(){return PC(this).description}}),pC(EC,"propertyIsEnumerable",WC,{unsafe:!0}))),zL({global:!0,constructor:!0,wrap:!0,forced:!qL,sham:!qL},{Symbol:DC}),SC(aC(HC),(function(e){!function(e){var t=NL.Symbol||(NL.Symbol={});BL(t,e)||FL(t,e,{value:$L.f(e)})}(e)})),zL({target:RC,stat:!0,forced:!qL},{useSetter:function(){jC=!0},useSimple:function(){jC=!1}}),zL({target:"Object",stat:!0,forced:!qL,sham:!WL},{create:function(e,t){return void 0===t?oC(e):QC(oC(e),t)},defineProperty:KC,defineProperties:QC,getOwnPropertyDescriptor:qC}),zL({target:"Object",stat:!0,forced:!qL},{getOwnPropertyNames:YC}),function(){var e=HL("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=jL("toPrimitive");t&&!t[r]&&VL(t,r,(function(e){return UL(n,this)}),{arity:1})}(),TC(DC,RC),yC[wC]=!0;var ZC=Pe&&!!Symbol.for&&!!Symbol.keyFor,eG=wi,tG=ve,nG=lt,rG=Xo,iG=it,oG=ZC,aG=iG("string-to-symbol-registry"),sG=iG("symbol-to-string-registry");eG({target:"Symbol",stat:!0,forced:!oG},{for:function(e){var t=rG(e);if(nG(aG,t))return aG[t];var n=tG("Symbol")(t);return aG[t]=n,sG[n]=t,n}});var uG=wi,cG=lt,lG=Le,fG=Ge,hG=ZC,dG=it("symbol-to-string-registry");uG({target:"Symbol",stat:!0,forced:!hG},{keyFor:function(e){if(!lG(e))throw new TypeError(fG(e)+" is not a symbol");if(cG(dG,e))return dG[e]}});var pG=Ai,vG=le,gG=q,yG=Xo,mG=X([].push),_G=wi,bG=ve,TG=Ec,kG=L,SG=X,wG=E,RG=le,MG=Le,xG=ha,PG=Pe,EG=String,DG=bG("JSON","stringify"),OG=SG(/./.exec),IG=SG("".charAt),AG=SG("".charCodeAt),LG=SG("".replace),CG=SG(1..toString),GG=/[\uD800-\uDFFF]/g,NG=/^[\uD800-\uDBFF]$/,BG=/^[\uDC00-\uDFFF]$/,$G=!PG||wG((function(){var e=bG("Symbol")("stringify detection");return"[null]"!==DG([e])||"{}"!==DG({a:e})||"{}"!==DG(Object(e))})),FG=wG((function(){return'"\\udf06\\ud834"'!==DG("\udf06\ud834")||'"\\udead"'!==DG("\udead")})),UG=function(e,t){var n=xG(arguments),r=function(e){if(vG(e))return e;if(pG(e)){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];"string"==typeof i?mG(n,i):("number"==typeof i||"Number"===gG(i)||"String"===gG(i))&&mG(n,yG(i))}var o=n.length,a=!0;return function(e,t){if(a)return a=!1,t;if(pG(this))return t;for(var r=0;r<o;r++)if(n[r]===e)return t}}}(t);if(RG(r)||void 0!==e&&!MG(e))return n[1]=function(e,t){if(RG(r)&&(t=kG(r,this,EG(e),t)),!MG(t))return t},TG(DG,null,n)},HG=function(e,t,n){var r=IG(n,t-1),i=IG(n,t+1);return OG(NG,e)&&!OG(BG,i)||OG(BG,e)&&!OG(NG,r)?"\\u"+CG(AG(e,0),16):e};DG&&_G({target:"JSON",stat:!0,arity:3,forced:$G||FG},{stringify:function(e,t,n){var r=xG(arguments),i=TG($G?UG:DG,null,r);return FG&&"string"==typeof i?LG(i,GG,HG):i}});var jG=qr,VG=st;wi({target:"Object",stat:!0,forced:!Pe||E((function(){jG.f(1)}))},{getOwnPropertySymbols:function(e){var t=jG.f;return t?t(VG(e)):[]}});var zG=wi,XG=D,KG=X,QG=lt,WG=le,qG=ge,YG=Xo,JG=sc,ZG=si,eN=x.Symbol,tN=eN&&eN.prototype;if(XG&&WG(eN)&&(!("description"in tN)||void 0!==eN().description)){var nN={},rN=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:YG(arguments[0]),t=qG(tN,this)?new eN(e):void 0===e?eN():eN(e);return""===e&&(nN[t]=!0),t};ZG(rN,eN),rN.prototype=tN,tN.constructor=rN;var iN="Symbol(description detection)"===String(eN("description detection")),oN=KG(tN.valueOf),aN=KG(tN.toString),sN=/^Symbol\((.*)\)[^)]+$/,uN=KG("".replace),cN=KG("".slice);JG(tN,"description",{configurable:!0,get:function(){var e=oN(this);if(QG(nN,e))return"";var t=aN(e),n=iN?cN(t,7,-1):uN(t,sN,"$1");return""===n?void 0:n}}),zG({global:!0,constructor:!0,forced:!0},{Symbol:rN})}var lN=KS.aTypedArrayConstructor;function fN(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/");return t>0||n>0}function hN(){var e,t,n,r,i;return!(!navigator.requestMediaKeySystemAccess||(e=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),t=fN(),n=function(){var e=navigator.mimeTypes,t=navigator.userAgent,n=!1;return e&&t.indexOf("Chrome")>1&&(n=Object.keys(e).some((function(t){return!!(e[t].type&&e[t].type.indexOf("360")>-1||e[t].type&&e[t].type.indexOf("application/vnd.chromium.remoting-viewer")>-1||e[t].description&&e[t].description.indexOf("360")>-1)}))),n}(),r=navigator.userAgent.indexOf("Firefox")>0,i=navigator.userAgent.indexOf("Edge")>0,e||t||n||r||i))}function dN(){try{if("object"===(typeof WebAssembly>"u"?"undefined":a(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){console.log(e)}return!1}function pN(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource;return e&&"function"==typeof e.isTypeSupported}(0,KS.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(lN(this))(t);t>e;)n[e]=arguments[e++];return n}),ew);var vN=function(){function e(){c(this,e);var t,n,r=new Promise((function(e,r){t=e,n=r}));return r.id="".concat((new Date).getTime(),"_").concat(parseInt(100*Math.random())),r.resolve=function(e){t(e),r.state="fulfilled"},r.reject=function(e){n(e),r.state="rejected",r.isBreak="DESTROYED"===e},r.state="pending",r}return f(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}(),gN="DESTROYED",yN="xglog_cache",mN="degrade",_N="fps_stuck",bN=null,TN=null,kN=null,SN=null,wN=null,RN=0,MN=null,xN=function(e){d(r,e);var t,n=y(r);function r(e){var t,s,l;return c(this,r),h(g(l=n.call(this,e)),"_onChangeConfig",(function(e){if(e){var t=e.nextBufferLength===l.config.minBufferLength;if(l.setConfig(e),e.nextBufferLength&&!t)try{l._onTimeUpdate()}catch{}}})),h(g(l),"fpsStuckHandle",(function(e){var t=g(l),n=t.player,r=t.mse;if(l.fpsStuckTime||(l.fpsStuckTime=e.currentTime,l.log(Pk.LOG,"fpsStuckHandle, currentTime,",e.currentTime)),l.fpsStuckTime>0){var i=n.bufferedPoint;r.clearOpQueues(Nk.VIDEO),l.log(Pk.LOG,"fpsStuckHandle, remove,",i.start,"-",i.end,",seekTime,",l.fpsStuckTime),null==r||r.remove(Nk.VIDEO,i.start,i.end).then((function(){n.currentTime=l.fpsStuckTime,l.fpsStuckTime=null}))}})),h(g(l),"_retryHook",(function(){var e=g(l),t=e.player,n=e.playerConfig,r=t.paused;l.softDecode?t.vtype="MP4_MSE_SOFT":t.vtype="MP4_MSE",l._defInited=!1;var i=t.currentTime||0;return l.log(Pk.LOG,"retryHook ",n.vid,l.codecType,i),l._addMetaDataEvent((function(){i&&(t.currentTime=i,l.log(Pk.LOG,"retryHook update currentTime",n.vid,l.codecType,i)),r?t.pause():t.play(),l._removeMetaDataEvent()})),l.destroyMSE(),l._reset(),l.playerStartInit(n.url),!1})),h(g(l),"_playHook",(function(e){l._usePaused=!1,l._canceLoading=!1,l.log(Pk.LOG,"playHook"),l._startProgress()})),h(g(l),"_pauseHook",(function(e){var t;l._usePaused=!0;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];l.log(Pk.LOG,"pauseHook",r[0],null===(t=l.player)||void 0===t?void 0:t.currentTime),r.indexOf(null==Wk?void 0:Wk.BUFFER_CONTROLS)<0&&(clearTimeout(l.checkResumePlayTimer),l.checkResumePlayTimer=null,l.log(Pk.LOG,"pause hook clear buffer_control state")),l._loadStuckCheck()})),h(g(l),"abrSwitchURL",function(){var e=u(o().mark((function e(t){var n,r,i,a,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g(l),r=n.playerConfig,i=r.definition.list,a=0,s=0;case 4:if(!(s<i.length)){e.next=11;break}if(t.definition!==i[s].definition){e.next=8;break}return a=s,e.abrupt("break",11);case 8:s++,e.next=4;break;case 11:u=l.player.curDefinition,l.changeDefinition(i[a],u,!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h(g(l),"timerHandle",(function(){l._requestTimer&&l._onTimeUpdate()})),h(g(l),"changeDefineCanPlay",(function(e,t,n,r){var i=g(l).player;if(i.ended)i.currentTime=0;else{var o=g(l)._changeDefState;i.currentTime=o?o.currentTime:e,(o?o.paused:t)?i.pause():i.play(),l._changeDefState=null,i.emit(Y_,{from:n,to:r})}})),h(g(l),"changeDefinition",(function(e,t,n){var r=g(l),i=r.player,a=r.playerConfig,s=r.mp4,c=r.config;if(t||(t=i.curDefinition),l._MSEError=!1,l._isReceiveEndedEvent=!1,l.useVideoLoad)return"__auto__"===e.url&&(e.url=a.definition.list[0].url),void kN.call(l.player,e,t);var f=i.definitionList.filter((function(t){return t.definition===e.definition}));f.length>0&&(e=f[0]);var h=l._handlerUrl(e.url);if(h){if(c._mainURL=h.main,c._backupURL=h.backup,e._mainURL=c._mainURL,e._backupURL=c._backupURL,c.switchBitRateWay&&!n)return void l.oldChangeDefinition(e,t);var d="自动"===e.definition||"auto"===e.definition;if(n)l.log(Pk.LOG,"[switchBitrate:ABR], ready to switch bitRate, ",e.bitrate,e.definition);else{var p,v=!1;if(d)l._abrService&&l._abrService.enable(),v=!0;else{var y;l._abrService&&l._abrService.disable();var m=null===(y=a.definition)||void 0===y?void 0:y.list;if(m&&(!e.bitrate||!e.uri||!e.size||!e.duration))for(var _=0;_<m.length;_++)if(e.definition===m[_].definition){e.bitrate=m[_].bitrate,e.uri=m[_].uri||t.uri,e.size=m[_].size||ZA(e.bitrate,a.duration),e.duration=m[_].duration||l.playerConfig.duration;break}}null===(p=l.adaptRange)||void 0===p||p.updateBitrate(e.bitrate),i.emit(q_,{from:t,to:e}),setTimeout((function(){l._abrService&&l._abrService.updateAutoDefiDesc(i.curDefinition.definition,!d)})),v&&(e=i.curDefinition),l.log(Pk.LOG,"[switchBitrate:CBS],switch bitRate, ",e.bitrate,e.definition)}if(i.curDefinition=e,l.mp4.clearPCDNNodeList(),l.checkPCDN(),s){["keyValue","kid","secretKey","drm","getLicenseUrl","drmKeyToken","sessionId"].forEach((function(t){c[t]=e[t]}));var b=null;hL(l.config)?(l._initSecret(),b=l._secretkey.getLicenseSecret()):(b=new vN).resolve(),b.then(function(){var r=u(o().mark((function r(u){var f,h,d,p,v,g,y,m,_,b;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=u&&u.secretKey&&(!c.keyValue&&(c.secretKey=u.secretKey),c.decryptKey=u.decryptKey),a.url=e.url,h=0,d=!1,l._abrService&&l._abrService.isCurrentInAbr()?(p=i.getBufferedRange(i.buffered2),(h=p[1])<i.currentTime&&(h=i.currentTime,l.log(Pk.LOG,"abr,bufferRange is invalid, adjust",p,",timeStart,",h))):(h=i.currentTime,d=!0),v=s.getFragmentIdx(h),(g=l.getAdaptTimeRangeIdx(v))<0&&(g=l._curLoadSegmentIdx),l.log(Pk.LOG,"switchBitrate point: ".concat(g),"startTime: ".concat(s.adaptTimeRange[g].startTime),"currentTime: ".concat(i.currentTime,", timeStart: ").concat(h)),d&&i.emit("definitionSwitchTime",s.adaptTimeRange[g].startTime+1),y=Math.max(s.adaptTimeRange[g].startTime,i.currentTime),l._definitionChangePointInfo={changeStartTime:y,changeInfo:{from:t,to:e}},l.changeState("changeDefinition",{abr:n,fragIndex:g,startTime:s.adaptTimeRange[g].startTime,currentTime:i.currentTime}),!s){r.next=19;break}return s.updateChangeBitRateTime(h),l.canDownload=!1,r.next=18,s.cancelLoading();case 18:s.metaLoading&&(s.metaLoading=!1);case 19:return l._removeBuffeEndTime=s.adaptTimeRange[g].startTime,l._isChangeDefinition=!0,m=i.getBufferedRange(i.buffered),_=null===(f=l._abrService)||void 0===f?void 0:f.isCurrentInAbr(),m[1]>0&&m[1]-i.currentTime>5&&(!l._abrService||!_)&&(l.mse.clearOpQueues(Nk.VIDEO),l.removeBuffer(Nk.VIDEO,i.currentTime+5,m[1])),l.log(Pk.LOG,"switchBitrate: resetFragmentLoadState,",g),s.resetFragmentLoadState(g),l._curLoadSegmentIdx=g,r.next=29,l.mp4.changeBitRate(e);case 29:l._setCurrentDefinition(e.bitrate),l._emitDefinitionChangeDetailEvent(h),l.canDownload=!0,l._onTimeUpdate(),b={width:e.width||e.vwidth,height:e.height||e.vheight},i.emit("RESOLUTION_UPDATE",b);case 35:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(t){l.log(Pk.ERROR,"switchBitrate: GET_LICENSE_ERROR,",null==t?void 0:t.message);var n=new N_(l.player,{errorType:sS.DRM,errorCode:aS.drm,errorMessage:(null==t?void 0:t.message)||"GET_LICENSE_ERROR",vid:a.vid});t.errorType="GET_LICENSE_ERROR",l.emit("GET_LICENSE_ERROR",n),l.changeState("LICENSE_ERROR",{d:e.definition})}))}}})),h(g(l),"_onVideoError",(function(e){var t,n,r,i,o=g(l).player;l.changeState("video_error",{code:e.code||(null==o||null===(t=o.video)||void 0===t||null===(n=t.error)||void 0===n?void 0:n.code),message:e.message||(null==o||null===(r=o.video)||void 0===r||null===(i=r.error)||void 0===i?void 0:i.message),videoType:l.useVideoLoad})})),h(g(l),"removeBuffer",(function(e,t,n,r){var i,o=l.getBufferDur();null===(i=l.mse)||void 0===i||i.remove(e,t,n).then((function(){var e=l.getBufferDur(),t=o-e;t>0&&(l.emit("removeBuffer",{removeDur:t}),l.log(Pk.LOG,"removeBuffer dur,",t)),r&&r()}))})),h(g(l),"_onPause",(function(){l._loadStuckCheck()})),h(g(l),"_onPlaying",(function(){var e,t;l.changeState("playing",{curtime:l.player.currentTime,buffer:JSON.stringify(null===(e=l.player)||void 0===e||null===(t=e.buffered2)||void 0===t?void 0:t.bufferedList)}),l._waitAdjustTimeCnt>0&&l._waitInBufferTimer&&(l._waitAdjustTimeCnt-=1,l.changeState("waitInBuffer_resume"),l.log(Pk.WARN,"[waitInBuffer resume play], waitAdjustTimeCnt,",l._waitAdjustTimeCnt)),clearTimeout(l._waitInBufferTimer),l._waitInBufferTimer=null;var n=g(l),r=n.mp4,i=n.player,o=l.config.resumePlayWaterLevel;if(r){if(!(r&&r.meta&&r.meta.duration-i.currentTime<=o)&&(l.waitLevelStartTime<0&&(l.waitLevelStartTime=i.currentTime),l.playFlag||(l.playFlag=!0),o>0&&i.currentTime-l.waitLevelStartTime>=2)){var a=i.getBufferedRange(i.buffered2);a[1]>0&&a[1]-i.currentTime<o?(i.paused||(l.emit(Uk,{type:"waiting"}),i.pause(null==Wk?void 0:Wk.BUFFER_CONTROLS),l.log(Pk.LOG,"[!!!!!buffer not rich, pause],currentTime, ",i.currentTime,", bufferEnd,",a[1])),clearTimeout(l.checkResumePlayTimer),l.checkResumePlayTimer=setTimeout(l._onPlaying,o/2*1e3)):i.isBufferControlPaused&&i.paused&&(l.log(Pk.LOG,"[!!!!!buffer rich, play],, currentTime, ",i.currentTime,", bufferEnd,",a[1]),clearTimeout(l.checkResumePlayTimer),l.checkResumePlayTimer=null,i.isBufferControlPaused=!1,l.emit(Uk,{type:"playing"}),i.play())}}else l.checkResumePlayTimer>0&&(clearTimeout(l.checkResumePlayTimer),l.checkResumePlayTimer=null,i.isBufferControlPaused&&(i.isBufferControlPaused=!1),i.paused&&i.play())})),h(g(l),"_lowDecoder",(function(){var e=lL(l.player);l.log(Pk.WARN,"H265 lowdecode: ".concat(l.playerConfig.vid," "),e,", h265Degrade, ",l.config.h265Degrade),l.config.h265Degrade&&l._onDegrade()})),h(g(l),"_onError",(function(e){l._onDegrade(e)})),h(g(l),"_onDegrade",(function(e){var t,n=g(l),r=n.player,i=n.playerConfig,o=n.config;cL(r,"lowdecode",l._onDegrade),cL(r,"error",l._onError),null===(t=l.mp4)||void 0===t||t.destroy();var a=r.currentTime;if(l.log(Pk.WARN,"[h265 degrade], vid,",i.vid,",currtime,",a),l.emit(mN,{errc:null==e?void 0:e.errorCode,err_msg:(null==e?void 0:e.errorMessage)||(null==e?void 0:e.message),codec_type:l.codecType,media_type:i.mediaType}),null!=o&&o.H264Config){var s=o.H264Config;["drm","getLicenseUrl","kid","keyValue","secretKey","isEncrypt","useEME"].forEach((function(e){o[e]=s[e]||null}))}var u={mp4encryptplayer:o,mediaType:"video",codecType:Yk},c=(null==i?void 0:i.H264DefinitionList)||[];c.length>0?(i.definition.list=c,i.url=c[0].url,i.defaultBitrate=c[0].bitrate,i.defaultDefinition=c[0].definition,l.isH265DegradeH264=!0,r.playNext(u),l._addMetaDataEvent((function(){r.currentTime=a,l.isH265DegradeH264=!1,l.log(Pk.LOG,"H265DegradeH264 update currentTime",a),l._removeMetaDataEvent()}))):(r.pause(),l._reset(),l.checkReUseMSE(!1),l.log(Pk.ERROR,"H265 error,degrade h264 but no h264 url"),l.emit("error",e))})),h(g(l),"_onMp4MetaReady",(function(e){var t;if(l.mp4){xI&&console.log(">>>>_onMp4MetaReady",WA());var n=l.firstFrameTime;n.metaload=l.mp4.firstFrameTime.metaload,n.bitrate=l.player.curDefinition.bitrate;var r=l._checkMetaInfo(e);if(l.emit(_L,i(i({},e),{},{error:r,timeRange:(null===(t=l.mp4)||void 0===t?void 0:t.timeRange)||[]})),r)return void l._errorHandler(r);try{var o;l._initEME(l.mp4,e),l.softDecode?(l.log(Pk.LOG,"initH265MseProxy"),l._initH265MseProxy()):l.player.video instanceof HTMLVideoElement&&(l.log(Pk.LOG,"initMse"),l._initMse(e)),null===(o=l._initPromise)||void 0===o||o.resolve()}catch(e){return void l._errorHandler(new N_(l.player,{errorType:sS.MEDIA,errorCode:aS.eme_hijack,errorMessage:(null==e?void 0:e.message)||"eme or mse catch err",vid:l.playerConfig.vid}))}if(l.mp4&&l.mp4.timeRange){var a=[];l.mp4.timeRange.every((function(e){return a.push({startTime:e.startTime,endTime:e.endTime}),!0})),l.emit("KEYFRAMETIME",a)}l._loadData()}})),h(g(l),"_onMp4Error",function(){var e=u(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l.playerConfig.vid,console.error("[Index] _onMp4Error",r,t),l.changeState("MP4_ERROR",{state:n,errmsg:(null==t?void 0:t.errorMessage)||(null==t?void 0:t.message),errorType:null==t?void 0:t.errorType,code:null==t?void 0:t.errorCode,httpCode:null==t?void 0:t.httpCode}),l._errorHandler(t);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h(g(l),"_onMp4Progress",(function(e){l.emit("progress_event",e)})),h(g(l),"_onMp4DataCallBack",(function(){l._isMseInit&&l._onTimeUpdate()})),h(g(l),"_updateDrmConfig",(function(e){var t=g(l),n=t.config;t.mp4.updateSecretKey(n.useEME,n.secretKey,n.decryptKey,n.keyValue),l._secretkey&&e.kid&&l._secretkey.updateKid(e.kid)})),h(g(l),"_updateMSE",(function(e){g(l).player.video instanceof HTMLVideoElement&&(l.log(Pk.LOG,"updateMse",e.videoCodec),l._initMse(e))})),h(g(l),"_onVideoTimeUpdate",(function(){var e=g(l),t=e.mse,n=e.player;l.waitLevelStartTime<0&&(l.waitLevelStartTime=n.currentTime),l.checkReStartTimer(),l._isEnded(),n.isSeeking&&(n.isSeeking=!1),!l.useVideoLoad&&t&&l._removeBuffeEndTime>0&&n.currentTime>l._removeBuffeEndTime+1&&(l.log(Pk.LOG,"remove old bitrate buffer",l._removeBuffeEndTime),l.removeBuffer(Nk.VIDEO,0,l._removeBuffeEndTime-1),l._removeBuffeEndTime=0);var r=l._definitionChangePointInfo;if(r&&n.currentTime>r.changeStartTime){var i,o;n.emit(Y_,r.changeInfo);var a=r.changeInfo||{};l.log(Pk.LOG,Y_,", currentTime,",n.currentTime,",from ",null==a||null===(i=a.from)||void 0===i?void 0:i.definition," to ",null==a||null===(o=a.to)||void 0===o?void 0:o.definition),l._definitionChangePointInfo=null}!l.useVideoLoad&&null===l._requestTimer&&!l._offineLine&&!l._canceLoading&&l._startProgress()})),h(g(l),"_onBufferedReset",(function(){l.mp4&&l.mp4.videoTrak&&l.mp4.resetFragmentLoadState(0)})),h(g(l),"_onOnlineHandler",(function(){l._offineLine=!1;var e=g(l),t=e.playerConfig,n=e.player,r=n.currentTime,i=n.paused;l.log(Pk.LOG,"online useVideoLoad:",l.useVideoLoad,l._hasStartProgressBack),l.useVideoLoad?(l._addMetaDataEvent((function(){r&&(n.currentTime=r),l.log(Pk.LOG,"onOnlineHandler update currentTime",t.vid,l.codecType,l._currentTime),i?n.pause():n.play(),l._removeMetaDataEvent()})),l._setPlayerSrc(t.url)):(l._hasStartProgressBack&&l._startProgress(),l._hasStartProgressBack=!1)})),h(g(l),"_onOfflineHandler",(function(){l._offineLine=!0,l.log(Pk.LOG,"offline, ",l._hasStartProgress),l._hasStartProgress&&(l._stopProgress(),l._hasStartProgressBack=!0)})),h(g(l),"_loadDataSuccess",(function(e){if(!l.isDestroy&&(l.mse||l.mseProxy)){var t=l.firstFrameTime;if(t.startload_stmux<0){var n=l.mp4.firstFrameTime,r=n.startMuxTime,i=n.firstmux;t.startload_stmux=r,t.firstmux=i}t.loadst_loadeddata<0&&(t.loaddata=WA()-l.loadstart);try{var o,a,s;e.initSeg&&(l._appendInitSeg(e.initSeg),(!e.buffer||e.buffer.byteLength<1)&&l._onTimeUpdate());var u=e.buffer,c=e.state,f=e.context,h=e.videoTrack,d=e.audioTrack;l.debugInfo.loadIndx=f?f.fragIndex:-1;var p=null===(o=l.mp4)||void 0===o||null===(a=o.adaptTimeRange[f.fragIndex])||void 0===a||null===(s=a.timeRangeIdx)||void 0===s?void 0:s[1];if(l.mse&&c&&(!u||u.byteLength<=0)&&p>=l.mp4.timeRange.length){var v=l.player.buffered;v&&(null==v?void 0:v.length)>0&&(l.bufferEndTime=v.end(v.length-1)),l._isEnded(),l.log(Pk.LOG,"loaded ended !!!==>>>",JSON.stringify(f.range),", fragIndex,",f.fragIndex,", bufferEndTime,",l.bufferEndTime,",meta_duration,",l.mp4.meta.duration)}if(u&&l.mse){if(u&&u.byteLength>0){l._appendBuffer(Nk.VIDEO,u,f,c);var g=l.getDataBitRate(f.fragIndex);l.player.emit("addVideoBufferEnd",{start:Math.floor(f.startPts),end:f.endPts,bandwidth:g.bitrate})}}else l.mseProxy&&(h&&h.samples.length>0||d&&d.samples.length>0)&&(l.log(Pk.LOG,"[livevideo] append,index,",f.fragIndex,",range,",JSON.stringify(e.context.range),", timeRange,",f.timeRange),l.mseProxy.appendBuffer(h,d))}catch(e){l.changeState("APPEND_DATA_ERROR",{errMsg:null==e?void 0:e.message});var y=new N_(l.player,{errorType:sS.MEDIA,errorCode:aS.mseAppend,vid:l.playerConfig.vid,errorMessage:e.message,mediaError:{code:aS.mseAppend,message:e.message}});l._errorHandler(y)}null!=e&&e.state&&l._onTimeUpdate()}})),h(g(l),"_onResumePlaying",(function(){l._resumePlay=!0})),h(g(l),"_seekOnce",(function(e){var t=g(l).player;t&&(t.currentTime=e+.1*Math.pow(2,l._currentSeekTimes||0),l._currentSeekTimes++,l.log(Pk.LOG,"当前第".concat(l._currentSeekTimes,"次Seek，currentTime=").concat(null==t?void 0:t.currentTime)))})),h(g(l),"_onWaiting",(function(){var e,t,n;l.checkReStartTimer(),l._isEnded();var r=null===(e=l.player)||void 0===e||null===(t=e.buffered2)||void 0===t?void 0:t.bufferedList;l.changeState("waiting",{curtime:l.player.currentTime,buffer:JSON.stringify(r)});var i=g(l),o=i.player,a=i.config,s=i.playerConfig,u=i.mp4;clearTimeout(l._waitInBufferTimer),l._waitInBufferTimer=null;var c=o.currentTime;l.log(Pk.LOG,",[onWaiting],curTime, ",c,",buffer,",JSON.stringify(r),",dur,",null==u||null===(n=u.meta)||void 0===n?void 0:n.duration);var f=o.bufferedPoint;f.end>0&&f.end-c>=2?l._waitAdjustTimeCnt<a.waitJampBufferMaxCnt?l._waitInBufferTimer=setTimeout((function(){l._waitAdjustTimeCnt++,l.changeState("waitInBuffer_seek",{waitAdjustTimeCnt:l._waitAdjustTimeCnt,curTime:c}),o.currentTime=o.currentTime+.5}),a.waitingInBufferTimeOut):l._errorHandler(new N_(l.player,{errorType:sS.RUNTIME,errorCode:aS.waitTimeout,errorMessage:"onWaitTimeout_in_buffer",vid:s.vid})):l._loadStuckCheck()})),h(g(l),"_onEnded",(function(){l.log(Pk.LOG,"[player.onEnded], stopProgress"),l._stopProgress()})),h(g(l),"_errorHandler",(function(e){var t,n,r,i=g(l),o=i.player,s=i.playerConfig,u=i.preLoadData;if(o&&!l.useVideoLoad){if(e.errorCode===aS[403]&&l._emitExpireEvent(e)&&l.config.urlExpireDisableErrorEvent)return l.log(Pk.LOG,"_errorHandler urlExpireDisableErrorEvent",l.config.urlExpireDisableErrorEvent,",errorCode,",e.errorCode),l._stopProgress(),void l.emit(yN);if("object"!==a(e)){var c={};c.err=e,e=c}e.ext||(e.ext={});var f=o.paused;if(e.ext.vid=s.vid,e.ext.preloadHit=l.hitpreload?1:0,e.ext.preloadCached=u?u.duration:0,e.ext.timerStep=Math.max.apply(Math,b(l.timerStepList)),e.ext.codectype=l.codecType,e.errorMessage=e.message,e=new N_(o,e),l.log(Pk.ERROR,"_errorHandle","preState is ".concat(f),null===(t=e)||void 0===t?void 0:t.errorCode,(null===(n=e)||void 0===n?void 0:n.message)||(null===(r=e)||void 0===r?void 0:r.errorMessage)),!e.url&&(e.url=o.src),e.errd&&"object"===a(e.errd)&&l.mp4&&(e.errd.url=l.mp4.url,e.url=l.mp4.url),l.player.emit("playCatch",l.player.vtype,e),l.emit("DATA_REPORT",e),l.mp4&&l.mp4.cancelLoading(),l._abrService&&l._abrService.disable(),l.canDownload=!1,l.mp4&&l.mp4.bufferCache&&l.mp4.bufferCache.clear(),l.checkIsDegraded(e))l.player.vtype="MP4_2",l._initPromise&&l.removeAndRejectInitPromise(e),l._startDegradedPlayback(e,f);else{var h,d,p;l.log(Pk.ERROR,"final error !!!!, ",s.vid,null===(h=e)||void 0===h?void 0:h.errorCode,(null===(d=e)||void 0===d?void 0:d.errorMessage)||(null===(p=e)||void 0===p?void 0:p.message)),l.player.pause(),l._reset();var v=o.currentTime;l.destroyMSE(),o.currentTime=v,l.emit("error",e)}l.emit(yN)}})),h(g(l),"_onSeeking",u(o().mark((function e(){var t,n,r,i,a,s,u,c,f,h,d,p,v,y,m,_;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l._isReceiveEndedEvent=!1,!l.useVideoLoad){e.next=3;break}return e.abrupt("return");case 3:if(r=g(l),i=r.player,a=r.mp4,l.waitLevelStartTime=i.currentTime,s=i.currentTime,l.changeState("seeking",{curTime:s}),l.log(Pk.LOG,"[seeking], curTime,",s,",buffer,",JSON.stringify(i.buffered2.bufferedList)),a&&a.meta){e.next=10;break}return e.abrupt("return");case 10:if(l._startProgress(),l.endofstream=!1,a.bufferUsedPos=0,a.metaLoading=!1,l._definitionChangePointInfo&&(l._definitionChangePointInfo.changeStartTime=s,l.log("[seeking update definitionChangePointInfo.changeStartTime]",s)),a.changeBitRateTime>0&&(a.updateChangeBitRateTime(s),l.log("[seeking update changeBitRateTime]",s)),u=i.bufferedPoint,c=!1,f=0,!(u.end>0)){e.next=29;break}if(c=!0,!(a.meta.duration-u.end<.5)){e.next=24;break}return l.log("[seeking in buffered range], buffer end,",u.end,", duration,",null==a||null===(h=a.meta)||void 0===h?void 0:h.duration),e.abrupt("return");case 24:d=a.getFragmentIdx(u.end),f=l.getAdaptTimeRangeIdx(d),a.seekTime=u.end,f<0&&(f=l._curLoadSegmentIdx),l.log(Pk.LOG,"[seeking in buffered range], seekTime ",s,",bufferRange,",u.start,"-",u.end,", fragIndex,",f);case 29:if(c||(a.seekTime=s,p=a.getFragmentIdx(s),f=l.getAdaptTimeRangeIdx(p),l.log(Pk.LOG,"[seekTime out buffer range], srcFragIndex,",p,", fragIndex,",f),f<0&&(f=l._curLoadSegmentIdx),l.log(Pk.LOG,"[seekTime out buffer range], curTime,",s,", srcFragIndex,",p,", adaptIdx,",f),v=g(l),(y=v.mse)&&null!=y&&y.isFull()&&(m=i.buffered2.bufferedList,_=m[m.length-1],l._checkRemoveSourceBuffer([_.start,_.end],i.currentTime,!0,!0))),l._curLoadSegmentIdx!==f||null===(t=a.adaptTimeRange[f])||void 0===t||!t.isLoading){e.next=33;break}return l.log(Pk.LOG,"[seeking in buffered range], seek fragIndex is current load segmentIdx",f),e.abrupt("return");case 33:return a.canDownload=!1,e.next=36,a.cancelLoading();case 36:a.resetFragmentLoadState(f),l.log(Pk.LOG,"[seekTime resetFragmentLoadState],adaptIdx,",f,"mp4.seekTime",a.seekTime,JSON.stringify(a.adaptTimeRange)),null===(n=l.mse)||void 0===n||n.clearOpQueues(Nk.VIDEO),l._curLoadSegmentIdx=f,l.canDownload=!0,l._onTimeUpdate(),l._isEnded();case 43:case"end":return e.stop()}}),e)})))),l.initLog(null===(t=l.player.playerId)||void 0===t||null===(s=t.toString())||void 0===s?void 0:s.slice(-4)),l._pendingPromises=[],l._allInitPromise=new vN,l._isInit=!1,l._isEventInit=!1,l.playerId=l.player.playerId,l.preloader=null,l.log(Pk.LOG,"playerId",l.playerId,l.playerConfig.vid),l._useVideoLoad=!1,l.mse=null,l.mp4=null,l.eme=null,l._isMseInit=!1,l._corePromise=null,l._initPromise=null,l._hasStartProgress=!1,l._hasStartProgressBack=!1,l._curLoadSegmentIdx=0,l._abrService=null,l._checkRemoveBufferLastTime=WA(),l.playFlag=!1,l.config.resumePlayWaterLevel=Math.min(l.config.minBufferLength,l.config.resumePlayWaterLevel),l.checkResumePlayTimer=null,l._MSEError=!1,l.loadstart=-1,l._loadStartEventTime=-1,l._waitAdjustTimeCnt=0,l._waitInBufferTimer=null,l.codecType=l.playerConfig.codecType?l.playerConfig.codecType.toLowerCase():Yk,l.playerConfig.vtype&&(l._vtype=l.playerConfig.vtype.toUpperCase()),l.isActive=!0,l.firstFrameTime={newplayer:WA(),initmse_sbopen:-1,mseopen:-1,metaload:-1,metaready_initsegend:-1,startload_stmux:-1,firstmux:-1,apcnt:0,aplen:0,data_ap:-1,loaded_data:-1,loadst_loadeddata:-1,new_loadeddata:-1,bitrate:-1,hitpreload:-1,first_gop_req_cnt:-1},l.debugInfo={},l.states=[],l.removeVideoList=[],l._lastCheckTime=WA(),l._lastCheckLagTime=WA(),l._changeDefState=null,l._defInited=!1,l._removeBuffeEndTime=0,l._isChangeDefinition=!1,l._lastTimeupdateTime2=0,l.waitLevelStartTime=-1,l.preLoadData=null,l.forPreloadTimeCache=null,l._usePaused=!1,l.endofstream=!1,l.bufferEndTime=-1,l.hitpreload=!1,l.isH265DegradeH264=!1,l.loadstartTimer=null,l.loadeddataTimer=null,l.canplayTimer=null,l.adaptRangeRes=[],l._isReceiveEndedEvent=!1,l._checkEndedTimer=null,l._definitionChangePointInfo=null,wN&&(l.player.preloader=wN),l._lastTimeupdateTime2=0,l.waitLevelStartTime=-1,l.timerStepList=[],window&&window.location.href.indexOf("playerInstance=true")>-1&&(void 0===window.mp4PlayerInstanceList&&(window.mp4PlayerInstanceList=[]),window.mp4PlayerInstanceList.push(void 0)),l._isH265SoftDecoder=!1,l._beforeLoadStartCostTime=0,l._requestTimer=null,l}return f(r,[{key:"setConfig",value:function(e){this.config=Object.assign(this.config,e)}},{key:"initLog",value:function(e){var t=this.config.logCacheConfig,n=t.logCacheLevel,i=t.logMaxSize;this.logger=new Dk(r.pluginName+e,{logCacheLevel:n,logMaxSize:i}),xI&&Dk.enable()}},{key:"playerlogger",value:function(e){e?Dk.enable():Dk.disable()}},{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config,r=this.player;n.width=t.width||0,n.height=t.height||0,t.vid=t.vid||n.vid,Nk.isSupported('video/mp4; codecs="avc1.64001f, mp4a.40.5"')&&!fN()&&(void 0===n.supportHevc&&null!=A_&&A_.isHevcSupported&&A_.isHevcSupported()&&this.player.video instanceof HTMLVideoElement&&(n.supportHevc=!0),n.supportVvcc=!(typeof MediaSource>"u"||!MediaSource.isTypeSupported)&&MediaSource.isTypeSupported("video/mp4;codecs=bvc2.1.6.L93.B0"),this.softDecode?r.vtype="MP4_MSE_SOFT":r.vtype="MP4_MSE",(!hN()||this.softDecode)&&(n.useEME=!1),n.useEME=!1!==n.useEME,this.checkConfig(),n.onlyInit&&(t.autoplay=!1,t.videoInit=!1,this._hasStartProgress=!1,this._hasStartProgressBack=!1),t.useWaterLevel&&(!t.userGestureEventMiddleware&&(t.userGestureEventMiddleware=iL),!t.videoEventMiddleware&&r.setEventsMiddleware(oL)),this._proxyPlayer(),r.useHooks("play",this._playHook),r.useHooks("pause",this._pauseHook),r.useHooks("retry",this._retryHook),uL(r,Bk.BUFFERED_RESET,this._onBufferedReset),this._bindNetworkStateChange(),this.on("timeupdate",this._onVideoTimeUpdate),this.on(H_,(function(){var t;e.changeState("LOADED_DATA"),e.deleteVideo(),e.mp4&&e.mp4.updateLoadedDataDone(),e._firstFrameTime(),e._onTimeUpdate(),e.firstFrameTime.loaded_data=e._loadStartEventTime>0?WA()-e._loadStartEventTime:-1,null!==(t=e.config)&&void 0!==t&&t.enableFPSStuckHandle&&e.on(_N,e.fpsStuckHandle)})),this.on(j_,(function(){e.changeState("LOAD_START"),e._loadStartEventTime=WA(),e._beforeLoadStartCostTime=(new Date).getTime()-e._tm,e.codecType===Jk&&!e.config.supportHevc&&(e._isMseInit=!0,e._onTimeUpdate())})),this.on("ended",(function(){e.log(Pk.LOG,"mp4plugin receive player video ended event"),e._onEnded()})),this.on("pause",(function(){e._usePaused=!0})),this.on(B_,(function(){e._usePaused=!1})),this.on("xglog",(function(t){if("firstFrame"===t.eventType){var n=e.preLoadData&&e.preLoadData.definition?e.preLoadData.definition:-1,r=e.player,i=e.firstFrameTime;xI&&console.log("[xgplayer-encrypt-mp4]>>>>firstFrame ".concat(e.playerConfig.vid,", ").concat(t.fvt,", codecType: ").concat(e.codecType),"hitPreload: ".concat(e.hitpreload,", video: ").concat(e._useVideoLoad,", preloadBitrate: ").concat(n)," metaLoad: ".concat(i.metaload,", mseOpen: ").concat(i.mseopen),"curDefinition: ".concat(r.curDefinition.definition,",appendInit: ").concat(i.metaready_initsegend))}})),r.mp4MseFlag=!0)}},{key:"_startBufferCheck",value:function(){var e=this.player;if(e.video){var t=[];if(e.video.buffered){for(var n=0,r=e.video.buffered.length;n<r;n++)t.push([e.video.buffered.start(n),e.video.buffered.end(n)]);t.toString()!==this.lastBuffer&&(this.lastBuffer=t.toString(),this._onBufferReachThreshold())}}}},{key:"_onBufferReachThreshold",value:function(){var e=this.player,t=this.config;if(e.video){for(var n=e.video.buffered,r=e.video.currentTime,i=0,o=0,a=0;a<n.length&&(i=n.start(a),o=n.end(a),!(i<=r&&r<=o));a++);o-r>=t.bufferThreshold&&!this._hasTriggerBufferThreshold&&(this._hasTriggerBufferThreshold=!0,e.emit("BUFFER_THRESHOLD",o-r))}}},{key:"_startUrlExpiredCheck",value:function(){var e=this.playerConfig.definition;e&&e.list&&e.list.length>0&&(this.urlExpireTimestamp=e.list[0].url_expire||0,this._handleUrlExpire())}},{key:"cancelLoading",value:(t=u(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mp4){e.next=2;break}return e.abrupt("return");case 2:return this._canceLoading=!0,this.log(Pk.LOG,"player cancelLoading",this.playerConfig.vid),this._stopProgress(),this.cancelPreloadTask(),e.next=8,this.mp4.cancelLoading();case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"checkConfig",value:function(){var e=this.playerConfig,t=this.config,n=e.defaultDefinition,r=e.defaultBitrate;if(!n){var i=this.playerConfig.definition;n=i&&i.defaultDefinition?i.defaultDefinition:t.definition}!r&&t.bitrate&&(r=t.bitrate),e.defaultDefinition=n,e.defaultBitrate=r}},{key:"_addMetaDataEvent",value:function(e){var t=this.player;this.__mHandler=e,uL(t,"loadedmetadata",this.__mHandler)}},{key:"_removeMetaDataEvent",value:function(){this.__mHandler&&(cL(this.player,"loadedmetadata",this.__mHandler),this.__mHandler=null)}},{key:"beforePlayerInit",value:function(){var e=this,t=this.player,n=this;this._isInit||(yb.defineGetterOrSetter(t,{__url:{get:function(){return n.mse?n.mse.url:t.config.url},configurable:!0},downloadSpeed:{get:function(){return RN/8},configurable:!0},playerVersion:{get:function(){return nS},configurable:!0},menuCodeType:{get:function(){return n.mp4&&n.mp4.meta?n.mp4.meta.videoCodec:n.codecType===Yk?"avc":"hevc"},configurable:!0},playerType:{get:function(){return"MP4"},configurable:!0},supportMenus:{get:function(){return{speed:null==t?void 0:t.mp4MseFlag,cdn:null==t?void 0:t.mp4MseFlag,resolution:null==t?void 0:t.mp4MseFlag}},configurable:!0},preloadActive:{get:function(){return e.isActive},set:function(t){e.isActive=t,e.isActive&&e._startProgress()},configurable:!0},performance:{get:function(){return e.firstFrameTime},configurable:!0},domain:{get:function(){return n.domain},configurable:!0},loadURL:{get:function(){return n.loadURL},configurable:!0},abrInstance:{get:function(){return n.abrInstance},configurable:!0},pcdnReq:{get:function(){},configurable:!0},retryInfo:{get:function(){return IL},configurable:!0},softDecoder:{get:function(){return e._isH265SoftDecoder},configurable:!0},logCache:{get:function(){if(n.logger)return n.log(Pk.LOG,",version:".concat(nS,",timerStepList,"),JSON.stringify(e.timerStepList)),n.logger.getLogCache()},configurable:!0},pcdnVVStat:{get:function(){var e,t=n.mp4,r=n.pcdn;return t?i(i({},t.pcdnVVStat),{},{trace_id:null===(e=t.pcdnTraceInfo)||void 0===e?void 0:e.trace_id,cancelCnt:(null==t?void 0:t.pSCCancelCnt)||0,is_try_open:r?1:0}):null},configurable:!0},beforeLoadStartCostTime:{get:function(){return e.useVideoLoad?0:e._beforeLoadStartCostTime},configurable:!0},bandwidth:{get:function(){var e=n.mp4,t=n.playerConfig;return function(e,t){var n=e?e.loadInfo:null,r=n?n[Hk]:null,o=n?n[jk]:null;return{vid:t,cdn:{speed:null==r?void 0:r.loadSpeed,size:r?r.loadLen:0},pcdn:i({size:o?o.loadLen:0},null==e?void 0:e.pcdnTraceInfo)}}(e,null==t?void 0:t.vid)},configurable:!0},ext:{get:function(){return n?function(e){var t,n,r=[],i=e.player,o=i.video,a=i.currentTime,s=i.duration,u=e.playerConfig,c=e.mp4,l=e.mse,f=e.debugInfo,h=e._curLoadSegmentIdx,d=e.states,p=e._requestTimer,v=e.timerStepList,g=o?o.buffered:[];if(g.length>0)for(var y=0,m=(null==g?void 0:g.length)||0;y<m;y++)r.push([g.start(y),g.end(y)]);return{type:"MP4",usevideo:e.useVideoLoad?1:0,curTime:a,duration:(null==c||null===(t=c.meta)||void 0===t?void 0:t.duration)||s,loadIdx:h,curload:null!=c&&c.adaptTimeRange?c.adaptTimeRange[h]:{},buffer:r,speed:null==f?void 0:f.speed,states:d,msequeLen:(null==l?void 0:l.opQueues)&&(null===(n=l.opQueues.video)||void 0===n?void 0:n.length),timer:!!p,timerlist:JSON.stringify(v),maxtimerstep:Math.max.apply(Math,b(v)),url:null==u?void 0:u.url}}(e):{}},configurable:!0},currentDefitionFromPlayer:{get:function(){return n.abrInstance&&n.abrInstance.isCurrentInAbr?t._currentDefitionFromPlayer:t.curDefinition},configurable:!0}}),this._isInit=!0)}},{key:"destroy",value:function(){var e,t,n=this.player;n.preloader&&n.preloader.cancel(this.playerId),n.removeHooks("play",this._playHook),n.removeHooks("pause",this._pauseHook),n.removeHooks("retry",this._retryHook),null===(e=this._requestTimer)||void 0===e||e.destroy(),this._requestTimer=null,this._reset(),this.checkReUseMSE(!1),this._secretkey&&MN.destroySecretKey(this._secretkey,this._errorHandler),this.player.playNext=bN,this.player._startInit=TN,this.player.changeDefinition=kN,this.player.switchURL=SN,this._unbindNetworkStateChange(),this._unbindEvents(),cL(n,Bk.BUFFERED_RESET,this._onBufferedReset),this._bufferCheckTimer&&clearInterval(this._bufferCheckTimer),this._removeBufferTimer&&(clearTimeout(this._removeBufferTimer),this._removeBufferTimer=null),!(null===(t=this.logger)||void 0===t)&&t.reset&&this.logger.reset(),this._removeMetaDataEvent(),this.timerStepList=[]}},{key:"_proxyPlayer",value:function(){var e=this;"function"==typeof this.player.playNext&&(bN=this.player.playNext),this.player.playNext=function(){e.playNext.apply(e,arguments)},TN=this.player._startInit,SN=this.player.switchURL,kN=this.player.changeDefinition,this.player._startInit=this.playerStartInit.bind(this),this.player.switchURL=this.switchURL.bind(this),this.player.changeDefinition=this.changeDefinition.bind(this)}},{key:"getInitBitrate",value:function(){var e=this.player,t=this.config,n=this.playerConfig,r=null,i=e.definitionList;if(i&&i.length>0){var o=e.preloader;o&&i.forEach((function(e){var t=o.generateUniqueKey({vid:n.vid,definition:e.definition||-1,vtype:n.vtype,codecType:n.codecType});e.cacheKey=t,t&&!r&&o&&o.hasItemSameVid(t)&&((r=e).type="preload")}));var a=n.userSelectDefinition;r&&a&&t.focusUserDefinition&&n.userSelectDefinition!==r.definition&&(r=null),!r&&this.bitRateAdapter&&(this.bitRateAdapter.speed=AL.speed,(r=this.getDefinitonFromAdapter(i,a))&&(r.type="bitRateAdapter"))}if(!r||!r.url){var s=n.url,u=n.definition,c=n.defaultDefinition,l=(null==u?void 0:u.defaultDefinition)||c;if("Array"===QA(s)&&s.length>0||"String"===QA(s)&&s){var f=this._getDefinitionItem(l),h=n.defaultBitrate||n.bitrate||(null==f?void 0:f.bitrate);r={url:s,definition:(null==f?void 0:f.definition)||l||-1,duration:(null==f?void 0:f.duration)||n.duration||this.config.duration||0,bitrate:h,uri:n.uri||(null==f?void 0:f.uri),file_id:null==f?void 0:f.file_id,size:(null==f?void 0:f.size)||n.size,type:"default"}}else r=i[i.length-1]}return r&&(n.url=r.url,r.networkSpeed=AL.speed),e.curDefinition=r,r}},{key:"_setPlayerSrc",value:function(e){var t=this.player;this._removeVideoSource(),"Array"===QA(e)?(t.video.removeAttribute("src"),!t._detachSourceEvents&&e.forEach((function(e){t.video.appendChild(KA("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))})),t._attachSourceEvents(t.video,e),t.play()):(t.video.src=e,t.play()),t.mp4MseFlag=!1,t.emit("playertypechange")}},{key:"_removeVideoSource",value:function(e){var t=this.player,n=(e=e||t.video).children;if(n.length>0)for(t._detachSourceEvents(e);n.length>0;)e.removeChild(n[0])}},{key:"_getDefinitionItem",value:function(e){var t=this.playerConfig.definition;if(!t||!t.list)return null;for(var n=0;n<t.list.length;n++){var r=t.list[n];if(r.definition===e)return r}return null}},{key:"_initAbrService",value:function(){var e=u(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 2:if(t=this.playerConfig,n=this.config,r=this.player,(i=n.autoBitrateOpts)&&i.isOpenAutoDefi){e.next=6;break}return e.abrupt("return");case 6:return this._abrService=new null(this,this.abrSwitchURL),a=t.definition.list||[],e.next=10,this._abrService.init({video:t.definition.list.concat()});case 10:r.emit("resourceReady",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_initSecret",value:function(){MN&&(this._secretkey?this._secretkey.updateConfig(this.config):this._secretkey=MN.createSecretKey(this.config,this._errorHandler))}},{key:"_initMp4Kernel",value:function(){var e=this,t=this.playerConfig,n=this.config,r=new vN;try{var i=this.player.curDefinition;this.log(Pk.LOG,"[_initMp4Kernel] ".concat(t.vid," curDefinition"),null==i?void 0:i.definition);var o=this._handlerUrl(t.url);if(!o)return this.log(Pk.LOG,"emptyUrl"),r.reject(new Error("emptyUrl")),r;if(n._mainURL=o.main,n._backupURL=o.backup,n.forceVideoPlay&&(this.codecType===Yk||n.supportHevc))return this.useVideoLoad=!0,this.log(Pk.LOG,"forceVideoPlay"),r.reject(new Error("forceVideoPlay")),r;var a=[];this._secretkey&&a.push(this._secretkey.getLicenseSecret()),a.push(this._checkPreloader()),Promise.all(a).then((function(t){if(e.isDestroy)r.reject(new Error("destroy"));else{var o=null;if(t&&t.length>0&&(t.length>1&&(!n.keyValue&&(n.secretKey=t[0].secretKey),n.decryptKey=t[0].decryptKey),o=t[t.length-1].data,e.firstFrameTime&&(e.firstFrameTime.hitpreload=o?1:0)),o||!n.needPreloadCheck||e.codecType===Jk&&!n.supportHevc)if(e._vtype&&"MP3"===e._vtype)e.useVideoLoad=!0,e.log(Pk.LOG,"vtype_not_MP4"),r.reject(new Error("vtype_not_MP4"));else{var a,s=n._mainURL;e._initMp4(s,o,{fileSize:i?i.size:0}),e.updateLoadInfo(null===(a=o)||void 0===a?void 0:a.cacheKey),e.checkPCDN(),e.initAdaptRange(),e._initAbrService()}else e.useVideoLoad=!0,e.log(Pk.LOG,"no_preload"),r.reject(new Error("no_preload"))}})).catch((function(n){e.log(Pk.ERROR,"getLicense or checkPreloader reject",null==n?void 0:n.message);var o=new N_(e.player,{errorType:sS.DRM,errorCode:aS.drm,errorMessage:(null==n?void 0:n.message)||"getLicense or checkPreloader reject",vid:t.vid});e.emit("GET_LICENSE_ERROR",o),e.changeState("LICENSE_ERROR",{d:i?i.definition:0}),r.reject(o)}))}catch(e){r.reject(e)}return r}},{key:"updateLoadInfo",value:function(e){!e||!this.mp4||(this.mp4.loadInfo=Vk.get(e),Vk.delete(e))}},{key:"initAdaptRange",value:function(){var e=this.config,t=this.player,n=this.playerConfig,r=t.curDefinition,i=r.bitrate,o=r.duration;if(null!=e&&e.adaptRange){var a=null;a=(null==e?void 0:e.loadRangeType)===Qk?Fg:$g,this.adaptRange=new a(t,i,o||n.duration,e.adaptRange)}}},{key:"checkPCDN",value:function(){this.config;var e=this.player;this.playerConfig,e.curDefinition,this.pcdn=null}},{key:"isOpenPCDN",value:function(e){}},{key:"_pcdnReqSuccess",value:function(e,t){var n=this.playerConfig,r=this.player,i=this.mp4;if(i&&e){var o=null.getPCDNReqId(r.curDefinition,n.vid);if(e.req_id&&o!==e.req_id)return void this.log(Pk.LOG,",".concat(t," is not match curDefinition reqId', reqId, ', pcdnRet.req_id"),e.req_id);var a=e.nodes||[];this.log(Pk.LOG,"".concat(n.vid," get peer end,pcdn node update,"),a.length),i.updateNode(a),i.pcdnTraceInfo={uri:e.vid,fid:e.fid,trace_id:e.trace_id},i.pcdnVVStat&&(i.pcdnVVStat.try_req_node+=1,i.pcdnVVStat.req_node_succ+=1,i.pcdnVVStat.has_ret_node+=a.length>0?1:0)}}},{key:"_pcdnReqFail",value:function(e,t){var n=this.mp4;null!=n&&n.pcdnVVStat&&(n.pcdnVVStat.try_req_node+=1),this.checkURLExpired(e,t)}},{key:"initTimer",value:function(){if(!this._requestTimer){var e=this.config,t=e.timerInWorker,n=e.tickInSeconds;this._requestTimer=new tS({frequency:n,timerInWorker:t}),this._requestTimer.on(qk,this.timerHandle)}}},{key:"playerStartInit",value:function(e){var t=this;if(this.log(Pk.LOG,"playerStartInit",this.player.hasStart,this.playerId,e),!this.isDestroy){var n,r=this.playerConfig,i=this.player;if(this._usePaused=!1,this.isActive&&0!==(null==i?void 0:i.currentTime)&&!this.config.frameFreeze&&(this.log(Pk.LOG,"[playerStartInit] reset current  = 0 ,buffer,",JSON.stringify(null==i||null===(n=i.buffered2)||void 0===n?void 0:n.bufferedList)),this.player.currentTime=0),this._isH265SoftDecoder=this.softDecode,this.config.reUseMSE&&this.mse&&"String"===QA(e)&&/^blob/.test(e)&&e!==this.mse.url&&(e=r.url,this.destroyMSE()),!e||"__auto__"===e||"anytext"===e){var o=r.definition,a=function(e){var t="",n=null,r=e?e.list:[];if(r&&r.length>0&&e.defaultDefinition&&(r.forEach((function(r){r.definition===e.defaultDefinition&&(t=r.url,n=r)})),!t)){var i=r[0];t=i.url,e.defaultDefinition=i.definition,n=i}return n}(o);a&&(r.url=a.url,o.defaultDefinition=a.definition,i.curDefinition=a)}var s=this._defInited?null:this.getInitBitrate();if(!r.nullUrlStart||s||r.url){this.initTimer(),hL(this.config)?this._initSecret():this._secretkey=null,this._defInited=!0,this.log(Pk.LOG,"[playerStartInit] ".concat(r.vid," curDefinition"),s||this.player.curDefinition);var u=this.config,c=this.player.preloader;c&&c.cancelPreloadByVid(r.vid,this.player.playerId);var l=!this.softDecode;if(u.needPreloadCheck&&l&&!this._secretkey){var f,h=!1,d=this.player.curDefinition;if(c&&d&&(f=d.cacheKey?d.cacheKey:c.generateUniqueKey({vid:r.vid,definition:d.definition||-1,vtype:r.vtype,codecType:r.codecType}),h=c.hasItemSameVid(f)),!h){this.useVideoLoad=!0,this.player.vtype="MP4_0",this.log(Pk.LOG,"[playerStartInit] ".concat(r.vid," no_preload"),!!c,f);var p=new N_(this.player,{errorType:"runtime",errorTypeCode:sS.runtime,errorCode:aS.other,vid:this.playerConfig.vid,errorMessage:"no preload"});this.player.emit("playCatch",this.player.vtype,p)}}if(this.useVideoLoad){if(e=this.playerConfig.url,u.closeDowngrade)return;return this._sTime=WA(),TN.call(this.player,e),void this._startProgress()}if(!this.isDestroy){if(this.player.mp4MseFlag=!0,this.bufferEndTime=-1,this._tm=(new Date).getTime(),this._initPromise&&"pending"===this._initPromise.state){var v=this._handlerUrl(r.url);if(v&&v.main===u._mainURL)return}this._reset();var g=this.playerConfig.vid;this.changeState("PLAYER_START_INIT");var y=this._initMp4Kernel();this._initPromise=y,this._addPendingPromise(this._initPromise),y.then((function(){t.isDestroy||(t.mse&&(e=t.mse.url),t.changeState("PLAY_INIT_OK"),t._bindEvents(),t._startProgress())})).catch((function(n){var r,i,o=!1;if(t._initPromise&&(o=t._initPromise.id!==y.id||t._initPromise.isBreak),!t.isDestroy&&!o&&n!==gN){if(t.log(Pk.LOG,"_initMp4Kernel.catch: ".concat(g," isDestroy:").concat(t.isDestroy,",\n          errorCode:").concat((null==n?void 0:n.errorCode)||aS.other,",errMsg:").concat((null==n?void 0:n.errorMessage)||(null==n?void 0:n.message))),(null==n?void 0:n.errorCode)===aS[403]&&t._emitExpireEvent(n)&&u.urlExpireDisableErrorEvent)return t._initPromise=null,t.log(Pk.LOG,"initMp4Kernel urlExpireDisableErrorEvent",u.urlExpireDisableErrorEvent,",errorCode,",n.errorCode),t._stopProgress(),void t.emit(yN);var a=n;a.errorCode||((a=new N_(t.player,{errorType:sS.RUNTIME,errorCode:(null==n?void 0:n.errorCode)||aS.other,vid:t.playerConfig.vid,errorMessage:(null==n?void 0:n.errorMessage)||(null==n?void 0:n.message),mediaError:{code:(null==n?void 0:n.httpCode)||aS.other,message:(null==n?void 0:n.errorMessage)||(null==n?void 0:n.message),errorType:null==n?void 0:n.errorType}})).url=e),t.changeState("PLAY_INIT_CATCH",{c:a.errorCode,m:(null==n?void 0:n.errorMessage)||(null==n?void 0:n.message),t:null==n?void 0:n.errorType}),t.useVideoLoad=!0,t.player.vtype="MP4_1",t.player.emit("playCatch",t.player.vtype,a);var s=t.checkIsDegraded(a);if(t.log(Pk.WARN,"PLAY_INIT_CATCH final error !!!!, ",g,null===(r=a)||void 0===r?void 0:r.errorCode,null===(i=a)||void 0===i?void 0:i.errorMessage,",degrade:",s),t.emit(yN),!s)return t.player.pause(),t._reset(),t.emit("error",a),void(t._initPromise=null)}})).finally((function(){var n;if(t._initPromise){var r=t._initPromise,i=r.isBreak;if(r.id===y.id){t._removePendingPromise(t._initPromise),t._initPromise=null,t._usePaused&&(t.playerConfig.autoplay=!1),t.softDecode&&"Array"===QA(e)&&(e=e[0].src),"String"===QA(e)&&!/^blob/.test(e)&&!t.config.frameFreeze&&t.destroyMSE();var o=(null===(n=t.player)||void 0===n?void 0:n.currentSrc)===e;t.changeState("PLAY_INIT_FINALLY",{isDestroy:t.isDestroy,isBreak:i,reUseSrc:o}),!t.isDestroy&&!i&&TN.call(t.player,e),t.reUseMSEEmitEvents(o),t._abrService&&t._abrService.isCurrentInAbr()&&(t._abrService.enable(),t._abrService.execute())}}}))}}}}},{key:"destroyMSE",value:function(){var e=u(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.mse)||void 0===t?void 0:t.unbindMedia();case 2:this.mse&&this.log(Pk.LOG,"destroyMSE ",this.playerConfig.vid),this.mse=null;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reUseMSEEmitEvents",value:function(e){var t,n=this;e&&/^blob/.test(null===(t=this.player)||void 0===t?void 0:t.currentSrc)&&(clearTimeout(this.loadstartTimer),clearTimeout(this.loadeddataTimer),clearTimeout(this.canplayTimer),this.loadstartTimer=setTimeout((function(){clearTimeout(n.loadstartTimer),n.loadstartTimer=null,n.emit(j_),n.log(Pk.LOG,"reUseMSE add emit loadstart event")}),10),this.loadeddataTimer=setTimeout((function(){clearTimeout(n.loadeddataTimer),n.loadeddataTimer=null,n.emit(H_),n.log(Pk.LOG,"reUseMSE add emit loadeddataevent")}),50),this.canplayTimer=setTimeout((function(){clearTimeout(n.canplayTimer),n.canplayTimer=null,n.emit(U_),n.log(Pk.LOG,"reUseMSE add emit canplayevent")}),90))}},{key:"playNext",value:function(e){var t=this,n=this.player;this._defInited=!1,this._hasTriggerBufferThreshold=!1,n.resetState(),n._currentTime=0,n._duration=0,n.isPlaying=!1,this.preloader&&this.preloader.clearTask(),this._useVideoLoad=!1,this._MSEError=!1;var r=this.softDecode;n.pause(),this._reset(),e.vtype&&(this._vtype=e.vtype.toUpperCase()),n.setConfig(e),this.config.frameFreeze||this.checkReUseMSE(this.config.reUseMSE,!0),this.softDecode?n.vtype="MP4_MSE_SOFT":n.vtype="MP4_MSE";var i=this.playerConfig,o=i.codecType,a=i.mediaType;this.codecType=o?o.toLowerCase():Yk,r!==this.softDecode&&this.h265_h264_switch(a||"video"),this.checkConfig(),this.log(Pk.LOG,"[Index] playNext",e.vtype,e.vid),n.start(),this.config.reUseMSE&&!this.isH265DegradeH264&&this._addMetaDataEvent((function(){t.log(Pk.LOG,"[Index] playNext metadata update currentTime = 0"),0!==n.currentTime&&(n.currentTime=0),t._removeMetaDataEvent()})),this.emit("playnext")}},{key:"h265_h264_switch",value:function(e){this.log(Pk.LOG,"[Index],h265_switch_h264",e);var t=this.player,n=KA(e,"",t.mediaConfig,"xgplayer-".concat(e,"-img"));this.removeVideoList.push(t.video);var r=t.video,i=r.muted,o=r.volume;n.muted=i,n.volume=o,t.video=n,t.attachVideoEvents(t.video)}},{key:"next",value:function(e){this.playNext(e)}},{key:"oldChangeDefinition",value:function(e,t){var n=this,r=this.config,i=this.player,o=this.playerConfig;i.emit(q_,{from:t,to:e}),i.emit(F_);var a=i.definitionList,s=a.filter((function(t){return t.definition===e.definition||t.definition===Number(e.definition)})),u=a.filter((function(e){return e.definition===t.definition||e.definition===Number(t.definition)}));if(u.length>0&&(u[0].selected=!1),s.length>0){(e=s[0]).selected=!0,i.curDefinition=e,this.log(Pk.LOG,"[oldChangeDefinition],currentTime,",i.currentTime,",from,",t,",to,",e);var c=i.currentTime,l=i.paused;this._changeDefState||(this._changeDefState={currentTime:c,paused:l}),r.definition=e.definition,["keyValue","kid","secretKey","drm","getLicenseUrl","drmKeyToken","sessionId"].forEach((function(t){r[t]=e[t]})),o.url=e.url,o.userSelectDefinition=e.definition,o.defaultDefinition=e.definition,r.focusUserDefinition=!0,i.currentTime=0,i.pause(),this._reset(),this.checkReUseMSE(),this._isMseInit=!1,this.eme=null;var f=this._handlerUrl(e.url);r._mainURL=f.main,r._backupURL=f.backup,this._changeDefineCanPlay&&i.off("canplay",this._changeDefineCanPlay),this._changeDefineCanPlay=function(){n.changeDefineCanPlay(c,l,t,e),n._changeDefineCanPlay=null},i.once("canplay",this._changeDefineCanPlay),this.player.video.load(),this.playerStartInit(o.url)}}},{key:"_emitDefinitionChangeDetailEvent",value:function(e){var t=this._currDefinition,n=t.bitrate,r=t.definition,i=t.file_id,o=t.width,a=t.vwidth,s=t.height,u=t.vheight;this.player.emit("definitionChangeDetail",{start:e,bitrate:n,definition:r,mediaType:"video",url:this.config._mainURL,fileid:i});var c={width:o||a,height:s||u};this.player.emit("RESOLUTION_UPDATE",c)}},{key:"_setCurrentDefinition",value:function(e){var t=this.player.config;if(t.definition&&t.definition.list){var n=t.definition.list.filter((function(t){return t.bitrate===e}));this._currDefinition=n&&n[0]}this._currDefinition||(this._currDefinition={bitrate:e}),e&&(this._currDefinition.bitrate=e)}},{key:"switchURL",value:function(e){var t=this;if(this.useVideoLoad)SN.call(this.player,e);else{var n=this.player,r=this.playerConfig,i=this.config;r.definition.list=[e],r.url=e.url,r.defaultBitrate=e.bitrate,r.defaultDefinition=e.definition,["keyValue","kid","secretKey","drm","getLicenseUrl","drmKeyToken","sessionId"].forEach((function(t){i[t]=e[t]})),this._addMetaDataEvent((function(){n.currentTime=0,t._removeMetaDataEvent()})),this.playNext(i)}}},{key:"_handlerUrl",value:function(e){var t=this.playerConfig;if(!e)return null;var n,r=[];if("String"===QA(e))n=e,t.backupURL&&r.push(t.backupURL);else if("Array"===QA(e)&&e.length>0&&(n=e[0].src,e.length>1))for(var i=1;i<e.length;i++)r.push(qA(e[i].src,{__vid:t.vid}));return!(!n&&0===r.length)&&{main:qA(n,{__vid:t.vid}),backup:r}}},{key:"_firstFrameTime",value:function(){var e=this.firstFrameTime,t=this.player,n=this.config,r=this.loadstart,o={supportHevc:n.supportHevc,firstmux:this.mp4?this.mp4.firstFrameTime.firstmux:-1,stats:lL(t),loadstart:r};this.firstFrameTime=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{supportHevc:!1,loadstart:0,firstmux:-1,stats:{}};if(t===Yk||n.supportHevc)return e.new_loadeddata<0&&(e.loadst_loadeddata=WA()-n.loadstart,e.new_loadeddata=WA()-e.newplayer),e;if(t===Jk){for(var r=n.stats,o=n.firstmux,a=e.metaload,s=e.startMuxTime,u={},c=0;c<(null==r||null===(l=r.bootStats)||void 0===l?void 0:l.length);c++){var l;u[r.bootStats[c].action]=r.bootStats[c].dot}var f=i(i({},r),{},{metaload:a,startload_stmux:s,firstmux:o},u);return delete f.bootStats,f}}(e,this.codecType,o)}},{key:"_bindEvents",value:function(){var e=this;this.log(Pk.LOG,"bindEvents,",this._isEventInit);var t=this.config,n=this.player;this._isEventInit||(this.on("seeking",this._onSeeking),this.on("waiting",this._onWaiting),this.on("error",this._onVideoError),this.on("playing",this._onPlaying),this.on("pause",this._onPause),this.on("detectGap",(function(){t.gapDegrade&&t.useEME&&(t.useEME=!1,e._replay())})),this.on(Ug.CHANGE_FLYING_PLUGIN_CONFIG,this._onChangeConfig),n.setEventsMiddleware({error:function(t,r){var i,o=null==t?void 0:t.error,a={errorCode:null==o?void 0:o.code,errorMessage:null==o?void 0:o.message,videoType:e.useVideoLoad};if(e.changeState("video_error.Middleware",a),e.codecType===Jk&&(null==o?void 0:o.message.indexOf("video decoder initialization failed"))>=0&&e.emit("DECODER_FAILED",{codecType:e.config.codecType,vid:e.playerConfig.vid}),e.log(Pk.ERROR,"error middleware",JSON.stringify(a),", isDegrade,",!e._MSEError&&!e.useVideoLoad,n.currentTime),!e._MSEError&&!e.useVideoLoad)return n.vtype="MP4_2",e._MSEError=!0,null===(i=e.mp4)||void 0===i||i.cancelLoading(),e._startDegradedPlayback(a,n.paused),void e.emit(yN);e.emit(yN),e.useVideoLoad&&r(t.eventName,null==t?void 0:t.error)}})),this._isEventInit=!0}},{key:"getBufferDur",value:function(){var e;if(null===(e=this.player)||void 0===e||!e.buffered)return 0;for(var t=this.player.buffered,n=0,r=0,i=t.length;r<i;r++)n+=t.end(r)-t.start(r);return n}},{key:"deleteVideo",value:function(){var e;if((null===(e=this.removeVideoList)||void 0===e?void 0:e.length)>0){for(var t=0;t<this.removeVideoList.length;t++){var n=this.removeVideoList[t],r=n.parentNode;r&&r.removeChild(n),this.log(Pk.WARN,"[_removeVideoSource]")}this.removeVideoList=[]}}},{key:"_unbindEvents",value:function(){var e;this.log(Pk.LOG,"unbindEvents,",this._isEventInit),this.off("seeking",this._onSeeking),this.off("waiting",this._onWaiting),this.off("ended",this._onEnded),this.off("error",this._onError),this.off("playing",this._onPlaying),this.off("pause",this._onPause),this.off(Ug.CHANGE_FLYING_PLUGIN_CONFIG,this._onChangeConfig),this._isEventInit=!1,null!==(e=this.config)&&void 0!==e&&e.enableFPSStuckHandle&&this.off(_N,this.fpsStuckHandle)}},{key:"changeState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._pTime||(this._pTime=WA());var n=WA()-this._pTime,r=WA()-this._sTime;this.log(Pk.LOG,">>>changeState[".concat(e,"]"),n,r,JSON.stringify(t)),this.states.push({state:e,t1:n,t2:r,data:t}),this._pTime=WA()}},{key:"softDecode",get:function(){var e,t;return"xg-video"===(null===(e=this.player)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.mediaType)}},{key:"_initH265MseProxy",value:function(){var e=this.player;e.video instanceof HTMLVideoElement&&this.h265_h264_switch(this.playerConfig.mediaType);var t=e.video;this.softDecode&&t.setPlayMode&&t.setPlayMode("VOD"),this.mseProxy=t,this.softDecode&&(e.forceDegradeToVideo=function(){},uL(e,"lowdecode",this._lowDecoder),uL(e,"error",this._onError))}},{key:"notSupportError",value:function(e){return this.log(Pk.LOG,e,Fk),new N_(this.player,{errorType:sS.MEDIA,errorCode:aS.mse,errorMessage:"".concat(e," ").concat(Fk),vid:this.playerConfig.vid})}},{key:"removeAndRejectInitPromise",value:function(e){this._initPromise&&(this._removePendingPromise(this._initPromise),this._initPromise.reject(e))}},{key:"_initMp4",value:function(e){var t,n,r,a,s,c=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=this.config,d=this.player,p=this.playerConfig;this.mp4&&(this.mp4.destroy(),this.mp4=null),this.changeState("MP4_NEW",{});var v,g=0;null!=h&&null!==(t=h.pcdnConfig)&&void 0!==t&&t.openPCDN&&(g=(null==h||null===(v=h.pcdnConfig)||void 0===v?void 0:v.switchPCDNMaxCnt)||2),null!=h&&null!==(n=h.pcdnConfig)&&void 0!==n&&n.adaptPCDNConfig&&(g=0),this._setCurrentDefinition(d.curDefinition.bitrate);var y=LL;null==h||h.loadRangeType;var m,_=null===(r=d.curDefinition)||void 0===r||null===(a=r.pktOffsetMap)||void 0===a?void 0:a.find((function(e){return(null==e?void 0:e.time)===((null==h?void 0:h.firstLoadTimePos)||5)})),b=null==_?void 0:_.offset,T=function(e,t){var n,r=e.getRequestOptionsCallback,o=e.reqOptions;return n=t.reqOptions?t.reqOptions:"Function"===QA(r)?r(t):o,i(i({},o),n)}(this.config,{url:e});this.mp4=new y(e,d.curDefinition.bitrate,{segmentDuration:h.segmentMinDuration,enableWorker:h.enableWorker,codecType:this.codecType,chunkSize:h.chunkSize,firstLoadSize:b,duration:p.duration||0,fileSize:f.fileSize||0,playerId:this.playerId,vid:p.vid,useUrlRange:h.useUrlRange,retryCount:h.retryCount,retryDelay:h.retryDelay,timeout:h.timeout,onProcessMinLen:h.onProcessMinLen,supportHevc:h.supportHevc,afterLoadeddataCallBackLen:h.afterLoadeddataCallBackLen,firstLoadBuffer:h.firstLoadBuffer,logger:this.logger,switchPCDNMaxCnt:g,reqOptions:T,fixEditListOffset:h.fixEditListOffset},this.config._backupURL,this.firstFrameTime,""),this.mp4.once(_L,this._onMp4MetaReady),this.mp4.on(mL,this._onMp4Error),this.mp4.on(kL,this._updateDrmConfig),this.mp4.on(SL,this._updateMSE),this.mp4.on(TL,this._onMp4Progress),this.mp4.on(bL,this._onMp4DataCallBack),this.mp4.on(xL,(function(e){c.player&&c.player.emit("source_error",e)})),this.mp4.on(EL,(function(e){var t,n,r=c.player,i=c.config;c.emit(yN),c.log(Pk.LOG,"not match remove buffer start,buffer,",JSON.stringify(null==r||null===(t=r.buffered2)||void 0===t?void 0:t.bufferedList),", removeRange,",JSON.stringify(e)),null===(n=c.mse)||void 0===n||n.remove(Nk.VIDEO,e[0]+.1,e[1]-.1).then((function(){var e;c.log(Pk.LOG,"not match remove buffer end,",JSON.stringify(null==r||null===(e=r.buffered2)||void 0===e?void 0:e.bufferedList));var t=r.currentTime;(null==i?void 0:i.loadRangeType)===Qk&&(r.currentTime=t,c.log(Pk.LOG,"not match remove buffer end, fix currentTime",r.currentTime))})).catch((function(){}))})),this.mp4.on(ML,(function(e){c.pcdn&&e&&c.pcdn.removePCDNNode(e.vid,e.bitrate,e.url)})),this.mp4.on(wL,(function(e){c.player&&(c.player.emit("initialUrl",{url:e}),c.player.emit("changeHost",nL(e)))})),this.mp4.on(RL,function(){var e=u(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=c.mp4)||void 0===n?void 0:n.cancelLoading();case 2:c._curLoadSegmentIdx=t,c.log(Pk.LOG,"[update curLoadSegmentIdx]",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.mp4.on(PL,(function(e){var t,n,r;if(c.player){var i=p.vid,o={vid:i,taskType:1,changeCnt:null===(t=c.mp4)||void 0===t?void 0:t.getCurSwitchPCDNCnt(),traceId:null===(n=c.mp4)||void 0===n||null===(r=n.pcdnTraceInfo)||void 0===r?void 0:r.trace_id},a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.vid,i=n.taskType,o=n.changeCnt,a=n.traceId,s=t.bitrate,u={vid:r,task_type:i,change_cnt:o,definition:t.definition,bitrate:s,fileid:t.file_id};return((null==e?void 0:e.load_type)||Hk)===Hk?u.cdn_size=e.len:(u.pcdn_size=e.len,u.trace_id=a),u}(e,c._currDefinition,o);c.player.emit("prf_data_size",a);var s=(null==e?void 0:e.load_type)||Hk;c.mp4&&c.mp4.updateLoadInfo(s,e.len),PI&&console.log("prf_data_size emit, vid,",i,",loadType,",s,", task_type, 1",",len,",e.len)}})),this.mp4.MP4Loader.on($k,(function(e){var t,n;RN=e.speed,function(e,t){e.speed||(e.speed=[]);var n=e.speed;n.push(t),n.length>10&&n.shift()}(c.debugInfo,e.speed);var r=(null==e||null===(t=e.priOptions)||void 0===t?void 0:t.type)||Hk;c.emit($k,{speed:e.speed,type:r});var o=(null===(n=c.playerConfig)||void 0===n?void 0:n.vid)||(null==e?void 0:e.vid);if((null==e?void 0:e.len)>0){var a,s,u,l,f,h;if(!c.player)return;var d=(null==e||null===(a=e.priOptions)||void 0===a?void 0:a.type)||Hk,p=(null===(s=c.adaptRangeRes)||void 0===s?void 0:s.length)>0?c.adaptRangeRes.shift():{},v=null===(u=c.mp4)||void 0===u?void 0:u.getCurSwitchPCDNCnt(),g=c._currDefinition,y={vid:o,task_type:1,change_cnt:v,bitrate:g.bitrate,definition:g.definition,fileid:g.file_id},m=dL(p),_=function(e,t){var n=aL(t.len,t.time),r={cdn_size:0,cdn_speed:0,pcdn_size:0,pcdn_speed:0};return e===Hk?(r.cdn_size=t.len,r.cdn_speed=n):(r.pcdn_size=t.len,r.pcdn_speed=n),r}(d,e),b=i(i(i({},y),m),_),T=p.idx;c.player.emit("prf_data_size",b),PI&&console.log("prf_data_size emit,",T,JSON.stringify(b));var k=e.index?null===(l=c.mp4)||void 0===l||null===(f=l.adaptTimeRange[e.index])||void 0===f||null===(h=f.timeRangeIdx)||void 0===h?void 0:h[1]:null;if(k&&k>=c.mp4.timeRange.length-1)for(;(null===(S=c.adaptRangeRes)||void 0===S?void 0:S.length)>0;){var S,w,R=c.adaptRangeRes.shift(),M=null===(w=c.mp4)||void 0===w?void 0:w.getCurSwitchPCDNCnt(),x=i(i(i({},y),_),dL(R));x.change_cnt=M,c.player.emit("prf_data_size",x),PI&&console.log("prf_data_size emit,",T,JSON.stringify(x))}c.mp4&&c.mp4.updateLoadInfo(d,e.len)}})),null!=h&&null!==(s=h.pcdnConfig)&&void 0!==s&&s.adaptPCDNConfig&&(null===(m=this.mp4)||void 0===m||m.setSwitchPCDNCallBack((function(){var e=c.pcdn;if(!e)return-1;var t=e.getPCDNChangeCnt()||-1;return c.log(Pk.LOG,"[updateSwitchPCDNMaxCnt]",t),t}))),this.changeState("MP4_INIT",{}),this.emit("loadstart_mse"),l||(l={}),this.mp4.init(l),this._emitDefinitionChangeDetailEvent(0)}},{key:"_checkPreloader",value:function(){var e=this,t=this.playerConfig,n=new vN,r={method:"checkPreloader",success:0,type:"error",cacheKey:""};this.changeState("CHECK_PRELOAD");var i=this.player,o=i.curDefinition,a=i.preloader;if(!a)return this.changeState("PRELOAD_ERROR",{t:2}),r.success=0,r.error=new Error("no_preloader"),n.resolve(r),n;var s=o.cacheKey?o.cacheKey:a.generateUniqueKey({vid:t.vid,definition:o.definition||-1,vtype:t.vtype,codecType:t.codecType});return r.cacheKey=s,s?a.getPreLoadData(s).then((function(t){if(t){var i=t.bitrate,a=t.orgDefinition;if(i&&o.bitrate&&i!==o.bitrate)return e.preLoadData=null,r.success=0,r.error=new Error("bitrate_not_match_cut_".concat(o.bitrate,"_cache_").concat(i)),e.changeState("PRELOAD_ERROR",{bitrate:i,ck:s}),n.resolve(r),void e.log(Pk.LOG,">>>check Preloader bitrate_not_match cacheKey".concat(s,"\n                curDefinition:").concat(o.bitrate,"  cache:").concat(i));o.orgDefinition=a,xI&&console.log(">>>>check Preloader result",s,t),e.preLoadData=t,e.emit("PRELOAD_INFO",e.preLoadData),e.emit("hitCache",t),r.success=1,r.data=t,Xk.set(s,!0),e.changeState("PRELOAD_OK",{l:e.preLoadData.byteLength,ck:s}),t.mediaSegList&&t.mediaSegList.length>0||t.buffer&&t.buffer.byteLength>0?e.hitpreload=!0:e.hitpreload=!1,n.resolve(r)}else e.preLoadData=null,e.changeState("PRELOAD_ERROR",{t:0}),r.success=0,r.error=new Error("none_preload"),n.resolve(r)})):(this.changeState("PRELOAD_ERROR",{t:2}),r.success=0,r.error=new Error("none_preload"),n.resolve(r)),n}},{key:"_initEME",value:function(e,t){var n,r,i=hL(this.config),o=this.config.useEME;if(i&&o&&!MN.checkEMEValid())return this.log(Pk.ERROR,"checkEMEInValid"),void this._errorHandler(new N_(this.player,{errorType:sS.MEDIA,errorCode:aS.eme_hijack,errorMessage:"checkEMEInValid",vid:this.playerConfig.vid}));var a=this.player,s=this.config;this._updateDrmConfig(t),this.log(Pk.LOG,"useEME: ",s.useEME),null===(n=this._secretkey)||void 0===n||n.setOptions('video/mp4; codecs="avc1.64001E"','audio/mp4; codecs="mp4a.40.2"'),null===(r=this._secretkey)||void 0===r||r.setupEME(a.video)}},{key:"_initMse",value:function(){var e=u(o().mark((function e(t){var n,r,i,a,s,c,l,f=this,d=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]&&d[1],i=this.config.useEME,!hL(this.config)||!i||MN.checkMSEValid()){e.next=7;break}return this.log(Pk.ERROR,"checkMSEInValid "),this._errorHandler(new N_(this.player,{errorType:sS.MEDIA,errorCode:aS.mse_hijack,errorMessage:"checkMSEInValid",vid:this.playerConfig.vid})),e.abrupt("return");case 7:if(null===(n=this.player)||void 0===n||n.emit("codecsupdate",t.videoCodec),!this.config.frameFreeze){e.next=18;break}if(this.log(Pk.LOG,"release freezed frame"),!this.mse){e.next=15;break}return a=this.mse,this.mse=null,e.next=15,a.unbindMedia();case 15:this.player&&this.player.src&&(this.player.removeAttribute("src"),this.player.load()),e.next=19;break;case 18:this.updateMSEDuration();case 19:s=fL(this.mp4,t),c=h({},Nk.VIDEO,{mimeType:"video/mp4",codec:s}),this.mse?(this.log(Pk.LOG,"MSE exit"),(l=new vN).resolve()):(this.log(Pk.LOG,"new MSE"),this.mse=new Nk,l=this.mse.bindMedia(this.player.video)),l.then((function(e){f.changeState("MSE_OPEN");var t=f.firstFrameTime;t.initmse_sbopen=null==e?void 0:e.costtime,f._loadStartEventTime>0&&(t.mseopen=WA()-f._loadStartEventTime);var n=Object.keys(c);try{for(var i=0;i<n.length;i++){var a,s=n[i];null===(a=f.mse)||void 0===a||a.createOrChangeSource(s,c[s].codec).then((function(){f.changeState("MSE_OPEN_DONE"),f._isMseInit=!0,f._onTimeUpdate()})).catch(function(){var e=u(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.config.reUseMSE=!1,f.log(Pk.WARN,"MSE createOrChangeSource catch err: ",null==t?void 0:t.message),e.next=4,null===(n=f.mse)||void 0===n?void 0:n.unbindMedia();case 4:f.mse=null,f._isMseInit=!1,r?f.MSEErrorHandle(t):f._initMse(f.mp4.meta,!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}catch(e){f.MSEErrorHandle(e)}})).catch((function(e){return f.MSEErrorHandle(e)})),this.changeState("MSE_INIT");case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"MSEErrorHandle",value:function(e){var t=new N_(this.player,{errorType:sS.mse,errorCode:aS.mse,vid:this.playerConfig.vid,errorMessage:e.message,mediaError:{code:aS.mse,message:e.message}});this.log(Pk.ERROR,"initMse error: ",null==e?void 0:e.message),this._errorHandler(t)}},{key:"_appendInitSeg",value:function(e){var t=this;!this.mse||this._MSEError||(this.changeState("MSE_INITSEG"),this.mse.append(Nk.VIDEO,e,{vid:this.playerConfig.vid,range:null,dataLen:e.byteLength,isinit:!0}).then((function(e){t.firstFrameTime.metaready_initsegend=null==e?void 0:e.costtime,t.changeState("MSE_INITSEG_OK",{costtime:null==e?void 0:e.costtime})})),this.config.useEME&&this._secretkey&&this._secretkey.encryptHandle())}},{key:"_checkMetaInfo",value:function(e){if(!e)return new N_(this.player,{errorType:sS.DEMUX,errorCode:aS.metaError,errorMessage:"meta is null",vid:this.playerConfig.vid});var t=this.mp4.checkCodecH265(),n=this.mp4.checkCodecH266();return this.changeState("MP4_META_READY",{isH265:t,isH266:n}),!t||(this.codecType!==Jk&&(this.codecType=Jk,this.log(Pk.LOG,"codecType fix ",this.codecType)),this.softDecode||this.config.supportHevc)?n&&(this.codecType!==Zk&&(this.codecType=Zk,this.log(Pk.LOG,"codecType fix ",this.codecType)),!this.config.supportVvcc)?this.notSupportError(this.codecType):null:this.notSupportError(this.codecType)}},{key:"_stopProgress",value:function(){this.log(Pk.LOG,"stopProgress",this._hasStartProgress),this._hasStartProgress=!1,this._requestTimer&&this._requestTimer.stop(),this._bufferBreakTimer&&(clearTimeout(this._bufferBreakTimer),this._bufferBreakTimer=null,this._bufferBreakFlag=void 0),this._seekResumTimer&&(clearTimeout(this._seekResumTimer),this._seekResumTimer=null)}},{key:"checkReStartTimer",value:function(){var e=WA()-this._lastTimeupdateTime2;e>2*this.config.tickInSeconds*1e3&&!this._offineLine&&(this.log(Pk.LOG,"checkReStartTimer reStart timer",e,WA()),this._stopProgress(),this._startProgress(),this._lastTimeupdateTime2=WA())}},{key:"_bindNetworkStateChange",value:function(){window.addEventListener("online",this._onOnlineHandler),window.addEventListener("offline",this._onOfflineHandler)}},{key:"_unbindNetworkStateChange",value:function(){window.removeEventListener("online",this._onOnlineHandler),window.removeEventListener("offline",this._onOfflineHandler)}},{key:"_onSuperStart",value:function(e){var t=this,n=this.player;OI("_onSuperStart:".concat(e),this.mse),n.video.src=e,this.once("canplay",(function(){n.play(),t.on("waiting",t._onWaiting)}))}},{key:"_appendBuffer",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,o=this.mse,a=this.playerConfig,s=this.player,u=a.vid;this.log(Pk.LOG,"appendStart",u,r.fragIndex,JSON.stringify(r.range)),this._MSEError?this.log(Pk.ERROR,"_MSEError, not append return"):o.append(e,t,{vid:u,fragIndex:r.fragIndex,range:r.range,dataLen:t.byteLength,state:i}).then((function(e){var t,o,a,u,c,l,f=s.getBufferedRange();n.log(Pk.LOG,"appendEnd ",null==e||null===(t=e.context)||void 0===t?void 0:t.fragIndex,JSON.stringify(null==e||null===(o=e.context)||void 0===o?void 0:o.range),null==e||null===(a=e.context)||void 0===a?void 0:a.dataLen,", costTime,",null==e?void 0:e.costtime,", opt,",null==e?void 0:e.name,",buffer,",JSON.stringify(f),s.currentTime),n.checkBufferArriveEndTime();var h=n.firstFrameTime;if(h.loadst_loadeddata<0){var d;h.apcnt++;var p=(null==e||null===(d=e.context)||void 0===d?void 0:d.dataLen)||0,v=(null==e?void 0:e.costtime)||0;h.aplen+=p,h.data_ap+=v;for(var g=!1,y=n.states.length-1;y>=0;y--)if("APPEND_DATA_OK"===n.states[y].state){n.states[y].data.cnt+=1,n.states[y].data.costime+=v,n.states[y].data.dataLen+=p,g=!0;break}g||n.changeState("APPEND_DATA_OK",{costime:v,dataLen:p,cnt:1})}var m=null===(u=n.mp4)||void 0===u||null===(c=u.adaptTimeRange[r.fragIndex])||void 0===c||null===(l=c.timeRangeIdx)||void 0===l?void 0:l[1];if(n.mse&&i&&m>=n.mp4.timeRange.length){var _=n.player.buffered;_&&(null==_?void 0:_.length)>0&&(n.bufferEndTime=_.end(_.length-1)),n._isEnded(),n.log(Pk.LOG,"loaded ended !!!==>>>",JSON.stringify(r.range),", fragIndex,",r.fragIndex,", bufferEndTime,",n.bufferEndTime,",meta_duration,",n.mp4.meta.duration)}})).catch((function(e){var t=n.player,i=n.mse;if(!n._MSEError&&t){var o=t.media||t.video;if(e&&null!=i&&i.isFull()){n.log(Pk.WARN,"[MSE is full]");var a=t.getBufferedRange(t.buffered2);n._checkRemoveSourceBuffer(a,t.currentTime,!0)}else{var s="".concat(null!=o&&o.error?[o.error.code,o.error.message].join("-"):"MEDIA_EMPTY"),c="".concat((null==e?void 0:e.errorCode)||"","-").concat((null==e?void 0:e.errorMessage)||(null==e?void 0:e.message)||"MSE_EMPTY"),l="".concat(c,"|").concat(s);n._MSEError=!0,n.changeState("_MSEError",{fragIndex:null==r?void 0:r.fragIndex,range:null==r?void 0:r.range}),n.log(Pk.LOG,"MSE append error",null==r?void 0:r.fragIndex,null==r?void 0:r.range);var f=new N_(t,{errorType:sS.MEDIA,errorCode:aS.mseAppend,vid:u,errorMessage:l,mediaError:{code:aS.mseAppend,message:l}});n._errorHandler(f)}}}))}},{key:"_loadData",value:function(){var e=u(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mp4&&this._isMseInit){e.next=2;break}return e.abrupt("return");case 2:return this.loadstart<0&&(this.loadstart=WA()),e.prev=3,e.next=6,this.mp4.load(this._curLoadSegmentIdx,this._loadDataSuccess);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),this.log(Pk.ERROR,"[Index] _loadData error",this.playerConfig.vid,null===e.t0||void 0===e.t0?void 0:e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getDataBitRate",value:function(e){var t=this.mp4,n=this.playerConfig.definition;if(!t||!n||n.list)return 0;for(var r=t.getDataBitRate(e),i=n.list,o=0,a=0;i&&a<i.length;a++)if(i[a].bitrate===r){o=i[a];break}return o}},{key:"_loadStuckCheck",value:function(){var e=this,t=this.config,n=this.player;if(!t.disableBufferBreakCheck){var r=n.isUserActive;if(n.currentTime-(this._lastCurrentTime||0)>.1||!r&&n.paused||r&&this.playFlag&&n.paused)(1===this._bufferBreakFlag||2===this._bufferBreakFlag)&&(this.log(Pk.LOG,"视频没有卡死,重置卡死标记,curtime,",n.currentTime),this._bufferBreakFlag=0,clearTimeout(this._bufferBreakTimer),this._bufferBreakFlag=null);else if(!this._bufferBreakFlag){var i;this._bufferBreakFlag=1;var o=JSON.stringify(null==n||null===(i=n.buffered2)||void 0===i?void 0:i.bufferedList);this.log(Pk.LOG,"卡死计时开始! ".concat(t.waitingTimeOut,"ms后确认卡死,"),n.currentTime,o),this._bufferBreakTimer=setTimeout((function(){if(!(e.isDestroy||t.disableInactiveWaitingCheck&&(!r||null!=n&&n.paused))){if(1===e._bufferBreakFlag){var i=n.currentTime,o=n.bufferedPoint;if(o.end>0&&o.end-i>=2)return void e.retrySeekResum(i)}e._bufferBreakFlag=2,e.waitTimeoutDegrade()}}),t.waitingTimeOut)}this._lastCurrentTime=n.currentTime}}},{key:"waitTimeoutDegrade",value:function(){var e,t,n,r=this.player;this.changeState("wait_timeout"),this.log(Pk.LOG,"确认卡死!!!,curtime,",r.currentTime,JSON.stringify(null==r||null===(e=r.buffered2)||void 0===e?void 0:e.bufferedList),",duration,",null===(t=this.mp4)||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.duration),this.emit("waittimeout");var i=document.hidden||"hidden"===document.visibilityState,o=new N_(this.player,{errorType:sS.RUNTIME,errorCode:i?aS.waitTimeoutWithHidden:aS.waitTimeout,errorMessage:"wait_timeout",vid:this.playerConfig.vid});this._errorHandler(o)}},{key:"retrySeekResum",value:function(){var e=u(o().mark((function e(t){var n,r,i,a,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.player,r=this.config,this.changeState("retrySeek"),this.log(Pk.LOG,"卡死但有超过2s的buffer,seek下!!!"),clearTimeout(this._seekResumTimer),this._resumePlay=!1,!(r.waitingRetrySeekTimes>0&&r.waitingRetryDuration)){e.next=14;break}return i=Math.min(r.waitingRetrySeekTimes,3),this._currentSeekTimes=0,this.off("playing",this._onResumePlaying),this.once("playing",this._onResumePlaying),a=function e(){if(n&&!s._resumePlay&&!n.paused)return s._currentSeekTimes<i?(s._seekOnce(t),void(s._seekResumTimer=setTimeout(e,r.waitingRetryDuration))):(s.waitTimeoutDegrade(),void(s._seekResumTimer=null));s.log(Pk.LOG,"当前播放实例已恢复或处于暂停状态，退出重试 player=".concat(!!n,",_resumePlay=").concat(s._resumePlay,",paused=").concat(null==n?void 0:n.paused))},this._seekOnce(t),this._seekResumTimer=setTimeout(a,r.waitingRetryDuration),e.abrupt("return");case 14:n.currentTime=t+1,this.once("playing",(function(){s._resumePlay=!0})),this._seekResumTimer=setTimeout((function(){s._resumePlay||s.waitTimeoutDegrade(),s._seekResumTimer=null}),Math.ceil(r.waitingTimeOut/2));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isInBuffer",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!1,r=this.player.video.buffered,i=0;i<r.length;i++){var o=r.start(i)-t,a=r.end(i)+t;if(o<=e.startTime&&e.endTime<=a){n=!0;break}}return n}},{key:"_doubleCheckBuffer",value:function(e){var t=this.player;return!(e.startTime>t.currentTime&&t.video&&t.video.buffered)||1===t.video.buffered.length||this._isInBuffer(e,.2)}},{key:"checkURLExpired",value:function(e,t){var n,r,i,o,a=function(e){if(!e||"String"!==QA(e))return 0;var t=0;try{var n=new RegExp("(\\?|&)x-tos-expires=([^&]*)(&|$)"),r=e.match(n);if(null!==r)t=parseInt(r[2],10);else{var i=e.split("/");i.length>5&&8===i[4].length&&(t=parseInt(i[4],16))}return t>0?t<parseInt((new Date).getTime()/1e3,10)?1:2:0}catch{return 0}}(this.config._mainURL);1===a&&this.pcdn&&(this.pcdn=null);var s=(null==e||null===(n=e.response)||void 0===n?void 0:n.url)||(null===(r=this.config.pcdnConfig)||void 0===r?void 0:r.trackerUrl);null===(i=this.player)||void 0===i||i.emit("source_error",{host:nL(s),src:s,errorCode:null==e||null===(o=e.response)||void 0===o?void 0:o.status,message:"".concat(null==e?void 0:e.message,"-").concat(a).concat(t)})}},{key:"pushTimerStep",value:function(){var e;(null===(e=this.timerStepList)||void 0===e?void 0:e.length)>10&&this.timerStepList.shift(),this._lastTimeupdateTime2>0&&this.timerStepList.push(WA()-this._lastTimeupdateTime2)}},{key:"_onTimeUpdate",value:function(){this.pushTimerStep(),this._lastTimeupdateTime2=WA();var e=this.mse,t=this.mp4,n=this.player,r=this.config;if(n&&!this.useVideoLoad&&t){this.checkBufferArriveEndTime();var i=n.getBufferedRange();WA()-this._lastCheckTime>1e3&&(this._lastCheckTime=WA(),this._loadStuckCheck(),this._startUrlExpiredCheck(),this._checkRemoveSourceBuffer(i,n.currentTime));var o=t.timeRange;if(o&&!(o.length<1)&&(e||this.mseProxy)&&this.canDownload){var a=r.maxBufferLength,s=!1;(this.playFlag&&n.paused||!this.isActive)&&(s=!0);var u=r.nextBufferLength,c=r.minBufferLength,l=r.adaptRange,f=r.noPreloadAddBufferLen,h=null==l?void 0:l.targetCacheControl;s?a=n.isInstNext&&u>=0?u:c:h&&(a=this.adaptRange.getAdaptCacheBuffer()),!this.preLoadData&&h&&(a+=f);var d=n.currentTime+a;i[1]-d<0&&(this.isOpenPCDN(i[1]),(null==r?void 0:r.loadRangeType)===Qk?this.sizeRangeCheckLoad(s,a,i[1]-n.currentTime):this.gopRangeCheckLoad(s,d,a)),this.playFlag&&!this._hasTriggerBufferThreshold&&this._startBufferCheck()}}}},{key:"sizeRangeCheckLoad",value:function(e,t,n){var r,i=this.player,o=this.mp4,a=o.adaptTimeRange,s=a.length;if(!s||(null===(r=a[s-1])||void 0===r?void 0:r.range[1])<(o.size-1||i.curDefinition.size-1)||!a[s-1].downloaded){var u=a.findIndex((function(e){return!e.isLoading}));if(null==a||!a.length||u>=0||a[s-1].downloaded){var c,l,f=this.calculateAdaptRange(e,t),h=f.adaptRangeRes,d=f.loadDuration,p=null===(c=this.adaptRange)||void 0===c?void 0:c.getAdaptRangeSize(d);p>0&&(h.loadSize=p),h.loadDuration=d,this._curLoadSegmentIdx=u<0?o.updateAdaptTimeRange(null,d,p):u;var v=this._curLoadSegmentIdx;a[v].downloaded||(v=Math.max(v-1,0));var g=a[v];if(n>0&&(null==g?void 0:g.endTime)-i.currentTime>=t)return;var y=a[this._curLoadSegmentIdx];if(this._curLoadSegmentIdx>=0&&this._isInBuffer(y)&&!this._isChangeDefinition&&this._curLoadSegmentIdx>=0&&y.endTime-y.startTime>1){var m=a[this._curLoadSegmentIdx];return m.downloaded=!0,m.isLoading=!0,this.log(Pk.LOG,"onTimeUpdate, ".concat(this._curLoadSegmentIdx," download segment, has buffer"),y.startTime,y.endTime,i.currentTime),void(o.seekTime=y.endTime)}h.idx=this._curLoadSegmentIdx,(!this.adaptRangeRes.length||(null===(l=this.adaptRangeRes[h.length-1])||void 0===l?void 0:l.idx)!==this._curLoadSegmentIdx)&&(this.adaptRangeRes.push(h),this.log(Pk.LOG,"adaptRangeRes>>>>",h)),this.log(Pk.LOG,"[onTimeUpdate],load index==>>>, ",this._curLoadSegmentIdx,JSON.stringify(a[this._curLoadSegmentIdx])),this._loadData()}}}},{key:"gopRangeCheckLoad",value:function(e,t,n){var r=this,i=this.mp4,o=i.timeRange,a=i.adaptTimeRange,s=this.player;o.every((function(i,o){if(void 0!==i.adaptTimeRangeIdx&&i.adaptTimeRangeIdx>=0&&a&&a[i.adaptTimeRangeIdx].downloaded)return!0;var u=r.mp4.getAdaptIdxBySrcIdx(o,!0),c=u>=0?a[u]:null,l=u>=0&&r._isInBuffer(c);if(!r._isChangeDefinition&&u>=0&&c.endTime-c.startTime>1&&l)return a[u].downloaded=!0,a[u].isLoading=!0,r.log(Pk.LOG,"onTimeUpdate, ".concat(u," download segment, has buffer"),c.startTime,c.endTime,s.currentTime),!0;if(i.startTime-s.currentTime<t){var f,h,d,p;if(u<a.length&&null!==(f=a[u])&&void 0!==f&&f.isLoading)return!1;var v=r.calculateAdaptRange(e,n),g=v.adaptRangeRes,y=v.loadDuration;r._curLoadSegmentIdx=r.mp4.updateAdaptTimeRange(o,y),g.idx=r._curLoadSegmentIdx,!(null===(h=r.config)||void 0===h||null===(d=h.adaptRange)||void 0===d)&&d.rangeControl&&(g.loadDuration=r.mp4.adaptTimeRange[r._curLoadSegmentIdx].duration),(!r.adaptRangeRes.length||(null===(p=r.adaptRangeRes[r.adaptRangeRes.length-1])||void 0===p?void 0:p.idx)!==r._curLoadSegmentIdx)&&(r.adaptRangeRes.push(g),r.log(Pk.LOG,"adaptRangeRes>>>>",g));var m=a[r._curLoadSegmentIdx];if(r._isInBuffer(m))return m.downloaded=!0,m.isLoading=!0,r.log(Pk.LOG,"onTimeUpdate_, ".concat(r._curLoadSegmentIdx," download segment, has buffer"),m.startTime,m.endTime,s.currentTime),!0;r.log(Pk.LOG,"[onTimeUpdate],load index==>>>, ",r._curLoadSegmentIdx,JSON.stringify(r.mp4.adaptTimeRange[r._curLoadSegmentIdx])),r._loadData()}}))}},{key:"checkBufferArriveEndTime",value:function(){var e=this.player,t=this.mse,n=this.mp4;if(e&&t&&n){var r=e.getBufferedRange(),i=n.getMediaEndTime();i>0&&r[1]>=i&&!t.isEnded&&(this.log(Pk.LOG,"checkBufferArriveEndTime endOfStream, enfTime",i,", bufferRange,",JSON.stringify(r),",currentTime,",e.currentTime),t.endOfStream())}}},{key:"calculateAdaptRange",value:function(e,t){var n,r,i,o={forceSetMin:e};null!==(n=this.pcdn)&&void 0!==n&&n.isOpenAdaptPCDN&&(o.PCDNInBuffer=this.pcdn.curPCDNInBuffer,o.PCDNOutBuffer=this.pcdn.curPCDNOutBuffer);var a=null===(r=this.config)||void 0===r?void 0:r.adaptRange;return!this.playFlag||e?i=this.config.minBufferLength:null!=a&&a.rangeControl?(i=this.adaptRange.getAdaptLoadDuration(),o.loadTarDuration=i):i=this.config.rangeMaxDuration,null!=a&&a.targetCacheControl&&(o.cachedBufferDur=t),!this.playFlag&&null!=a&&a.rangeControl&&(o.loadTarDuration=i),{adaptRangeRes:o,loadDuration:i}}},{key:"checkReUseMSE",value:function(e,t){var n=this,r=this.mse;if(r)if(e||this.config.reUseMSE){var i;r.clearOpQueues(Nk.VIDEO,t),r.abort(Nk.VIDEO);var o=null===(i=this.player)||void 0===i?void 0:i.buffered;if((null==o?void 0:o.length)>0){var a=o.end(o.length-1);this.log(Pk.LOG,"reUseMSE remove buffer, 0-",a),this._canUpdateDuration=!1,this.removeBuffer(Nk.VIDEO,0,a,(function(){var e,t;n._canUpdateDuration=!0,null!==(e=n.mp4)&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t.duration&&n.updateMSEDuration()}))}}else r.unbindMedia(),this.mse=null,this._unloadVideo()}},{key:"updateMSEDuration",value:function(){var e,t=this.mse,n=this.mp4,r=null==n||null===(e=n.meta)||void 0===e?void 0:e.duration;this._canUpdateDuration&&r&&r!==t.duration&&(this.log(Pk.LOG,"updateMSEDuration ",r,",oldDuration,",t.duration),t.updateDuration(r),this._canUpdateDuration=null)}},{key:"_reset",value:function(){this._definitionChangePointInfo=null,this._isReceiveEndedEvent=!1,this.adaptRangeRes=[],this.states=[],this.hitpreload=!1,this._sTime=WA(),this._isChangeDefinition=!1,this._removeBuffeEndTime=0,this._usePaused=!1,this.useVideoLoad=!1,this._isMseInit=!1,this.endofstream=!1,this._curLoadSegmentIdx=0,this.emitExpireTimestamp=null,this.preLoadData=null,this.forPreloadTimeCache=null,this.playFlag=!1,this.waitLevelStartTime=-1,this._waitAdjustTimeCnt=0,this._initPromise&&"pending"===this._initPromise.state&&this._initPromise.reject(gN),clearTimeout(this.checkResumePlayTimer),this.checkResumePlayTimer=null,this._stopProgress(),this.mp4&&(this.mp4.destroy(),this.mp4=null),this.mseProxy&&(cL(this.player,"lowdecode",this._onDegrade),cL(this.player,this._onError)),this.config.frameFreeze||this._unloadVideo(),this._cancelPendingPromises(),this._abrService&&(this._abrService.destroy(),this._abrService=null);var e=this.firstFrameTime;Object.keys(e).forEach((function(t){e[t]="apcnt"===t||"aplen"===t?0:"newplayer"===t?WA():-1})),clearTimeout(this._waitInBufferTimer),this._waitInBufferTimer=null,this.canDownload=!0,this.loadstart=-1,this._loadStartEventTime=-1,this.startLoadData=-1}},{key:"removeErrorUrls",value:function(e,t,n){return e.errorCode===aS[403]&&this._emitExpireEvent(e),n}},{key:"checkIsDegraded",value:function(e){var t=this.config.notDegradeErrorList;return!((null==t?void 0:t.length)>0&&(e.errorCode===aS.timeout&&t.indexOf("timeout")>=0||e.errorCode===aS[403]&&(t.indexOf(403)>=0||t.indexOf("403")>=0)||e.errorCode===aS[404]&&(t.indexOf(404)>=0||t.indexOf("404")>=0)))}},{key:"_startDegradedPlayback",value:function(e,t){var n=this;this.canDownload=!1;var r=this.player,i=this.playerConfig,o=this.config;this.endofstream=!1,this._currentTime=r.currentTime||0,this.player.pause(),this._reset(),this._replay=null;var a=i.H264DefinitionList;if(this.codecType===Jk&&this.softDecode)this.log(Pk.LOG,"h265 softDecode err,degrade use 264 play",i.vid),this._onDegrade(e);else if(this.codecType===Yk||o.supportHevc||o.supportVvcc||(null==a?void 0:a.length)>0){var s=o.drm,u=o.kid,c=o.drmKeyToken,l=o.keyValue,f=o.secretKey;if(s||u||c||l||f)s&&Object.keys(s).map((function(t){s&&(e[t]=s[t])})),this.log(Pk.ERROR,"final error !!!!, ",i.vid,null==e?void 0:e.errorCode,null==e?void 0:e.errorMessage),this.emit("error",e);else{var h;this.log(Pk.LOG,this.codecType,"MSE degrade video,",i.vid,r.currentTime),this.emit(mN,{errc:null==e?void 0:e.errorCode,err_msg:(null==e?void 0:e.errorMessage)||(null==e?void 0:e.message),codec_type:this.codecType,media_type:i.mediaType}),this.useVideoLoad=!0,this.destroyMSE(),this._addMetaDataEvent((function(){n._currentTime&&(r.currentTime=n._currentTime),n.log(Pk.LOG,"DegradedPlayback update currentTime",i.vid,n.codecType,n._currentTime),t?n.player.pause():n.player.play(),n._removeMetaDataEvent()}));var d=i.url;if((null==e||null===(h=e.message)||void 0===h?void 0:h.indexOf(Fk))>=0&&(null==a?void 0:a.length)>0){var p=a.length,v=this.player.curDefinition.definition,g=v&&a.find((function(e){return e.definition===v}));g||(i.H264DefinitionList.sort((function(e,t){return e.bitrate-t.bitrate})),g=i.H264DefinitionList[Math.floor(p/2)]),g&&(d=g.url,this.playerConfig.codecType=Yk,this.codecType=Yk)}this._setPlayerSrc(d)}}else this.log(Pk.ERROR,"degrade player failed"),this.emit("error",e)}},{key:"getAdaptTimeRangeIdx",value:function(e){var t,n,r=this.config,i=this.adaptRange,o=r.segmentMinDuration;return i&&null!=r&&null!==(t=r.adaptRange)&&void 0!==t&&t.rangeControl&&(o=i.getAdaptLoadDuration()),null===(n=this.mp4)||void 0===n?void 0:n.updateAdaptTimeRange(e,o)}},{key:"_startProgress",value:function(){this.initTimer(),this._requestTimer.start(),this._hasStartProgress=!0}},{key:"_unloadVideo",value:function(){this.log(Pk.LOG,"unloadVideo");var e=this.player;try{e.video&&e.video.src&&!/^blob/.test(e.currentSrc)&&!/^blob/.test(e.video.src)&&(this.log(Pk.LOG,"unloadVideo src"),e.video.removeAttribute("src"),e.video.load())}catch(e){this.log(Pk.ERROR,"unloadVideo error",null==e?void 0:e.message)}}},{key:"_addPendingPromise",value:function(e){this._pendingPromises.push(e)}},{key:"_removePendingPromise",value:function(e){this.log(Pk.LOG,"removePendingPromise",null==e?void 0:e.id);var t=this._pendingPromises.indexOf(e);t>-1&&this._pendingPromises.splice(t,1)}},{key:"_cancelPendingPromises",value:function(){this._pendingPromises.length>0&&this._pendingPromises.forEach((function(e){e.reject(gN)})),this._pendingPromises=[]}},{key:"_onMediaExpired",value:function(){this.log(Pk.LOG,"MediaExpired stopProgress"),this._stopProgress(),this.emit(Bk.MEDIA_EXPIRED)}},{key:"_isEnded",value:function(){var e,t=this.player,n=this.mp4,r=t.bufferedPoint,i=r?r.end:0,o=t.currentTime;o>1&&i>o&&(i-o>=2||t.duration-o<1)&&2===t.video.readyState?WA()-this._lastCheckLagTime>=3e3&&(this.log(Pk.LOG,"[has buffer but waiting,seek 0.2 adjust],curTime,",o,", bufferend,",i,", duration,",null==n||null===(e=n.meta)||void 0===e?void 0:e.duration),t.currentTime=o+.2,this._lastCheckLagTime=WA()):this._lastCheckLagTime=WA();var a,s=t.video.seeking;return!this.endofstream&&this.bufferEndTime>0&&this.mse&&!s&&this.bufferEndTime-o<.5&&(this.log(Pk.LOG,"[isEnded endOfStream],curTime,",t.currentTime,", bufferend,",i,", duration,",null==n||null===(a=n.meta)||void 0===a?void 0:a.duration),this.endofstream=!0,this.mse.endOfStream().then((function(){}))),!!(n&&n.meta&&!s&&n.meta.duration-o<.5)&&(this._stopProgress(),this.log(Pk.LOG,"[isEnded],stopProgress and endOfStream,curTime, ",t.currentTime,", bufferend,",i,", duration,",n.meta.duration),this.mse&&this.mse.endOfStream().then((function(){})),!0)}},{key:"emitVideoEvent",value:function(e){var t=this;if(!this._checkEndedTimer){var n=this.player,r=this.mp4;this._checkEndedTimer=setTimeout((function(){t._checkEndedTimer=null,!t._isReceiveEndedEvent&&r.meta.duration-n.currentTime<.5&&(t.log(Pk.LOG,"[ do emit video ended event],curTime,",n.currentTime,", bufferend,",e,", duration,",r.meta.duration),t.emit("ended"))}),2e3)}}},{key:"_clearMediaKeys",value:function(){var e=this.player;e.video&&"function"==typeof e.video.setMediaKeys&&e.video.setMediaKeys(null).catch((function(){}))}},{key:"_checkRemoveSourceBuffer",value:function(e,t,n,r){var i=this,o=this.mse,a=this.mp4,s=this.player;if(o&&a&&s&&(n&&(clearTimeout(this._removeBufferTimer),this._removeBufferTimer=null),e||(e=s.getBufferedRange(s.buffered2)),t||(t=s.currentTime),!(!n&&WA()-this._checkRemoveBufferLastTime<=this.config.removeBufferLen||this.endofstream)&&(this._checkRemoveBufferLastTime=WA(),e&&e[0]>=0&&(t-e[0]>this.config.removeBufferLen||o.isFull())))){var u=r?e[1]:t-(o.isFull()?0:15),c=a.getFragmentIdx(u);if(c>0&&(r||a.timeRange[c].startTime<t)){var l=Math.floor(Math.min(a.timeRange[c].startTime,e[1])),f=Math.max(a.timeRange[0].endTime+1,e[0]);f<l?(this.log(Pk.LOG,"[checkremoveSourceBuffer], remove range==>>>",f,l,t),this.removeBuffer(Nk.VIDEO,f,l)):o.isFull()&&!this._removeBufferTimer&&(this._removeBufferTimer=setTimeout((function(){i._checkRemoveSourceBuffer(null,null,!0)}),1e4))}}}},{key:"onMediaUpdate",value:function(e){var t=e.vid,n=e.kid,r=e.url,i=this.player,o=this.config;if(t===this.playerConfig.vid&&n===o.kid&&r){this.playerConfig.url=r;var a=this._handlerUrl(r);o._mainURL=a.main,o._backupURL=a.backup;var s=o._mainURL;return this.useVideoLoad?i.src=r:this.mp4&&this.mp4.updateUrl(s),!0}return!1}},{key:"enableAutoBuffer",value:function(e){var t=this;if(e){if(!this._allInitPromise)return void this.log(Pk.LOG,"player destroyed!!");this._allInitPromise.then((function(){t.log(Pk.LOG,"enableAutoBuffer true"),t._startProgress()}))}else this._stopProgress(),this.log(Pk.LOG,"enableAutoBuffer false")}},{key:"bitRateAdapter",get:function(){return this.player&&this.player.plugins&&this.config.needAutoBitrate?this.player.plugins.bitrateselector:null}},{key:"getDefinitonFromAdapter",value:function(e,t){if(!this.bitRateAdapter)return null;var n=this.bitRateAdapter;return n.getSuitableBitrate?n.getSuitableBitrate(e,t):n.bitRateAdapter?n.bitRateAdapter.select(e):null}},{key:"addPreloader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.playerId=this.playerId;var t=this.player.preloader;t?t.addPreloader(e,this.playerConfig.vid,this.playerId):this.log(Pk.LOG,"preloader has destroyed")}},{key:"addPreloaderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.player.preloader;t?t.addPreloaderList(e,this.playerConfig.vid,this.playerId):this.log(Pk.LOG,"preloader has destroyed")}},{key:"log",value:function(e,t){for(var n=(this.playerConfig||{}).vid,r=n?"[Index]".concat(n," ").concat(t):"[Index] ".concat(t),i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];OI.apply(void 0,[this.logger,e,r].concat(o))}},{key:"_emitInitFail",value:function(e){this.log(Pk.ERROR,"initFail, reason:",e),this.emit(Bk.INIT_FAIL,e)}},{key:"useVideoLoad",get:function(){return this._useVideoLoad},set:function(e){this._useVideoLoad=e}},{key:"ready",get:function(){return this._allInitPromise}},{key:"speed",get:function(){return parseInt(AL.speed,10)}},{key:"version",get:function(){return nS}},{key:"realTimeSpeed",get:function(){return RN}},{key:"opQueueLen",get:function(){var e=this.mse&&this.mse._queue?this.mse._queue[Nk.VIDEO]:[];return e?e.length:0}},{key:"loadSegmentTimeRange",get:function(){if(!this.mp4)return[0,0,0,0];var e=this.mp4.adaptTimeRange;if(e&&e.length>0&&this._curLoadSegmentIdx>=0&&this._curLoadSegmentIdx<e.length){var t=e[this._curLoadSegmentIdx];if(t.isLoading){var n=t.range;return[Number(t.startTime),Number(t.endTime)].concat(b(n))}}return[0,0,0,0]}},{key:"preloadState",get:function(){return this.player.preloader&&this.player.preloader.loadingCount}},{key:"moovSize",get:function(){return 0}},{key:"isDestroy",get:function(){return!this.player}},{key:"cancelPreloadTask",value:function(){this.preloader&&this.preloader.cancelLoading(this.player.playerId)}},{key:"removeAllPreloadData",value:function(){this.preloader&&this.preloader.removeAll()}},{key:"removeAllPreloadTask",value:function(){this.preloader&&this.preloader.removeAllPreloadTask()}},{key:"domain",get:function(){return nL(this.loadURL)}},{key:"loadURL",get:function(){var e=this.player,t=e.currentSrc;return/^blob/.test(e.currentSrc)&&(t=this.mp4.currentLoadUseUrl()),t}},{key:"abrInstance",get:function(){return this._abrService?this._abrService.abrInstance:null}},{key:"_handleUrlExpire",value:function(){var e=this,t=this.config,n=this.player,r=n.paused;(new Date).getTime()/1e3>=this.urlExpireTimestamp&&this.urlExpireTimestamp>0&&!r&&t.getServerTime&&(n.serverTimeDiffPromise=n.serverTimeDiffPromise||t.getServerTime().catch((function(){return 0})),n.serverTimeDiffPromise.then((function(t){if(t&&(n.serverTimeDiff=(new Date).getTime()/1e3-t),(new Date).getTime()/1e3>=e.urlExpireTimestamp+n.serverTimeDiff){e.urlExpireTimestamp=(new Date).getTime()/1e3+86400;var r=new uS("network",aS[403]);e._emitExpireEvent(r)}})))}},{key:"_emitExpireEvent",value:function(e){var t=this.player,n=(new Date).getTime()/1e3;return this.emitExpireTimestamp?n-this.emitExpireTimestamp>300&&(this.emitExpireTimestamp=n,t.emit("MEDIA_EXPIRED",e),!0):(this.emitExpireTimestamp=n,t.emit("MEDIA_EXPIRED",e),!0)}},{key:"reportBugPostPlayerLog",value:function(){this.emit(yN)}}],[{key:"pluginName",get:function(){return"Mp4EncryptPlayer"}},{key:"defaultConfig",get:function(){return{onlyInit:!1,useWaterLevel:!1,maxBufferLength:10,minBufferLength:5,tickInSeconds:.2,getLicenseUrl:"",xhrSetup:{},chunkSize:209715,retryCount:1,retryDelay:1e3,timeout:3e3,preloadCacheType:1,needPreloadRangeList:!1,isOpenPreload:!0,needPreloadCheck:!1,preloadTime:0,preloadMaxCacheCount:0,needAutoBitrate:!0,keyValue:null,drm:null,switchBitRateWay:!1,enableWorker:!1,bufferThreshold:10,removeBufferLen:60,focusUserDefinition:!1,resumePlayWaterLevel:2,waitJampBufferMaxCnt:3,waitingInBufferTimeOut:5e3,waitingTimeOut:1e4,notDegradeErrorList:[],h265Degrade:!1,forceVideoPlay:!1,segmentMinDuration:3,supportHevc:void 0,H264Config:null,reqOptions:{},rangeMaxDuration:15,getRequestOptionsCallback:null,closeDowngrade:!1,loaderType:"fetch",reUseMSE:!1,urlExpireDisableErrorEvent:!1,logCacheConfig:{logCacheLevel:Pk.LOG,logMaxSize:204800},noPreloadAddBufferLen:0,enableFPSStuckHandle:!1,loadRangeType:Kk,timerInWorker:!1}}},{key:"registerPreloader",value:function(e){wN=e}},{key:"ENCRYPT_SECRET",set:function(e){MN=e}},{key:"speed",get:function(){return RN}},{key:"realTimeSpeed",get:function(){return RN}},{key:"version",get:function(){return nS}}]),r}(yb);xN.isSupported=function(){return pN()&&dN()&&!fN()},xN.isEMESupported=hN,xN.isSupportedWithXgmse=function(){return dN()&&!fN()},xN.isMediaSourceSupported=pN,xN.isWebAssemblySupported=dN,xN.CUSTOM_EVENTS=Bk;var PN="PRELOAD_NEXT",EN="PRELOAD_SEG_DONE",DN="PREPARE",ON="IDLE",IN="FINISH";function AN(e){return AN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AN(e)}function LN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HN(r.key),r)}}function GN(e,t,n){return t&&CN(e.prototype,t),n&&CN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function NN(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$N(e,t)}function BN(e){return(BN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $N(e,t){return($N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function FN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UN(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch{return!1}}();return function(){var n,r=BN(e);if(t){var i=BN(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return FN(e)}(this,n)}}function HN(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var jN=D,VN=E,zN=X,XN=Xs,KN=Ea,QN=ue,WN=zN(C.f),qN=zN([].push),YN=jN&&VN((function(){var e=Object.create(null);return e[2]=2,!WN(e,2)})),JN=function(e){return function(t){for(var n,r=QN(t),i=KN(r),o=YN&&null===XN(r),a=i.length,s=0,u=[];a>s;)n=i[s++],(!jN||(o?n in r:WN(r,n)))&&qN(u,e?[n,r[n]]:r[n]);return u}},ZN=(JN(!0),JN(!1));function eB(e){return eB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eB(e)}function tB(e){var t=function(e){if("object"!=eB(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=eB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==eB(t)?t:t+""}wi({target:"Object",stat:!0},{values:function(e){return ZN(e)}});var nB=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t,n,r=new Promise((function(e,r){t=e,n=r}));return r.resolve=t,r.reject=n,r}return function(e,t){t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tB(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}(),rB=L,iB=X,oB=FI,aB=tn,sB=ne,uB=oe,cB=wc,lB=HI,fB=Ar,hB=Xo,dB=je,pB=WI,vB=E,gB=jd.UNSUPPORTED_Y,yB=Math.min,mB=iB([].push),_B=iB("".slice),bB=!vB((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),TB="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;oB("split",(function(e,t,n){var r="0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:rB(t,this,e,n)}:t;return[function(t,n){var i=uB(this),o=sB(t)?void 0:dB(t,e);return o?rB(o,t,i,n):rB(r,hB(i),t,n)},function(e,i){var o=aB(this),a=hB(e);if(!TB){var s=n(r,o,a,i,r!==t);if(s.done)return s.value}var u=cB(o,RegExp),c=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(gB?"g":"y"),f=new u(gB?"^(?:"+o.source+")":o,l),h=void 0===i?4294967295:i>>>0;if(0===h)return[];if(0===a.length)return null===pB(f,a)?[a]:[];for(var d=0,p=0,v=[];p<a.length;){f.lastIndex=gB?0:p;var g,y=pB(f,gB?_B(a,p):a);if(null===y||(g=yB(fB(f.lastIndex+(gB?p:0)),a.length))===d)p=lB(a,p,c);else{if(mB(v,_B(a,d,p)),v.length===h)return v;for(var m=1;m<=y.length-1;m++)if(mB(v,y[m]),v.length===h)return v;p=d=g}}return mB(v,_B(a,d)),v}]}),TB||!bB,gB);var kB=wi,SB=Fr.indexOf,wB=Wa,RB=xi([].indexOf),MB=!!RB&&1/RB([1],1,-0)<0;kB({target:"Array",proto:!0,forced:MB||!wB("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return MB?RB(this,e,t)||0:SB(this,e,t)}});var xB=function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}&&!function(){var e="_localstorage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}();var PB={length:xB?localStorage.length:0,clear:function(e){try{for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}catch{}},getItem:function(e){try{return localStorage.getItem(e)}catch{return null}},key:function(e){try{return localStorage.key(e)}catch{return null}},setItem:function(e,t){try{localStorage.setItem(e,t)}catch{}},removeItem:function(e){try{localStorage.removeItem(e)}catch{}},isSupport:xB},EB=PB,DB=function(e){NN(n,e);var t=UN(n);function n(e,r,i,o,a){var s;LN(this,n),(s=t.call(this)).state=DN,s.options=e||{},s.logger=e.logger||function(){},s._preloadManager=r,s.player=r.player;var u=i.handlers,c=i.predictInst,l=i.readyPromise;return s._predictInst=c,s._handlers=u,s._predictInstReadyPromise=l,s._toLoadList=[],s.retryCount=0,s._cachedHandler=o,s._cachedDataHanlder=a,s.cnt=0,s}return GN(n,[{key:"start",value:function(){var e=this,t=new nB;return this._handlers.start(this.options).then((function(n){n.onObtain().then((function(r){e._predictInstReadyPromise.then((function(){e._predictInst.updateMediaInfos(r);var i=e._predictInst.preloadPredict(e.options),o=e._predictInst.cachedData;e._cachedDataHanlder(Object.assign({vid:e.options.vid},{data:o}));var a=Object.assign(i,e.options);n.onTransform(a).then((function(n){e._toLoadList=n,t.resolve(n)}))}))}))})).catch((function(){t.reject(new Error("preload unit start error"))})),t}},{key:"preloadSeg",value:function(){var e=this;if(0===this._toLoadList.length)return this.state=IN,void this.emit(EN,!0);this.state="PRELOADING";var t=this._toLoadList.shift();this._handlers.onRequest(t,(function(n){var r=Object.assign({},t.extData,n);e._cachedHandler(r)})).then((function(){e.state=ON,e.emit(EN)})).catch((function(){e.requestError(),e.emit(EN,!1)}))}},{key:"requestError",value:function(){this.retryCount++,this.state=ON,this.retryCount>=10&&(this.state=IN),this.emit("ONE_STEP_DONE"),this.logger("preload request error")}},{key:"cancelLoading",value:function(){this._toLoadList=[]}},{key:"destroy",value:function(){this.removeAllListeners()}}]),n}(i_);const OB=function(){try{if(typeof indexedDB<"u")return indexedDB}catch{}}();function IB(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function AB(e){return"string"!=typeof e&&(console.warn("".concat(e," used as a key, but it is not a string.")),e=String(e)),e}var LB={},CB="readonly",GB="readwrite";function NB(e){var t=LB[e.name],n={};n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function BB(e,t){return new Promise((function(n,r){if(LB[e.name]=LB[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);NB(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=OB.open.apply(OB,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'.concat(e.name,'" has been upgraded from version ').concat(t.oldVersion," to\n            version ").concat(t.newVersion,', but the storage "').concat(e.storeName,'" already exists.'))}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){n(o.result),function(e){var t=LB[e.name].deferredOperations.pop();t&&(t.resolve(),t.promise)}(e)}}))}function $B(e){return BB(e,!1)}function FB(e){return BB(e,!0)}function UB(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'.concat(e.name,"\" can't be downgraded from version ").concat(e.db.version," to\n      version ").concat(e.version,".")),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function HB(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return Promise.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),FB(e)})).then((function(){return function(e){NB(e);for(var t=LB[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,$B(e).then((function(t){return e.db=t,UB(e)?FB(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw function(e,t){var n=LB[e.name].deferredOperations.pop();n&&(n.reject(t),n.promise)}(e,t),t}))}(e).then((function(){HB(e,t,n,r-1)}))})).catch(n);n(i)}}var jB=function(){function e(){LN(this,e)}return GN(e,[{key:"ready",value:function(){return this._ready}},{key:"_initStorage",value:function(e){var t=this;t._defaultConfig=e;var n={db:null,name:null,version:null};if(e)for(var r in e)n[r]=e[r];var i=LB[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},LB[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t._ready=t._fullyReady);var o=[];function a(){return Promise.resolve()}for(var s=0;s<i.forages.length;s++){var u=i.forages[s];u!==t&&o.push(u._initReady().catch(a))}var c=i.forages.slice(0);return t._ready=Promise.all(o).then((function(){return n.db=i.db,$B(n)})).then((function(e){return n.db=e,UB(n,t._defaultConfig.version)?FB(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<c.length;r++){var o=c[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}})),t._ready}},{key:"probeSupport",get:function(){return function(){try{if(!OB||!OB.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}()}},{key:"getItem",value:function(e,t){var n=this;e=AB(e);var r=new Promise((function(t,r){n.ready().then((function(){HB(n._dbInfo,CB,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return IB(r,t),r}},{key:"setItem",value:function(e,t,n){var r=this;e=AB(e);var i=new Promise((function(n,i){r.ready().then((function(){return r._dbInfo,t})).then((function(t){HB(r._dbInfo,GB,(function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var u=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=u.error?u.error:u.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return IB(i,n),i}},{key:"removeItem",value:function(e,t){var n=this;e=AB(e);var r=new Promise((function(t,r){n.ready().then((function(){HB(n._dbInfo,GB,(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return IB(r,t),r}},{key:"clear",value:function(e){var t=this,n=new Promise((function(e,n){t.ready().then((function(){HB(t._dbInfo,GB,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return IB(n,e),n}},{key:"length",value:function(e){var t=this,n=new Promise((function(e,n){t.ready().then((function(){HB(t._dbInfo,CB,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return IB(n,e),n}},{key:"all",value:function(e){var t=this,n=new Promise((function(e,n){t.ready().then((function(){HB(t._dbInfo,CB,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push({key:t.key,value:t.value}),t.continue()):e(a)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return IB(n,e),n}},{key:"_fullyReady",value:function(e){var t=this,n=t._initReady().then((function(){var e=LB[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return function(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}(n,e,e),n}}]),e}();const VB=jB;var zB=function(){function e(){LN(this,e)}return GN(e,[{key:"_initStorage",value:function(e){var t=e.name,n=e.storeName,r="".concat(t,"_").concat(n);return this.key=r,(!window[r]||"object"!==AN(window[r]))&&(window[r]={}),this.store=window[r],Promise.resolve()}},{key:"getItem",value:function(e,t){var n=this.store[e];return void 0===n&&(n=null),this._internalPromise(t,n)}},{key:"setItem",value:function(e,t,n){return this.store[e]=t,this._internalPromise(n)}},{key:"removeItem",value:function(e,t){return delete this.store[e],this._internalPromise(t)}},{key:"clear",value:function(e){return this.store={},window[this.key]={},this._internalPromise(e)}},{key:"length",value:function(e){var t=Object.keys(this.store).length;return this._internalPromise(e,t)}},{key:"_internalPromise",value:function(e,t){var n=t?Promise.resolve(t):Promise.resolve();return IB(n,e),n}},{key:"all",value:function(e){for(var t=[],n=Object.keys(this.store),r=0;r<n.length;r++){var i=n[r];t.push({key:i,value:this.store[i]})}return this._internalPromise(e,t)}},{key:"probeSupport",value:function(){return!0}}]),e}();const XB=zB;var KB={description:"",name:"__PRE_CACHE__",storeName:"keyvaluepairs",version:1},QB="__PRE_CACHE__KEYS",WB=function(){function e(t,n){LN(this,e);var r=1===n?XB:VB;this._driver=new r,this._driver._initStorage(KB).catch((function(){})),this._hasIdbForbidden=!1,this._maxCache=!t||t<=0?200:t,this.setMaxCache(this._maxCache),this._allCachedKeys={},this._allCachedTimeKeys={},this.getCachedKeysFromLocal(),this._readyPromise=new nB,this.init()}return GN(e,[{key:"getCachedKeysFromLocal",value:function(){var e=EB.getItem(QB);if(e)for(var t=e.split("|"),n=0;n<t.length;n++){var r=t[n],i=this._getCacheKeyInfos(r),o=i.time,a=i.cachedKey;this._allCachedKeys[a]=1,this._allCachedTimeKeys[a]=o}}},{key:"_getCacheKeyInfos",value:function(e){var t,n=e.split("$");return 2===n.length&&(t=n[0],e=n[1]),{time:t,cachedKey:e}}},{key:"writeCachedKeysToLocal",value:function(e){var t=[];this._allCachedKeys={},this._allCachedTimeKeys={};for(var n=0;n<e.length;n++){var r=e[n].key,i=this._getCacheKeyInfos(r),o=i.time,a=i.cachedKey;this._allCachedKeys[a]=1,this._allCachedTimeKeys[a]=o,t.push(r)}var s=t.join("|");EB.setItem(QB,s)}},{key:"init",value:function(){var e=this;this._driver.setItem("test","test").then((function(){})).catch((function(){e._hasIdbForbidden=!0})).finally((function(){e._driver.removeItem("test").catch((function(){})),e._hasIdbForbidden&&(e._driver=new XB,e._driver._initStorage(KB)),e._getAll(),e._readyPromise.resolve()}))}},{key:"_getAll",value:function(){var e=this;this._driver.all().then((function(t){e._cachedLength=t.length;var n=t.length-e._maxCache,r=t;if(n>0){var i=t.slice(0,n);r=t.slice(n);for(var o=0;o<i.length;o++)e.removeItem(i[o].key).then((function(){}))}e.writeCachedKeysToLocal(r)})).catch((function(){}))}},{key:"getItem",value:function(e,t){if(!this.hasItem(e))return Promise.resolve(!1);var n=this._getTimeKey(e).timeKey;return this._driver.getItem(n,t)}},{key:"setItem",value:function(e,t,n){var r=this;this._getTimeKey(e).timeKey&&this.removeItem(e);var i=(new Date).getTime();this._allCachedKeys[e]=1,this._allCachedTimeKeys[e]=i;var o=this._genTimeKey(e,i);return n=n?function(){r._getAll(),n()}:function(){r._getAll()},this._driver.setItem(o,t,n)}},{key:"_getTimeKey",value:function(e){var t=this._allCachedTimeKeys[e],n=e;return t&&(n=this._genTimeKey(e,t)),{timeKey:n,time:t}}},{key:"_genTimeKey",value:function(e,t){return"".concat(t).concat("$").concat(e)}},{key:"removeItem",value:function(e,t){var n=this._getTimeKey(e).timeKey,r=this._driver.removeItem(n,t);return delete this._allCachedKeys[e],delete this._allCachedTimeKeys[e],r}},{key:"hasItem",value:function(e){return!!this._allCachedKeys[e]}},{key:"clear",value:function(e){return this._driver.clear(e)}},{key:"length",value:function(e){return this._driver.length(e)}},{key:"setMaxCache",value:function(e){"number"==typeof e&&e>0&&(this._maxCache=e)}}]),e}();const qB=WB;var YB=function(e){NN(n,e);var t=UN(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return LN(this,n),(e=t.call(this))._preloadDataList=[],e._currentPreloadInst=null,e.autoPreload=r.autoPreload||!1,e._autoCheck=r.autoCheck||{enable:!1,interval:1e3},e._onPreloadNext=e.onPreloadNextReady.bind(FN(e)),e.on(PN,e._onPreloadNext),e._preloaderConfigs={},e.update(r,i,o),e._cacheInst=new qB(r.preloadMaxCacheCount,r.preloadCacheType),e._preloadCacheProgress={},e._ptag_=!0,e._cachedDatas={},e._taskIntervalId=null,e}return GN(n,[{key:"startCheckTask",value:function(){var e=this,t=this._autoCheck,n=this._preloadDataList;this._taskIntervalId&&(window.clearTimeout(this._taskIntervalId),this._taskIntervalId=null),0!==n.length&&(this._checkIfCanPreload()&&this.onPreloadNext(),this._taskIntervalId=window.setTimeout((function(){e.startCheckTask()}),t.interval||1e3))}},{key:"stopCheckTask",value:function(){this._taskIntervalId&&(window.clearTimeout(this._taskIntervalId),this._taskIntervalId=null)}},{key:"_checkIfCanPreload",value:function(){if(null==this._currentPreloadInst&&this._preloadDataList.length>0){var e=this._preloadDataList[0].data;if(e.payload){var t=this._getProloaderKey(e),n=this._preloaderConfigs[t];if(!n||!n.handlers)return console.warn("need to set vtype, no preloader",e),this.stopCheckTask(),!1;var r=n.handlers.checkIfCanPreload;return r?r(e):(this.stopCheckTask(),!1)}}return!1}},{key:"_getProloaderKey",value:function(e){return e.vtype?e.vtype:"DEFAULT"}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!n)throw new Error("PreloaderManager predictInst is null");var r=this._getProloaderKey(e);this._preloaderConfigs[r]={predictInst:n,readyPromise:n.init(e),handlers:t}}},{key:"cachedDatas",get:function(){return this._cachedDatas}},{key:"onCacheSegment",value:function(e){var t=e.vid,n=e.format,r=e.cacheKey,i=e.total,o=e.loaded,a=e.isInitSegment,s=e.mediaType,u=this.getProgressCacheKey(t,n,s),c=this._preloadCacheProgress[u];c||(c=this._preloadCacheProgress[u]={}),c[r]={total:i,loaded:o,isInitSegment:a}}},{key:"onCachePredict",value:function(e){var t=e.vid,n=e.data;t&&n&&(this._cachedDatas[t]=n)}},{key:"getProgressCacheKey",value:function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)}},{key:"onPreloadNextReady",value:function(){this.onPreloadNext()}},{key:"onPreloadSegDone",value:function(){this.autoPreload&&this.emit(PN)}},{key:"onPreloadNext",value:function(){var e=this;if(null==this._currentPreloadInst&&this._preloadDataList.length>0){if(this._preloadDataList.length>0){var t=this._preloadDataList.shift().data;if(t.payload){var n=this._getProloaderKey(t),r=this._preloaderConfigs[n];if(!r)return void console.warn("need to set vtype, no preloader",t);this._currentPreloadInst=new DB(t,this,r,(function(t){e.onCacheSegment(t)}),(function(t){e.onCachePredict(t)})),this._currentPreloadInst.on(EN,this.onPreloadSegDone.bind(this)),this._currentPreloadInst.start().then((function(){e._currentPreloadInst.preloadSeg()})).catch((function(){e._currentPreloadInst=null}))}}}else null!=this._currentPreloadInst&&(this._currentPreloadInst.state===ON?this._currentPreloadInst.preloadSeg():this._currentPreloadInst.state===IN?(this._currentPreloadInst.destroy(),this._currentPreloadInst=null):this._currentPreloadInst.state===DN&&(this._currentPreloadInst.cnt++,this._currentPreloadInst.cnt>2&&(this._currentPreloadInst.destroy(),this._currentPreloadInst=null)))}},{key:"addDashPreloader",value:function(e){!e||!e.data||(this._preloadDataList.push(e),this.sort(this._preloadDataList),this.autoPreload&&this.emit(PN),this._autoCheck.enable&&!this._taskIntervalId&&this.startCheckTask())}},{key:"_addDashPreloader",value:function(e){!e||!e.data||this._preloadDataList.push(e)}},{key:"addDashPreloaderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.sort(e);for(var t=0;t<e.length;t++)this._addDashPreloader(e[t]);this._autoCheck.enable&&!this._taskIntervalId&&this.startCheckTask()}},{key:"sort",value:function(e){e.sort((function(e,t){return void 0===e.order&&void 0===e.order||e.order<t.order?-1:1}))}},{key:"destroy",value:function(){this.off(PN,this._onPreloadNext)}},{key:"cancelLoading",value:function(){this._currentPreloadInst&&(this._currentPreloadInst.cancelLoading(),this._currentPreloadInst=null),this._preloadDataList=[]}},{key:"preloadCacheProgress",value:function(e){var t=e.vid,n=e.format,r=e.mediaType,i=e.prelaodType,o=e.bitrate,a=e.set_duration,s=e.set_size,u=e.media_type,c=e.start_time,l=this.getProgressCacheKey(t,n,r),f=this._preloadCacheProgress[l];if(f){for(var h=Object.values(f),d=0,p=0,v=0,g=0,y=0,m=0;m<h.length;m++){var _=h[m];_.isInitSegment&&(d=_.total,v=_.loaded,g=_.loaded===_.total?0:1),p+=_.total,y+=_.loaded}return{media_type:u,preload_type:i,stream_bitrate:o,header_size:d,content_total_size:p,start_time:c||-1,state_info:{set_duration:a,set_size:s,current_header_download_size:v,current_content_download_size:y,header_download_state:g,content_download_state:y===p?0:1}}}return null}},{key:"getPreloadTaskInfos",value:function(){}},{key:"getItem",value:function(e,t){return this._cacheInst.getItem(e,t)}},{key:"setItem",value:function(e,t,n){return this._cacheInst.setItem(e,t,n)}},{key:"removeItem",value:function(e,t){return this.removeItem(e,t)}}],[{key:"getInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=n.GLOBAL_KEY+(e.globalKey?e.globalKey:""),o=window[i];if(o&&o._ptag_)return o.update(e,t,r),o;var a=new n(e,t,r);return window[i]=a,a}}]),n}(i_),JB=YB;JB.GLOBAL_KEY="__preloadcontext__";const ZB=JB;var e$=function(e){NN(n,e);var t=UN(n);function n(e){var r;return LN(this,n),(r=t.call(this)).options=e,r.promisePolyfill(),r.before(),r.check(),r._preloadManager=ZB.getInstance(e,r.handlers,r.predictInst),r.loadingTasks=[],r}return GN(n,[{key:"promisePolyfill",value:function(){Promise.prototype.finally||(Promise.prototype.finally=function(e){var t=function(t){return Promise.resolve(e()).then(t)};return this.then((function(e){return t((function(){return e}))}),(function(e){return t((function(){return Promise.reject(e)}))}))})}},{key:"before",value:function(){throw new Error("need")}},{key:"check",value:function(){if(!this.handlers)throw new Error("handlers null");if(!this.handlers.start||!this.handlers.onRequest)throw new Error("handlers callback null");if(!this.predictInst)throw new Error("predictInst null");if(!this.predictInst.__p__)throw new Error("predictInst need extends predictbase")}},{key:"preloadNext",value:function(){this._preloadManager.emit(PN)}},{key:"preloadManager",get:function(){return this._preloadManager}},{key:"start",value:function(){throw new Error("start need implment, return Promise")}},{key:"cancelLoading",value:function(){for(var e=0;e<this.loadingTasks.length;e++)try{var t=this.loadingTasks[e];"function"==typeof t.cancel&&t.cancel()}catch{}this.loadingTasks=[],this._preloadManager.cancelLoading()}},{key:"addTasker",value:function(e){this.loadingTasks.push(e)}},{key:"removeTasker",value:function(e){var t=this;setTimeout((function(){for(var n=t.loadingTasks.length-1;n>-1;n--)if(t.loadingTasks[n]===e){t.loadingTasks.splice(n,1);break}}))}},{key:"addDashPreloader",value:function(e){this._preloadManager.addDashPreloader(e)}},{key:"addDashPreloaderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._preloadManager.addDashPreloaderList(e)}}]),n}(i_),t$=function(){function e(){LN(this,e),this.bandwidth2item={},this._mediaInfos=null,this.__p__=!0}return GN(e,[{key:"init",value:function(){throw new Error("init func not implement, return promise")}},{key:"preloadPredict",value:function(e){throw new Error("preloadPredict error: ".concat(e))}},{key:"updateMediaInfos",value:function(e){if(this._mediaInfos=e,this.bandwidth2item={},this.dynamic_video=e&&e.dynamic_video_list,this.dynamic_video&&this.dynamic_video.length>0)for(var t=0;t<this.dynamic_video.length;t++){var n=this.dynamic_video[t];this.bandwidth2item[n.bitrate||n.bandwidth]=n}}},{key:"getIdx",value:function(e,t){var n=0;return e.forEach((function(e,r){e.definition===t&&(n=r)})),n}},{key:"cachedData",get:function(){return null}}]),e}(),n$="MP4",r$={};Object.defineProperty(r$,"__esModule",{value:!0}),r$.default=function(e){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=!0,a=!1,s=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)t+=u.value.length}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}var l=new e(t),f=0,h=!0,d=!1,p=void 0;try{for(var v,g=r[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;l.set(y,f),f+=y.length}}catch(e){d=!0,p=e}finally{try{!h&&g.return&&g.return()}finally{if(d)throw p}}return l};var i$=function(e){return e&&e.__esModule?e:{default:e}}(r$);const o$=R(i$.default);var a$=function(e){d(n,e);var t=y(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"init",value:function(){return Promise.resolve()}},{key:"preloadPredict",value:function(e){return e}}]),n}(t$),s$="h264",u$={DURATION:0,SIZE:1},c$="preload_ended",l$="prf_data_size",f$=0,h$=!0,d$=null;function p$(e,t,n){void 0===e[t]&&(e[t]=n)}var v$=function(e){d(r,e);var t,n=y(r);function r(e,t){var i,o;c(this,r);var a=r.getDefaultConfig(e);Object.keys(e).forEach((function(t){a[t]=e[t]})),h(g(o=n.call(this,a)),"_updateRealTimeSpeed",(function(e){f$=e.speed,o.emit($k,e)})),o.video=null,p$(o._preloadManager,"loadingCount",0),p$(o._preloadManager,"_playingVids",[]),o._mp4=null,o._loader=null,o._pendingPromise=null,o.playerId=t.playerId||"default",o._nextPreloadCount=0,o.isActive=!0,o.curPCDNReqId=null;var s=o.options.logCacheConfig,u=s.logCacheLevel,l=s.logMaxSize;return o.logger=new Dk("[Mp4Preloader]",{logCacheLevel:u,logMaxSize:l}),void 0===e.supportHevc&&!(typeof MediaSource>"u"||!MediaSource.isTypeSupported)&&(MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"'))&&(o.options.supportHevc=!0),o.loadRangeType=(null===(i=o.options)||void 0===i?void 0:i.loadRangeType)||Kk,OI(Pk.DEBUG,"[Preloader] new preloader, playerId",o.playerId),o}return f(r,[{key:"log",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];OI.apply(void 0,[this.logger,e,t].concat(r))}},{key:"loadingCount",get:function(){return this._preloadManager.loadingCount},set:function(e){this._preloadManager.loadingCount=e}},{key:"currentPreloadInst",get:function(){return this._preloadManager._currentPreloadInst}},{key:"startCheckTask",value:function(){this._preloadManager.startCheckTask()}},{key:"stopCheckTask",value:function(){this._preloadManager.stopCheckTask()}},{key:"getPreloadMetaByVid",value:function(e){var t=this._preloadManager._cacheInst._allCachedKeys,n=[];return Object.keys(t).forEach((function(t){var r=function(e){if(!e)throw new Error("key ".concat(e," is empty"));var t=e.split("#");if(t.length<5)throw new Error("key ".concat(e," is not right format"));return{vid:t[0],mediaType:t[1],codecType:t[2],vtype:t[3],definition:t[4]}}(t);r.vid===e&&n.push(r)})),0===n.length?null:n[0]}},{key:"getPreloadMemoryInfo",value:(t=u(o().mark((function e(){var t,n,r,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.allCachedKeys,n=0,r=0,e.t0=o().keys(t);case 4:if((e.t1=e.t0()).done){e.next=19;break}if(i=e.t1.value,!t.hasOwnProperty(i)){e.next=17;break}return r++,e.prev=8,e.next=11,this.getPreLoadData(i);case 11:a=e.sent,n+=(null==a?void 0:a.memory)||0,e.next=17;break;case 15:e.prev=15,e.t2=e.catch(8);case 17:e.next=4;break;case 19:return e.abrupt("return",{memory:n,cnt:r});case 20:case"end":return e.stop()}}),e,this,[[8,15]])}))),function(){return t.apply(this,arguments)})},{key:"getPreloadUnuseInfo",value:function(){var e,t=[],n=function(e){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=T(e))){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{!o&&null!=t.return&&t.return()}finally{if(a)throw i}}}}(zk);try{for(n.s();!(e=n.n()).done;){var r=_(e.value,2),i=r[0],o=r[1];if(Xk.get(i))zk.delete(i);else{var a=i.split("#"),s=(null==a?void 0:a.length)>0?a[0]:i;t.push({vid:s,bw:(null==o?void 0:o.bw)||0,pbw:(null==o?void 0:o.pbw)||0})}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"generateUniqueKey",value:function(e){var t=e.vid,n=e.mediaType,i=e.definition,o=e.codecType,a=e.vtype;return r.generateUniqueKey({vid:t,mediaType:n,definition:i,codecType:o,vtype:a})}},{key:"addPlayingItem",value:function(e,t){var n=this._preloadManager,r=this.checkPlaying("_playerId",e);r>-1?n._playingVids[r].vid=t:n._playingVids.push({vid:t,_playerId:e}),this.log(Pk.LOG,"addPlayingItem",r,e,t,n._playingVids)}},{key:"delPlayingItem",value:function(e){var t=this._preloadManager,n=this.checkPlaying("_playerId",e);this.log(Pk.LOG,"delPlayingItem",n,e,t._playingVids),n>-1&&t._playingVids.splice(n,1)}},{key:"checkPlaying",value:function(e,t){for(var n=this._preloadManager._playingVids,r=0;r<n.length;r++)if(t===n[r][e])return r;return-1}},{key:"checkPlayingByVid",value:function(e){return this.checkPlaying("vid",e)>-1}},{key:"before",value:function(){var e=this;this.handlers={checkIfCanPreload:function(){return e.checkIfCanPreload()},start:function(t){var n=t.payload||[];if(0===n.length)return Promise.reject(new Error("preload_is_null"));var r=t.vid,o=t.vtype||n$,a=t.codecType||s$,s=e.getUserSelectDefinition(),u=e.checkCacheKey(r,n,s,o,a);if(e.log(Pk.LOG,"".concat(e.playerId," ").concat(r),"codecType:".concat(a," vtype:").concat(o," hasCache:").concat(u)),u||"MP3"===o)return Promise.reject(new Error("vtype_".concat(o)));var c=e.getInitDefinition(n,e.options.definition,s);if(e.log(Pk.LOG," ".concat(e.playerId," ").concat(r," getInitDefinition"),null==c?void 0:c.definition),!c)return Promise.reject(new Error("definition_error"));var l=c.definition,f=c.orgDefinition,h=t.preloadTime||e.options.preloadTime,d=t.preloadSize||e.options.preloadSize||Math.pow(25,4)-1,p=e.generateUniqueKey({vid:r,definition:l,vtype:o,codecType:a});e._nextPreloadCount>0&&e._nextPreloadCount--,OI(Pk.LOG,"".concat(r," start duration:").concat(c.duration," preloadTime:").concat(h," cacheKey:").concat(p,",playerId:").concat(e.playerId));var v=i({vid:r,definition:l,orgDefinition:f,preloadTime:h,preloadSize:d,cacheKey:p,codecType:a,vtype:o},c);return t.reqOptions&&(v.reqOptions=t.reqOptions),e.loadingCount++,e.log(Pk.LOG,"start preload,".concat(r," loadingCount:").concat(e.loadingCount,",playerId:").concat(e.playerId)),e.start(v)},onRequest:function(t,n){var r=t.url,i=t.range,o=t.extData;return e.getData(r,i,o,n)}},this.loggerConfig={logger:function(){},openLog:!1},this.predictInst=new a$(this.loggerConfig)}},{key:"start",value:function(e){var t=this,n={mediaInfos:{dynamic_video_list:[],dynamic_audio_list:[]},onObtain:function(){var e=new vN;return e.resolve(n.mediaInfos),e},onTransform:function(){var n=new vN;t._pendingPromise=n;var r=e.preloadTime,o=e.codecType;t._initPCDN();var a=t.loadRangeType===Kk&&r&&("h265"!==o||t.options.supportHevc)?u$.DURATION:u$.SIZE;return t.emit("preload_start",i(i({},e),{},{type:a})),a===u$.DURATION?t.loadByPreloadTime(e,n):t.loadByChunkSize(e,n),n}};return Promise.resolve(n)}},{key:"_initPCDN",value:function(){}},{key:"getInitDefinition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if(r.BitRateAdapter){var o,a,s;i=r.BitRateAdapter.getSuitableBitrate(e,n),this.log(Pk.DEBUG,"Mp4Preloader.BitRateAdapter",null===(o=i)||void 0===o?void 0:o.type,null===(a=i)||void 0===a?void 0:a.definition,null===(s=i)||void 0===s?void 0:s.bitrate)}else{for(var u=0,c=0;c<e.length;c++)if(e[c].definition===t){u=c;break}i=e[u]}return i||(i=e[0]),i}},{key:"getPreLoadData",value:function(e){var t=this,n=new vN;return this.getItemSameVid(e).then((function(e){if(t.log(Pk.DEBUG,"[Preloader] getPreLoadData",!!e.value),e.value){var r=e.value,i=r.mediaSegList,o=r.meta,a=r.type,s=r.buffer,u=r.preloadTime,c=r.vid,l=r.cacheKey,f=r.definition,h=r.orgDefinition,d=r.byteLength,p=r.duration,v=r.fileSize,g=r.from,y=r.vtype,m=r.codecType,_=r.initSeg,b={vid:c,type:a,vtype:y,codecType:m,definition:f,orgDefinition:h,bitrate:r.bitrate,cacheKey:l,duration:p||0,byteLength:d,from:g,adaptTimeRange:r.adaptTimeRange,repeatData:r.repeatData,memory:r.memory,meta:o,preloadTime:u};a===u$.SIZE?(b.buffer=s,b.fileSize=v||0):(b.mediaSegList=i,b.fileSize=v||0,b.initSeg=_),n.resolve(b)}else n.resolve(null)})).catch((function(e){n.reject(e)})),n}},{key:"setPreLoadData",value:function(){var e=u(o().mark((function e(t,n){var r,i,a,s,u,c,l,f,h,d,p,v,g,y,m,_,b,T,k,S,w,R,M,x=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new vN,i=n.mediaSegList,a=n.meta,s=n.vid,u=n.definition,c=n.orgDefinition,l=n.type,f=n.buffer,h=n.duration,d=n.byteLength,p=n.preloadTime,v=n.fileSize,g=n.from,y=n.vtype,m=n.codecType,_=n.initSeg,b=n.bitrate,T=n.adaptTimeRange,k=n.repeatData,(S={codecType:m,vtype:y,vid:s,definition:u,orgDefinition:c,cacheKey:t,type:l,from:g,meta:a,fileSize:v,adaptTimeRange:T,repeatData:k,bitrate:b}).memory=0,S.memory+=(null==k?void 0:k.byteLength)||0,l===u$.SIZE?(S.buffer=f,S.byteLength=d||0,S.preloadSize=d||0,S.preloadTime=p||0,S.fileSize=v,S.buffer&&S.buffer.byteLength>0&&(S.memory+=(null==f?void 0:f.byteLength)||0,this.setItem(t,S),r.resolve(!0))):(S.mediaSegList=[],S.duration=h,S.byteLength=d||0,S.preloadTime=p||0,S.initSeg=_,S.memory+=(null==_?void 0:_.byteLength)||0,S.fileSize=v,i.forEach((function(e){var t;S.memory+=(null==e||null===(t=e.buffer)||void 0===t?void 0:t.byteLength)||0,S.mediaSegList.push(e)})),a&&0===i.length?(this.log(Pk.LOG,"[Preloader] meta setPreLoadData1 success",t,null==S||null===(w=S.mediaSegList)||void 0===w?void 0:w.length),this.setItem(t,S),r.resolve(!0)):(M=i.every((function(e){return!!e.buffer&&e.state})),this.log(Pk.LOG,"[Preloader] mediaSegList setPreLoadData1 success",t,null==S||null===(R=S.mediaSegList)||void 0===R?void 0:R.length,M),M||r.resolve(!1),this.setItem(t,S).then((function(){x.log(Pk.LOG,"[Preloader] setPreLoadData1 success",t)})),r.resolve(!0))),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getInitCacheData",value:function(e,t){var n={type:e,meta:null,byteLength:0,fileSize:0,bitrate:0,preloadTime:0};return e===u$.DURATION?(n.mediaSegList=[],n.initSeg=null,n.duration=0):n.buffer=null,Object.keys(t).map((function(e){n[e]=t[e]})),n}},{key:"updatePreCacheData",value:function(e,t,n,r,i,o,a,s,u){var c=e.mediaSegList;if(e.type===u$.SIZE||-1===i)return e.buffer=o$(Uint8Array,e.buffer.buffer||[],new Uint8Array(t)),e;for(var l=-1,f=0;f<c.length;f++)if(c[f].index===i){l=f;break}var h=o||[0,0];if(l>-1)t&&(c[l].buffer=o$(Uint8Array,c[l].buffer||[],new Uint8Array(t))),n.length>1&&(c[l].range.length>1?c[l].range[1]=n[1]:c[l].range=n),-1!==a[1]&&(r=c[l].range[1]>=a[1]),c[l].state=r;else{var d=s.video,p=s.audio;e.duration=h[1],c.push({buffer:t,range:n||[],index:i,totalRange:a||[],timeRange:[h[0],h[1]],muxSampleIdxRange:{video:d,audio:p},state:r});var v="".concat(null==t?void 0:t.byteLength,",").concat(JSON.stringify(n),",").concat(i,",").concat(JSON.stringify(a),",").concat(JSON.stringify(o));this.log(Pk.DEBUG,"[Preloader] ".concat(e.cacheKey," mediaSegList set, dataLen"),v)}return r&&(e.byteLength+=n[1]-n[0],e.preloadTime+=u),r}},{key:"checkCacheKey",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n$,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s$,o=this.getPreloadMetaByVid(e);if(o)return this.generateUniqueKey(o);if(n){var a=this.generateUniqueKey({vid:e,definition:n,vtype:r,codecType:i});return this.hasItemSameVid(a)?a:null}for(var s=0;s<t.length;s++){var u=this.generateUniqueKey({vid:e,definition:t[s].definition,vtype:r,codecType:i});if(this.hasItemSameVid(u))return u}return null}},{key:"attachPlayer",value:function(e){this.video=e.video?e.video:e}},{key:"detachPlayer",value:function(){this.video=null}},{key:"checkIfCanPreload",value:function(){var e;if(!h$||this.loadingCount>=1||!this.isActive)return!1;if(this.video){var t=this.options,n=t.minBufferLength,r=t.startPreloadControl,i=t.startPreloadMinBuffer,o=t.startPreloadMinPosTime;e=function(e,t){if(!e)return!1;var n=function(e,t){var n=[0,0];if(e)for(var r=0,i=e.length;r<i&&(n[0]=e.start(r),n[1]=e.end(r),!(n[0]<=t&&t<=n[1]));r++);return n[0]-t<=0&&t-n[1]<=0?n:[0,0]}(e.buffered,e.currentTime),r=t.startPreloadMinBuffer,i=t.startPreloadMinPosTime,o=t.minBufferLength;if(t.startPreloadControl){var a=Math.max(n[1]-e.currentTime,0);if(a>r){if(e.currentTime>i)return!0;if(e.currentTime>e.duration/2)return!0}else if(e.currentTime+r+1>e.duration&&e.currentTime+a>e.duration-1)return!0}else{var s=e.duration>o+5?o:e.duration/2,u=Math.min(e.currentTime+o,e.duration),c=n[1]-u;if(e.currentTime>s&&(c>0||Math.abs(c)<1))return!0}return!1}(this.video,{startPreloadControl:r,startPreloadMinBuffer:i,startPreloadMinPosTime:o,minBufferLength:n})}else e=this._nextPreloadCount>0;return OI(Pk.DEBUG,"[Preloader] checkIfCanPreload",!!this.video,"nextPreloadCount:".concat(this._nextPreloadCount," ret:").concat(e)),e}},{key:"startPreloadNext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=!0;return this._nextPreloadCount=e,(this.loadingCount>=1||!this.isActive)&&(t=!1),t&&this.preloadNext(),t}},{key:"realTimeSpeed",get:function(){return f$}},{key:"getRequestOption",value:function(e){var t=this.options,n=t.getRequestOptionsCallback,r=t.reqOptions;return(e.reqOptions?e.reqOptions:"Function"===QA(n)?n(e):r)||{}}},{key:"loadByPreloadTime",value:function(e,t){var n,r=this,a=e.vid,s=e.cacheKey,c=e.preloadTime,l=e.definition,f=e.orgDefinition,h=e.duration,d=e.bitrate,p=e.codecType,v=e.vtype,g=e.size,y=e.uri,m=e.file_id,_="Array"===QA(e.url)?e.url[0].src:e.url;if(_){_=qA(_,{__vid:a});var b=c>=this.options.segmentMinDuration?this.options.segmentMinDuration:c,T=this.getRequestOption(i(i({},e),{},{url:_}));this.log(Pk.DEBUG,"[Preloader] loadByPreloadTime","".concat(e.cacheKey,", definition:").concat(e.definition,",segmentMinDuration:").concat(b));var k=g||ZA(d,h),S=null==e||null===(n=e.pktOffsetMap)||void 0===n?void 0:n.find((function(e){var t;return(null==e?void 0:e.time)===((null===(t=r.options)||void 0===t?void 0:t.firstLoadTimePos)||5)})),w=null==S?void 0:S.offset;this._mp4=new LL(_,d,{segmentDuration:b,codecType:this.codecType,chunkSize:this.options.preloadSize,firstLoadSize:w,duration:h,fileSize:k,playerId:this.playerId,vid:a,useUrlRange:!1,retryCount:1,retryDelay:1e3,supportHevc:this.options.supportHevc,retryCheckFunc:sL,switchPCDNMaxCnt:Number.MAX_VALUE,logger:this.logger,reqOptions:T,fixEditListOffset:this.options.fixEditListOffset},[],this.firstFrameTime,"[Preloader]");var R=this.getInitCacheData(u$.DURATION,{vid:a,definition:l,orgDefinition:f,cacheKey:s,codecType:p,vtype:v,bitrate:d||0});this.startPCDN(_,y,a,d,m,v.toLowerCase()||"mp4",Math.floor(h),k),this._mp4.once("metaReady",function(){var n=u(o().mark((function n(u){var c,l;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=r._mp4){n.next=3;break}return n.abrupt("return");case 3:return r.log(Pk.DEBUG,"[Preloader] ".concat(a," metaReady ").concat(null==R||null===(c=R.mediaSegList)||void 0===c?void 0:c.length)),R.meta=u,R.from=2,R.fileSize=l.size,n.next=9,l.cancelLoading();case 9:if(!l.hasDestroyed){n.next=11;break}return n.abrupt("return");case 11:return l.metaLoading=!1,r.emit("prf_meta_ready",i({},R)),n.next=15,r.setPreLoadData(s,R);case 15:if(!l.hasDestroyed){n.next=17;break}return n.abrupt("return");case 17:r.startLoadByFragments(R,e,t);case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),this._mp4.on(mL,(function(e){r.log(Pk.ERROR,"[Preloader] ".concat(a," loadByPreloadTime error")),r._endLoadFragments(),r.emit("error",e)})),this._mp4.on(ML,(function(e){r._pcdn&&e&&r._pcdn.removePCDNNode(e.vid,e.bitrate,e.url)})),this._mp4.on(PL,(function(e){r.bwEventEmit(a,e.load_type,e.len,null,s)})),this._mp4.MP4Loader.on($k,(function(e){if((null==e?void 0:e.len)>0){var t,n=(null==e||null===(t=e.priOptions)||void 0===t?void 0:t.type)||Hk,i=aL(e.len,e.time);r.bwEventEmit(a,n,e.len,i,s)}})),this._mp4.init({})}else this._endLoadFragments()}},{key:"bwEventEmit",value:function(e,t,n,r,i){var o=zk.get(i)||{bw:0,pbw:0};t&&t!==Hk?(o.pbw=o.pbw+n,this.emit(l$,{vid:e,task_type:2,pcdn_size:n,pcdn_speed:r})):(o.bw=o.bw+n,this.emit(l$,{vid:e,task_type:2,cdn_size:n,cdn_speed:r})),zk.set(i,o),this._updateRealTimeSpeed({speed:r,type:t||Hk}),function(e,t,n){var r=Vk.get(e);!r&&(r={}),r[t]||(r[t]={},r[t].loadLen=0),r[t].loadLen=r[t].loadLen+n,Vk.set(e,r)}(i,t,n)}},{key:"startPCDN",value:function(e,t,n,r,i,o,a,s){}},{key:"loadByChunkSize",value:function(){var e=u(o().mark((function e(t){var n,r,a,s,c,l,f,h,d,p,v,g,y,m,_,T,k,S,w,R,M,x,P,E,D,O=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.vid,a=t.cacheKey,s=t.definition,c=t.orgDefinition,l=t.duration,f=t.bitrate,h=t.codecType,d=t.vtype,p=t.size,v=t.uri,g=t.file_id,y=this.options,m="Array"===QA(t.url)?t.url[0].src:t.url){e.next=6;break}return this._endLoadChunk(),e.abrupt("return");case 6:return m=qA(m,{__vid:r}),_=p||ZA(f,l),T=null==t||null===(n=t.pktOffsetMap)||void 0===n?void 0:n.find((function(e){return(null==e?void 0:e.time)===((null==y?void 0:y.firstLoadTimePos)||5)})),k=null==T?void 0:T.offset,S=RI(l,8e5,_),this.log(Pk.LOG,"".concat(r," loadByChunkSize"),t.cacheKey,t.definition,k||S),w=this.getInitCacheData(u$.SIZE,{vid:r,definition:s,orgDefinition:c,cacheKey:a,codecType:h,vtype:d,fileSize:p,bitrate:f||0}),R=this.getRequestOption(i(i({},t),{},{url:m})),this.startPCDN(m,v,r,f,g,d.toLowerCase()||"mp4",Math.floor(l),_),this.MP4Loader=new SI({url:m,vid:"".concat(r,"-").concat(f),retry:y.retryCount||2,retryDelay:y.retryDelay||1e3,timeout:y.timeout||3e3,reqOptions:R,loaderType:y.loaderType,retryCheckFunc:sL,openLog:DI(),fixEditListOffset:y.fixEditListOffset}),this.MP4Loader.on($k,(function(e){if((null==e?void 0:e.len)>0){var t,n=(null==e||null===(t=e.priOptions)||void 0===t?void 0:t.type)||Hk,i=aL(e.len,e.time);O.bwEventEmit(r,n,e.len,i,a)}})),e.prev=17,M=new Uint8Array(0),x=0,P=null,E=null,D=function(){var e=u(o().mark((function e(t,n,s,u,c){var l,f,h,d,p,v,g,y,_,T,k,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w.fileSize||(w.fileSize=Number(gL(c.headers))),t&&s.range&&s.range[0]===x&&(M=o$(Uint8Array,M,new Uint8Array(t)),x+=t.byteLength),!s.meta){e.next=29;break}return e.next=5,O.MP4Loader.cancel();case 5:f=(null==t||null===(l=t.priOptions)||void 0===l?void 0:l.type)||Hk,O.bwEventEmit(r,f,M.byteLength,null,a),h=s.meta,d=h.videoSegments,p=h.audioSegments,E=i(i({},h.meta),{},{ext:{videoTrak:d,audioTrak:p}}),w.meta=E,P=tL(0,d,p),w.buffer=M.slice(P[0]),w.byteLength=w.buffer.byteLength,v=tL(1,d,p),g=[],v[0]<v[1]&&P[1]>v[0]&&(g=[v[0],P[1]]),y=(null==d?void 0:d.length)>0?d:p,_=y[0].startTime,T=y[0].endTime,(k={startTime:_,endTime:T,range:b(P),repeatRange:g,duration:T-_,downloaded:!1,isLoading:!1}).timeRangeIdx=[0,1],w.adaptTimeRange=[k],O.log(Pk.LOG,"".concat(r," loadMetaProcess ret"),a,M.byteLength,JSON.stringify(P),w.buffer.byteLength,JSON.stringify(g)),O.setPreLoadData(a,w),S=[x,P[1]],O.log(Pk.LOG,"".concat(a," loadMetaProcess end, loadOneChunk start"),n,JSON.stringify(S),x,M.byteLength),O._loadOneChunk(w,S,m,k.duration);case 29:case"end":return e.stop()}}),e)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),e.next=25,this.MP4Loader.loadMetaProcess(this.MP4Loader.cache,[0,k||S],D);case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(17),console.error("[Preloader] ".concat(a," loadByChunkSize error"),e.t0),this._endLoadChunk();case 31:case"end":return e.stop()}}),e,this,[[17,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadOneChunk",value:function(){var e=u(o().mark((function e(t,n,r,i){var a,s,u,c,l,f,h,d,p,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null==n?void 0:n.length)>0&&n[0]>=n[1])){e.next=4;break}return this._endLoadChunk(),this.emit(c$,t),e.abrupt("return");case 4:return(s=(null===(a=this._pcdnNodeList)||void 0===a?void 0:a.length)>0?qA(this._pcdnNodeList[0].url,{__vid:t.vid}):null)&&AL.pcdn_download_request_cnt++,this.log(Pk.LOG,"".concat(null==t?void 0:t.cacheKey," loadOneChunk start"),JSON.stringify(n),",loadType,",!!s),u=s||r,c=t.vid,l=t.cacheKey,f=t.buffer,e.prev=9,e.next=12,this.MP4Loader.loadData(n,this.MP4Loader.cache,{index:0,url:u,headers:s?{"X-Origin-Server-Host":nL(r)}:null,priOptions:{type:s?jk:Hk}});case 12:h=e.sent,this.log(Pk.LOG,"".concat(c," _loadOneChunk"),JSON.stringify(n),l),d=h.response,(p=h.data)?(this._endLoadChunk(),d&&d.headers&&(v=ZA(d.headers))&&(t.fileSize=v),t.buffer=eL(f,p),t.byteLength=t.buffer.byteLength,t.preloadTime+=i,this.log(Pk.LOG,"".concat(c," _loadOneChunk ret"),l,t.buffer.byteLength,null==p?void 0:p.byteLength),t.from=4,this.setPreLoadData(l,t)):(AL.pcdn_download_failed_cnt++,this._endLoadChunk()),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(9),this.log(Pk.ERROR,"[Preloader] ".concat(c," loadByChunkSize error"),null===e.t0||void 0===e.t0?void 0:e.t0.message),this._endLoadChunk();case 22:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_endLoadChunk",value:function(){this.log(Pk.LOG,"_endLoadChunk loadingCount:".concat(this.loadingCount),this._pendingPromise?this._pendingPromise.state:null),this._pendingPromise&&(this._pendingPromise.resolve(),this._pendingPromise=null),this.loadingCount>0&&this.loadingCount--,this.MP4Loader&&(this.MP4Loader.cancel(),this.MP4Loader.destroy(),this.MP4Loader=null)}},{key:"getAdaptRanges",value:function(e,t){for(var n=e.timeRange,r=0;r<n.length&&n[r].startTime<=t;r++)e.updateAdaptTimeRange(r,1),e.getFragRange(r);return this._mp4.adaptTimeRange}},{key:"startLoadByFragments",value:function(){var e=u(o().mark((function e(t,n){var r,i,a,s,c,l=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.preloadTime,i=n.vid,this.log(Pk.LOG,"[Preloader] ".concat(i," startLoadByFragments"),n),a=this.getAdaptRanges(this._mp4,r),s=function(e){l.log(Pk.ERROR,"[Preloader] ".concat(i," _failedCallback error"),null==e?void 0:e.message),l.emit("error",e),l._endLoadFragments()},c=function(){var e=u(o().mark((function e(n){var r,i,u,f,h,d,p,v,g,y,m,_,b,T,k,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l._mp4){e.next=2;break}return e.abrupt("return");case 2:if(i=n.buffer,u=n.context,f=n.state,h=n.initSeg,d=u.fragIndex,p=u.range,v=u.timeRange,g=l._mp4,y=g._repeatInfo,m=g.adaptTimeRange,_=m[d],b=null==_?void 0:_.range,T=null==_?void 0:_.duration,!t.initSeg&&h&&(t.initSeg=h,t.adaptTimeRange=m),k=l._mp4._lastDemuxSampleIdxRange,t.repeatData=(null===(r=y.data)||void 0===r?void 0:r.slice(0,y.curDataPos))||[],S=l.updatePreCacheData(t,i,p,f,d,v,b,k,T),l.log(Pk.LOG,"[Preloader] ".concat(t.cacheKey," _successCallback"),d,f,S,t),t.from=3,!S){e.next=26;break}return e.next=17,l.setPreLoadData(t.cacheKey,t);case 17:if(!(d>=a.length-1)){e.next=23;break}l.log(Pk.LOG,"[Preloader] ".concat(t.cacheKey," mp4.load end"),d),l.emit(c$,t),l._endLoadFragments(),e.next=26;break;case 23:return l.log(Pk.LOG,"[Preloader] ".concat(t.cacheKey," mp4.load start"),d+1),e.next=26,l._mp4.loadAllFragmentData(d+1,c,s);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=7,this._mp4.loadAllFragmentData(0,c,s);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_endLoadFragments",value:function(){this.log(Pk.LOG,"[Preloader] _endLoadFragments loadingCount:".concat(this.loadingCount,",").concat(this.playerId),this._pendingPromise?this._pendingPromise.state:null),this._pendingPromise&&(this._pendingPromise.resolve(),this._pendingPromise=null),this.loadingCount>0&&this.loadingCount--,this._mp4&&(this._mp4.cancelLoading(),this._mp4.destroy(),this._mp4=null)}},{key:"getFragment",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=new vN;return this.getData(e,t,o,!1).then((function(e){r.createFragment(new Uint8Array(e.res),t[0]-r.mdatStart,n,{range:t,context:e.context}).then((function(e){a.resolve(e)}))})),a}},{key:"getPreloadUrl",value:function(e){var t=e.url,n=e.range,i=e.definition,o=e.vid;return[{url:t,range:n,extData:{cacheKey:r.generateUniqueKey({vid:o,start:n[0],end:n[1],definition:i}),vid:o,format:"mp4"}}]}},{key:"getRangeList",value:function(e){var t=this.allCachedKeys,n={timeRange:[],contentRange:[]};for(var r in t)if(t.hasOwnProperty(r)&&r.indexOf(e)>-1){var i=r.split("#");0===i[2].indexOf("pretime")?n.timeRange.push([0,parseFloat(i[2].slice(7))]):n.contentRange.push([parseInt(i[2]),parseInt(i[3])])}return n}},{key:"hasItemSameVid",value:function(e){if(!e)return null;for(var t=e.split("#"),n=Object.keys(this.allCachedKeys),r=0;r<n.length;r++){var i=n[r];if(i===e)return i;var o=i.split("#");if(o.length>=4&&t.length>=4&&o[0]===t[0]){if(0===o[2].indexOf("pretime")&&0===t[2].indexOf("pretime"))return i;var a=[parseInt(o[2]),parseInt(o[3])],s=[parseInt(t[2]),parseInt(t[3])];if(s[0]>=a[0]&&s[1]>s[0]&&s[1]<=a[1])return i}}return null}},{key:"removeOthers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.allCachedKeys,r=function(){if(n.hasOwnProperty(i)&&i.split("#").length>=1){var r=i.split("#")[0];t.every((function(e){return e.split("#").length>=1&&e.split("#")[0]!==r}))&&(e.log(Pk.LOG,"remove cache:".concat(i)),e.cacheInst.removeItem(i))}};for(var i in n)r()}},{key:"removeAll",value:function(){var e=this.allCachedKeys;for(var t in e)e.hasOwnProperty(t)&&(this.log(Pk.DEBUG,"remove cache:".concat(t)),this.cacheInst.removeItem(t))}},{key:"removeAllPreloadTask",value:function(){this._preloadManager._preloadDataList=[],this._preloadManager._playingVids=[]}},{key:"getItemSameVid",value:function(e,t){var n=this.hasItemSameVid(e);return this.log(Pk.DEBUG,"getItemSameVid: key:".concat(e," checkResult:").concat(n)),n?this.cacheInst.getItem(n,t).then((function(e){return{value:e,key:n}})):Promise.resolve({})}},{key:"setItem",value:function(e,t){return this.cacheInst.setItem(e,t)}},{key:"allCachedKeys",get:function(){return this.cacheInst._allCachedKeys}},{key:"cacheInst",get:function(){return this._preloadManager._cacheInst}},{key:"cancelPreloadByVid",value:function(e,t){if(e){for(var n=this._preloadManager._preloadDataList,r=[],i=0;i<n.length;i++)n[i].data.vid!==e?r.push(n[i]):this.log(Pk.LOG,"cancelPreloadByVid",e);this._preloadManager._preloadDataList=r;var o=this.currentPreloadInst,a=o&&o.options?o.options:{};this.log(Pk.LOG,"cancelPreloadByVid",e,t,e===a.vid,a),a.vid===e&&this.cancelLoading(),this.addPlayingItem(t,e)}}},{key:"cancelLoading",value:function(){this.log(Pk.LOG,"cancelLoading"),this._endLoadFragments(),this._endLoadChunk()}},{key:"clearTaskItem",value:function(e){var t=this._preloadManager;if(t._currentPreloadInst){var n=t._currentPreloadInst._toLoadList,r=[];n.map((function(t){return t._playerId!==e&&r.push(t),t})),t._currentPreloadInst._toLoadList=r}var i=[],o=[];this.log(Pk.LOG,"clearTaskItem before",e,t._preloadDataList.length),t._preloadDataList.map((function(t){return t._playerId!==e?i.push(t):o.push(t.data.vid),t})),this.log(Pk.LOG,"clearTaskItem",e,o.join(","),t._preloadDataList.length),t._preloadDataList=i}},{key:"clearTask",value:function(){this._preloadManager._preloadDataList=[]}},{key:"checkIfExistInList",value:function(e,t){for(var n=this._preloadManager._preloadDataList,r=0;r<n.length;r++)if(e===n[r].data.vid&&n[r]._playerId===t)return!0;return!1}},{key:"addPreloader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(e.data){var r=e.data.vid,i=this.checkIfExistInList(r),o=this.checkPlayingByVid(r);if(this.log(Pk.LOG,"[Preloader] addPreloader checkIfExistInList",r,i),!(t&&r===t||i||o)){var a=YA({},e);a.vtype||(a.vtype=n$),a._playerId=n,this.addDashPreloader(a)}}}},{key:"addPreloaderList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=[],i=0;i<e.length;i++){var o=e[i].data,a=o.vid,s=o.vtype,u=this.checkIfExistInList(a,n),c=this.checkPlayingByVid(a);if(this.log(Pk.LOG,"[Preloader] addPreloaderList checkIfExistInList",a,a===t,u,c),!(t&&a===t||u||c)){var l=YA({},e[i]);s||(l.data.vtype=n$),l._playerId=n,r.push(l)}}this.log(Pk.LOG,"[Preloader] addPreloaderList length is ".concat(r.length)),this.addDashPreloaderList(r)}},{key:"setUserSelectDefinition",value:function(e){this._preloadManager&&(this._preloadManager.userDefinition=e)}},{key:"getUserSelectDefinition",value:function(){return this._preloadManager.userDefinition||null}},{key:"cancel",value:function(e){this.clearTaskItem(e),this.delPlayingItem(e,null)}},{key:"destroy",value:function(e){this.cancelLoading(),this.clearTaskItem(e),this.delPlayingItem(e,null)}},{key:"on",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(n=m(p(r.prototype),"on",this)).call.apply(n,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var n,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];(n=m(p(r.prototype),"off",this)).call.apply(n,[this,e,t].concat(o))}}],[{key:"PRELOAD_TYPES",get:function(){return u$}},{key:"BitRateAdapter",get:function(){return d$},set:function(e){d$=e}},{key:"getDefaultConfig",value:function(){return{supportHevc:!1,preloadTime:5,preloadSize:0,segmentMinDuration:5,vtype:"MP4",preloadCacheType:1,preloadMaxCacheCount:5,globalKey:null,autoPreload:!1,reqOptions:null,getRequestOptionsCallback:null,minBufferLength:5,timeout:3e3,autoCheck:{enable:!0,interval:1e3},logCacheConfig:{logCacheLevel:2,logMaxSize:204800},pcdnConfig:{openPreloadPCDN:!1,enterMinBuffer:10,outMaxBuffer:5,pcdn_duration:2,pcdn_open:!0,openPCDN:!0,minDuration:25,trackerUrl:""},switchPCDNMaxCnt:2,retryCount:1,retryDelay:1e3,loaderType:"fetch"}}},{key:"registerPreloader",value:function(e,t){return e.vtype=n$,r.BitRateAdapter=t,new r(e,this)}},{key:"getInfoByUniqueKey",value:function(e){var t=e.split("#"),n=["vid","mediaType","codecType","vtype","definition"],r={};return t.forEach((function(e,t){r[n[t]]=e})),r}},{key:"generateUniqueKey",value:function(e){var t=e.vid,n=e.mediaType,r=e.definition,i=e.codecType,o=e.vtype;return n=n||"video",r=r||"-1",i=i||s$,o=o||n$,t?"".concat(t,"#").concat(n,"#").concat(i,"#").concat(o,"#").concat(r):null}},{key:"disable",value:function(){h$=!1}},{key:"enable",value:function(){h$=!0}}]),r}(e$)},32783:(e,t,n)=>{"use strict";n.d(t,{Vb:()=>j,SX:()=>Ce,Cc:()=>F});var r=n(66301),i=n(52238),o=n(90170),a=n(57882),s=n(78447),u=n(40263),c=Object.defineProperty,l=(e,t,n)=>((e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);const f=[new RegExp("(\\?|&)expire=([^&]*)(&|$)"),new RegExp("(\\?|&)x-tos-expires=([^&]*)(&|$)"),new RegExp("(\\?|&)x-expires=([^&]*)(&|$)")];function h(e){if(!e||"string"!=typeof e)return 0;let t=0;try{const n=[];if(f.forEach((t=>{const r=e.match(t);r&&n.push(r)})),n.length>0)t=parseInt(n[0][2],10);else{const n=e.split("/");n.length>5&&8===n[4].length&&(t=parseInt(n[4],16))}if(t>0){const e=new Date;return t<=Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),0)/1e3?1:2}return 0}catch{return 0}}const d={v360:{width:640,height:360},v480:{width:800,height:480},v540:{width:960,height:540},v720:{width:1280,height:720},v864:{width:1536,height:864},v960:{width:1706,height:960},v1080:{width:1920,height:1080},v2k:{width:2560,height:1440},v4k:{width:3840,height:2160}};class p{constructor(){this.ladder=null,this._mvmaf="",this._vqscore=0,this.width=0,this.height=0,this.playedDuration=0}set mvmaf(e){if(!e)return;this._mvmaf=e;let t=JSON.parse(e);t["v2.0"]&&(this.ladder=t["v2.0"])}get mvmaf(){return this._mvmaf}set vqscore(e){e&&(this._vqscore=e)}get vqscore(){return this._vqscore}_findNearestPlaybackScore(){let e=0;if(!this.ladder)return 0;let t=this.width*this.height,n="v540",r=Number.MAX_VALUE;for(let e in d){const i=d[e];let o=t-i.width*i.height;Math.abs(o)<r&&(r=Math.abs(o),n=e)}const i=d[n].width*d[n].height;if(Math.abs(i-t)<=.1*i&&this.ladder&&this.ladder.ori&&this.ladder.ori[n])return this.ladder.ori[n];if(this.ladder&&this.ladder.ori){let t=this.ladder.ori,r=Object.keys(t);if(1==r.length)return t[r[0]];{r.sort();let i=d[r[0]].width*d[r[0]].height,o=t[r[0]],a=d[r[r.length-1]].width*d[r[r.length-1]].height,s=t[r[r.length-1]],u=d[n].width*d[n].height;e=o+((u-i)*s-(u-i)*o)/(a-i)}}return e}exportData(){if(this.playedDuration<=0)return{};const e=this._findNearestPlaybackScore();let t=100-(100-e)*Math.exp(this._vqscore/100-1);return{vqs:this._vqscore,vms:e,vods:t,mvmaf:this._mvmaf,pr:"w:"+this.width+",h:"+this.height+",srf:0,wt:"+this.playedDuration,v:2}}reset(){this._mvmaf="",this._vqscore=0,this.ladder=null,this.width=0,this.height=0,this.playedDuration=0}}class v{constructor(e,t){this.name=e,t&&this.reset()}startTimer(){this.started=!0;const e=window.performance;this.startTime=e?e.now():Date.now()}stopTimer(){if(this.started){const e=window.performance;this.endTime=e?e.now():Date.now(),this.duration=this.endTime-this.startTime,this.started=!1}}reset(){this.started=!1,this.startTime=-1,this.endTime=-1,this.duration=0}exportData(){return{duration:this.duration,gpu:"",score:-2,vendor:""}}}class g extends v{constructor(){super("VideoRequest",!0)}}class y extends v{constructor(){super("VideoRequestResponse",!0)}}class m extends v{constructor(){super("BlockStart",!0),this.blockType=0}setBlockType(e){if(e&&e.element){const{readyState:t,seeking:n}=e.element;this.blockType=t<1?1:n?2:0}}exportData(e){var t;const n=(null==(t=null==e?void 0:e.element)?void 0:t.currentTime)||0;return{blockType:this.blockType,currentTime:n,...super.exportData()}}}class _ extends v{constructor(){super("Block",!0)}exportData(e,t={blockType:0}){var n;return{...t,currentTime:(null==(n=null==e?void 0:e.element)?void 0:n.currentTime)||0,...super.exportData()}}}class b extends v{constructor(){super("PlayQuality",!0)}}class T extends v{constructor(e){super("PlayEnded",!1),this.videoQualityHelper=new p,this.currentTime=0,this.status=e,this.reset()}startPauseTimer(){const e=window.performance;this.pauseStartTime=e?e.now():Date.now(),this.paused=!0}stopPauseTimer(){if(this.paused){const e=window.performance;this.pauseStopTime=e?e.now():Date.now(),this.pauseDuration+=this.pauseStopTime-this.pauseStartTime}}reset(){super.reset(),this.paused=!1,this.pauseStartTime=-1,this.pauseStopTime=-1,this.pauseDuration=0,this.currentTime=0,this.videoQualityHelper&&this.videoQualityHelper.reset()}exportData(){let e=super.exportData();this.videoQualityHelper.playedDuration=this.duration-this.pauseDuration;let t=this.videoQualityHelper.exportData();return Object.assign({},e,{pauseDuration:this.pauseDuration,currentTime:this.currentTime,vqm:t})}copy(e){this.duration=e.duration,this.currentTime=e.currentTime,this.pauseDuration=e.pauseDuration,e.videoQualityHelper&&(this.videoQualityHelper.mvmaf=e.videoQualityHelper.mvmaf,this.videoQualityHelper.vqscore=e.videoQualityHelper.vqscore,this.videoQualityHelper.width=e.videoQualityHelper.width,this.videoQualityHelper.height=e.videoQualityHelper.height,this.videoQualityHelper.playedDuration=e.videoQualityHelper.playedDuration)}set mvmaf(e){e&&(this.videoQualityHelper.mvmaf=e)}set vqscore(e){e&&(this.videoQualityHelper.vqscore=e)}set width(e){this.videoQualityHelper.width=e}set height(e){this.videoQualityHelper.height=e}}class k extends v{constructor(){super("PlayFailed",!0),this.loadStartRetry=[]}getRetryData(){return{retryCount:this.loadStartRetry.length,retryList:this.loadStartRetry}}exportData(e,t,n){let r=super.exportData(),i=-1,o="",a=-1,s="";return e&&e.element&&(i=e.element.currentTime,o=e.element.currentSrc,e.element.error&&(a=e.element.error.code,s=e.element.error.message)),t&&(t.url&&(o=t.url),a=t.errorCode,s=t.message),Object.assign({},r,{status:n,code:a,message:s,url:o,isExpired:h(o),currentTime:i,retryCount:this.loadStartRetry.length,retryList:this.loadStartRetry})}}class S extends v{constructor(){super("FirstFrame",!0)}}class w extends v{constructor(){super("VideoDataSize",!0)}}class R extends a.C{constructor(e,t){super(),l(this,"_initEvent",(()=>{this.event.on("play",(()=>{this.playEnded.paused&&this.playEnded.stopPauseTimer()})),this.event.on("pause",(()=>{this.block.started&&this.block.reset(),this.playEnded.startPauseTimer()})),this.event.on("playing",(()=>{if(this.status=1,this.block.started){this.block.stopTimer();const{blockType:e}=this.blockStart;this.trigger(this.block.name,this.block.exportData(this._player,{blockType:e}))}this._player.element&&(this.playEnded.width=this._player.element.videoWidth,this.playEnded.height=this._player.element.videoHeight)})),this.event.on("timeupdate",(()=>{!this._player||!this._player.element||(this.playEnded.currentTime=this._player.element.currentTime)})),this.event.on("ended",(()=>{this.status=2})),this.event.on("waiting",(()=>{!this._player||!this._player.element||1==this._status&&(this._player.element.paused||(this.blockStart.setBlockType(this._player),this.trigger(this.blockStart.name,this.blockStart.exportData()),this.block.startTimer()))})),this.event.on("error",(e=>{this.trigger(this.playFailed.name,this.playFailed.exportData(this._player,e,this._status))})),this.event.on("source_error",(e=>{const{host:t,errorCode:n,message:r,src:i}=e;this.playFailed.loadStartRetry.push({host:t,code:n,message:r,isExpired:h(i)})})),this.event.on("loadstart",(()=>{this.trigger(this.videoRequest.name,this.videoRequest.exportData()),this.playQuality.startTimer(),this.videoRequestResponse.startTimer(),this.firstFrame.startTimer()})),this.event.on("loadeddata",(()=>{this.videoRequestResponse.stopTimer(),this.trigger(this.videoRequestResponse.name,this.videoRequestResponse.exportData())})),this.event.on("playCatch",(()=>{this.xgDowngraded=!0})),this.event.on("downloaderChunkReady",(e=>{this.trigger(this.videoDataSize.name,e)})),this.event.on("progress",(()=>{if(!this._player||!this.xgDowngraded&&"RAW"!=this._player.type||!this.config||!this.config.bitrate)return;const e=this._player.element.buffered;let t=0;for(let n=0;n<e.length;n++)t+=e.end(n)-e.start(n);const n=t*this.config.bitrate/8;this.trigger(this.videoDataSize.name,{chunkSize:n,speed:this.config.bitrate/1024})}))})),l(this,"stop",(()=>{0!=this._status&&(this.reset(),this.lastPlayEnded&&(this.trigger(this.lastPlayEnded.name,this.lastPlayEnded.exportData()),this.lastPlayEnded=null))})),l(this,"reset",(()=>{this.playEnded.started&&this.playEnded.stopTimer(),this.lastPlayEnded=new T(this._status),this.lastPlayEnded.copy(this.playEnded),this.status=0,this.xgDowngraded=!1,this.videoRequest.reset(),this.videoRequestResponse.reset(),this.blockStart.reset(),this.block.reset(),this.playQuality.reset(),this.playEnded.reset(),this.playFailed.reset(),this.firstFrame.reset()})),this.event=e,this.config=t,this._status=0,this._initEvent(),this._player=null,this.xgDowngraded=!1,this.videoRequest=new g,this.videoRequestResponse=new y,this.blockStart=new m,this.block=new _,this.playQuality=new b,this.lastPlayEnded=null,this.playEnded=new T(this._status),this.playFailed=new k,this.firstFrame=new S,this.videoDataSize=new w,this.events=[this.videoDataSize.name,this.videoRequest.name,this.videoRequestResponse.name,this.blockStart.name,this.block.name,this.playQuality.name,this.playEnded.name,this.playFailed.name,this.firstFrame.name]}static get version(){return u.v}getCommonData(e){const{element:t,config:n,type:r}=e;return{currentTime:(null==t?void 0:t.currentTime)||0,videoDuration:(null==t?void 0:t.duration)||0,codecTyoe:(null==n?void 0:n.codecType)||"h264",vtype:(null==n?void 0:n.vtype)||"MP4",playerType:r||"default"}}set player(e){this._player=e,this._player.mvmaf&&(this.playEnded.mvmaf=this._player.mvmaf),this._player.vqscore&&(this.playEnded.vqscore=this._player.vqscore)}set status(e){if(0==this._status&&1==e){this.playQuality.stopTimer(),this.playEnded.startTimer(),this.firstFrame.stopTimer();const e={...this.playQuality.exportData(),...this.playFailed.getRetryData()};this.trigger(this.playQuality.name,e),this.trigger(this.firstFrame.name,e)}this._status=e}trigger(e,t){const n=this.getCommonData(this._player);super.trigger(e,{...n,...t})}}var M=n(88625),x=n(91432),P=Object.defineProperty,E=(e,t,n)=>((e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class D extends a.C{constructor(){super(),E(this,"_proxyEvent",(e=>"playCatch"==e?(t,n)=>{this.trigger(e,{vtype:t,error:n})}:"prf_data_size"==e?e=>{this.trigger("downloaderChunkReady",{chunkSize:e.cdn_size,speed:e.cdn_speed})}:"PRELOAD_INFO"==e?e=>{this.trigger("preloaderInfoReady",{size:e.byteLength,duration:e.duration,type:e.type,vid:e.vid})}:t=>{this.trigger(e,t)})),this.currentPlayer=null,this.rawEvents=["loadstart","loadeddata","timeupdate","error","canplay","canplaythrough","volumechange","pause","playing","waiting","ended","seeking","seeked","stalled","abort","play","progress","downloaderError","downloaderChunkReady","memoryCompleted","playCatch","prf_data_size","PRELOAD_INFO","preloaderInfoReady","source_error","source_success"],this.extensionEvents=["autoplayPrevented"],this._callbacks=[],this.events=this.rawEvents.concat(this.extensionEvents)}set player(e){this.remove(),this.currentPlayer=e,this.bind()}remove(){this.currentPlayer&&this._callbacks.forEach(((e,t)=>{e()}))}bind(){this.currentPlayer&&(this.rawEvents.forEach(((e,t)=>{const n=this._proxyEvent(e);this.currentPlayer.bindEvent&&this.currentPlayer.bindEvent(e,n),this.currentPlayer.on&&this.currentPlayer.on(e,n),this._callbacks.push((()=>{this.currentPlayer.removeEvent&&this.currentPlayer.removeEvent(e,n),this.currentPlayer.off&&this.currentPlayer.off(e,n)}))})),this.extensionEvents.forEach(((e,t)=>{const n=this._proxyEvent(e);this.currentPlayer.proxyOn&&this.currentPlayer.proxyOn(e,n),this._callbacks.push((()=>{this.currentPlayer.proxyOff&&this.currentPlayer.proxyOff(e,n)}))})))}}class O extends a.C{constructor(e){super(),this.autoplay=!0,this.muted=!1,this.preload="auto",this.id="",this.codec="",this.resolution="",this.bandwidth=0,this.cpu=0,this.memory=0,this.userAgent="",this.bitrate=0,this.networkType=""}set extraVideoInfo(e){e&&(e.codec&&(this.codec=e.codec),e.resolution&&(this.resolution=e.resolution),e.id&&(this.id=e.id),e.bitrate&&(this.bitrate=e.bitrate))}}class I{constructor(){E(this,"addChunk",(e=>{this.chunks.push(e),this.chunks.length>=this.limit&&this.chunks.shift()})),E(this,"release",(()=>{this.chunks=[]})),this.chunks=[],this.limit=6,this.lastAverageSpeed=0}get averageSpeed(){let e=0,t=0;for(const n of this.chunks)n.size>0&&n.duration>0&&(e+=n.size,t+=n.duration);return t>0&&(this.lastAverageSpeed=8*e/1024/1024/t),this.lastAverageSpeed}}class A extends a.C{constructor(e){super(),this.device=e,this.speedMeasurement=new I}inputChunkInfo(e,t){this.speedMeasurement.addChunk(e,t)}get averageSpeed(){return this.speedMeasurement.averageSpeed}get baseSpeed(){return this.device?this.device.bandwidth:0}get speed(){return this.averageSpeed?this.averageSpeed:this.baseSpeed}}class L extends a.C{constructor(e="RAW"){super(),this.uuid=L.generateUUID(e),this.type=e,this.element=null,this.player=null,this.forceAutoplay=!1,this.attemptPlayCount=0,this.vqscore=0,this.mvmaf="",this.events=["autoplayPrevented"]}style(e,t){this.element&&(this.element.style[e]=t)}set volume(e){this.element&&(this.element.volume=e)}set playbackRate(e){this.element&&(this.element.playbackRate=e)}get currentTime(){return this.element?this.element.currentTime:0}get duration(){return this.element?this.element.duration:0}get width(){return this.element?this.element.videoWidth:0}get height(){return this.element?this.element.videoHeight:0}get error(){return this.element?this.element.error:null}get attributes(){return this.element?{buffered:this.element.buffered,currentSrc:this.element.currentSrc,currentTime:this.element.currentTime,duration:this.element.duration,readyState:this.element.readyState,error:this.element.error}:{}}get isReady(){return!!this.element&&this.element.readyState>=2}get curDefinition(){return{url:"",definition:"",bitrate:-1,duration:-1,codecType:"h264"}}get playbackQuality(){return this.element?this.element.getVideoPlaybackQuality():null}proxyOn(e,t){return super.on(e,t)}proxyOff(e,t){return super.off(e,t)}updateConfig(){}on(e,t){this.element&&this.element.addEventListener(e,t)}off(e,t){this.element&&this.element.removeEventListener(e,t)}once(){}mute(e){this.element&&(this.element.muted=e)}access(){if(this.element)return this.play().then((()=>{this.pause()}))}load(e){this.element&&(this.element.src=e)}seek(e){this.element&&(this.element.currentTime=e)}play(){return this.element?this.element.play():Promise.resolve()}replay(){return this.seek(0),this.play()}pause(){this.element&&this.element.pause()}buffered(){if(this.element)return this.element.buffered}reset(){}release(){this.attemptPlayCount=0}addSubtitle(){}async enterFullscreen(){this.element&&(this.element.requestFullscreen?this.element.requestFullscreen():this.element.mozRequestFullScreen?this.element.mozRequestFullScreen():this.element.webkitRequestFullscreen?this.element.webkitRequestFullscreen():this.element.msRequestFullscreen?this.element.msRequestFullscreen():this.element.webkitEnterFullscreen&&this.element.webkitEnterFullscreen())}async exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.webkitExitFullscreen?window.document.webkitExitFullscreen():window.document.msExitFullscreen?window.document.msExitFullscreen():this.element&&this.element.webkitExitFullScreen&&this.element.webkitExitFullScreen()}tryPlay(e){window.setTimeout((()=>{this.attemptPlayCount>=3||(!e.message.match("request was interrupted by a new load request")&&!e.message.match("The operation was aborted")&&this.trigger("autoplayPrevented",e),(e.message.match("failed because the user didn't interact with the document first.")||e.message.match("The request is not allowed by the user agent or the platform in the current context")||e.message.match("The play method is not allowed by the user agent or the platform in the current context, possibly because the user denied permission."))&&this.mute(!0),this.play(),this.attemptPlayCount+=1)}),0)}initStyle(){this.element&&(this.element.style.width="100%",this.element.style.height="100%",this.element.style.position="absolute",this.element.style.top="0",this.element.style.left="0",this.element.style["::-webkit-media-controls-enclosure"]={display:"none !important"})}initProperty(){this.element&&(this.element.controls=!1,this.element.loop=!1,this.element.muted=!1,this.element.playsInline=!0,this.element.poster="",this.element.preload="auto")}getVideoDesc(){return{videoType:"mp4"}}preloadResources(){}getPreloadMeta(){}}L.UUIDIndex=0,L.UUIDPrefix="_Multimedia_",L.generateUUID=function(e){return L.UUIDIndex++,e+this.UUIDPrefix+this.UUIDIndex};const C=L;class G extends C{constructor(e){super("TT"),this._init(e)}_init(e){this.player=new o.StreamPlayer({withCredentials:!0}),this.player.on("DOWNLOADER_ERROR",(e=>{})),this.player.on("DOWNLOADER_CHUNK_READY",(e=>{})),this.element=this.player.element,this.initStyle(),this.initProperty()}_initLoggerBefore(){}play(){return new Promise(((e,t)=>{this.player.play().then((()=>{e()})).catch((e=>{this.forceAutoplay&&this.tryPlay(e)}))}))}pause(){this.player.pause()}load(e){this.player.load(e)}release(e){super.release(e),this.player.release()}reset(){this.pause(),this.seek(0)}on(e,t){this.player.on(e,t)}off(e,t){this.player.off(e,t)}once(e,t){const n=r=>{t(r),this.player.off(e,n)};this.player.on(e,n)}addSubtitle(e,t){this.player.addSubtitle(e,t)}get isReady(){return this.player.isReady}get playbackQuality(){return this.player?this.player.getQualityInfo():super.playbackQuality}}let N=-1;class B extends C{constructor(e){super("XG"),E(this,"_onAutoplayPrevent",(()=>{this.attemptPlayCount>=3||!this.forceAutoplay||(this.mute(!0),this.player.play(),this.attemptPlayCount+=1)})),E(this,"_onAutoplayStart",(()=>{var e;null==(e=this.player)||e.off(i.A,this._onAutoplayPrevent)})),this.plugins=[],this.hevcResult={open:!1,closePreload:!1,qualityType:20},this._init(e)}checkNeedMSE(e){var t;return!(N>=0?N:N<0?(N="1"===function(){try{return localStorage.getItem("ttplayer_focus_src_play")}catch{}}()?1:0,N):void 0)&&i.M.isMediaSourceSupported()&&!(null!=(t=null==e?void 0:e.extra)&&t.closeMSE)}_init(e){let t={};e||(e={}),e.enableSubtitle&&this._initSubtitle(),e.enablePreloader&&this._initPreloader(e.preloader),e.enableLogger&&this._initLoggerBefore(e.logger),this.checkNeedMSE(e)?this.plugins.push(i.M):t.preload="auto";let n="h264",r=0,o="",a={list:[]},s=0,c=[],l="",f="",h=!0,d=0,p="",v="",g="",y=1;if(e.video&&(e.video.codecType&&(n=e.video.codecType),e.video.defaultBitrate&&(r=e.video.defaultBitrate),e.video.defaultDefinition&&(o=e.video.defaultDefinition),e.video.definitionList&&(a.list=e.video.definitionList),e.video.duration&&(s=e.video.duration),null!=e.video.autoplay&&(h=e.video.autoplay),e.video.mvmaf&&(this.mvmaf=e.video.mvmaf),e.video.vqscore&&(this.vqscore=e.video.vqscore)),e.logger&&(e.logger.line_app_id&&(d=e.logger.line_app_id),e.logger.playMode&&(p=e.logger.playMode),e.logger.tag&&(v=e.logger.tag),e.logger.vid&&(g=e.logger.vid)),e.extra){if(e.extra.ignores&&(c=e.extra.ignores),e.extra.url){const{actualUrl:t,url:n}=e.extra;l=t||n}e.extra.vid&&(f=e.extra.vid)}if(null!=e.video.volume&&(y=e.video.volume),this.config={isNoRoot:!0,controls:!1,plugins:this.plugins,autoplay:h,codecType:n,width:"100%",height:"100%",definition:a,videoConfig:t,volume:y,playbackRate:1},l?this.config.url=l:this.config.nullUrlStart=!0,f&&(this.config.vid=f),o&&(this.config.defaultDefinition=o),r&&(this.config.defaultBitrate=r),s&&(this.config.duration=s),c&&c.length&&(this.config.ignores=c),e.enableLogger){const{logger:t}=e;this.config.vodLogOpts={codec_type:n,decodeFlag:"h265"===n,defaultBitrate:r,defaultDefinition:o,line_app_id:d,playMode:p,playerCoreVersion:i.M.version,pv:i.P.version,strategyVersion:u.v,tag:v,vid:g,vtype:"MP4",...t}}e.hevcResult&&(this.hevcResult=e.hevcResult),e.mp4EncryptPlayer&&(this.config.mp4EncryptPlayer=e.mp4EncryptPlayer),this.player=new i.P(this.config),this.player.on(i.A,this._onAutoplayPrevent),this.player.on(i.b,this._onAutoplayStart),window._multimedia&&window._multimedia.preloader&&(this.player.preloader=window._multimedia.preloader,window._multimedia.preloader.attachPlayer(this.player)),this.element=this.player.video,this.initStyle(),this.initProperty()}_initSubtitle(){this.plugins.push(i.T)}_initPreloader(e){window._multimedia||(window._multimedia={}),window._multimedia.preloader||(window._multimedia.preloader=i.a.registerPreloader(e),window._multimedia.preloader.on("real_time_speed",(()=>{})),window._multimedia.preloader.on("error",(()=>{})),r.DS.attachPreloader(window._multimedia.preloader))}_initLoggerBefore(e){r.K.appId=e.appId,r.DS.AB_SDK_VERSION=e.abTestVersion,r.K.init(M.g,e.channelConfig,{region:e.region,user_unique_id:e.webId,user_is_login:e.isLogin}),this.plugins.push(r.Ay)}set volume(e){this.player&&(this.player.volume=e)}set playbackRate(e){this.player&&(this.player.playbackRate=e)}get currentTime(){return this.player.currentTime}get duration(){return this.play.duration}get isReady(){return this.player.isCanplay}get volume(){return this.player.volume}get muted(){return this.player.muted}get playbackRate(){return this.player.playbackRate}get curDefinition(){return this.player.curDefinition||super.curDefinition}on(e,t){this.player.on(e,t)}off(e,t){this.player.off(e,t)}once(e,t){this.player.once(e,t)}load(e){this.player.playNext({url:e})}seek(e){this.player.currentTime=e}play(){return new Promise(((e,t)=>{this.player||t();const n=this.player.play();n||e(),n.then((()=>{e()})).catch((e=>{}))}))}pause(){return this.player.pause()}release(e){super.release(e),e||this.player.destroy()}reset(){}replay(){return this.player.replay()}addSubtitle(e,t){!this.player||!this.player.plugins||!this.player.plugins.texttrack||this.player.plugins.texttrack.updateSubtitles(e,(e=>{t(e.text)}))}getVideoDesc(){return this.player?{videoType:this.player.vtype}:super.getVideoDesc()}preloadResources(e){const{closePreload:t}=this.hevcResult;if(window._multimedia&&window._multimedia.preloader&&!t){const{preloader:t}=window._multimedia;t.clearTask(),t.addPreloaderList(e)}}get preloader(){return window._multimedia&&window._multimedia.preloader?window._multimedia.preloader:null}updateConfig(e){this.player.setConfig({mp4encryptplayerConfig:{reqOptions:e}})}getPreloadMeta(e){return this.preloader?this.preloader.getPreloadMetaByVid(e):null}async enterFullscreen(e){await this.player.getFullscreen(e)}async exitFullscreen(e){await this.player.exitFullscreen(e)}}class $ extends C{constructor(e){super("RAW"),this._init(e)}_init(e){this.player=new o.BasicPlayer({withCredentials:!0}),this.element=this.player.el,this.initStyle(),this.initProperty(),e&&(e.enablePreloader&&this._initPreloader(e.preloader),e.enableLogger&&this._initLoggerAfter(e),e.video&&(e.video.mvmaf&&(this.mvmaf=e.video.mvmaf),e.video.vqscore&&(this.vqscore=e.video.vqscore))),window._multimedia&&window._multimedia.preloader&&window._multimedia.preloader.attachPlayer(this.element),e&&e.extra&&e.extra.url&&this.load(e.extra.url)}_initPreloader(e){window._multimedia||(window._multimedia={}),window._multimedia.preloader||(window._multimedia.preloader=i.a.registerPreloader(e),window._multimedia.preloader.on("real_time_speed",(()=>{})),window._multimedia.preloader.on("error",(()=>{})),r.DS.attachPreloader(window._multimedia.preloader))}_initLoggerAfter(e){let t=0,n=0,o="",a="",s="",c="h264",l=0,f="",h="",d={},p="",v="",g=!1;e.logger&&(e.logger.line_app_id&&(n=e.logger.line_app_id),e.logger.appId&&(t=e.logger.appId),e.logger.playMode&&(o=e.logger.playMode),e.logger.tag&&(a=e.logger.tag),e.logger.vid&&(s=e.logger.vid),e.logger.abTestVersion&&(h=e.logger.abTestVersion),e.logger.channelConfig&&(d=e.logger.channelConfig),e.logger.region&&(p=e.logger.region),e.logger.webId&&(v=e.logger.webId),e.logger.isLogin&&(g=e.logger.isLogin)),e.video&&(e.video.codecType&&(c=e.video.codecType),e.video.defaultBitrate&&(l=e.video.defaultBitrate),e.video.defaultDefinition&&(f=e.video.defaultDefinition));let y={codec_type:c,decodeFlag:"h265"===c,defaultBitrate:l,defaultDefinition:f,line_app_id:n,playMode:o,playerCoreVersion:i.M.version,pv:"",strategyVersion:u.v,tag:a,vid:s,vtype:"MP4"};r.K.appId=t,r.DS.AB_SDK_VERSION=h,r.K.init(M.g,d,{region:p,user_unique_id:v,user_is_login:g});const m=new r.DS(y);this.player.logger=m,m.attachPlayer(this.element)}play(){return new Promise(((e,t)=>{this.player.play().then((()=>{e()})).catch((e=>{this.forceAutoplay&&this.tryPlay(e)}))}))}pause(){this.player.pause()}load(e){this.player.load(e)}release(e){super.release(e),this.player.release()}reset(){this.pause(),this.seek(0)}on(e,t){this.player.on(e,t)}off(e,t){this.player.off(e,t)}once(e,t){const n=r=>{t(r),this.player.off(e,n)};this.player.on(e,n)}addSubtitle(e,t){this.player.addSubtitle(e,t)}preloadResources(e){if(window._multimedia&&window._multimedia.preloader){const{preloader:t}=window._multimedia;t.clearTask(),t.addPreloaderList(e)}}get isReady(){return this.player.isReady}get playbackQuality(){return this.player?this.player.getQualityInfo():super.playbackQuality}}var F=(e=>(e.XG="XG",e.TT="TT",e.RAW="RAW",e))(F||{});class U extends a.C{constructor(e,t){super(),E(this,"onceCanplay",(()=>{const{isTTP:e}=x.M.getInstance();null!==e&&x.b.asyncMark(e)})),E(this,"release",((e=!1)=>{this.currentPlayer&&(this.currentPlayer.release(e),this.currentPlayer.off("canplay",this.onceCanplay))})),this.event=e,this.device=t,this.currentPlayer=null}static get version(){return u.v}usePlayer(e,t,n=!1){return this.release(n),this.currentPlayer&&n||(t?e==F.XG?this.currentPlayer=new B(t):this.device&&this.device.isMSESupported?e==F.TT?this.currentPlayer=new G(t):e==F.RAW&&(this.currentPlayer=new $(t)):this.currentPlayer=new $(t):this.currentPlayer=new $(t),this.event.player=this.currentPlayer,this.currentPlayer.once("canplay",this.onceCanplay)),this.currentPlayer}get attributes(){return this.currentPlayer&&this.currentPlayer.element?{error:this.currentPlayer.element.error,src:this.currentPlayer.element.currentSrc,currentTime:this.currentPlayer.element.currentTime,muted:this.currentPlayer.element.muted,duration:this.currentPlayer.element.duration,readyState:this.currentPlayer.element.readyState,networkState:this.currentPlayer.element.networkState,buffered:this.currentPlayer.element.buffered,volume:this.currentPlayer.element.volume,ended:this.currentPlayer.element.ended,paused:this.currentPlayer.element.paused,seeking:this.currentPlayer.element.seeking}:null}get element(){return this.currentPlayer?this.currentPlayer.element:null}}class H extends a.C{static get version(){return u.v}constructor(){super(),this.config=new O,this.event=new D,this.device=new s.A,this.network=new A(this.device),this.metrics=new R(this.event,this.config),this.pool=new U(this.event,this.device)}_initConfig(){this.config=new O}_initEvent(){this.event=new D}_initDevice(){this.device=new s.A}_initNetwork(){this.network=new A(this.device)}_initMetrics(){this.metrics=new R(this.event,this.config)}_initPlayerPool(){this.pool=new U(this.event,this.device)}set player(e){this.event.player=e,this.metrics.player=e,this.pool.currentPlayer=e}get player(){return this.pool.currentPlayer}get attributes(){return this.pool.attributes}get element(){return this.pool.element}usePlayer(e,t,n){const r=this.pool.usePlayer(e,t,n);return this.metrics.player=r,r}release(e){this.pool.release(e)}getPreloadMeta(e){return this.player&&this.player.preloader?this.player.getPreloadMeta(e):null}}const j=H;var V=Object.defineProperty,z=(e,t,n)=>((e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class X{constructor(){this.__handlers=[],window.ResizeObserver&&(this.observer=new window.ResizeObserver((e=>{this.__trigger(e)})))}addObserver(e,t){if(!this.observer)return;this.observer&&this.observer.observe(e);const{__handlers:n}=this;let r=-1;for(let t=0;t<n.length;t++)n[t]&&e===n[t].target&&(r=t);r>-1?this.__handlers[r].handler.push(t):this.__handlers.push({target:e,handler:[t]})}unObserver(e){let t=-1;this.__handlers.map(((n,r)=>{e===n.target&&(t=r)})),this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}destroyObserver(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=[]}__runHandler(e,t){const{__handlers:n}=this;for(let r=0;r<n.length;r++)if(n[r]&&e===n[r].target){n[r].handler&&n[r].handler.forEach((n=>{try{n(e,t)}catch(e){console.error(e)}}));break}}__trigger(e){e.map((e=>{const t=e.contentRect;this.__runHandler(e.target,t)}))}}let K=null;const Q="change",W="update",q="error",Y=[{code:0,msg:"SUCCESS"},{code:1,msg:"LOAD_ERROR",type:"LOAD_ERROR"},{code:2,msg:"PARSER_ERROR",type:"PARSER_ERROR"},{code:3,msg:"FORMAT_NOT_SUPPORTED",type:"FORMAT_NOT_SUPPORTED"},{code:4,msg:"ID_OR_LANGUAGE_NOT_EXIST",type:"ID_OR_LANGUAGE_NOT_EXIST"},{code:5,msg:"PARAMETERS_ERROR",type:"PARAMETERS_ERROR"},{code:6,msg:"ABORT",type:"ABORT"},{code:7,msg:"UNKNOWN",type:"UNKNOWN"},{code:8,msg:"DATA_ERROR:subtitle.url is null",type:"DATA_ERROR"},{code:9,msg:"DATA_ERROR:subtitle.url length is 0",type:"DATA_ERROR"}];class J extends Error{constructor(e,t,n,r){e||(e=Y[t||7].msg),super(e),this.message="",this.code=t||7,this.message=e,this.type=Y[t||7].msg,this.orgError=n||null,this.data=r||null}}function Z(e,t={},n){const r={code:Y[e].code,message:Y[e].msg,id:"",language:""};return Object.keys(t).map((e=>{r[e]=t[e]})),r}class ee{constructor(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=function(t){e(t),n.state="fulfilled"},n.reject=function(e){t(e),n.state="rejected",n.isBreak="DESTROYED"===e},n.state="pending",n}resolve(e){}reject(e){}}function te(e,t){if(!e)return!1;if(e.classList)return Array.prototype.some.call(e.classList,(e=>e===t));{const n=e.className&&"object"==typeof e.className?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}}function ne(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach((t=>{t&&e.classList.add(t)})):te(e,t)||(e.className&&"object"==typeof e.className?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t))}function re(e){const t=Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g);return t?t[0]:""}function ie(e="div",t="",n={},r=""){const i=document.createElement(e);return i.className=r,i.innerHTML=t,Object.keys(n).forEach((t=>{const r=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&i.setAttribute(r,o):i.setAttribute(r,o)})),i}function oe(e){return e&&e instanceof window.HTMLMediaElement}function ae(e){const t=[];if(e&&"String"===re(e))t.push({url:[e],index:0,start:-1,end:-1});else if("Array"===re(e)){const n=e;if(0===n.length)return t;"String"===re(n[0])?t.push({url:e,index:0,start:-1,end:-1}):n.forEach(((e,n)=>{const r=e;t.push({url:r.url||r.src||"",index:n,start:r.start||-1,end:r.end||-1})}))}return t}function se(e,t,n){const r=t.length;if(r<1)return-1;if(t[n=n<0?0:n>=r?r-1:n].start<=e&&e<t[n].end)return n;{let i=t[n].end<=e?n+1:0;for(;i<r;i++){if(t[i].start<=e&&e<t[i].end)return i;if(e>t[i].end&&i+1<r&&e<t[i+1].start||e>t[i].end&&i+1>=r)return-1}return-1}}function ue(e,t,n){const r=t.length;if(r<1)return[];const i=[];if((n=n<0?0:n>=r?r-1:n)<r){let o=t[n].end<=e?n:0;for(;o<r&&(t[o].start<=e&&e<t[o].end&&i.push(o),!(e<t[o].start));o++);}return i}function ce(e,t){return!!(e.id&&t.id&&e.id===t.id||e.language&&t.language&&e.language===t.language)}function le(e){return null!==e&&""!==e.trim()&&/^[a-zA-Z]+$/.test(e)}function fe(e){return!!/[\x21-\x2f\x3a-\x40\x5b-\x60\x7B-\x7F]/.test(e)}function he(e){return!!/[\u3002|\uff1f|\uff01|\uff0c|\u3001|\uff1b|\uff1a|\u201c|\u201d|\u2018|\u2019|\uff08|\uff09|\u300a|\u300b|\u3008|\u3009|\u3010|\u3011|\u300e|\u300f|\u300c|\u300d|\ufe43|\ufe44|\u3014|\u3015|\u2026|\u2014|\uff5e|\ufe4f|\uffe5]/.test(e)}const de=/^WEBVTT/,pe=/^STYLE+$/,ve=/^\:\:cue/,ge=/^}+$/,ye=/^\[Script Info\].*/,me=[/[0-9]{1,3}:[0-9]{2}:[0-9]{2}\.[0-9]{1,3}-->[0-9]{1,3}:[0-9]{2}:[0-9]{2}\.[0-9]{1,3}/,/[0-9]{1,3}:[0-9]{2}\.[0-9]{1,3}-->[0-9]{1,3}:[0-9]{2}\.[0-9]{1,3}/,/[0-9]{1,2}\.[0-9]{1,3}-->[0-9]{1,2}\.[0-9]{1,3}/],_e=/^Format:\s/,be=/^Style:\s/,Te=/^Dialogue:\s/;function ke(e){const t=e.length;return 3===t?(60*(60*Number(e[0])+Number(e[1]))*1e3+1e3*Number(e[2]))/1e3:2===t?(60*Number(e[0])*1e3+1e3*Number(e[1]))/1e3:Number(e[0])}function Se(e,t){return e>=0&&e<t.length?t[e]:""}class we{static parseJson(e){const t=[];let n=0;for(let r=0;r<e.length;r++){if(n>=50&&(n=0),0===n){const n={start:e[r].start,list:[e[r]],end:e[r].end};t.push(n)}else t[t.length-1].list.push(e[r]),t[t.length-1].end=e[r].end;n++}return t}static parse(e,t){const n=we.checkFormat(e);if(n)try{let r={list:[],styles:[]};"ass"===n?r=we.parseASS(e):"vtt"===n&&(r=we.parseVTT(e)),t({format:n,list:r.list,styles:r.styles})}catch(e){console.error(e),t({format:n},new J(`parse_error_${e.message}`,2,e))}else t({format:"unknown"},new J("unknown_format",3))}static parseASSItem(e="",t=[]){const n=e.split(","),r={};let i="";try{const e=n.length-t.length;return i=e>0?n.splice(t.length-1,e+1).join(",")+"":n[n.length-1]+"",i=i.replace(/\\n+/g,""),n[t.length-1]=i,t.map(((e,t)=>{"end"===e||"start"===e?r[e]=ke(n[t].split(":")):"text"===e?r[e]=[n[t]]:"layer"===e?(r[e]=[n[t]],r.textTag=[n[t]]):r[e]="style"===e?[n[t]]:Number(n[t])?Number(n[t]):n[t]})),r}catch(e){return console.error(e),{}}}static parseASS(e){const t=e.split("\n"),n=[];let r=0,i=0;const o=[];let a=[],s=null;for(;r<t.length;){if(_e.test(t[r]))a=t[r].replace(_e,"").replace(/\s+/g,"").split(","),a=a.map((e=>e.toLocaleLowerCase()));else if(be.test(t[r]))o.push(t[r].replace(be,"").replace(/\s+/g,""));else if(Te.test(t[r])){const e=we.parseASSItem(t[r].replace(Te,""),a);if(s&&e.start===s.start&&e.end===s.end)try{const{text:t=[],textTag:n=[],style:r}=s;e.text.length>0&&t.push(e.text[0]),e.textTag.length>0&&n.push(e.textTag[0]),r&&r.push(e.style[0])}catch(e){console.error(e)}else{s=e;let t=null;i%50==0?(t={start:s.start,end:s.end,list:[]},t.list.push(s),n.push(t)):(t=n[n.length-1],t.end=s.end,t.list.push(s)),i++}}r++}return{list:n,styles:[]}}static parseVTTStyle(e,t){const n=e.split(":");if(n.length>1){const e=n[0].trim().split("-");let r="";e.length>1?e.map(((e,t)=>{r+=0===t?e:e.charAt(0).toUpperCase()+e.slice(1)})):r=e[0],t[r]=n[1].trim().replace(/;$/,"")}return t}static parseVTT(e){const t=(e=e.replace(de,"")).split("\n"),n=[];let r=0,i=0,o=null,a=!1,s=!1,u=null,c=null;const l=[];for(;r<t.length;){const e=Se(r,t).trim();if(!e||a&&/^(\-|\+)?\d+(\.\d+)?$/.test(e))a=!e;else if(ve.test(e)&&pe.test(Se(r-1,t).trim())){s=!0;const t=/\((.+?)\)/g.exec(e);c=t?t[1]:"",u=""}else if(s)ge.test(e)?(l.push({key:c||"",style:u||""}),u=null,c=null,s=!1):u+=e;else if(e){a=!1;const e=this.checkIsTime(t[r]);if(e){const t=this.parseVttTime(e);if(!o||t.start!==o.start||t.end!==o.end){o={...t,text:[],textTag:[]},o.text=[],o.textTag=[];let e=null;i%50==0?(e={start:o.start,end:o.end,list:[]},e.list.push(o),n.push(e)):(e=n[n.length-1],e.end=o.end,e.list.push(o)),i++}}else if(o){const{text:e,textTag:n}=o,i=this.parseVttText(t[r]);e.push(i.text),n.push(i.tag)}a=!1}r++}return{list:n,styles:l}}static checkIsTime(e){e=e.replace(/\s+/g,"");let t=0,n=null;for(;t<me.length&&(n=me[t].exec(e),!n);)t++;return n?n[0]:null}static parseVttText(e){const t=/^(<?.+?>)/g.exec(e);let n="",r="default";if(t){r=t[0].replace(/\<|\>|\&/g,"");const i=RegExp(`^<${r}>(([\\s\\S])*?)</${r}>$`).exec(e);i?n=i[1]:(n=e,r="")}else n=e;const i=/<(\w+).(\w+)>/g;let o=i.exec(n);for(;o&&o.length>2;)n=n.replace(o[0],`<${o[1]} class="${o[2]}">`),o=i.exec(n);return{tag:r,text:n.replace(/\\n+/g,"<br/>")}}static parseVttTime(e){const t=e.split("--\x3e");let n=0,r=0;if(2===t.length){const e=t[0].split(":"),i=t[1].split(":");n=ke(e),r=ke(i)}return{start:n,end:r,time:e}}static isVTT(e){return de.test(e)}static isASS(e){return ye.test(e)}static checkFormat(e){return e?de.test(e)?"vtt":ye.test(e)?"ass":"":""}}function Re(e,t){const{status:n="",statusText:r=""}=e;return`${t}_${n}_${r}`}function Me(e,t,n){const{url:r="",method:i="GET",type:o="arraybuffer",timeout:a=1e4,data:s={}}=e,u=new window.XMLHttpRequest,c=i.toUpperCase(),l=[];if(o&&(u.responseType=o),a&&(u.timeout=a),Object.keys(s).forEach((e=>{l.push(`k=${s[e]}`)})),u.onload=()=>{200===u.status||206===u.status?n({context:t,res:u,type:"success"}):n({context:t,res:u,type:"error",error:new J(Re(u,"response_error"),1)})},u.onerror=e=>{n({context:t,res:u,type:"error",error:new J("loaderror",1)})},u.ontimeout=e=>{n({context:t,res:u,type:"error",error:new J("timeout",1)})},u.onabort=()=>{n({context:t,res:u,type:"error",error:new J("abort",1)})},"GET"===c)u.open(c,`${r}`),u.send();else{if("post"!==c)throw n({context:t,res:u,type:"error",error:new J(`xhr ${c} is not supported`,1)}),new J(`xhr ${c} is not supported`,1);u.open(c,r),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.send(l.join("&"))}}function xe(e,t,n){"json"===t?n({styles:[],list:we.parseJson(e),format:"json"}):"string"===t&&we.parse(e,n)}function Pe(e,t,n){let r=[];n||(n=new ee),r="String"===re(e)?[e]:[...e];const i=r.shift()||"",o=e=>{const{res:i,error:a}=e;if(a)r.length>0?Me({url:r.shift()||"",type:"text"},t,o):n.reject(a);else if(i){const{response:e}=i;xe(e,"string",((e,t)=>{t?n.reject(t):n.resolve(e)}))}};return Me({url:i,type:"text"},t,o),n}let Ee=!1;class De extends i.Q{constructor(e){super(),z(this,"_onPause",(()=>{this.stopRender()})),z(this,"_onPlay",(()=>{this._curRenderTask.length>0&&this.startRender(-1)})),z(this,"_onTimeupdate",(()=>{if(!this._isOpen)return;if(this.config.domRender){const e=this.player.video?this.player.video:this.player,{videoWidth:t,videoHeight:n}=e;!this._videoMeta.scale&&t&&n&&this._onResize(this.player.root)}const e=this._getPlayerCurrentTime();Math.round(Math.abs(1e3*e-this._ctime))<200||(this._ctime=1e3*e,this.currentText&&this.currentText.list&&("live"===this.config.updateMode?this._liveUpdate(e):this._update(e)))})),z(this,"_onResize",(e=>{const{_videoMeta:t,config:n}=this;if(n.domRender){if((!e||!(e instanceof window.Element))&&(e=this.player.root),this._iId&&(window.clearTimeout(this._iId),this._iId=null),!t.scale){if(!this.player.video)return;const{videoWidth:e,videoHeight:n}=this.player.video;if(!e||!n)return;t.videoWidth=e,t.videoHeight=n,t.scale=parseInt(n/e*100,10)}this.__startResize(e)}})),z(this,"_onCoreEvents",(e=>{try{switch(e.eventName){case"core.subtitlesegments":this._onSubtitleSegment(e.list||[]);break;case"core.subtitleplaylist":this._onSubtitlePlaylist(e.list||[]);break;case"core.seipayloadtime":this._onCoreSeiintime(e)}}catch(e){console.error(e)}})),z(this,"startRender",(e=>{if(e>0&&this._renderIntervalId&&(window.cancelAnimationFrame(this._renderIntervalId),this._renderIntervalId=-1),!this.textTrack)return;const{_curRenderTask:t}=this;this._lastTimeStamp=(new Date).getTime();const n=[];t.forEach(((t,r)=>{const{lastTime:i,wordList:o,interval:a,dom:s,ids:u}=t;if(e<0||this._lastTimeStamp<0||this._lastTimeStamp-i>=a){const e=o.shift();e&&s.appendData(e),t.lastTime=this._lastTimeStamp}o.length<1&&n.push({index:r,ids:u})})),this._log(">>>>_renderByWords emptyArr",n.length,t.length),n.forEach((e=>{t.splice(e.index,1),this._log(">>>_renderByWords remove emptyArr",e.index,t.length)})),t.length>0&&(this._renderIntervalId=window.requestAnimationFrame(this.startRender))})),z(this,"destroy",(()=>{this.detachPlayer(),this.removeAllListeners(),this.player=null,this.textTrack=null,this._curRenderTask=[],this.stopRender()})),Ee=function(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,r=/(?:Android)/.test(e),i=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||r&&!/(?:Mobile)/.test(e)||i&&/(?:Tablet)/.test(e);return/(?:iPhone)/.test(e)&&!o||r||n||o}(),this.currentText=null,this.currentExtText=null,this.textTrack=[],this._cid=-1,this._gid=-1,this._cids=[],this._iId=null,this._iC=0,this.player=null,this.root=null,this.config={line:"double",bottom:0,mode:"stroke",defaultOpen:!1,baseSizeX:49,baseSizeY:28,minSize:16,minMobileSize:13,fitVideo:!0,offsetBottom:2,fontColor:"#fff",domRender:!1,updateMode:"vod",renderMode:"",debugger:!1},this._ctime=0,this._loadingTrack={},this.seiTime=0,this.lastSeiTime=0,this._curTexts=[],this._curRenderTask=[],this._renderIntervalId=-1,this._lastTimeStamp=-1,Object.keys(this.config).map((t=>{void 0!==e[t]&&null!==e[t]&&(this.config[t]=e[t])})),this._isOpen=this.config.defaultOpen||!1,this._videoMeta={scale:0,videoHeight:0,videoWidth:0,lwidth:0,lheight:0,vWidth:0,vHeight:0,vBottom:0,vLeft:0,marginBottom:0},e.subTitles&&"Array"===re(e.subTitles)&&(e.player&&this.attachPlayer(e.player),this.setSubTitles(e.subTitles,this.config.defaultOpen))}get version(){return"0.0.16"}setSubTitles(e=[],t=!1,n=!0){const r=this._isOpen||t;n&&this.innerRoot&&this.switchOff(),!e||e.length<1?this.switchOff():(this.currentText=null,this.textTrack=[],e.forEach((e=>{const t={};Object.keys(e).map((n=>{t[n]=e[n]})),t.url=ae(t.url),t.isDefault&&(this.currentText=t),this.textTrack.push(t)})),this._log("setSubTitles",r,this.textTrack),r&&(this.currentText||(this.currentText=this.textTrack[0]),this.switch().catch((e=>{this.emitError(e),this._log("[switch]",e)}))),this._log(">>>this.currentText",r,this.currentText),this.currentText&&this._loadTrack(this.currentText).then((e=>{this.addStyles(e)})).catch((e=>{this.emitError(e),this._log("[_loadTrack] errorsss",e)})),this.emit("reset",{type:"reset",list:this.textTrack,isOpen:r}))}updateSubTitle(e){let t=-1;for(let n=0;n<this.textTrack.length;n++)if(ce(e,this.textTrack[n])){t=n;break}if(this._log("updateSubTitle",t,e),t>-1){const n=ce(this.currentText,this.textTrack[t]);if(this._log("updateSubTitle","_isCurrent",n,"this.isOpen",this.isOpen,this.currentText),!n)return;const r=ae(e.url);this.isOpen?(r.forEach((e=>{this.textTrack[t].url.push(e)})),this._log("updateSubTitle _loadTrackUrls",this.textTrack[t]),this._loadTrackUrls(this.currentText,2)):this.textTrack[t].url=r}}addStyles(e){const{styles:t,format:n}=e;t&&"vtt"===n&&(t.map((e=>{e.key||(e.key="xg-text-track-span")})),function(e,t=""){let n="";e.map((e=>{n+=` ${t} ${e.key} {${e.style}}`}));const r=document.createElement("style"),i=document.head||document.getElementsByTagName("head")[0];if(r.type="text/css",r.id="ssss",r.styleSheet){const e=function(){try{r.styleSheet.cssText=n}catch{}};r.styleSheet.disabled?setTimeout(e,10):e()}else{const e=document.createTextNode(n);r.appendChild(e)}i.appendChild(r)}(t,"xg-text-track"))}attachPlayer(e){if(this._log("attachPlayer"),!e||e===this.player)return;this.player&&this.detachPlayer();const{fontColor:t,mode:n,fitVideo:r,domRender:i}=this.config;this.player=e,i&&(this.root=document.createElement("xg-text-track"),this.root.className="xg-text-track",!this._isOpen&&ne(this.root,"text-track-hide"),!r&&ne(this.root,"text-track-no-fitvideo"),n&&ne(this.root,`text-track-${n}`),this.innerRoot=document.createElement("xg-text-track-inner"),this.root.appendChild(this.innerRoot),t&&(this.root.style.color=t),this.currentText&&["language","id","label"].map((e=>{this.root.setAttribute(`data-${e}`,this.currentText[e]||"")})),this.player.root.appendChild(this.root),function(e,t){K||(K=new X),K.addObserver(e,t)}(e.root,this._onResize)),oe(e)?(e.addEventListener("timeupdate",this._onTimeupdate),e.addEventListener("pause",this._onPause),e.addEventListener("play",this._onPlay)):(this.player.on("destroy",this.destroy),this.player.on("timeupdate",this._onTimeupdate),this.player.on("pause",this._onPause),this.player.on("play",this._onPlay),this.player.on("core_event",this._onCoreEvents)),this._isOpen&&this.switch().catch((e=>{this._log("[switch]",e)}))}detachPlayer(){const{player:e,config:t}=this;var n;e&&(oe(e)?(e.removeEventListener("timeupdate",this._onTimeupdate),e.removeEventListener("pause",this._onPause),e.removeEventListener("play",this._onPlay)):(this.player.off("destroy",this.destroy),this.player.off("timeupdate",this._onTimeupdate),this.player.off("pause",this._onPause),this.player.off("play",this._onPlay),this.player.off("core_event",this._onCoreEvents)),t.domRender&&(e.root&&(n=e.root,this._onResize,K&&K.unObserver(n),e.root.removeChild(this.root)),this.innerRoot=null,this.root=null),this.player=null)}switch(e={id:"",language:""}){return this._log("switch",e),this._loadingTrack=e,new Promise(((t,n)=>{if(!e.id&&!e.language){if(this.currentText)return this._loadingTrack={},this._updateCurrent(this.currentText),this.switchOn(),void t({message:"switch default subtitle success",code:0});{const e=new J("no default subtitle",5);return this.emitError(e),void n(e)}}if(this.currentText&&ce(e,this.currentText))this._loadingTrack={},this._updateCurrent(this.currentText),this.switchOn(),t(Z(0));else{let r=null;this.__removeByTime(this._curTexts,0);for(let t=0;t<this.textTrack.length;t++)if(ce(e,this.textTrack[t])){r=this.textTrack[t];break}if(this._log("nextSubtitle",r),r)this._emitPlayerSwitch(this.currentText,r),r.list?(this._loadingTrack={},this._updateCurrent(r),this.switchOn(),t(Z(0))):(this._log("this._loadTrack",r),this._updateCurrent(r),this._loadTrack(r).then((i=>{if(this.addStyles(i),this._loadingTrack.id===r.id||this._loadingTrack.language===i.language)this._loadingTrack={},this._updateCurrent(i),this.switchOn(),t(Z(0));else{const t=new J(`check _loadingTrack fail id: ${this._loadingTrack.id}  nextSubtitle:${i.id}`,6,null,e);this.emitError(t),n(t)}})).catch((e=>{this.emitError(e),n(e)})));else{const t=new J(`The is no subtitle with id:[{${e.id}}] or language:[${e.language}]`,4,null,e);this.emitError(t),n(t)}}}))}switchExt(e={id:"",language:""}){return new Promise(((t,n)=>{if(e.id||e.language){let n=null;for(let t=0;t<this.textTrack.length;t++)if(ce(e,this.textTrack[t])){n=this.textTrack[t];break}n&&!ce(n,this.currentText)&&this._loadTrack(n).then((e=>{this.currentExtText=e,t(Z(0))})).catch((e=>{this.emitError(e)}))}else this.currentExtText=null,t(Z(0))}))}emitError(e){this.emit(q,{type:q,error:e})}switchOn(){this._log("switchOn"),this._isOpen=!0,this.show();const{id:e,language:t}=this.currentText;this.emit(Q,{type:Q,isOpen:!0,id:e,language:t,texts:[]})}switchOff(){if(this._isOpen=!1,this.hide(),!this.currentText)return;const{id:e,language:t}=this.currentText;this.emit("off",{type:"off",id:e,language:t,texts:[],isOpen:!1})}get isOpen(){return this._isOpen}_log(...e){this.config.debugger&&console.log("[xgSubtitle]",...e)}_loadTrack(e){this._log("_loadTrack",e.language,e);const t=new ee;let n="",r="";if(e.json?(n="json",r=e.json):e.stringContent&&!e.url&&(n="string",r=e.stringContent),r)return xe(r,n,((n,r)=>{r?(this.emitError(r),t.reject(r)):(e.format=n.format,e.styles=n.styles,e.list=n.list,t.resolve(e))})),t;const i=[...e.url];return 0===i.length?(t.resolve(e),t):(Pe(i.splice(0,1)[0].url,e).then((n=>{e.format=n.format,e.styles=n.styles,e.list||(e.list=[]),this._pushList(e.list,n.list),i.length>1&&this._loadTrackUrls(e,2),t.resolve(e)})).catch((e=>{t.reject(e)})),t)}_emitPlayerSwitch(e,t){e&&"live"===this.config.updateMode&&(e.list=[],e.url=[]);const n={lang:t.language,...t};this._log("emit subtile_switch ",t,n),this.emit(Q,{type:Q,error:null})}_loadTrackUrls(e,t,n){const r=e.url.length,i=r>t?e.url.splice(0,t):e.url.splice(0,r);let o=i.length;this._log("_loadTrackUrls",e.language,r,i.length,o),i.forEach(((t,r)=>{Pe({...t,index:r}.url,t).then((t=>{e.format=t.format,e.styles=t.format,e.list||(e.list=[]),this._pushList(e.list,t.list),o--})).catch((e=>{o--})).finally((t=>{0===o&&(n&&n.resolve(e),this._loadTrackUrls(e,2))}))}))}_freshUrl(e,t={url:""}){let n=-1;e.url.forEach(((e,r)=>{e.url===t.url&&(n=r)})),n>-1&&e.url.splice(n,1)}_pushList(e,t){const n=t[0].start,r=t[t.length-1].end;if(0===e.length||n>=e[e.length-1].end)t.forEach((t=>{e.push(t)}));else{let n=-1;for(let t=0;t<e.length;t++)if(e[t].start>r){n=t;break}n>-1&&t.forEach(((t,r)=>{e.splice(n+r,0,t)}))}return e}_updateCurrent(e){this.currentText=e,this.config.domRender&&this.root&&(["language","id","label"].map((e=>{this.root.setAttribute(`data-${e}`,this.currentText[e]||"")})),this.__remove(this._cids)),this._cids=[],this._gid=-1,this._cid=-1,this._curTexts=[];const t=this._getPlayerCurrentTime();t&&("live"===this.config.updateMode?this._liveUpdate(t):this._update(t))}__loadAll(){this.textTrack.forEach((e=>{this._loadTrack(e)}))}getDelCid(e,t){const n=[];for(let r=0;r<e.length;r++)t.includes(e[r])||n.push(e[r]);return n}getNewCid(e,t){const n=[];for(let r=0;r<t.length;r++)e.includes(t[r])||n.push(t[r]);return n}_liveUpdate(e){if(!this.currentText||!this.currentText.list||!this.currentText.list.length)return;let t=[];const n=se(e,this.currentText.list,this._gid);if(n>-1&&(t=ue(e,this.currentText.list[n].list,this._cid)),this.__removeByTime(this._curTexts,e),this._log("_liveUpdate",e,n,t,this.currentText.list[0].list[0].start,this.currentText.list[0].list[0].end),t.length>0){const e=function(e,t,n){if(0===e.length||t<0||t>e.length-1)return[];const r=e[t].list;if(0===n.length)return[];const i=r.splice(n[0],n.length);return t>0&&e.splice(0,t),0===r.length&&e.splice(0,1),i}(this.currentText.list,n,t),r=this._curTexts.length,i=r>0?this._curTexts[r-1].index:0;e.forEach(((e,t)=>{e.index=t+i,this._curTexts.push(e)})),this.__render(e)}this.emit(W,this.getUpdateData(this._curTexts,0,this.currentText))}_update(e){if(!this.currentText||!this.currentText.list||!this.currentText.list.length)return;const t=se(e,this.currentText.list,this._gid);let n=[];if(t>-1&&(n=ue(e,this.currentText.list[t].list,this._cid)),this._log("update1",`currentTime:${e}`,t,this._gid,n,this._cids,this._cids.join(",")===n.join(","),t===this._gid),n.length<1)return this._cids.length>0&&this.config.domRender&&this.__remove(this._cids),this._cids=[],this._curTexts.length>0&&this.emit(W,this.getUpdateData([],e,this.currentText)),void(this._curTexts=[]);if(this._cids.join("")===n.join("")&&t===this._gid)return;this._gid=t,this._cid=n[0];const r=this.getDelCid(this._cids,n),i=this.getNewCid(this._cids,n);this._cids=n,this.config.domRender&&this.__remove(r);const o=[];i.map((e=>{const n=this.currentText.list[t].list[e];n.index=e,o.push(n)})),this.currentExtText&&i.map((e=>{const n=this.currentText.list[t].list[e];n.index=e,o.push(n)})),this._log("update",`currentTime:${e}`,o.length>0?`start:${o[0].start} end:${o[0].end}`:"",`delCids:${r.length} newCids:${i.length}`),this._curTexts=o,this.emit(W,this.getUpdateData(o,e,this.currentText)),this.__render(o,e)}getUpdateData(e,t,n){const{id:r,language:i}=n;return{type:W,currentTime:0|t,id:r,language:i,texts:e,isOpen:this._isOpen}}_getPlayerCurrentTime(){if(!this.player)return 0;const{currentTime:e}=this.player;return parseInt(1e3*e+1e3*this.seiTime-1e3*this.lastSeiTime,10)/1e3}_onSubtitlePlaylist(e){this._log("_onSubtitlePlaylist",e);const t=e.map((e=>({label:e.name,language:e.lang,id:e.id,isDefault:e.default,url:[],mUrl:e.url})));this.setSubTitles(t)}_onSubtitleSegment(e){if(this._log("_onSubtitleSegment",e.length,e[0].lang,e[0].sn,e[e.length-1].sn,e[0].start,e[e.length-1].end),!e||0===e.length)return;const t={language:e[0].lang,url:e.map((e=>({id:e.sn,url:e.url,duration:e.duration,start:e.start,end:e.end})))};ce(t,this.currentText)&&this.updateSubTitle(t)}_onCoreSeiintime(e){try{const t=e.time/1e3;this._log("_onCoreSeiintime sei",t,this.seiTime,this.lastSeiTime),this.seiTime=t,this.lastSeiTime=this.player?this.player.currentTime:0}catch{}}resize(e,t){const{baseSizeX:n,baseSizeY:r,minMobileSize:i,minSize:o,fitVideo:a,offsetBottom:s}=this.config,{scale:u}=this._videoMeta;this._videoMeta.lwidth=e,this._videoMeta.lheight=t;let c,l=0;t/e*100>=u?(l=parseInt(u*e,10)/100,c=e):(l=t,c=parseInt(t/u*100,10)),this._videoMeta.vWidth=c,this._videoMeta.vHeight=l;let f=0,h=0;u>120?(f=r,h=parseInt(f*l/1080,10)):(f=n,h=parseInt(f*c/1920,10));const d=Ee?i:o;h=h<d?d:h>f?f:h;const p={fontSize:h},v=parseInt((t-l)/2,10),g=parseInt((e-c)/2,10),y=parseInt(l*s,10)/100;this._videoMeta.vBottom=v,this._videoMeta.vLeft=g,this._videoMeta.marginBottom=y,a&&(p.bottom=v+y,p.left=p.right=g),Object.keys(p).map((e=>{this.root.style[e]=`${p[e]}px`})),this.emit("resize",{vLeft:g,vBottom:v,marginBottom:y,vWidth:c,vHeight:l,fontSize:h,scale:u})}__startResize(e){const t=e.getBoundingClientRect(),{_videoMeta:n}=this,{width:r,height:i}=t;if(this._iId&&(clearTimeout(this._iId),this._iId=null),r>0&&i>0&&(r!==n.lwidth||i!==n.lheight))this._iC=0,this.resize(r,i);else{if(this._iC>=5)return void(this._iC=0);this._iC++,this._iId=setTimeout((()=>{this.__startResize(e)}),50)}}__removeByTime(e,t){const n=[];for(let r=0;r<e.length;r++)(!t||e[r].end<t)&&n.push(r);0!==n.length&&(e.splice(n[0],n.length),this.config.domRender&&this.__remove(n))}__remove(e){if(!e||e.length<1)return;this._log(">>>>_renderByWords__remove",e);const t=this.innerRoot.children,n=[];for(let r=0;r<t.length;r++){const i=Number(t[r].getAttribute("data-index"));e.includes(i)&&n.push(t[r])}n.map((e=>{this.innerRoot.removeChild(e)}))}__render(e=[]){const{renderMode:t,domRender:n}=this.config;e.length>0&&n&&e.forEach((e=>{let n=`text-track-${this.config.line}`;e.text.forEach(((r,i)=>{i>0&&(n+=" text-track-deputy");const o={"data-start":e.start,"data-end":e.end,"data-index":e.index},a=ie("xg-text-track-span","",o,n);if(this.innerRoot.appendChild(a),"step"===t){const t=ie("xg-text-track-span","",o,`${n} text-track-space`);this.innerRoot.appendChild(t),t.innerHTML=r,window.setTimeout((()=>{this._renderByWords(a,i,e.start,e.end,r)}),600)}else a.innerHTML=r}))}))}_renderByWords(e,t,n,r,i){const o=document.createTextNode("");e.appendChild(o);const a=function(e){const t=e.split(""),n=[];let r=!1;for(let e=0;e<t.length;e++){const i=t[e];if(le(i))if(r){const e=n.length-1;n[e]=`${n[e]}${i}`}else n.push(i),r=!0;else if(i.match(/^[ ]*$/)||fe(i)||he(i)){r=!1;const e=n.length-1;n[e]=`${n[e]}${i}`}else r=!1,n.push(i)}return n}(i);let s=this._getPlayerCurrentTime(),u=parseInt(1e3*(r-s),10);if(s>=r)return;n>=s&&(s=n),u>300&&(u-=50);const c={dom:o,ids:t,wordList:a,interval:u/a.length,start:s,end:r,duration:u,lastTime:0};this._log(">>>>_renderByWords",u,c);const{_curRenderTask:l}=this;let f=-1;for(let e=0;e<l.length;e++)if(l[e].ids===t){f=e;break}f>-1&&l.slice(f,1),l.push(c),this.startRender(-1)}stopRender(){this._renderIntervalId&&window.cancelAnimationFrame(this._renderIntervalId)}show(){var e,t;this.config.domRender&&(t="text-track-hide",(e=this.root)&&(e.classList?t.split(/\s+/g).forEach((t=>{e.classList.remove(t)})):te(e,t)&&t.split(/\s+/g).forEach((t=>{const n=new RegExp("(\\s|^)"+t+"(\\s|$)");if(e.className&&"object"==typeof e.className){const t=e.getAttribute("class")||"";e.setAttribute("class",t.replace(n," "))}else e.className=e.className.replace(n," ")}))))}hide(){this.config.domRender&&(ne(this.root,"text-track-hide"),this.innerRoot.innerHTML="")}emit(e,t,...n){super.emit(e,t,...n)}on(e,t,...n){super.on(e,t,...n)}once(e,t,...n){super.once(e,t,...n)}off(e,t,...n){super.off(e,t,...n)}offAll(){super.removeAllListeners()}get marginBottom(){const{bottom:e,marginBottom:t}=this._videoMeta;return this.config.fitVideo?e+t:t}}const Oe="change",Ie="update",Ae="reset",Le="error";class Ce{constructor(e){this.handlerEvent=e=>{e.type,this.emit("subtitle_event",e)},this.list=[],e.subTitlesList&&e.subTitlesList.forEach((e=>{this.list.push(e)})),this.player=null,this.xgSubtitle=new De({subTitles:this.list,domRender:!1,defaultOpen:e.defaultOpen,updateMode:e.updateMode||"vod",debugger:!!e.debugger,renderMode:"normal"}),this.bindEvent()}bindEvent(){this.on(Oe,this.handlerEvent),this.on("on",this.handlerEvent),this.on(Ie,this.handlerEvent),this.on(Ae,this.handlerEvent),this.on(Le,this.handlerEvent)}unBindEvents(){this.off(Oe,this.handlerEvent),this.off(Ie,this.handlerEvent),this.off(Ae,this.handlerEvent),this.off(Le,this.handlerEvent),this.off("on",this.handlerEvent)}attach(e){var t,n;null==(t=this.xgSubtitle)||t.detachPlayer(),null==(n=this.xgSubtitle)||n.attachPlayer(e)}detach(){var e;null==(e=this.xgSubtitle)||e.detachPlayer()}destroy(){var e;this.unBindEvents(),null==(e=this.xgSubtitle)||e.destroy(),this.xgSubtitle=null}switch(e){var t,n;if(e)return null==(n=this.xgSubtitle)?void 0:n.switch(e).catch((e=>{console.error("switch error",e)}));null==(t=this.xgSubtitle)||t.switchOff()}switchOff(){var e;return null==(e=this.xgSubtitle)?void 0:e.switchOff()}setSubTitles(e,t=!1){var n;const r=e.map((e=>({...e})));null==(n=this.xgSubtitle)||n.setSubTitles(r,t)}emit(e,t,...n){var r;null==(r=this.xgSubtitle)||r.emit(e,t,...n)}on(e,t,...n){var r;null==(r=this.xgSubtitle)||r.on(e,t,...n)}once(e,t,...n){var r;null==(r=this.xgSubtitle)||r.on(e,t,...n)}off(e,t,...n){var r;null==(r=this.xgSubtitle)||r.off(e,t,...n)}offAll(){var e;this.unBindEvents(),null==(e=this.xgSubtitle)||e.offAll()}}},40263:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});const r="0.0.16"}}]);