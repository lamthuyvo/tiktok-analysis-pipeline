/*! For license information please see npm-async-bric_verify_sec_sdk_build_captcha_va.8f2435adf05d8196eb20.js.LICENSE.txt */
"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[241],{85583:(e,t,n)=>{n.r(t),n.d(t,{TTVerifyCenter:()=>Qs,close:()=>Ys,config:()=>Ws,getFp:()=>Zs,init:()=>Xs,render:()=>$s,transform:()=>ec});var i=function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n[r]=o[r])}return n},writable:!0,configurable:!0});var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function r(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var a,s,c=function(e){return e&&e.Math==Math&&e},u=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof o&&o)||function(){return this}()||Function("return this")(),l=Function.prototype,h=l.apply,f=l.bind,p=l.call,d="object"==typeof Reflect&&Reflect.apply||(f?p.bind(h):function(){return p.apply(h,arguments)}),g=Function.prototype,v=g.bind,m=g.call,_=v&&v.bind(m),y=v?function(e){return e&&_(m,e)}:function(e){return e&&function(){return m.apply(e,arguments)}},b=function(e){return"function"==typeof e},E=function(e){try{return!!e()}catch(e){return!0}},S=!E((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),w=Function.prototype.call,k=w.bind?w.bind(w):function(){return w.apply(w,arguments)},T={}.propertyIsEnumerable,D=Object.getOwnPropertyDescriptor,A=D&&!T.call({1:2},1)?function(e){var t=D(this,e);return!!t&&t.enumerable}:T,z={f:A},O=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},G=y({}.toString),R=y("".slice),I=function(e){return R(G(e),8,-1)},C=u.Object,M=y("".split),x=E((function(){return!C("z").propertyIsEnumerable(0)}))?function(e){return"String"==I(e)?M(e,""):C(e)}:C,B=u.TypeError,L=function(e){if(null==e)throw B("Can't call method on "+e);return e},U=function(e){return x(L(e))},P=function(e){return"object"==typeof e?null!==e:b(e)},N={},j=function(e){return b(e)?e:void 0},K=function(e,t){return arguments.length<2?j(N[e])||j(u[e]):N[e]&&N[e][t]||u[e]&&u[e][t]},V=y({}.isPrototypeOf),q=K("navigator","userAgent")||"",H=u.process,F=u.Deno,J=H&&H.versions||F&&F.version,W=J&&J.v8;W&&(s=(a=W.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!s&&q&&(!(a=q.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=q.match(/Chrome\/(\d+)/))&&(s=+a[1]);var X,$=s,Y=!!Object.getOwnPropertySymbols&&!E((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&$&&$<41})),Z=Y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Q=u.Object,ee=Z?function(e){return"symbol"==typeof e}:function(e){var t=K("Symbol");return b(t)&&V(t.prototype,Q(e))},te=u.String,ne=function(e){try{return te(e)}catch(e){return"Object"}},ie=u.TypeError,oe=function(e){if(b(e))return e;throw ie(ne(e)+" is not a function")},re=function(e,t){var n=e[t];return null==n?void 0:oe(n)},ae=u.TypeError,se=Object.defineProperty,ce="__core-js_shared__",ue=u[ce]||function(e,t){try{se(u,e,{value:t,configurable:!0,writable:!0})}catch(n){u[e]=t}return t}(ce,{}),le=r((function(e){(e.exports=function(e,t){return ue[e]||(ue[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.1",mode:"pure",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),he=u.Object,fe=function(e){return he(L(e))},pe=y({}.hasOwnProperty),de=Object.hasOwn||function(e,t){return pe(fe(e),t)},ge=0,ve=Math.random(),me=y(1..toString),_e=function(e){return"Symbol("+(void 0===e?"":e)+")_"+me(++ge+ve,36)},ye=le("wks"),be=u.Symbol,Ee=be&&be.for,Se=Z?be:be&&be.withoutSetter||_e,we=function(e){if(!de(ye,e)||!Y&&"string"!=typeof ye[e]){var t="Symbol."+e;Y&&de(be,e)?ye[e]=be[e]:ye[e]=Z&&Ee?Ee(t):Se(t)}return ye[e]},ke=u.TypeError,Te=we("toPrimitive"),De=function(e){var t=function(e,t){if(!P(e)||ee(e))return e;var n,i=re(e,Te);if(i){if(void 0===t&&(t="default"),n=k(i,e,t),!P(n)||ee(n))return n;throw ke("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,i;if("string"===t&&b(n=e.toString)&&!P(i=k(n,e)))return i;if(b(n=e.valueOf)&&!P(i=k(n,e)))return i;if("string"!==t&&b(n=e.toString)&&!P(i=k(n,e)))return i;throw ae("Can't convert object to primitive value")}(e,t)}(e,"string");return ee(t)?t:t+""},Ae=u.document,ze=P(Ae)&&P(Ae.createElement),Oe=function(e){return ze?Ae.createElement(e):{}},Ge=!S&&!E((function(){return 7!=Object.defineProperty(Oe("div"),"a",{get:function(){return 7}}).a})),Re=Object.getOwnPropertyDescriptor,Ie=S?Re:function(e,t){if(e=U(e),t=De(t),Ge)try{return Re(e,t)}catch(e){}if(de(e,t))return O(!k(z.f,e,t),e[t])},Ce={f:Ie},Me=/#|\.prototype\./,xe=function(e,t){var n=Le[Be(e)];return n==Pe||n!=Ue&&(b(t)?E(t):!!t)},Be=xe.normalize=function(e){return String(e).replace(Me,".").toLowerCase()},Le=xe.data={},Ue=xe.NATIVE="N",Pe=xe.POLYFILL="P",Ne=xe,je=y(y.bind),Ke=function(e,t){return oe(e),void 0===t?e:je?je(e,t):function(){return e.apply(t,arguments)}},Ve=u.String,qe=u.TypeError,He=function(e){if(P(e))return e;throw qe(Ve(e)+" is not an object")},Fe=u.TypeError,Je=Object.defineProperty,We=S?Je:function(e,t,n){if(He(e),t=De(t),He(n),Ge)try{return Je(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Fe("Accessors not supported");return"value"in n&&(e[t]=n.value),e},Xe={f:We},$e=S?function(e,t,n){return Xe.f(e,t,O(1,n))}:function(e,t,n){return e[t]=n,e},Ye=Ce.f,Ze=function(e){var t=function(n,i,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,i)}return new e(n,i,o)}return d(e,this,arguments)};return t.prototype=e.prototype,t},Qe=function(e,t){var n,i,o,r,a,s,c,l,h=e.target,f=e.global,p=e.stat,d=e.proto,g=f?u:p?u[h]:(u[h]||{}).prototype,v=f?N:N[h]||$e(N,h,{})[h],m=v.prototype;for(o in t)n=!Ne(f?o:h+(p?".":"#")+o,e.forced)&&g&&de(g,o),a=v[o],n&&(s=e.noTargetGet?(l=Ye(g,o))&&l.value:g[o]),r=n&&s?s:t[o],n&&typeof a==typeof r||(c=e.bind&&n?Ke(r,u):e.wrap&&n?Ze(r):d&&b(r)?y(r):r,(e.sham||r&&r.sham||a&&a.sham)&&$e(c,"sham",!0),$e(v,o,c),d&&(de(N,i=h+"Prototype")||$e(N,i,{}),$e(N[i],o,r),e.real&&m&&!m[o]&&$e(m,o,r)))},et=le("keys"),tt=function(e){return et[e]||(et[e]=_e(e))},nt=!E((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),it=tt("IE_PROTO"),ot=u.Object,rt=ot.prototype,at=nt?ot.getPrototypeOf:function(e){var t=fe(e);if(de(t,it))return t[it];var n=t.constructor;return b(n)&&t instanceof n?n.prototype:t instanceof ot?rt:null},st=u.String,ct=u.TypeError,ut=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return He(n),function(e){if("object"==typeof e||b(e))return e;throw ct("Can't set "+st(e)+" as a prototype")}(i),t?e(n,i):n.__proto__=i,n}}():void 0),lt=Math.ceil,ht=Math.floor,ft=function(e){var t=+e;return t!=t||0===t?0:(t>0?ht:lt)(t)},pt=Math.max,dt=Math.min,gt=Math.min,vt=function(e){return(t=e.length)>0?gt(ft(t),9007199254740991):0;var t},mt=function(e){return function(t,n,i){var o,r=U(t),a=vt(r),s=function(e,t){var n=ft(e);return n<0?pt(n+t,0):dt(n,t)}(i,a);if(e&&n!=n){for(;a>s;)if((o=r[s++])!=o)return!0}else for(;a>s;s++)if((e||s in r)&&r[s]===n)return e||s||0;return!e&&-1}},_t={includes:mt(!0),indexOf:mt(!1)},yt={},bt=_t.indexOf,Et=y([].push),St=function(e,t){var n,i=U(e),o=0,r=[];for(n in i)!de(yt,n)&&de(i,n)&&Et(r,n);for(;t.length>o;)de(i,n=t[o++])&&(~bt(r,n)||Et(r,n));return r},wt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],kt=wt.concat("length","prototype"),Tt=Object.getOwnPropertyNames||function(e){return St(e,kt)},Dt={f:Tt},At={f:Object.getOwnPropertySymbols},zt=y([].concat),Ot=K("Reflect","ownKeys")||function(e){var t=Dt.f(He(e)),n=At.f;return n?zt(t,n(e)):t},Gt=Object.keys||function(e){return St(e,wt)},Rt=S?Object.defineProperties:function(e,t){He(e);for(var n,i=U(t),o=Gt(t),r=o.length,a=0;r>a;)Xe.f(e,n=o[a++],i[n]);return e},It=K("document","documentElement"),Ct="prototype",Mt="script",xt=tt("IE_PROTO"),Bt=function(){},Lt=function(e){return"<"+Mt+">"+e+"</"+Mt+">"},Ut=function(e){e.write(Lt("")),e.close();var t=e.parentWindow.Object;return e=null,t},Pt=function(){try{X=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;Pt="undefined"!=typeof document?document.domain&&X?Ut(X):(t=Oe("iframe"),n="java"+Mt+":",t.style.display="none",It.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(Lt("document.F=Object")),e.close(),e.F):Ut(X);for(var i=wt.length;i--;)delete Pt[Ct][wt[i]];return Pt()};yt[xt]=!0;var Nt=Object.create||function(e,t){var n;return null!==e?(Bt[Ct]=He(e),n=new Bt,Bt[Ct]=null,n[xt]=e):n=Pt(),void 0===t?n:Rt(n,t)},jt=y("".replace),Kt=String(Error("zxcasd").stack),Vt=/\n\s*at [^:]*:[^\n]*/,qt=Vt.test(Kt),Ht={},Ft=we("iterator"),Jt=Array.prototype,Wt={};Wt[we("toStringTag")]="z";var Xt="[object z]"===String(Wt),$t=we("toStringTag"),Yt=u.Object,Zt="Arguments"==I(function(){return arguments}()),Qt=Xt?I:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Yt(e),$t))?n:Zt?I(t):"Object"==(i=I(t))&&b(t.callee)?"Arguments":i},en=we("iterator"),tn=function(e){if(null!=e)return re(e,en)||re(e,"@@iterator")||Ht[Qt(e)]},nn=u.TypeError,on=function(e,t,n){var i,o;He(e);try{if(!(i=re(e,"return"))){if("throw"===t)throw n;return n}i=k(i,e)}catch(e){o=!0,i=e}if("throw"===t)throw n;if(o)throw i;return He(i),n},rn=u.TypeError,an=function(e,t){this.stopped=e,this.result=t},sn=an.prototype,cn=function(e,t,n){var i,o,r,a,s,c,u,l,h=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),g=Ke(t,h),v=function(e){return i&&on(i,"normal",e),new an(!0,e)},m=function(e){return f?(He(e),d?g(e[0],e[1],v):g(e[0],e[1])):d?g(e,v):g(e)};if(p)i=e;else{if(!(o=tn(e)))throw rn(ne(e)+" is not iterable");if(void 0!==(l=o)&&(Ht.Array===l||Jt[Ft]===l)){for(r=0,a=vt(e);a>r;r++)if((s=m(e[r]))&&V(sn,s))return s;return new an(!1)}i=function(e,t){var n=arguments.length<2?tn(e):t;if(oe(n))return He(k(n,e));throw nn(ne(e)+" is not iterable")}(e,o)}for(c=i.next;!(u=k(c,i)).done;){try{s=m(u.value)}catch(e){on(i,"throw",e)}if("object"==typeof s&&s&&V(sn,s))return s}return new an(!1)},un=u.String,ln=function(e){if("Symbol"===Qt(e))throw TypeError("Cannot convert a Symbol value to a string");return un(e)},hn=!E((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",O(1,7)),7!==e.stack)})),fn=we("toStringTag"),pn=u.Error,dn=[].push,gn=function(e,t){var n,i=arguments.length>2?arguments[2]:void 0,o=V(vn,this);ut?n=ut(new pn,o?at(this):vn):(n=o?this:Nt(vn),$e(n,fn,"Error")),void 0!==t&&$e(n,"message",function(e,t){return void 0===e?arguments.length<2?"":t:ln(e)}(t)),hn&&$e(n,"stack",function(e,t){if(qt&&"string"==typeof e)for(;t--;)e=jt(e,Vt,"");return e}(n.stack,1)),function(e,t){P(t)&&"cause"in t&&$e(e,"cause",t.cause)}(n,i);var r=[];return cn(e,dn,{that:r}),$e(n,"errors",r),n};ut?ut(gn,pn):function(e,t,n){for(var i=Ot(t),o=Xe.f,r=Ce.f,a=0;a<i.length;a++){var s=i[a];de(e,s)||n&&de(n,s)||o(e,s,r(t,s))}}(gn,pn,{name:!0});var vn=gn.prototype=Nt(pn.prototype,{constructor:O(1,gn),message:O(1,""),name:O(1,"AggregateError")});Qe({global:!0},{AggregateError:gn});var mn=y(Function.toString);b(ue.inspectSource)||(ue.inspectSource=function(e){return mn(e)});var _n,yn,bn,En=ue.inspectSource,Sn=u.WeakMap,wn=b(Sn)&&/native code/.test(En(Sn)),kn="Object already initialized",Tn=u.TypeError,Dn=u.WeakMap;if(wn||ue.state){var An=ue.state||(ue.state=new Dn),zn=y(An.get),On=y(An.has),Gn=y(An.set);_n=function(e,t){if(On(An,e))throw new Tn(kn);return t.facade=e,Gn(An,e,t),t},yn=function(e){return zn(An,e)||{}},bn=function(e){return On(An,e)}}else{var Rn=tt("state");yt[Rn]=!0,_n=function(e,t){if(de(e,Rn))throw new Tn(kn);return t.facade=e,$e(e,Rn,t),t},yn=function(e){return de(e,Rn)?e[Rn]:{}},bn=function(e){return de(e,Rn)}}var In,Cn,Mn,xn={set:_n,get:yn,has:bn,enforce:function(e){return bn(e)?yn(e):_n(e,{})},getterFor:function(e){return function(t){var n;if(!P(t)||(n=yn(t)).type!==e)throw Tn("Incompatible receiver, "+e+" required");return n}}},Bn=Function.prototype,Ln=S&&Object.getOwnPropertyDescriptor,Un=de(Bn,"name"),Pn={EXISTS:Un,PROPER:Un&&"something"===function(){}.name,CONFIGURABLE:Un&&(!S||S&&Ln(Bn,"name").configurable)},Nn=function(e,t,n,i){i&&i.enumerable?e[t]=n:$e(e,t,n)},jn=we("iterator"),Kn=!1;[].keys&&("next"in(Mn=[].keys())?(Cn=at(at(Mn)))!==Object.prototype&&(In=Cn):Kn=!0);var Vn=null==In||E((function(){var e={};return In[jn].call(e)!==e}));In=Vn?{}:Nt(In),b(In[jn])||Nn(In,jn,(function(){return this}));var qn={IteratorPrototype:In,BUGGY_SAFARI_ITERATORS:Kn},Hn=Xt?{}.toString:function(){return"[object "+Qt(this)+"]"},Fn=Xe.f,Jn=we("toStringTag"),Wn=function(e,t,n,i){if(e){var o=n?e:e.prototype;de(o,Jn)||Fn(o,Jn,{configurable:!0,value:t}),i&&!Xt&&$e(o,"toString",Hn)}},Xn=qn.IteratorPrototype,$n=function(){return this},Yn=Pn.PROPER,Zn=qn.BUGGY_SAFARI_ITERATORS,Qn=we("iterator"),ei="keys",ti="values",ni="entries",ii=function(){return this},oi=function(e,t,n,i,o,r,a){!function(e,t,n){var i=t+" Iterator";e.prototype=Nt(Xn,{next:O(1,n)}),Wn(e,i,!1,!0),Ht[i]=$n}(n,t,i);var s,c,u,l=function(e){if(e===o&&g)return g;if(!Zn&&e in p)return p[e];switch(e){case ei:case ti:case ni:return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",f=!1,p=e.prototype,d=p[Qn]||p["@@iterator"]||o&&p[o],g=!Zn&&d||l(o),v="Array"==t&&p.entries||d;if(v&&(s=at(v.call(new e)))!==Object.prototype&&s.next&&(Wn(s,h,!0,!0),Ht[h]=ii),Yn&&o==ti&&d&&d.name!==ti&&(f=!0,g=function(){return k(d,this)}),o)if(c={values:l(ti),keys:r?g:l(ei),entries:l(ni)},a)for(u in c)(Zn||f||!(u in p))&&Nn(p,u,c[u]);else Qe({target:t,proto:!0,forced:Zn||f},c);return a&&p[Qn]!==g&&Nn(p,Qn,g,{name:o}),Ht[t]=g,c};Xe.f;var ri="Array Iterator",ai=xn.set,si=xn.getterFor(ri);oi(Array,"Array",(function(e,t){ai(this,{type:ri,target:U(e),index:0,kind:t})}),(function(){var e=si(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),Ht.Arguments=Ht.Array;var ci=u.Promise,ui=we("species"),li=u.TypeError,hi=we("iterator"),fi=!1;try{var pi=0,di={next:function(){return{done:!!pi++}},return:function(){fi=!0}};di[hi]=function(){return this},Array.from(di,(function(){throw 2}))}catch(Ir){}var gi=function(){},vi=[],mi=K("Reflect","construct"),_i=/^\s*(?:class|function)\b/,yi=y(_i.exec),bi=!_i.exec(gi),Ei=function(e){if(!b(e))return!1;try{return mi(gi,vi,e),!0}catch(e){return!1}},Si=function(e){if(!b(e))return!1;switch(Qt(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return bi||!!yi(_i,En(e))}catch(e){return!0}};Si.sham=!0;var wi,ki,Ti,Di,Ai=!mi||E((function(){var e;return Ei(Ei.call)||!Ei(Object)||!Ei((function(){e=!0}))||e}))?Si:Ei,zi=u.TypeError,Oi=we("species"),Gi=function(e,t){var n,i=He(e).constructor;return void 0===i||null==(n=He(i)[Oi])?t:function(e){if(Ai(e))return e;throw zi(ne(e)+" is not a constructor")}(n)},Ri=y([].slice),Ii=/(?:ipad|iphone|ipod).*applewebkit/i.test(q),Ci="process"==I(u.process),Mi=u.setImmediate,xi=u.clearImmediate,Bi=u.process,Li=u.Dispatch,Ui=u.Function,Pi=u.MessageChannel,Ni=u.String,ji=0,Ki={},Vi="onreadystatechange";try{wi=u.location}catch(Ir){}var qi=function(e){if(de(Ki,e)){var t=Ki[e];delete Ki[e],t()}},Hi=function(e){return function(){qi(e)}},Fi=function(e){qi(e.data)},Ji=function(e){u.postMessage(Ni(e),wi.protocol+"//"+wi.host)};Mi&&xi||(Mi=function(e){var t=Ri(arguments,1);return Ki[++ji]=function(){d(b(e)?e:Ui(e),void 0,t)},ki(ji),ji},xi=function(e){delete Ki[e]},Ci?ki=function(e){Bi.nextTick(Hi(e))}:Li&&Li.now?ki=function(e){Li.now(Hi(e))}:Pi&&!Ii?(Di=(Ti=new Pi).port2,Ti.port1.onmessage=Fi,ki=Ke(Di.postMessage,Di)):u.addEventListener&&b(u.postMessage)&&!u.importScripts&&wi&&"file:"!==wi.protocol&&!E(Ji)?(ki=Ji,u.addEventListener("message",Fi,!1)):ki=Vi in Oe("script")?function(e){It.appendChild(Oe("script"))[Vi]=function(){It.removeChild(this),qi(e)}}:function(e){setTimeout(Hi(e),0)});var Wi,Xi,$i,Yi,Zi,Qi,eo,to,no={set:Mi,clear:xi},io=/ipad|iphone|ipod/i.test(q)&&void 0!==u.Pebble,oo=/web0s(?!.*chrome)/i.test(q),ro=Ce.f,ao=no.set,so=u.MutationObserver||u.WebKitMutationObserver,co=u.document,uo=u.process,lo=u.Promise,ho=ro(u,"queueMicrotask"),fo=ho&&ho.value;fo||(Wi=function(){var e,t;for(Ci&&(e=uo.domain)&&e.exit();Xi;){t=Xi.fn,Xi=Xi.next;try{t()}catch(e){throw Xi?Yi():$i=void 0,e}}$i=void 0,e&&e.enter()},Ii||Ci||oo||!so||!co?!io&&lo&&lo.resolve?((eo=lo.resolve(void 0)).constructor=lo,to=Ke(eo.then,eo),Yi=function(){to(Wi)}):Ci?Yi=function(){uo.nextTick(Wi)}:(ao=Ke(ao,u),Yi=function(){ao(Wi)}):(Zi=!0,Qi=co.createTextNode(""),new so(Wi).observe(Qi,{characterData:!0}),Yi=function(){Qi.data=Zi=!Zi}));var po=fo||function(e){var t={fn:e,next:void 0};$i&&($i.next=t),Xi||(Xi=t,Yi()),$i=t},go=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=oe(t),this.reject=oe(n)},vo={f:function(e){return new go(e)}},mo=function(e,t){if(He(e),P(t)&&t.constructor===e)return t;var n=vo.f(e);return(0,n.resolve)(t),n.promise},_o=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},yo=function(){this.head=null,this.tail=null};yo.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var bo,Eo,So,wo=yo,ko="object"==typeof window,To=no.set,Do=we("species"),Ao="Promise",zo=xn.getterFor(Ao),Oo=xn.set,Go=xn.getterFor(Ao),Ro=ci&&ci.prototype,Io=ci,Co=Ro,Mo=u.TypeError,xo=u.document,Bo=u.process,Lo=vo.f,Uo=Lo,Po=!!(xo&&xo.createEvent&&u.dispatchEvent),No=b(u.PromiseRejectionEvent),jo="unhandledrejection",Ko=Ne(Ao,(function(){var e=En(Io),t=e!==String(Io);if(!t&&66===$)return!0;if(!Co.finally)return!0;if($>=51&&/native code/.test(e))return!1;var n=new Io((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Do]=i,!(n.then((function(){}))instanceof i)||!t&&ko&&!No})),Vo=Ko||!function(){if(!fi)return!1;var e,t=!1;try{var n={};n[hi]=function(){return{next:function(){return{done:t=!0}}}},e=n,Io.all(e).catch((function(){}))}catch(e){}return t}(),qo=function(e){var t;return!(!P(e)||!b(t=e.then))&&t},Ho=function(e,t){var n,i,o,r=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(a||(2===t.rejection&&$o(t),t.rejection=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),o=!0)),n===e.promise?u(Mo("Promise-chain cycle")):(i=qo(n))?k(i,n,c,u):c(n)):u(r)}catch(e){l&&!o&&l.exit(),u(e)}},Fo=function(e,t){e.notified||(e.notified=!0,po((function(){for(var n,i=e.reactions;n=i.get();)Ho(n,e);e.notified=!1,t&&!e.rejection&&Wo(e)})))},Jo=function(e,t,n){var i,o;Po?((i=xo.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),u.dispatchEvent(i)):i={promise:t,reason:n},!No&&(o=u["on"+e])?o(i):e===jo&&function(e,t){var n=u.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Wo=function(e){k(To,u,(function(){var t,n=e.facade,i=e.value;if(Xo(e)&&(t=_o((function(){Ci?Bo.emit("unhandledRejection",i,n):Jo(jo,n,i)})),e.rejection=Ci||Xo(e)?2:1,t.error))throw t.value}))},Xo=function(e){return 1!==e.rejection&&!e.parent},$o=function(e){k(To,u,(function(){var t=e.facade;Ci?Bo.emit("rejectionHandled",t):Jo("rejectionhandled",t,e.value)}))},Yo=function(e,t,n){return function(i){e(t,i,n)}},Zo=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Fo(e,!0))},Qo=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Mo("Promise can't be resolved itself");var i=qo(t);i?po((function(){var n={done:!1};try{k(i,t,Yo(Qo,n,e),Yo(Zo,n,e))}catch(t){Zo(n,t,e)}})):(e.value=t,e.state=1,Fo(e,!1))}catch(t){Zo({done:!1},t,e)}}};Ko&&(Io=function(e){!function(e,t){if(V(t,e))return e;throw li("Incorrect invocation")}(this,Co),oe(e),k(bo,this);var t=zo(this);try{e(Yo(Qo,t),Yo(Zo,t))}catch(e){Zo(t,e)}},Co=Io.prototype,(bo=function(e){Oo(this,{type:Ao,done:!1,notified:!1,parent:!1,reactions:new wo,rejection:!1,state:0,value:void 0})}).prototype=function(e,t,n){for(var i in t)Nn(e,i,t[i],n);return e}(Co,{then:function(e,t){var n=Go(this),i=Lo(Gi(this,Io));return n.parent=!0,i.ok=!b(e)||e,i.fail=b(t)&&t,i.domain=Ci?Bo.domain:void 0,0==n.state?n.reactions.add(i):po((function(){Ho(i,n)})),i.promise},catch:function(e){return this.then(void 0,e)}}),Eo=function(){var e=new bo,t=zo(e);this.promise=e,this.resolve=Yo(Qo,t),this.reject=Yo(Zo,t)},vo.f=Lo=function(e){return e===Io||e===So?new Eo(e):Uo(e)}),Qe({global:!0,wrap:!0,forced:Ko},{Promise:Io}),Wn(Io,Ao,!1,!0),function(e){var t=K(e),n=Xe.f;S&&t&&!t[ui]&&n(t,ui,{configurable:!0,get:function(){return this}})}(Ao),So=K(Ao),Qe({target:Ao,stat:!0,forced:Ko},{reject:function(e){var t=Lo(this);return k(t.reject,void 0,e),t.promise}}),Qe({target:Ao,stat:!0,forced:!0},{resolve:function(e){return mo(this===So?Io:this,e)}}),Qe({target:Ao,stat:!0,forced:Vo},{all:function(e){var t=this,n=Lo(t),i=n.resolve,o=n.reject,r=_o((function(){var n=oe(t.resolve),r=[],a=0,s=1;cn(e,(function(e){var c=a++,u=!1;s++,k(n,t,e).then((function(e){u||(u=!0,r[c]=e,--s||i(r))}),o)})),--s||i(r)}));return r.error&&o(r.value),n.promise},race:function(e){var t=this,n=Lo(t),i=n.reject,o=_o((function(){var o=oe(t.resolve);cn(e,(function(e){k(o,t,e).then(n.resolve,i)}))}));return o.error&&i(o.value),n.promise}}),Qe({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=vo.f(t),i=n.resolve,o=n.reject,r=_o((function(){var n=oe(t.resolve),o=[],r=0,a=1;cn(e,(function(e){var s=r++,c=!1;a++,k(n,t,e).then((function(e){c||(c=!0,o[s]={status:"fulfilled",value:e},--a||i(o))}),(function(e){c||(c=!0,o[s]={status:"rejected",reason:e},--a||i(o))}))})),--a||i(o)}));return r.error&&o(r.value),n.promise}});var er="No one promise resolved";Qe({target:"Promise",stat:!0},{any:function(e){var t=this,n=K("AggregateError"),i=vo.f(t),o=i.resolve,r=i.reject,a=_o((function(){var i=oe(t.resolve),a=[],s=0,c=1,u=!1;cn(e,(function(e){var l=s++,h=!1;c++,k(i,t,e).then((function(e){h||u||(u=!0,o(e))}),(function(e){h||u||(h=!0,a[l]=e,--c||r(new n(a,er)))}))})),--c||r(new n(a,er))}));return a.error&&r(a.value),i.promise}});var tr=!!ci&&E((function(){ci.prototype.finally.call({then:function(){}},(function(){}))}));Qe({target:"Promise",proto:!0,real:!0,forced:tr},{finally:function(e){var t=Gi(this,K("Promise")),n=b(e);return this.then(n?function(n){return mo(t,e()).then((function(){return n}))}:e,n?function(n){return mo(t,e()).then((function(){throw n}))}:e)}});var nr=y("".charAt),ir=y("".charCodeAt),or=y("".slice),rr=function(e){return function(t,n){var i,o,r=ln(L(t)),a=ft(n),s=r.length;return a<0||a>=s?e?"":void 0:(i=ir(r,a))<55296||i>56319||a+1===s||(o=ir(r,a+1))<56320||o>57343?e?nr(r,a):i:e?or(r,a,a+2):o-56320+(i-55296<<10)+65536}},ar=(rr(!1),rr(!0)),sr="String Iterator",cr=xn.set,ur=xn.getterFor(sr);oi(String,"String",(function(e){cr(this,{type:sr,string:ln(e),index:0})}),(function(){var e,t=ur(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=ar(n,i),t.index+=e.length,{value:e,done:!1})}));var lr=N.Promise,hr=we("toStringTag");for(var fr in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var pr=u[fr],dr=pr&&pr.prototype;dr&&Qt(dr)!==hr&&$e(dr,hr,fr),Ht[fr]=Ht.Array}var gr=lr,vr=function(){return vr=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vr.apply(this,arguments)};function mr(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function _r(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}var yr=["init","start","config","beforeDestroy","provide","beforeReport","report","beforeBuild","build","beforeSend","send","beforeConfig"],br=function(){return{}};function Er(e){return e}function Sr(e){return"object"==typeof e&&null!==e}var wr=Object.prototype;function kr(e){return"[object Array]"===wr.toString.call(e)}function Tr(e){return"number"==typeof e}function Dr(e){return"string"==typeof e}function Ar(e,t){if(!kr(e))return!1;if(0===e.length)return!1;for(var n=0;n<e.length;){if(e[n]===t)return!0;n++}return!1}var zr=function(e,t){if(!kr(e))return e;var n=e.indexOf(t);if(n>=0){var i=e.slice();return i.splice(n,1),i}return e};function Or(e){try{return Dr(e)?e:JSON.stringify(e)}catch(e){return"[FAILED_TO_STRINGIFY]:"+String(e)}}var Gr="".padStart?function(e,t){return void 0===t&&(t=8),e.padStart(t," ")}:function(e){return e},Rr=0,Ir=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,_r(["[SDK]",Date.now(),Gr(""+Rr++)],mr(e),!1))},Cr=0,Mr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,_r(["[SDK]",Date.now(),Gr(""+Cr++)],mr(e),!1))},xr=function(e){return Math.random()<Number(e)},Br=function(e,t){return e<Number(t)},Lr=function(e){return function(t){for(var n=t,i=0;i<e.length&&n;i++)try{n=e[i](n)}catch(e){Ir(e)}return n}};function Ur(){var e=function(){for(var e=new Array(16),t=0,n=0;n<16;n++)3&n||(t=4294967296*Math.random()),e[n]=t>>>((3&n)<<3)&255;return e}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);var i=0,o=t;return[o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]]].join("")}(e)}var Pr=function(){return Date.now()},Nr="custom",jr=function(e,t){var n=e.common||{};return n.sample_rate=t,e.common=n,e},Kr=function(e,t,n,i,o){return e?function(e){return function(){return e}}(o(i,t)):function(){return n(t)}},Vr=function(e,t){try{return"rule"===t.type?function(e,t,n,i){var o=function(e,t){for(var n,i=mr(t.split(".")),o=i[0],r=i.slice(1);e&&r.length>0;)e=e[o],o=(n=mr(r))[0],r=n.slice(1);if(e)return function(e,t){return e[t]}(e,o)}(e,t);if(void 0===o)return!1;var r=function(e){return"boolean"==typeof e}(o)?"bool":Tr(o)?"number":"string";return function(e,t,n){switch(n){case"eq":return Ar(t,e);case"neq":return!Ar(t,e);case"gt":return e>t[0];case"gte":return e>=t[0];case"lt":return e<t[0];case"lte":return e<=t[0];case"regex":return Boolean(e.match(new RegExp(t.join("|"))));case"not_regex":return!e.match(new RegExp(t.join("|")));default:return!1}}(o,function(e,t){return e.map((function(e){switch(t){case"number":return Number(e);case"boolean":return"1"===e;default:return String(e)}}))}(i,r),n)}(e,t.field,t.op,t.values):"and"===t.type?t.children.every((function(t){return Vr(e,t)})):t.children.some((function(t){return Vr(e,t)}))}catch(e){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){if(e)return e.__SLARDAR_REGISTRY__||(e.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),e.__SLARDAR_REGISTRY__.Slardar}(function(){if("object"==typeof window&&Sr(window))return window}());n&&(n.errors||(n.errors=[]),n.errors.push(e))}(e),!1}},qr={build:function(e){return{ev_type:e.ev_type,payload:e.payload,common:vr(vr({},e.extra||{}),e.overrides||{})}}},Hr=function(e){var t,n=e,i={},o=br,r=br;return{getConfig:function(){return n},setConfig:function(a){var s;return i=vr(vr({},i),a||{}),(s=vr(vr({},e),i)).sample=function(e,t){if(!e||!t)return e||t;var n=vr(vr({},e),t);return n.include_users=_r(_r([],mr(e.include_users||[]),!1),mr(t.include_users||[]),!1),n.rules=_r(_r([],mr(Object.keys(e.rules||{})),!1),mr(Object.keys(t.rules||{})),!1).reduce((function(n,i){var o,r;return i in n||(i in(e.rules||{})&&i in(t.rules||{})?(n[i]=vr(vr({},e.rules[i]),t.rules[i]),n[i].conditional_sample_rules=_r(_r([],mr(e.rules[i].conditional_sample_rules||[]),!1),mr(t.rules[i].conditional_sample_rules||[]),!1)):n[i]=(null===(o=e.rules)||void 0===o?void 0:o[i])||(null===(r=t.rules)||void 0===r?void 0:r[i])),n}),{}),n}(e.sample,i.sample),n=s,r(),t||(t=a,o()),n},onChange:function(e){r=e},onReady:function(e){o=e,t&&o()}}},Fr={sample_rate:1,include_users:[],sample_granularity:"session",rules:{}};function Jr(e){return vr({},e)}function Wr(e){return Sr(e)&&"bid"in e&&"transport"in e}function Xr(e){return vr({},e)}function $r(e){return function(e){var t,n=e.transport,i=e.endpoint,o=e.size,r=void 0===o?10:o,a=e.wait,s=void 0===a?1e3:a,c=[],u=0,l={getSize:function(){return r},getWait:function(){return s},setSize:function(e){r=e},setWait:function(e){s=e},getEndpoint:function(){return i},setEndpoint:function(e){i=e},send:function(e){c.push(e),c.length>=r&&h.call(this),clearTimeout(u),u=setTimeout(h.bind(this),s)},flush:function(){clearTimeout(u),h.call(this)},getBatchData:function(){return c.length?(e=c,JSON.stringify({ev_type:"batch",list:e})):"";var e},clear:function(){clearTimeout(u),c=[]},fail:function(e){t=e}};function h(){if(c.length){var e=this.getBatchData();n.post({url:i,data:e,fail:function(n){t&&t(n,e)}}),c=[]}}return l}(e)}var Yr=function(e,t){return void 0===t&&(t="/monitor_browser/collect/batch/"),(e&&e.indexOf("//")>=0?"":"https://")+e+t},Zr=function(e){return{bid:"",pid:"",viewId:"__"+Date.now(),userId:Ur(),deviceId:Ur(),sessionId:Ur(),domain:"mon-va.byteoversea.com",release:"",env:"production",sample:Fr,plugins:{},transport:{get:br,post:br}}},Qr=function(e){var t=void 0===e?{}:e,n=t.createSender,i=void 0===n?function(e){return $r({size:20,endpoint:Yr(e.domain),transport:e.transport})}:n,o=t.builder,r=void 0===o?qr:o,a=t.createDefaultConfig,s=function(e){var t,n,i=e.builder,o=e.createSender,r=e.createDefaultConfig,a=e.createConfigManager,s=e.userConfigNormalizer,c=e.initConfigNormalizer,u=e.validateInitConfig,l={};yr.forEach((function(e){return l[e]=[]}));var h=!1,f=!1,p=!1,d=[],g=[],v=function(){var e=!1,t={},n=function(e){e.length&&e.forEach((function(e){try{e()}catch(e){}})),e.length=0},i=function(e){t[e]&&t[e].forEach((function(e){n(e[1])})),t[e]=void 0};return{set:function(i,o,r){t[i]?t[i].push([o,r]):t[i]=[[o,r]],e&&n(r)},has:function(e){return!!t[e]},remove:i,removeByEvType:function(e){Object.keys(t).forEach((function(i){t[i]&&t[i].forEach((function(t){t[0]===e&&n(t[1])}))}))},clear:function(){e=!0,Object.keys(t).forEach((function(e){i(e)}))}}}(),m={getBuilder:function(){return i},getSender:function(){return t},getPreStartQueue:function(){return d},init:function(e){if(h)Mr("already inited");else{if(!(e&&Sr(e)&&u(e)))throw new Error("invalid InitConfig, init failed");var i=r(e);if(!i)throw new Error("defaultConfig missing");var s=c(e);if((n=a(i)).setConfig(s),n.onChange((function(){_("config")})),!(t=o(n.getConfig())))throw new Error("sender missing");h=!0,_("init",!0)}},set:function(e){h&&e&&Sr(e)&&(_("beforeConfig",!1,e),null==n||n.setConfig(e))},config:function(e){if(h)return e&&Sr(e)&&(_("beforeConfig",!1,e),null==n||n.setConfig(s(e))),null==n?void 0:n.getConfig()},provide:function(e,t){Ar(g,e)?Mr("cannot provide "+e+", reserved"):(m[e]=t,_("provide",!1,e))},start:function(){var e=this;h&&(f||null==n||n.onReady((function(){f=!0,_("start",!0),d.forEach((function(t){return e.build(t)})),d.length=0})))},report:function(e){if(e){var t=Lr(l.beforeReport)(e);if(t){var n=Lr(l.report)(t);n&&(f?this.build(n):d.push(n))}}},build:function(e){if(f){var t=Lr(l.beforeBuild)(e);if(t){var n=i.build(t);if(n){var o=Lr(l.build)(n);o&&this.send(o)}}}},send:function(e){if(f){var n=Lr(l.beforeSend)(e);n&&(t.send(n),_("send",!1,n))}},destroy:function(){v.clear(),p=!0,d.length=0,_("beforeDestroy",!0)},on:function(e,t){if("init"===e&&h||"start"===e&&f||"beforeDestroy"===e&&p)try{t()}catch(e){}else l[e]&&l[e].push(t)},off:function(e,t){l[e]&&(l[e]=zr(l[e],t))},destroyAgent:v};return g=Object.keys(m),m;function _(e,t){void 0===t&&(t=!1);for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];l[e].forEach((function(e){try{e.apply(void 0,_r([],mr(n),!1))}catch(e){}})),t&&(l[e].length=0)}}({validateInitConfig:Wr,initConfigNormalizer:Jr,userConfigNormalizer:Xr,createSender:i,builder:r,createDefaultConfig:void 0===a?Zr:a,createConfigManager:Hr});return function(e){var t=function(){var e={},t={},n={set:function(i,o){return e[i]=o,t[i]=Or(o),n},merge:function(i){return e=vr(vr({},e),i),Object.keys(i).forEach((function(e){t[e]=Or(i[e])})),n},delete:function(i){return delete e[i],delete t[i],n},clear:function(){return e={},t={},n},get:function(e){return t[e]},toString:function(){return vr({},t)}};return n}();e.provide("context",t),e.on("report",(function(e){return e.extra||(e.extra={}),e.extra.context=t.toString(),e}))}(s),function(e){e.on("beforeBuild",(function(t){return function(e,t){var n={};return n.bid=t.bid,n.pid=t.pid,n.view_id=t.viewId,n.user_id=t.userId,n.device_id=t.deviceId,n.session_id=t.sessionId,n.release=t.release,n.env=t.env,vr(vr({},e),{extra:vr(vr({},n),e.extra||{})})}(t,e.config())}))}(s),function(e){e.on("report",(function(t){return function(e,t){var n={url:"",protocol:"",domain:"",path:"",query:"",timestamp:Date.now(),sdk_version:t.version||"1.4.5",sdk_name:t.name||"SDK_BASE"};return vr(vr({},e),{extra:vr(vr({},n),e.extra||{})})}(t,e.config())}))}(s),function(e){e.on("init",(function(){var t=[],n=function(n){n.forEach((function(n){var i=n.name;Ar(t,i)||(t.push(i),n.setup(e),e.destroyAgent.set(i,i,[function(){t=zr(t,i),n.tearDown&&n.tearDown()}]))}))};e.provide("applyIntegrations",n);var i=e.config();i&&i.integrations&&n(i.integrations)}))}(s),s},ea=function(e){void 0===e&&(e={});var t=Qr(e);return function(e){e.on("start",(function(){var t=e.config(),n=function(e,t,n,i,o){if(!t)return Er;var r=t.sample_rate,a=t.include_users,s=t.sample_granularity,c=t.rules,u=t.r,l=void 0===u?Math.random():u;if(Ar(a,e))return function(e){return jr(e,1)};var h="session"===s,f=Kr(h,r,n,l,i),p=function(e,t,n,i,o,r){var a={};return Object.keys(e).forEach((function(s){var c=e[s],u=c.enable,l=c.sample_rate,h=c.conditional_sample_rules;u?(a[s]={enable:u,sample_rate:l,effectiveSampleRate:l*n,hit:Kr(t,l,i,o,r)},h&&(a[s].conditional_hit_rules=h.map((function(e){var a=e.sample_rate,s=e.filter;return{sample_rate:a,hit:Kr(t,a,i,o,r),effectiveSampleRate:a*n,filter:s}})))):a[s]={enable:u,hit:function(){return!1},sample_rate:0,effectiveSampleRate:0}})),a}(c,h,r,n,l,i);return function(e){var t;if(!f())return h&&o[0](),!1;if(!(e.ev_type in p))return jr(e,r);if(!p[e.ev_type].enable)return h&&o[1](e.ev_type),!1;if(null===(t=e.common)||void 0===t?void 0:t.sample_rate)return e;var n=p[e.ev_type],i=n.conditional_hit_rules;if(i)for(var a=0;a<i.length;a++)if(Vr(e,i[a].filter))return!!i[a].hit()&&jr(e,i[a].effectiveSampleRate);return n.hit()?jr(e,n.effectiveSampleRate):((!i||!i.length)&&h&&o[1](e.ev_type),!1)}}(t.userId,t.sample,xr,Br,[function(){e.destroy()},function(t){e.destroyAgent.removeByEvType(t)}]);e.on("build",n)}))}(t),function(e){e.provide("sendEvent",(function(t){var n=function(e){if(e&&Sr(e)&&e.name&&Dr(e.name)){var t={name:e.name,type:"event"};if("metrics"in e&&Sr(e.metrics)){var n=e.metrics,i={};for(var o in n)Tr(n[o])&&(i[o]=n[o]);t.metrics=i}if("categories"in e&&Sr(e.categories)){var r=e.categories,a={};for(var o in r)a[o]=Or(r[o]);t.categories=a}return t}}(t);n&&e.report({ev_type:Nr,payload:n,extra:{timestamp:Pr()}})})),e.provide("sendLog",(function(t){var n=function(e){if(e&&Sr(e)&&e.content&&Dr(e.content)){var t={content:Or(e.content),type:"log",level:"info"};if("level"in e&&(t.level=e.level),"extra"in e&&Sr(e.extra)){var n=e.extra,i={},o={};for(var r in n)Tr(n[r])?i[r]=n[r]:o[r]=Or(n[r]);t.metrics=i,t.categories=o}return t}}(t);n&&e.report({ev_type:Nr,payload:n,extra:{timestamp:Pr()}})}))}(t),t};ea();var ta,na="va",ia="s_v_web_id",oa="/vc/setting";!function(e){e[e.TIKTOK_NATIVE=1180]="TIKTOK_NATIVE",e[e.MUSICALLY_NATIVE=1233]="MUSICALLY_NATIVE",e[e.TIKTOK_LOGIN_WEB=1459]="TIKTOK_LOGIN_WEB",e[e.TIKTOK_LITE=1340]="TIKTOK_LITE",e[e.TIKTOK_MUSIC=310024]="TIKTOK_MUSIC",e[e.TIKTOK_MUSIC_2=378748]="TIKTOK_MUSIC_2",e[e.TIKTOK_MUSIC_3=314897]="TIKTOK_MUSIC_3",e[e.TIKTOK_OPEN_PLATFORM=2471]="TIKTOK_OPEN_PLATFORM",e[e.TIKTOK_LIVE_BACKSTAGE=6849]="TIKTOK_LIVE_BACKSTAGE",e[e.TIKTOK_SAFETY_ENFORCEMENT_TOOL=326738]="TIKTOK_SAFETY_ENFORCEMENT_TOOL",e[e.TIKTOK_ADS=1583]="TIKTOK_ADS",e[e.TIKTOK_SELLER_APP=7743]="TIKTOK_SELLER_APP",e[e.TIKTOK_MAGELLAN=4068]="TIKTOK_MAGELLAN",e[e.TIKTOK_MAGELLAN2=6556]="TIKTOK_MAGELLAN2",e[e.TIKTOK_WEB=1988]="TIKTOK_WEB",e[e.TIKTOK_BIZ_CENTER=2239]="TIKTOK_BIZ_CENTER",e[e.LEMON8_WEB=2538]="LEMON8_WEB",e[e.LEMON8_CPM=580075]="LEMON8_CPM"}(ta||(ta={}));var ra=function(e){return{aid:e.commonOptions.aid}},aa=function(){function e(){this.isInit=!1,this.pid="0",this.filename=""}return e.prototype.init=function(e,t){if(!this.isInit){this.isInit=!0,this.pid=String(e.aid),this.browserSlardar=ea();var n={transport:{get:function(){},post:function(e){var n=e.url,i=e.data;t(n,JSON.parse(i))}},bid:"verify_center_va",domain:"https://mon.tiktokv.com",pid:this.pid,release:"3.8.23",env:na,sample:{sample_rate:1,include_users:[],sample_granularity:"session",rules:{pageview:{enable:!0,sample_rate:.01},js_error:{enable:!0,sample_rate:1},resource_error:{enable:!0,sample_rate:.01},http:{enable:!0,sample_rate:.01},resource:{enable:!0,sample_rate:.01}}}};this.browserSlardar.init(n),this.browserSlardar.context.merge({belong:"hotsdk"})}},e.prototype.start=function(){var e=this;this.browserSlardar.start(),this.reportPageview(),window.addEventListener("error",(function(t){var n,i;"ErrorEvent"===(i=t,Object.prototype.toString.call(i).slice(8,-1))&&e.filename&&t.filename===e.filename&&e.reportJsError({message:null==t?void 0:t.message,stack:null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.stack,filename:null==t?void 0:t.filename})}),!0)},e.prototype.destroy=function(){this.browserSlardar.destroy()},e.prototype.reportPageview=function(){this.browserSlardar.report({ev_type:"pageview",payload:{pid:this.pid,source:"init"}})},e.prototype.reportJsError=function(e){this.browserSlardar.report({ev_type:"js_error",payload:{error:{name:"JS ERROR",message:e.message,stack:e.stack,filename:e.filename||this.filename},breadcrumbs:[]}})},e.prototype.reportHttp=function(e){this.browserSlardar.report({ev_type:"http",payload:{api:"xhr",request:{method:e.method,url:e.url},response:{status:e.status,is_custom_error:!1,timestamp:Date.now()},duration:e.duration}})},e.prototype.reportResourceError=function(e){this.browserSlardar.report({ev_type:"resource_error",payload:{type:"script",url:e}})},e.prototype.reportResource=function(e){this.browserSlardar.report({ev_type:"resource",payload:{entryType:"resource",name:e.url,duration:e.duration,startTime:e.startTime}})},e.prototype.setFileName=function(e){this.filename=e},e}(),sa=new aa,ca=function(e){var t=e.url,n=e.method,i=e.data,o=e.config;return new gr((function(r,a){var s=new XMLHttpRequest,c=Date.now(),u=function(){-1!==e.url.indexOf(oa)&&sa.reportHttp({url:t,method:n,duration:Date.now()-c,status:s.status})};s.onreadystatechange=function(){if(s.readyState===s.DONE){if(s.status>=200&&s.status<300){var e={},t=s.response||s.responseText,n=s.getResponseHeader("Content-Type")||s.getResponseHeader("content-type");if(n&&-1!==n.indexOf("application/json"))try{e=JSON.parse(t)}catch(e){}else e=t;setTimeout((function(){r(e)}),0)}else a(new TypeError("Network request failed, status: "+s.status));u()}},s.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed, occur error"))}),0),u()},s.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed, timeout"))}),0),u()},s.onabort=function(){setTimeout((function(){a(new DOMException("Aborted","AbortError"))}),0),u()};var l=t;if((null==o?void 0:o.params)&&(l=l+"?"+function(e){for(var t=Object.keys(e),n="",i=0;i<t.length;i++){var o=t[i],r=e[o],a=encodeURIComponent(o)+"="+encodeURIComponent(r);n=i>=1?n+"&"+a:a}return n}(o.params)),s.open(n,l,!0),(null==o?void 0:o.timeout)&&"number"==typeof o.timeout?s.timeout=o.timeout:s.timeout=5e3,null==o?void 0:o.headers)for(var h=o.headers,f=0,p=Object.keys(h);f<p.length;f++){var d=p[f];s.setRequestHeader(d,h[d])}(null==o?void 0:o.withCredentials)&&(s.withCredentials=o.withCredentials),"POST"===n.toUpperCase()&&i?s.send(JSON.stringify(i)):s.send(null)}))},ua=function(e,t,n){void 0===n&&(n={});var o=n.headers?i({"Content-Type":"application/json"},n.headers):{"Content-Type":"application/json"};return ca({url:e,method:"POST",data:t,config:i(i({},n),{headers:o})})},la=r((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function o(){}function r(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},o.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in r)r[c]&&(s+="; "+c,!0!==r[c]&&(s+="="+r[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},r=document.cookie?document.cookie.split("; "):[],a=0;a<r.length;a++){var s=r[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(i.read||i)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=r,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){r(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},e.exports=n()}));var ha=function(e){void 0===e&&(e={});var t=function(e){void 0===e&&(e={});var t=la.get(ia);return t&&0===t.indexOf("verify_")||(t=function(e){e="object"==typeof e?e:{};var t=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,n=Date.now().toString(36),i=[];i[8]=i[13]=i[18]=i[23]="_",i[14]="4";for(var o=0,r=void 0;o<36;o++)i[o]||(r=0|Math.random()*t,i[o]=e[19==o?3&r|8:r]);return"verify_"+n+"_"+i.join("")}(),n={path:"/"};return e.domain&&/^([a-z0-9-]+)?(\.[a-z0-9-]+)+$/.test(e.domain)&&(n.domain=e.domain),la.set(ia,t,n),t}(e)),t}(e);return t},fa=function(e,t){return ua(""+(e||"https://vcs-va.tiktokv.com")+oa+"?aid="+(null==t?void 0:t.aid),{},{headers:{"X-Setting-Flag":1}})},pa=function(){return(pa=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function da(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function ga(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(da(arguments[t]));return e}var va,ma,_a,ya=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var n=this;e&&t&&"function"==typeof t&&this.on(e,(function i(o){t(o),n.off(e,i)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,n){if(n){if(!e)return;-1!==this._cache.indexOf(n)?this._emit(e,t):(this._hooksCache.hasOwnProperty(n)||(this._hooksCache[n]={}),this._hooksCache[n].hasOwnProperty(e)||(this._hooksCache[n][e]=[]),this._hooksCache[n][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&ga(this._hooks[e]).forEach((function(e){try{e(t)}catch(e){}}))},e.prototype.set=function(e){e&&-1===this._cache.indexOf(e)&&this._cache.push(e)},e}(),ba=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},Ea=function(e){return Array.isArray(e)},Sa=(va=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){return va+=1}),wa=function(e){return function(e,t,n){if("string"==typeof e&&"number"==typeof n){var i,o=[];n=n<=25?n:n%25;var r=String.fromCharCode(n+97);i=e.split(r);for(var a=0;a<i.length;a++){var s=parseInt(i[a],n);s=1*s^64;var c=String.fromCharCode(s);o.push(c)}return o.join("")}}(e,0,25)},ka=function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},Ta=function(){var e=0;return["hidden","msHidden","webkitHidden"].forEach((function(t){void 0!==document[t]&&(e=1)})),e},Da=function(e){var t=document.createElement("a");return t.href=e,t},Aa=function(e){var t={};try{var n=Da(e).search;(n=n.slice(1)).split("&").forEach((function(e){var n,i,o=e.split("=");o.length&&(n=o[0],i=o[1]);try{t[n]=decodeURIComponent(void 0===i?"":i)}catch(e){t[n]=i}}))}catch(e){}return t},za=function(e,t){return function(e){var t;t=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function o(){}function r(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},o.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in r)r[c]&&(s+="; "+c,!0!==r[c]&&(s+="="+r[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},r=document.cookie?document.cookie.split("; "):[],a=0;a<r.length;a++){var s=r[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(i.read||i)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=r,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){r(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},e.exports=t()}(t={exports:{}}),t.exports}(),Oa=function(e,t){try{return za.get(e)}catch(e){return""}},Ga=function(e,t,n,i){try{var o=i||document.domain,r=+new Date+(n||6048e5);za.set(e,t,{expires:new Date(r),path:"/",domain:o})}catch(e){}},Ra=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e,t){return Oa(e)},e.prototype.setCookie=function(e,t,n,i){Ga(e,t,n,i)},e}(),Ia={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return Oa(e)},setCookie:function(e,t,n,i){Ga(e,t,n,i)},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},Ca={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||{}}catch(e){}return{}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return Oa(e)},setCookie:function(e,t,n,i){Ga(e,t,n,i)},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},Ma=function(){function e(e,t){this._storage=t&&"session"===t?Ca:!e&&Ia.isSupportLS?Ia:new Ra}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,i){this._storage.setCookie(e,t,n,i)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),xa=function(){function e(e,t,n){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=n}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,n=document.referrer,i=n?Da(n).hostname:"",o=Aa(window.location.href),r=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=function(e,t){var n=new Ma(!1,"session"),i=e?"_$utm_from_url_"+e:"_$utm_from_url",o={},r=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],a={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var s=!1;for(var c in a)a[c]&&(-1!==r.indexOf(c)?(o.hasOwnProperty("tracer_data")||(o.tracer_data={}),o.tracer_data[c]=a[c]):o[c]=a[c],s=!0);s&&n.setItem(i,"1"),n.getItem(i)&&(o.hasOwnProperty("tracer_data")||(o.tracer_data={}),o.tracer_data.$utm_from_url=1)}catch(e){return a}return o}(this.appid,o,this.domain,this.cookie_expire);var a=this.browser(),s=this.os();return{browser:a.browser,browser_version:a.browser_version,platform:r,os_name:s.os_name,os_version:s.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(s.os_name),language:t,referrer:n,referrer_host:i,utm:this.utm,latest_data:this.last(n,i)}},e.prototype.last=function(e,t){var n="",i="",o="",r=location.hostname,a=!1;if(e&&t&&r!==t){n=e,i=t,a=!0;var s=Aa(e);s.keyword&&(o=s.keyword)}return{$latest_referrer:n,$latest_referrer_host:i,$latest_search_keyword:o,isLast:a}},e.prototype.browser=function(){var e,t,n="",i=""+parseFloat(this.appVersion),o=this.userAgent;return-1!==o.indexOf("Edge")||-1!==o.indexOf("Edg")?(n="Microsoft Edge",-1!==o.indexOf("Edge")?(e=o.indexOf("Edge"),i=o.substring(e+5)):(e=o.indexOf("Edg"),i=o.substring(e+4))):-1!==(e=o.indexOf("MSIE"))?(n="Microsoft Internet Explorer",i=o.substring(e+5)):-1!==(e=o.indexOf("Lark"))?(n="Lark",i=o.substring(e+5,e+11)):-1!==o.indexOf("Chrome")?-1!==(e=o.indexOf("TTWebView"))?(n="TTWebView",i=o.substring(e+10,e+23)):(-1!==(e=o.indexOf("Chrome"))||-1!==(e=o.indexOf("Chrome")))&&(n="Chrome",i=o.substring(e+7)):-1!==o.indexOf("Safari")?-1!==(e=o.indexOf("Safari"))&&(n="Safari",i=o.substring(e+7),-1!==(e=o.indexOf("Version"))&&(i=o.substring(e+8))):-1!==(e=o.indexOf("Firefox"))&&(n="Firefox",i=o.substring(e+8)),-1!==(t=i.indexOf(";"))&&(i=i.substring(0,t)),-1!==(t=i.indexOf(" "))&&(i=i.substring(0,t)),-1!==(t=i.indexOf(")"))&&(i=i.substring(0,t)),{browser:n,browser_version:i}},e.prototype.os=function(){for(var e="",t="",n=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"ChromeOS",r:/CrOS/},{s:"Linux",r:/(Linux|X11)/},{s:"Sun OS",r:/SunOS/}],i=0;i<n.length;i++){var o=n[i];if(o.r.test(this.userAgent)){"Mac OS X"===(e=o.s)&&this.isNewIpad()&&(e="iOS");break}}var r,a,s=function(e,t){var n=e.exec(t);return n&&n[1]?n[1]:""},c=function(e,t){var n=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return n?n.slice(1)[0]:""};switch(/Windows/.test(e)&&(t=s(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(a=s(/Android ([\.\_\d]+)/,r=this.userAgent))||(a=s(/Android\/([\.\_\d]+)/,r)),t=a,e="android";break;case"iOS":t=this.isNewIpad()?c("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios";break;case"chromeOS":var u=this.userAgent.indexOf("x86_64");t=this.userAgent.substring(u+7,u+16)}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{if("android"===e)navigator.userAgent.split(";").forEach((function(e){e.indexOf("Build/")>-1&&(t=e.slice(0,e.indexOf("Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var n=navigator.userAgent.replace("Mozilla/5.0 (",""),i=n.indexOf(";");t=n.slice(0,i)}}catch(e){return t.trim()}return t.trim()},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),Ba={sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},La={va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},Ua={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z21z1ez4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",in:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z24z18z49z23z21z1cz18z21z22z4ez18z4az22z1gz1iz22z1mz1iz24z4az1az1mz1k",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"},Pa={sg:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz25z4az23z21",va:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az22z1gz1iz22z1mz1iz24z4az23z21",ie:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4az22z1gz1iz22z1mz1iz25z4az1cz23",ie2:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z49z1gz1cz4ez4az22z1gz1iz22z1mz1iz25z4az1cz23"};!function(e){e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.DestoryInstance="destory-instance",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.AbTimeout="ab-timeout",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready",e.sessionRecord="session-record",e.SessionRecordStart="session-record-start",e.SessionRecordPause="session-record-pause",e.SessionRecordEnd="session-record-end",e.SessionRecordReport="session-record-report",e.VisualCollectReady="visual-collect-ready",e.VisualApiReady="visual-api-ready",e.VisualApiUpdate="visual-api-update"}(ma||(ma={})),function(e){e.DEBUGGER_MESSAGE="debugger-message",e.DEBUGGER_MESSAGE_SDK="debugger-message-sdk",e.DEBUGGER_MESSAGE_FETCH="debugger-message-fetch",e.DEBUGGER_MESSAGE_FETCH_RESULT="debugger-message-fetch-result",e.DEBUGGER_MESSAGE_EVENT="debugger-message-event",e.DEVTOOL_WEB_READY="devtool-web-ready"}(_a||(_a={}));var Na,ja=ma,Ka=void 0,Va=(new Date).getTimezoneOffset(),qa=parseInt(""+-Va/60,10),Ha=60*Va,Fa=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var n=new xa(t.app_id,t.cookie_domain||"",t.cookie_expire||6048e5).init(),i="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new Ma(!1,"session"),this.localStorage=new Ma(!1,"local"),this.channelUrl="tcpy"===t.channel_type||"ttp"===t.channel_type?{WEBID_URL:"/v1/user/webid",TOB_URL:"",REPORT_URL:"/v1/list"}:{WEBID_URL:"/webid",TOB_URL:"/tobid",REPORT_URL:"/list"},t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var o=this.localStorage.getItem(i);o&&1==o?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(i,"1")),this.envInfo={user:{user_unique_id:Ka,user_type:Ka,user_id:Ka,user_is_auth:Ka,user_is_login:Ka,device_id:Ka,web_id:Ka,ip_addr_id:Ka,user_unique_id_type:Ka},header:{app_id:Ka,app_name:Ka,app_install_id:Ka,install_id:Ka,app_package:Ka,app_channel:Ka,app_version:Ka,ab_version:Ka,os_name:n.os_name,os_version:n.os_version,device_model:n.device_model,ab_client:Ka,traffic_type:Ka,client_ip:Ka,device_brand:Ka,os_api:Ka,access:Ka,language:n.language,region:Ka,app_language:Ka,app_region:Ka,creative_id:n.utm.creative_id,ad_id:n.utm.ad_id,campaign_id:n.utm.campaign_id,log_type:Ka,rnd:Ka,platform:n.platform,sdk_version:"5.3.1_oversea",sdk_lib:"js",province:Ka,city:Ka,timezone:qa,tz_offset:Ha,tz_name:Ka,sim_region:Ka,carrier:Ka,resolution:n.screen_width+"x"+n.screen_height,browser:n.browser,browser_version:n.browser_version,referrer:n.referrer,referrer_host:n.referrer_host,width:n.screen_width,height:n.screen_height,screen_width:n.screen_width,screen_height:n.screen_height,utm_term:n.utm.utm_term,utm_content:n.utm.utm_content,utm_source:n.utm.utm_source,utm_medium:n.utm.utm_medium,utm_campaign:n.utm.utm_campaign,tracer_data:JSON.stringify(n.utm.tracer_data),custom:{}}},this.ab_version="",this.ab_uuid_cache={},this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(n),this.initDomain(),this.initABData()}return e.prototype.initDomain=function(e){var t=this.initConfig.channel_domain;if(t)this.domain=t;else{var n=e||this.initConfig.channel,i=this.initConfig&&this.initConfig.channel_type?"tcpy"===this.initConfig.channel_type?Ua[n]:Pa[n]:Ba[n];i||(console.warn("current channel: "+n+" is not exist, use va instead, please check!!!!"),i=Ba.sg),this.domain=wa(i)}},e.prototype.setDomain=function(e){this.customDomain=!0,this.domain=e},e.prototype.getDomain=function(e){return this.customDomain||e&&this.initDomain(e),this.domain},e.prototype.initABData=function(){var e,t="__tea_sdk_ab_version_"+this.initConfig.app_id;e=this.localStorage.getItem(t),this.setAbCache(e)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.clearAbCache=function(){this.ab_cache={},this.ab_version=""},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.setAbUuidCache=function(e,t){var n=t||this.envInfo.user.user_unique_id;this.ab_uuid_cache[""+n]||(this.ab_uuid_cache[""+n]=[]),-1===this.ab_uuid_cache[""+n].indexOf(e)&&this.ab_uuid_cache[""+n].push(e)},e.prototype.getAbUuidCache=function(e){return this.ab_uuid_cache[""+e]},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.channelUrl.REPORT_URL;break;case"webid":t=this.channelUrl.WEBID_URL;break;case"tobid":t=this.channelUrl.TOB_URL}var n="";return this.initConfig.caller&&(n="?sdk_version=5.3.1_oversea&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+n},e.prototype.setCustom=function(e){if(e&&e.latest_data&&e.latest_data.isLast)for(var t in delete e.latest_data.isLast,this.isLast=!0,e.latest_data)this.envInfo.header.custom[t]=e.latest_data[t]},e.prototype.setAppid=function(e){this.envInfo.header.app_id=e},e.prototype.set=function(e){var t=this;Object.keys(e).forEach((function(n){if(void 0!==e[n]&&null!==e[n]||t.delete(n),"traffic_type"===n&&t.isLast&&(t.envInfo.header.custom.$latest_traffic_source_type=e[n]),"evtParams"===n)t.evtParams=pa(pa({},t.evtParams||{}),e.evtParams||{});else if("_staging_flag"===n)t.evtParams=pa(pa({},t.evtParams||{}),{_staging_flag:e._staging_flag});else if("reportErrorCallback"===n&&"function"==typeof e[n])t.reportErrorCallback=e[n];else{var i="",o="";if(n.indexOf(".")>-1){var r=n.split(".");i=r[0],o=r[1]}i?"user"===i||"header"===i?t.envInfo[i][o]=e[n]:t.envInfo.header.custom[o]=e[n]:Object.hasOwnProperty.call(t.envInfo.user,n)?["user_type","ip_addr_id"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?Number(e[n]):e[n]:["user_id","web_id","user_unique_id","user_unique_id_type"].indexOf(n)>-1?t.envInfo.user[n]=e[n]?String(e[n]):e[n]:["user_is_auth","user_is_login"].indexOf(n)>-1?t.envInfo.user[n]=Boolean(e[n]):"device_id"===n&&(t.envInfo.user[n]=e[n]):Object.hasOwnProperty.call(t.envInfo.header,n)?t.envInfo.header[n]=e[n]:t.envInfo.header.custom[n]=e[n]}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:Object.hasOwnProperty.call(this.envInfo.user,e)?this.envInfo.user[e]:Object.hasOwnProperty.call(this.envInfo.header,e)?this.envInfo.header[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e){console.log("get config stringify error "),this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&Object.keys(e).length){var n=Object.assign(e,t);this.storage.setItem(this.configKey,n)}}catch(e){console.log("setStore error"),this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey)||{};return e&&Object.keys(e).length?e:null}catch(e){return this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"}),null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};t&&Object.hasOwnProperty.call(t,e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"}),console.log("delete error")}},e}(),Ja=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog&&console.log("%c %s","color: yellow; background-color: black;","[Tea instance: "+this.name+"] "+e)},e.prototype.warn=function(e){this.isLog&&console.warn("%c %s","color: #4D1B00; background-color: #FF7D00;","[Tea instance: "+this.name+"] "+e)},e.prototype.error=function(e){this.isLog&&console.error("%c %s","color: #FFF; background-color: #F53F3F;","[Tea instance: "+this.name+"] "+e)},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),Wa=function(){function e(){this.spiderBot=["Baiduspider","googlebot","360Spider","haosouspider","YoudaoBot","Yisouspider","Googlebot","Headless","Applebot","Bingbot","PetalBot"]}return e.prototype.checkSpider=function(e){if(!e.enable_spider)return!1;var t=window.navigator.userAgent;if(!t)return!0;var n=!1;return this.spiderBot.forEach((function(e){-1!==t.indexOf(e)&&(n=!0)})),n},e}(),Xa=function(){function e(e,t){this.collect=e,this.native=t}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&(AppLogBridge?(console.log("AppLogBridge is injected"),!0):(console.log("AppLogBridge is not inject"),!1))}catch(e){return console.log("AppLogBridge is not inject"),!1}},t.bridgeReady=function(){var e=this;return new Promise((function(t,n){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){console.log("AppLogBridge is started? : "+e),e?t(!0):n(!1)})):n(!1)}catch(e){console.log("AppLogBridge, error:"+JSON.stringify(e.stack)),n(!1)}}))},t.setNativeAppId=function(e){try{AppLogBridge.setNativeAppId(JSON.stringify(e)),console.log("change bridge appid, event report with appid: "+e)}catch(e){console.error("setNativeAppId error")}},t.setConfig=function(e){var t=this;try{Object.keys(e).forEach((function(n){"user_unique_id"===n?t.setUserUniqueId(e[n]):e[n]?t.addHeaderInfo(n,e[n]):t.removeHeaderInfo(n)}))}catch(e){console.error("setConfig error")}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){console.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){console.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e){console.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){console.error("removeHeaderInfo error")}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t),this.collect.emit(DebuggerMesssge.DEBUGGER_MESSAGE,{type:DebuggerMesssge.DEBUGGER_MESSAGE_EVENT,info:"bridge report success",time:Date.now(),data:[{events:[{event:e,params:t}]}],code:200,status:"success"})}catch(e){console.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){console.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){console.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){console.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){console.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){console.error("profileAppend error")}},e}(),$a=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.cacheStorgae=new Ma(!0),this.localStorage=new Ma(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=t.report_url||this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.refer_key="__tea_cache_refer_"+this.configManager.get("app_id"),this.collect.on(ja.Ready,(function(){n.reportAll(!1)})),this.collect.on(ja.ConfigDomain,(function(){n.reportUrl=n.configManager.getUrl("event")})),this.collect.on(ja.Event,(function(e){n.event(e)})),this.collect.on(ja.BeconEvent,(function(e){n.beconEvent(e)})),this.collect.on(ja.CleanEvents,(function(){n.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e=this;window.addEventListener("unload",(function(){e.reportAll(!0)}),!1),ka((function(){e.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;if(!this.collect.destroy&&!this.collect.sdkStop)try{var n=ga(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,n),this.reportTimeout&&clearTimeout(this.reportTimeout),n.length>=this.maxReport)this.report(!1);else{var i=this.reportTime;this.reportTimeout=setTimeout((function(){t.report(!1),t.reportTimeout=null}),i)}}catch(e){this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e){if(!this.collect.destroy&&!this.collect.sdkStop){var t=ga(e,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,t),this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))}},e.prototype.reportBecon=function(){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))}},e.prototype.report=function(e){if(!this.collect.destroy&&!this.collect.sdkStop&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var n=0;n<e.length;n+=this.eventLimit){var i;i=e.slice(n,n+this.eventLimit);var o=this.split(this.merge(i));this.send(o,t)}else o=this.split(this.merge(e)),this.send(o,t)},e.prototype.handleRefer=function(){var e="";try{if(this.config.spa||this.config.autotrack){var t=this.localStorage.getItem(this.refer_key)||{};e=t.routeChange?t.refer_key:this.configManager.get("referrer")}else e=this.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.merge=function(e,t){var n=this,i=this.configManager.get(),o=i.header,r=i.user;o.custom=JSON.stringify(o.custom),o.referrer=this.handleRefer();var a=this.configManager.get("evtParams"),s=this.configManager.get("user_unique_id_type"),c=[];try{var u=e.filter((function(e){try{Object.keys(a).length&&!t&&(e.params=pa(pa({},a),e.params)),s&&(e.params.$user_unique_id_type=s);var i=n.configManager.getAbCache(),o=r[n.config.ab_user_mode]||r.user_unique_id,c=n.configManager.getAbUuidCache(o);if(i&&i.uuid&&i.uuid===o){var u=n.configManager.getAbVersion();if(n.config.enable_ab_uuid){if(c&&c.length){var l=c.join(",");u&&u.includes(l)&&(e.ab_sdk_version=u)}}else u&&(e.ab_sdk_version=u)}return e.session_id=n.collect.sessionManager.getSessionId(),e.params=JSON.stringify(e.params),e}catch(t){return console.warn("filter merge event: "+(e&&e.event)+" error, pls check",t&&t.message),n.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Merge Event Something Error",level:"error",time:Date.now(),data:t.message,infoType:"sdk"}),!1}})),l=JSON.parse(JSON.stringify({events:u,user:r,header:o}));l.local_time=Math.floor(Date.now()/1e3),l.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0,l.verbose=1,c.push(l)}catch(e){console.warn("event merge error, pls check",e&&e.message)}return c},e.prototype.split=function(e){return e.map((function(e){var t=[];return t.push(e),t}))},e.prototype.send=function(e,t){var n=this;e.length&&(this.config.disable_track_event||e.forEach((function(e){try{var i=JSON.parse(JSON.stringify(e));n.config.filter&&((i=n.config.filter(i))||console.warn("filter must return data !!")),n.collect.eventFilter&&i&&((i=n.collect.eventFilter(i))||console.warn("filterEvent api must return data !!"));var o=i||e,r=JSON.parse(JSON.stringify(o));if(!o.length)return;var a=!0;if(o.forEach((function(e){e.events.length||(a=!1)})),!a)return;n.collect.emit(ja.SubmitBefore,o),n.collect.emit(ja.SubmitVerify,o),n.collect.requestManager.useRequest({url:n.reportUrl,data:o,success:function(e,t){e&&0!==e.e?(n.collect.emit(ja.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}),n.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_EVENT,info:"Event Report Fail",time:Date.now(),data:r,code:e.e,failType:"event data error",status:"fail"})):(n.collect.emit(ja.SubmitScuess,{eventData:t,res:e}),n.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_EVENT,info:"Event Report Success",time:Date.now(),data:r,code:200,status:"success"}))},fail:function(e,t){n.configManager.get("reportErrorCallback")(e,t),n.collect.emit(ja.SubmitError,{type:"f_net",eventData:e,errorCode:t}),n.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_EVENT,info:"Event Report Network Fail",time:Date.now(),data:r,code:t,failType:"network error",status:"fail"})},timeout:n.timeout,useBeacon:!n.config.disable_sendbeacon&&t,withCredentials:n.enable_ttwebid}),n.collect.emit(ja.SubmitAfter,o)}catch(e){console.warn("something error, "+JSON.stringify(e.stack)),n.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Report Event Something Error",level:"error",time:Date.now(),data:e.message})}})))},e}(),Ya=function(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}().replace(/-/g,"").slice(0,19)},Za=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new Ma(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(ja.ConfigUuid,(function(e){n.setUuid(e)})),this.collect.on(ja.ConfigWebId,(function(e){n.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;this.cacheToken=this.storage.getItem(this.tokenKey)||{},this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(ja.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(ja.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:Ya(),user_unique_id:this.configManager.get("user_unique_id")||Ya()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e=window.navigator.userAgent;if(-1!==e.indexOf("miniProgram")||-1!==e.indexOf("MiniProgram")){var t=Aa(window.location.href);return!(!t||!t.Web_ID||(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),0))}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),n={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch WebID Request",logType:"fetch",level:"info",time:Date.now(),data:n});var i=Ya();this.collect.requestManager.useRequest({url:t,data:n,success:function(t){var n;t&&0===t.e?(n=t.web_id,e.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Success",logType:"fetch",level:"info",time:Date.now(),data:t})):(n=i,e.collect.configManager.set({localWebId:i}),e.collect.emit(ja.TokenError),e.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Data Error, Use LocalId",logType:"fetch",level:"warn",time:Date.now(),data:t}),e.collect.logger.warn("appid: "+e.config.app_id+" get webid error, use local webid~")),e.complete({web_id:e.configManager.get("web_id")||n,user_unique_id:e.configManager.get("user_unique_id")||n})},fail:function(){e.complete({web_id:e.configManager.get("web_id")||i,user_unique_id:e.configManager.get("user_unique_id")||i}),e.collect.configManager.set({localWebId:i}),e.collect.emit(ja.TokenError),e.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"Fetch WebID Request Network Fail, Use LocalId",logType:"fetch",level:"error",time:Date.now(),data:null}),e.collect.logger.warn("appid: "+e.config.app_id+", get webid error, use local webid~")},timeout:3e5})},e.prototype.complete=function(e){var t=e.web_id,n=e.user_unique_id;e.timestamp=Date.now(),this.collect.configManager.set({web_id:t,user_unique_id:n}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK UserInfo Complete",logType:"info",secType:"USER",level:"info",time:Date.now(),data:{web_id:t,user_unique_id:n},infoType:"sdk"}),this.collect.emit(ja.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",n=this.configManager.get("user_unique_id");(n||t)&&this.configManager.set({user_unique_id:n||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(ja.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),n=this.configManager.get("user_unique_id"),i=this.cacheToken&&this.cacheToken.user_unique_id;if(t===n&&t===i)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(ja.TokenChange,"uuid"),this.collect.emit(ja.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken)),this.collect.emit(ja.TokenReset))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=Date.now();var t=this.configManager.get("web_id"),n=this.configManager.get("user_unique_id");n&&n!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(ja.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(ja.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setStorage=function(e){e._type_=this.enableCustomWebid?"custom":"default",delete e["diss".split("").reverse().join("")],this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this;return new Promise((function(t){if("tcpy"!==e.config.channel_type&&"ttp"!==e.config.channel_type){var n={app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")};e.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch GetToken Request",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"}),e.collect.requestManager.useRequest({url:e.configManager.getUrl("tobid"),data:n,success:function(n){n&&0===n.e?(t(n.tobid),e.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Success",logType:"fetch",level:"info",time:Date.now(),data:n,infoType:"sdk"})):(t(""),e.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Fail",logType:"fetch",level:"error",time:Date.now(),data:n,infoType:"sdk"}))},fail:function(){t(""),e.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"Fetch GetToken Request Network Error",logType:"fetch",level:"error",time:Date.now(),infoType:"sdk"})},time:3e4,withCredentials:e.enable_ttwebid})}else t("")}))},e}(),Qa=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},es=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;this.collect=e,this.storage=new Ma(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSessionTimeCheck=t.disable_session_check,this.disableSession||(this.setSessionId(),this.collect.on(ja.SessionReset,(function(e){n.resetSessionId(e)})),this.collect.on(ja.SessionResetTime,(function(){n.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;Date.now()-t>this.expireTime?e={sessionId:Qa(),timestamp:Date.now()}:e.timestamp=Date.now(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:Qa(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.disableSessionTimeCheck||(this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(e){var t={sessionId:e||Qa(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,t)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:Qa(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),ts=function(){function e(e,t){this.collector=e,this.config=t,this.requestType=t.request_type,this.supportBeacon=!(!window.navigator||!window.navigator.sendBeacon),this.errorCode={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},this.customHeader=t.custom_request_header||{}}return e.prototype.useFetch=function(e){var t=e.url,n=e.data,i=e.method,o=e.success,r=e.fail,a={"Content-Type":"application/json; charset=utf-8"};if(Object.keys(this.customHeader).length)for(var s in this.customHeader)a[s]=this.customHeader[s];window.fetch?fetch(t,{method:i||"POST",headers:a,body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){o&&o(e)})).catch((function(e){r&&r(n,e)})):(this.requestType="xhr",console.log("your brwoser not support fetch, use xhr"),this.useRequest({url:t,data:n,method:i,success:o,fail:r}))},e.prototype.useBeacon=function(e){var t=e.url,n=e.data,i=e.success,o=e.fail;"xhr"!==this.requestType?window.navigator.sendBeacon(t,JSON.stringify(n))?i&&i():o&&o(n,this.errorCode.BEACON_FALSE):this.useXhr(e)},e.prototype.useXhr=function(e){var t=this,n=e.url,i=e.data,o=e.method,r=e.success,a=e.fail,s=e.timeout,c=e.withCredentials,u=e.app_key;try{var l=new XMLHttpRequest,h=o||"POST";if(l.open(h,""+n,!0),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),u&&l.setRequestHeader("X-MCS-AppKey",""+u),Object.keys(this.customHeader).length)for(var f in this.customHeader)l.setRequestHeader(f,this.customHeader[f]);c&&(l.withCredentials=!0),s&&(l.timeout=s,l.ontimeout=function(){a&&a(i,t.errorCode.TIMEOUT)}),l.onload=function(){if(r){var e=null;if(l.responseText){try{e=JSON.parse(l.responseText)}catch(t){e={}}r(e,i)}}},l.onerror=function(){l.abort(),a&&a(i,t.errorCode.XHR_ON)},l.send(JSON.stringify(i))}catch(e){}},e.prototype.useRequest=function(e){var t=e.useBeacon,n=e.forceXhr;if("xhr"===this.requestType)this.useXhr(e);else{if(t&&this.supportBeacon)return void this.useBeacon(e);if("fetch"===this.requestType&&!n)return void this.useFetch(e);this.useXhr(e)}},e}(),ns=function(){function e(e,t){if(this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,t.enable_debug&&"Microsoft Internet Explorer"!==e.configManager.get("browser")){this.collect=e,this.config=t,this.app_id=t.app_id;var n=e.adapters.storage;this.cacheStorgae=new n(!1),this.loadUrl=t.devtool_url||"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/devtool/debug-web.v2.0.0.js",this.filterEvent=new Set(["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append","predefine_page_alive","predefine_page_close","abtest_exposure"]),this.load()}}return e.prototype.loadScript=function(e){try{var t=document.createElement("script");t.src=e,t.onerror=function(){console.log("load DevTool render fail")},t.onload=function(){console.log("load DevTool render success")},document.getElementsByTagName("body")[0].appendChild(t)}catch(e){console.log("devTool load fail, "+e.message)}},e.prototype.parseUrl=function(){var e={};try{var t=window.location.href.split("?")[1].split("&");t.length&&t.forEach((function(t){var n=t.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}))}catch(e){}return e},e.prototype.load=function(){try{var e=this.parseUrl();if(e.open_devtool_web&&e.app_id){if(parseInt(e.app_id)!==this.app_id)return}else if(!this.getStorage())return;this.loadBaseInfo(),this.loadHook(),this.setStorage(),this.addLintener(),this.loadDebuggerModule(),this.loadDevTool()}catch(e){console.log("debug fail, "+e.message)}},e.prototype.getStorage=function(){var e=this.cacheStorgae.getItem("__applog_open_devtool_web");return e&&parseInt(e)===this.app_id},e.prototype.setStorage=function(){this.cacheStorgae.setItem("__applog_open_devtool_web",this.app_id)},e.prototype.loadDevTool=function(){this.loadScript(this.loadUrl)},e.prototype.loadBaseInfo=function(){if(this.log=[],this.event=[],this.info=[{title:"BaseInfo",key:"base",type:1,content:[{name:"app_id",desc:"APPID",value:this.config.app_id},{name:"channel",desc:"CHANNEL",value:this.config.channel},{name:"domain",desc:"Domain",value:this.collect.configManager.getDomain()},{name:"sdk_version",desc:"SDK Version",value:"5.3.1_oversea"},{name:"sdk_type",desc:"SDK Import Type",value:"npm"}]},{title:"UserInfo",key:"user",type:2,content:[{name:"uuid",desc:"UserUniqueId",value:this.collect.configManager.get("user").user_unique_id||""},{name:"web_id",desc:"WEB_ID",value:this.collect.configManager.get("user").web_id||""}]},{title:"CommonInfo",type:2,key:"common",content:[{name:"browser",desc:"Browser",value:this.collect.configManager.get("browser")},{name:"browser_version",desc:"Browser Version",value:this.collect.configManager.get("browser_version")},{name:"platform",desc:"Platform",value:this.collect.configManager.get("platform")},{name:"device_model",desc:"Devide Model",value:this.collect.configManager.get("device_model")},{name:"os_name",desc:"Os Name",value:this.collect.configManager.get("os_name")},{name:"os_version",desc:"Os Version",value:this.collect.configManager.get("os_version")},{name:"resolution",desc:"Screen Resolution",value:this.collect.configManager.get("resolution")},{name:"referrer",desc:"Referrer",value:this.collect.configManager.get("referrer")},{name:"custom",desc:"Custom Info",value:JSON.stringify(this.collect.configManager.get("custom"))}]},{title:"Config Info",key:"config",type:3,content:[{name:"autotrack",desc:"AutoTrackEvent",value:!!this.config.autotrack},{name:"stay",desc:"StayDuration",value:!!this.config.enable_stay_duration}]},{title:"A/B Config Info",key:"ab",type:4,content:[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test}]}],this.config.enable_ab_test){var e=this.getInfo("ab"),t=[{name:"ab",desc:"A/BTester",value:!!this.config.enable_ab_test},{name:"vid",desc:"A/B VID",value:this.collect.configManager.getAbVersion()},{name:"ab_domain",desc:"Domain",value:this.config.ab_channel_domain||wa(La[this.config.channel])},{name:"all_values",desc:"A/B ALL Values",value:this.collect.configManager.getAbCache()}];e.content=t,this.setInfo("ab",e)}},e.prototype.getInfo=function(e){var t=null;return this.info.forEach((function(n){n.key===e&&(t=n)})),t},e.prototype.setInfo=function(e,t){var n=!1;this.info.forEach((function(i){i.key===e&&(n=!0,i=t)})),n||this.info.push(t)},e.prototype.getSecondInfo=function(e,t){var n=this.getInfo(e),i=null;return n.content.forEach((function(e){e.name===t&&(i=e)})),i},e.prototype.setSecondInfo=function(e,t,n){var i=this.getInfo(e);i.content.forEach((function(e){e.name===t&&(e.value=n)})),this.setInfo(e,i)},e.prototype.loadHook=function(){var e=this;this.collect.on(_a.DEBUGGER_MESSAGE,(function(t){switch(t.type){case _a.DEBUGGER_MESSAGE_SDK:var n={time:t.time,type:t.logType||"sdk",infoType:t.infoType||"sdk",level:t.level,name:t.info,show:!0,levelShow:!0,needDesc:!!t.data};return t.data&&(n.desc={content:JSON.stringify(t.data)}),e.updateLog(n),t.secType&&"AB"===t.secType?(e.setSecondInfo("ab","vid",e.collect.configManager.getAbVersion()),e.setSecondInfo("ab","all_values",e.collect.configManager.getAbCache())):"USER"===t.secType&&(e.setSecondInfo("user","uuid",e.collect.configManager.get("user").user_unique_id),e.setSecondInfo("user","web_id",e.collect.configManager.get("user").web_id)),void e.updateInfo();case _a.DEBUGGER_MESSAGE_EVENT:if(t.data&&t.data.length){var i=t.data[0],o=i.events;if(!o.length)return;o.forEach((function(n){n.checkShow=!0,n.searchShow=!0,n.focusShow=!0,n.status=t.status,n.type=e.filterEvent.has(n.event)?"sdk":"cus",n.verifyType=t.verifyType?"verify":"no",n.info="","fail"===t.status&&(n.info={message:"code: "+t.code+"ï¼ msg: "+(t.msg||t.failType)})})),e.updateEvent(i)}return}}))},e.prototype.addLintener=function(){var e=this;window.addEventListener("message",(function(t){if(t&&t.data&&"devtool:web:ready"===t.data.type){if(e.devToolOrigin=t.origin,e.devToolReady=!0,e.sendAlready)return;e.sendData("devtool:web:init",{info:e.info,log:e.log,event:e.event,sdk_type:"5.3.1_oversea".includes("tob")?"tob":"inner",appId:e.app_id}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getToken((function(t){e.setSecondInfo("user","sid",t.tobid),e.updateInfo()}))}))},e.prototype.sendData=function(e,t){try{var n={type:e,payload:t};window&&window.postMessage(n,this.devToolOrigin)}catch(e){}},e.prototype.updateInfo=function(){this.devToolReady&&this.sendData("devtool:web:info",this.info)},e.prototype.updateLog=function(e){this.devToolReady?this.sendData("devtool:web:log",e):this.log.push(e)},e.prototype.updateEvent=function(e){this.devToolReady?this.sendData("devtool:web:event",e):this.event.push(e)},e.prototype.loadDebuggerModule=function(){var e="#debugger-applog-web {\n      position: fixed;\n      width: 45px;\n      height: 45px;\n      background-image: url("+wa("1fz22z22z1nz21z4mz4bz4bz1jz1dz49z1az1bz1lz49z22z1mz21z4az19z27z22z1cz21z1az1kz4az1az1mz1kz4bz1mz19z1hz4bz21z22z18z22z1gz1az4bz1jz1mz1ez49z21z1bz1iz4bz1az1mz1jz1jz1cz1az22z4bz1bz1cz24z22z1mz1mz1jz4bz18z1nz1nz1jz1mz1ez4az1nz1lz1e")+");\n      bottom: 5%;\n      right: 10%;\n      cursor: pointer;\n      z-index:100;\n      background-size: 45px;\n    }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.appendChild(document.createTextNode(e)),t.appendChild(n);var i=document.createElement("div");i.innerHTML='<div id="debugger-applog-web" class="debugger-applog-web"></div>';var o=document.createElement("div");o.innerHTML='<div id="debugger-container" class="debugger-container"></div>',document.getElementsByTagName("body")[0].appendChild(i),document.getElementsByTagName("body")[0].appendChild(o);var r=document.getElementById("debugger-applog-web");r&&r.addEventListener("click",(function(){window&&window.postMessage({type:"devtool:web:open-draw"},location.origin)}))},e}(),is={autotrack:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/autotrack.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/ab.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/ab.js"},object:"LogAb"},stay:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/stay.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/stay.js"},object:"LogStay"},route:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/route.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/route.js"},object:"LogRoute"},tracer:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/tracer.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/tracer.js"},object:"LogTracer"},retry:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/retry.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/retry.js"},object:"LogRetry"},visual:{src:{sg:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-sg/log-sdk/collect/5/plugin/visual.js",va:"https://lf-global-static.iapplogcdn.com/obj/applog-sdk-static-us/log-sdk/collect/5/plugin/visual.js"},object:"LogVisual"}},os=["ab","autotrack","Stay","store","et","profile","cep","heartbeat","monitor","route","tracer"],rs=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroy=!1,this.sdkReady=!1,this.adapters={},this.loadType="base",this.sdkStop=!1,this.name=e,this.hook=new ya,this.remotePlugin=new Map,this.Types=ja,this.adapters.storage=Ma,this.loadType="full"}return e.usePlugin=function(t,n,i){if(n){for(var o=!1,r=0,a=e.plugins.length;r<a;r++)if(e.plugins[r].name===n){e.plugins[r].plugin=t,e.plugins[r].options=i||{},o=!0;break}o||e.plugins.push({name:n,plugin:t,options:i})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,n){e&&("full"===this.loadType&&os.includes(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:n}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var n,i,o=this;try{n=JSON.parse(JSON.stringify(t))}catch(e){n=t}if(this.logger=new Ja(this.name,n.log),this.inited)this.logger.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!");else if(n&&ba(n))if(n.app_id&&"number"==typeof(i=n.app_id)&&!isNaN(i))if(!n.app_key||function(e){return"string"==typeof e}(n.app_key)){var r=["sg","va","in","ie","ie2"];n.channel_domain||-1!==r.indexOf(n.channel)||(this.logger.warn("your channel: "+n.channel+" is not exist. channel must be one of "+r.join(",")+", use sg instead, please check!!!"),n.channel="sg"),this.spider=new Wa,this.spider.checkSpider(n)?this.logger.warn("The current environment may be a spider, can not report!"):(this.appBridge=new Xa(this,n.enable_native),this.requestManager=new ts(this,n),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new Fa(this,n),this.debugger=new ns(this,n),this.initConfig=n,this.emit(ja.Init),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Init",data:n,level:"info",time:Date.now(),infoType:"cus"}),n.disable_auto_pv&&(this.disableAutoPageView=!0),this.bridgeReport||(this.configManager.setAppid(n.app_id),this.eventManager=new $a,this.tokenManager=new Za,this.sessionManager=new es,Promise.all([new Promise((function(e){o.once(ja.TokenComplete,(function(){e(!0)}))})),new Promise((function(e){o.once(ja.Start,(function(){e(!0)}))}))]).then((function(){try{e.plugins.reduce((function(e,t){var n=t.plugin,i=t.options,r=Object.assign(o.initConfig,i);o.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Load "+t.name+" Plugin",level:"info",time:Date.now(),infoType:"sdk"});var a=new n;return a.apply(o,r),e.push(a),e}),o.pluginInstances)}catch(e){console.warn("load plugin error, "+e.message),o.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Load Plugin Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}o.sdkReady=!0,o.emit(ja.Ready),o.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Initialization Completed",time:Date.now(),level:"info",secType:"USER",data:o.configManager.get("user"),infoType:"sdk"}),o.logger.info("appid: "+n.app_id+", userInfo:"+JSON.stringify(o.configManager.get("user"))),o.logger.info("appid: "+n.app_id+", sdk is ready, version is 5.3.1_oversea, you can report now !!!"),n.disable_auto_pv&&(o.disableAutoPageView=!0);try{("full"===o.loadType&&n.enable_ab_test||n.autotrack)&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){o.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}o.pageView(),o.on(ja.TokenChange,(function(e){"webid"===e&&o.pageView(),o.logger.info("appid: "+n.app_id+" token change, new userInfo:"+JSON.stringify(o.configManager.get("user"))),o.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Set UserInfo",time:Date.now(),secType:"USER",level:"info",data:o.configManager.get("user"),infoType:"sdk"})})),o.on(ja.TokenReset,(function(){o.logger.info("appid: "+n.app_id+" token reset, new userInfo:"+JSON.stringify(o.configManager.get("user"))),o.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Reset UserInfo",time:Date.now(),secType:"USER",level:"info",data:o.configManager.get("user"),infoType:"sdk"})})),o.on(ja.RouteChange,(function(e){e.init||n.disable_route_report||o.pageView()}))})),this.tokenManager.apply(this,n),this.eventManager.apply(this,n),this.sessionManager.apply(this,n)),this.inited=!0)}else this.logger.warn("app_key param is error, must be string, please check!");else this.logger.warn("app_id param is error, must be number, please check!");else this.logger.warn("init params error,please check")},e.prototype.config=function(e){if(this.inited)if(e&&ba(e)){var t;try{t=JSON.parse(JSON.stringify(t))}catch(n){t=e}if(this.bridgeReport)this.appBridge.setConfig(t);else{t._staging_flag&&1===t._staging_flag&&(this.staging=!0),t.disable_auto_pv&&(this.disableAutoPageView=!0,delete t.disable_auto_pv);var n=pa({},t);if(this.initConfig&&this.initConfig.configPersist){var i=this.configManager.getStore();i&&(n=Object.assign(i,t)),this.configManager.setStore(t)}n.web_id,n.user_unique_id;var o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&(n[i[o]]=e[i[o]])}return n}(n,["web_id","user_unique_id"]);n.hasOwnProperty("web_id")&&this.emit(ja.ConfigWebId,n.web_id),n.hasOwnProperty("user_unique_id")&&this.emit(ja.ConfigUuid,n.user_unique_id),this.configManager.set(o),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Config",level:"info",time:Date.now(),data:n,infoType:"cus"})}}else console.warn("config params is error, please check");else console.warn("config must be use after function init")},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(ja.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(ja.Start),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Start",level:"info",time:Date.now(),infoType:"cus"}),this.bridgeReport&&(this.pageView(),this.emit(ja.Ready)))},e.prototype.event=function(e,t){var n=this;try{var i=[];if(Array.isArray(e))e.forEach((function(e){var t=n.processEvent(e[0],e[1]||{});t&&i.push(t)}));else{var o=this.processEvent(e,t);if(!o)return;i.push(o)}this.bridgeReport?i.forEach((function(e){var t=e.event,i=e.params;n.appBridge.onEventV3(t,JSON.stringify(i))})):i.length&&(this.emit(ja.Event,i),this.emit(ja.SessionResetTime)),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event",level:"info",time:Date.now(),data:e,infoType:"cus"})}catch(e){this.logger.warn("something error, please check"),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Event Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.beconEvent=function(e,t){if(Array.isArray(e))this.logger.warn("beconEvent not support batch report, please check");else{var n=[],i=this.processEvent(e,t||{});i&&(n.push(i),n.length&&(this.emit(ja.BeconEvent,n),this.emit(ja.SessionResetTime)),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute Beacon Event",level:"info",time:Date.now(),data:e,infoType:"sdk"}))}},e.prototype.beaconEvent=function(e,t){this.beconEvent(e,t)},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{if(!e)return console.warn("eventName is nullï¼ please check"),null;var n=e;/^event\./.test(e)&&(n=e.slice(6));var i=t;"object"!=typeof i&&(i={}),i.profile?delete i.profile:i.event_index=Sa();var o=void 0;return i.local_ms?(o=i.local_ms,delete i.local_ms):o=+new Date,{event:n,params:i,local_time_ms:o,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(n){return this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:n.message,infoType:"sdk"}),{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,n){this.hook.emit(e,t,n)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.stop=function(){this.sdkStop=!0},e.prototype.reStart=function(){this.sdkStop=!1},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){if(void 0===e&&(e={}),this.inited){var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+(this.configManager&&this.configManager.is_first_time||!1)},n=pa(pa({},t),e);this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Report PV",level:"info",time:Date.now(),infoType:"sdk"}),this.event("predefine_pageview",n)}else console.warn("predefinePageView should call after init")},e.prototype.clearEventCache=function(){this.emit(ja.CleanEvents)},e.prototype.setWebId=function(e){this.config({web_id:""+e})},e.prototype.setNativeAppId=function(e){this.bridgeReport&&this.appBridge.setNativeAppId(e)},e.prototype.getSessionId=function(){return Qa()},e.prototype.setSessionId=function(e){this.emit(ja.SessionReset,e)},e.prototype.resetStayDuration=function(e,t,n){this.emit(ja.ResetStay,{url_path:e,title:t,url:n},ja.Stay)},e.prototype.resetStayParams=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.emit(ja.SetStay,{url_path:e,title:t,url:n},ja.Stay)},e.prototype.getToken=function(e,t){var n=this;if(this.inited){var i=!1,o=function(t){if(!i){i=!0;var o=n.configManager.get().user;return t&&(o.tobid=t,o["diss".split("").reverse().join("")]=t),e(pa({},o))}},r=function(){n.tokenManager.getTobId().then((function(e){o(e)}))};this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute GetToken",level:"info",time:Date.now(),infoType:"cus"}),this.sdkReady?r():(t&&setTimeout((function(){o()}),t),this.on(ja.Ready,(function(){r()})))}else console.warn("predefinePageView should call after init")},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(ja.ProfileSet,e,ja.Profile),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSet",level:"info",time:Date.now(),data:e})},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(JSON.stringify(e)):this.emit(ja.ProfileSetOnce,e,ja.Profile),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileSetOnce",level:"info",time:Date.now(),data:e})},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(JSON.stringify(e)):this.emit(ja.ProfileIncrement,e,ja.Profile),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(ja.ProfileUnset,e,ja.Profile),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(JSON.stringify(e)):this.emit(ja.ProfileAppend,e,ja.Profile),this.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute profileAppend",level:"info",time:Date.now(),data:e})},e.prototype.setExternalAbVersion=function(e){this.emit(ja.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,ja.Ab)},e.prototype.getVar=function(e,t,n,i){this.emit(ja.AbVar,{name:e,defaultValue:t,callback:n,uuid:i},ja.Ab)},e.prototype.getABconfig=function(e,t){this.emit(ja.AbConfig,{params:e,callback:t},ja.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(ja.AbVersionChangeOn,e,ja.Ab),function(){t.emit(ja.AbVersionChangeOff,e,ja.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(ja.AbVersionChangeOff,e,ja.Ab)},e.prototype.openOverlayer=function(){this.emit(ja.AbOpenLayer,"",ja.Ab)},e.prototype.closeOverlayer=function(){this.emit(ja.AbCloseLayer,"",ja.Ab)},e.prototype.getAllVars=function(e){this.emit(ja.AbAllVars,e,ja.Ab)},e.prototype.destoryInstace=function(){this.destroy||(this.destroy=!0,this.off(ja.TokenComplete),this.emit(ja.DestoryInstance))},e.prototype.destroyInstance=function(){this.destroy||(this.destroy=!0,this.off(ja.TokenComplete),this.emit(ja.DestoryInstance))},e.plugins=[],e}(),as="__rangers_ab_style__";!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(Na||(Na={}));var ss=function(){function e(){this.fetchStatus="no",this.refreshFetchStatus="no",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data={},this.changeListener=new Map,this.readyStatus=!1,this.exposureCache=[]}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_ab_test){var i=t.enable_multilink,o=t.ab_channel_domain,r=t.enable_ab_visual,a=t.ab_cross,s=t.ab_cookie_domain,c=t.ab_timeout,u=t.disable_auto_ab,l=La[t.channel||"sg"]||La.sg,h=o||wa(l),f=e.adapters.storage;this.cacheStorgae=new f(!1),this.timeout=c||3e3,this.enable_multilink=i,this.enable_ab_visual=r,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.ab_cross=a,this.ab_cookie_domain=s||"",this.fetchUrl=h+"/service/2/abtest_config/",this.reportUrl=this.collect.configManager.getUrl("event"),this.exposureLimit=t.exposure_limit||20,this.ab_batch_time=t.ab_batch_time||500,this.ab_user_mode=t.ab_user_mode||"user_unique_id";var p=this.collect.Types;this.types=p,this.collect.on(p.TokenChange,(function(e){"uuid"===e&&n.readyStatus&&(n.clearCache(),n.fetchAB())})),this.collect.on(p.AbVar,(function(e){var t=e.name,i=e.defaultValue,o=e.callback;n.getVar(t,i,o)})),this.collect.on(p.AbAllVars,(function(e){n.getAllVars(e)})),this.collect.on(p.AbConfig,(function(e){var t=e.params,i=e.callback;n.getABconfig(t,i)})),this.collect.on(p.AbExternalVersion,(function(e){n.setExternalAbVersion(e)})),this.collect.on(p.AbOpenLayer,(function(){n.openOverlayer()})),this.collect.on(p.AbCloseLayer,(function(){n.closeOverlayer()})),this.collect.on(p.AbVersionChangeOn,(function(e){n.changeListener.set(e,e)})),this.collect.on(p.AbVersionChangeOff,(function(e){n.changeListener.get(e)&&n.changeListener.delete(e)})),this.loadMode(),(this.enable_ab_visual||this.enable_multilink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(!u&&this.fetchAB(),this.readyStatus=!0),this.collect.emit(p.AbReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var i=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var o in n)i(o)}},e.prototype.loadMode=function(){var e=function(){try{return JSON.parse(atob(window.name))||void 0}catch(e){return}}(),t="";if(e){var n=e.scenario,i=e.href;n?(this.editMode=!0,t=n):!i||-1===i.indexOf("datatester")&&-1===i.indexOf("visual-editor")||(this.editMode=!0,t="visual-editor")}this.enable_ab_visual&&"visual-editor"===t&&this.collect.destoryInstace()},e.prototype.checkLocal=function(){var e=this.getABCache(),t=e.ab_version,n=e.ab_ext_version,i=e.ab_version_multilink,o=(e.data,this.checkFromUrl());o?this.mulilinkVersions.push(o):this.mulilinkVersions=i||[],this.extVersions=n||[],this.versions=t||[];var r=this.versions.concat(this.extVersions);this.enable_multilink&&(r=r.concat(this.mulilinkVersions))},e.prototype.checkFromUrl=function(){var e=Aa(window.location.href);return e&&e.vid?e.vid:""},e.prototype.updateVersions=function(){var e=this.extVersions.length?this.versions.concat(this.extVersions):this.versions;this.enable_multilink&&(e=e.concat(this.mulilinkVersions)),this.configVersions(e.join(",")),this.updateABCache(),this.changeListener.size>0&&this.changeListener.forEach((function(t){"function"==typeof t&&t(e)}))},e.prototype.configVersions=function(e){this.collect.configManager.setAbVersion(e)},e.prototype.getVar=function(e,t,n,i){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof n)throw new Error("callback must be a function");var o={name:e,defaultValue:t,callback:n,type:Na.Var};this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetVar",level:"info",time:Date.now(),data:e,infoType:"cus"}),"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealVar(o,e,i):this.callbacks.push(o)},e.prototype.setAbUuid=function(e,t){this.collect.configManager.setAbUuidCache(e,t)},e.prototype.getRealVar=function(e,t,n){var i=e.name,o=e.defaultValue,r=e.callback,a=this.data;if(a){if(ba(a[i])){var s=a[i].vid;return"$ab_url"===t?this.mulilinkVersions.includes(s)||this.mulilinkVersions.push(s):this.versions.includes(s)||this.versions.push(s),this.setAbUuid(s,n),this.updateVersions(),this.fechEvent(s,t,o),r(a[i].val),void this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetVar, Exposure Experiment "+i,level:"info",time:Date.now(),data:a[i],infoType:"sdk"})}this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GerVar Default Callback",level:"info",time:Date.now(),data:this.data,infoType:"sdk"}),r(o)}else r(o)},e.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");var t={callback:e,type:Na.All};this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetAllVars",level:"info",time:Date.now(),infoType:"cus"}),"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealAllVars(t):this.callbacks.push(t)},e.prototype.getRealAllVars=function(e){(0,e.callback)(this.data?JSON.parse(JSON.stringify(this.data)):{}),this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Execute GetAllVars Callback",level:"info",time:Date.now(),data:this.data,infoType:"sdk"})},e.prototype.fechEvent=function(e,t,n){try{if(this.config.disable_track_event)return;if(!e)return;var i=this.collect.configManager.get(),o=i.header,r=i.user,a=this.getABCache(),s=r[this.ab_user_mode]||r.user_unique_id;if(a&&a.uuid&&a.uuid!==s)return;var c={event:"abtest_exposure",ab_sdk_version:""+e,params:JSON.stringify({app_id:this.config.appId,ab_url:"$ab_url"===t?n:window.location.href,data:this.data}),local_time_ms:Date.now()};o.custom=JSON.stringify(o.custom);var u={events:[c],user:r,header:o};this.reportExposure(u,t)}catch(e){this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Something Error",level:"error",time:Date.now(),data:e.message,infoType:"sdk"})}},e.prototype.reportExposure=function(e,t){var n=this;this.exposureCache.push(e),this.reportTimeout&&clearTimeout(this.reportTimeout),this.exposureCache.length>=this.exposureLimit?this.report(t):this.reportTimeout=setTimeout((function(){n.report(t),clearTimeout(n.reportTimeout)}),this.ab_batch_time)},e.prototype.report=function(e){var t=this;this.collect.requestManager.useRequest({url:this.reportUrl,data:this.exposureCache,timeout:2e4,useBeacon:"$ab_url"===e}),this.exposureCache.forEach((function(e){t.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_EVENT,info:"SDK Report Exposure Event Success",time:Date.now(),data:[e],code:200,status:"success",infoType:"sdk"})})),this.exposureCache=[]},e.prototype.setExternalAbVersion=function(e){this.extVersions=[e],this.updateVersions()},e.prototype.getABconfig=function(e,t){var n=Object.keys(e);n&&n.length&&this.collect.configManager.set(e),this.fetchAB(t)},e.prototype.get=function(e){return this.cacheStorgae.getItem(e)},e.prototype.set=function(e,t){this.cacheStorgae.setItem(e,t),this.collect.configManager.setAbCache(t),this.collect.event("abtest_cache",{env_uuid:this.collect.configManager.get("user").user_unique_id||"",cache:JSON.stringify(t)})},e.prototype.getABCache=function(e){var t={ab_version:[],ab_ext_version:[],ab_version_multilink:[],data:null,timestamp:+new Date,uuid:""};return t=this.get(this.abKey)||t,e?t[e]:t},e.prototype.updateABCache=function(){var e=this.getABCache();e.ab_version_multilink=this.mulilinkVersions,e.ab_ext_version=this.extVersions,e.ab_version=this.versions,e.timestamp=Date.now(),this.set(this.abKey,e)},e.prototype.setAbCache=function(e){var t=this.getABCache();t.data=this.data,t.uuid=e,t.timestamp=Date.now(),this.set(this.abKey,t)},e.prototype.clearCache=function(){this.refreshFetchStatus="ing",this.data={},this.extVersions=[],this.mulilinkVersions=[],this.versions=[],this.collect.configManager.clearAbCache()},e.prototype.openOverlayer=function(e){var t=this;if(function(){if(!document.getElementById(as)){var e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id=as,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}}(),e)var n=setTimeout((function(){t.closeOverlayer(),clearTimeout(n)}),e)},e.prototype.closeOverlayer=function(){var e;(e=document.getElementById(as))&&e.parentElement.removeChild(e)},e.prototype.fetchComplete=function(e,t){var n=this;try{if(e&&"[object Object]"==Object.prototype.toString.call(e)){this.data=e,this.setAbCache(t);var i=[];Object.keys(e).forEach((function(t){var n=e[t].vid;n&&i.push(n)})),this.versions=this.versions.filter((function(e){return i.includes(e)}));var o=e.$ab_url,r=e.$ab_modification;if(r&&r.val&&this.enable_ab_visual){if(this.collect.destroy)return}else if(o&&this.enable_multilink){this.mulilinkVersions=this.mulilinkVersions.filter((function(e){return i.includes(e)}));var a=o.val,s=o.vid;a&&s&&this.getVar("$ab_url",a,(function(){n.editMode||(a!==window.location.href?setTimeout((function(){if(!n.collect.destroy){var e=""+a;e=-1===e.indexOf("http")?"https://"+e:e,Da(e).host!==location.host?e=e+"&vid="+s:window.history.replaceState("","",e),window.location.href=e}}),100):n.closeOverlayer())}))}this.updateVersions()}else this.closeOverlayer();this.callbacks.forEach((function(e){return n[e.type===Na.Var?"getRealVar":"getRealAllVars"](e,"")})),this.callbacks=[]}catch(e){}},e.prototype.fetchAB=function(e){var t=this,n=this.collect.configManager.get(),i={header:pa(pa(pa({aid:this.config.app_id},n.user||{}),n.header||{}),{ab_sdk_version:this.collect.configManager.getAbVersion(),ab_url:window.location.href})};this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Fetch AB Request",level:"info",logType:"fetch",time:Date.now(),data:i,infoType:"sdk"});var o=n.user[this.ab_user_mode]||n.user.user_unique_id;this.collect.requestManager.useRequest({url:this.fetchUrl,data:i,success:function(n){t.fetchStatus="complete",t.refreshFetchStatus="complete";var i=n.data;"success"===n.message?(t.fetchComplete(i,o),e&&e(i)):(t.fetchComplete(null,o),e&&e(null)),t.collect.emit(t.types.AbComplete,i),t.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Fetch AB Request Success",level:"info",logType:"fetch",time:Date.now(),data:i,infoType:"sdk"})},fail:function(){t.fetchStatus="complete",t.refreshFetchStatus="complete",t.fetchComplete(null,o),t.collect.emit(t.types.AbTimeout),e&&e(null),t.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"SDK Fetch AB Request Network Error",level:"error",logType:"fetch",time:Date.now(),infoType:"sdk"})},timeout:this.timeout})},e.prototype.filterUrl=function(e){try{var t="";-1!==e.indexOf("&multilink=true")?t="&multilink=true[\0-Ã¿]*":-1!==e.indexOf("?multilink=true")&&(t="\\?multilink=true[\0-Ã¿]*");var n=new RegExp(t,"g");e=e.replace(n,"")}catch(e){}return e},e}(),cs=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(t.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var i=e.Types;e.on(i.SubmitBefore,(function(t){e.requestManager.useBeacon({url:n.url,data:t}),e.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_EVENT,info:"SDK Report ByteIo Verify Request",time:Date.now(),data:t,code:200,status:"success",verifyType:!0})}))}}else console.log("please use correct et_test url")},e}(),us=function(){function e(e,t){this.maxDuration=432e5,this.aliveDTime=6e4,this.options={aliveName:"predefine_page_alive",params:{}},this.focusState=!0,this.collect=e,this.config=t,this.pageStartTime=Date.now(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,ba(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.hard=this.options.mode&&"hard"===this.options.mode,this.focusState=document.hasFocus()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageAlive(),this.hard&&(this.removeMode=this.hardMode())},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},e.prototype.sendEvent=function(e,t){void 0===t&&(t=!1);var n=t?this.aliveDTime:Date.now()-this.sessionStartTime;n<0||n>this.aliveDTime||Date.now()-this.pageStartTime>this.maxDuration||t&&"hidden"===document.visibilityState||this.hard&&!this.focusState||(this.collect.beconEvent(this.options.aliveName,pa({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),duration:n,is_support_visibility_change:Ta(),startTime:this.sessionStartTime,hidden:document.visibilityState,leave:e,mode:this.hard?"hard":"normal",focusState:this.focusState},this.options.params)),this.sessionStartTime=Date.now())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),setInterval((function(){Date.now()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!1,!0)}),1e3)},e.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent(!1)):"visible"===document.visibilityState&&(this.sessionStartTime=Date.now(),this.timerHandler=this.setUpTimer())},e.prototype.beforeunload=function(){document.hidden||this.sendEvent(!0)},e.prototype.enablePageAlive=function(){var e=this;this.timerHandler=this.setUpTimer();var t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),ka(n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",n),window.removeEventListener("pagehide",n)}},e.prototype.hardMode=function(){var e=this,t=function(){e.timerHandler&&(clearInterval(e.timerHandler),e.sendEvent(!1)),e.focusState=!1},n=function(){e.focusState=!0,e.sessionStartTime=Date.now(),e.timerHandler=e.setUpTimer()};return window.addEventListener("blur",t),window.addEventListener("focus",n),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",n)}},e}(),ls=function(){function e(e,t){var n=this;this.maxDuration=432e5,this.aliveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.focusState=!0,this.visibilitychange=function(){"hidden"===document.visibilityState?n.activeEndTime=Date.now():"visible"===document.visibilityState&&(n.activeEndTime&&(n.totalTime+=n.activeEndTime-n.activeStartTime,n.activeTimes+=1),n.activeEndTime=void 0,n.activeStartTime=Date.now())},this.beforeunload=function(){if(n.totalTime+=(n.activeEndTime||Date.now())-n.activeStartTime,n.config.autotrack)try{window.sessionStorage.setItem("_tea_cache_duration",JSON.stringify({duration:n.totalTime,page_title:document.title||location.pathname}))}catch(e){}n.sendEventPageClose()},this.collect=e,this.config=t,this.maxDuration=t.maxDuration||864e5,this.pageStartTime=Date.now(),ba(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.hard=this.options.mode&&"hard"===this.options.mode,this.focusState=document.hasFocus(),this.resetData()}return e.prototype.setParams=function(e,t,n){this.set_path=e,this.set_url=n,this.set_title=t},e.prototype.resetParams=function(e,t,n){this.url_path=e,this.url=n,this.title=t},e.prototype.enable=function(e,t,n){this.url_path=e,this.url=n,this.title=t,this.disableCallback=this.enablePageClose(),this.hard&&(this.removeMode=this.hardMode())},e.prototype.disable=function(){this.disableCallback()},e.prototype.resetData=function(){this.activeStartTime=void 0===this.activeStartTime?this.pageStartTime:Date.now(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0,this.resetParams(location.pathname,document.title,location.href)},e.prototype.sendEventPageClose=function(){var e=Date.now()-this.pageStartTime;this.totalTime<0||e<0||this.totalTime>=this.maxDuration||this.hard&&!this.focusState||(this.collect.beconEvent(this.options.closeName,pa({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),active_times:this.activeTimes,duration:this.totalTime,total_duration:e,is_support_visibility_change:Ta(),mode:this.hard?"hard":"normal",focusState:this.focusState},this.options.params)),this.pageStartTime=Date.now(),this.resetData())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.enablePageClose=function(){var e=this,t=this.visibilitychange.bind(this),n=this.beforeunload.bind(this);return document.addEventListener("visibilitychange",t),ka(n),function(){e.beforeunload(),document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",n),window.removeEventListener("pagehide",n)}},e.prototype.hardMode=function(){var e=this,t=function(){e.focusState=!1},n=function(){e.focusState=!0};return window.addEventListener("blur",t),window.addEventListener("focus",n),function(){window.removeEventListener("blur",t),window.removeEventListener("focus",n)}},e}(),hs=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,this.config.enable_stay_duration){this.title=document.title||location.pathname,this.url=location.href,this.url_path=location.pathname,this.pageAlive=new us(e,t),this.pageClose=new ls(e,t);var i=this.collect.Types;this.collect.on(i.ResetStay,(function(e){var t=e.url_path,i=e.title,o=e.url;n.resetStayDuration(t,i,o)})),this.collect.on(i.RouteChange,(function(e){e.init||t.disable_route_report||n.resetStayDuration()})),this.collect.on(i.SetStay,(function(e){var t=e.url_path,i=e.title,o=e.url;n.setStayParmas(t,i,o)})),this.enable(this.url_path,this.title,this.url),this.ready(i.Stay),this.collect.emit(i.StayReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var n=this.collect.hook._hooksCache[e];if(!Object.keys(n).length)return;var i=function(e){n[e].length&&n[e].forEach((function(n){t.collect.hook.emit(e,n)}))};for(var o in n)i(o)}},e.prototype.enable=function(e,t,n){this.pageAlive.enable(e,t,n),this.pageClose.enable(e,t,n)},e.prototype.disable=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.setStayParmas=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.pageAlive.setParams(e,t,n),this.pageClose.setParams(e,t,n),this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute resetStayParams",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e.prototype.reset=function(e,t,n){this.disable(),this.enable(e,t,n)},e.prototype.resetStayDuration=function(e,t,n){this.reset(e,t,n),this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"SDK Execute resetStayDuration",level:"info",time:Date.now(),data:{url_path:e,title:t,url:n}})},e}(),fs=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var n,i=Date.now()+t;return n=window.setTimeout((function o(){var r=Date.now()-i;e(),i+=t,n=window.setTimeout(o,Math.max(0,t-r))}),t),function(){window.clearTimeout(n)}}((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var i=this.collect.Types;this.collect.on(i.SessionReset,(function(){n.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),ps=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.collect=e,this.config=t,!this.config.channel_domain&&!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event");var i=this.collect.Types;this.collect.on(i.Ready,(function(){n.sdkOnload()})),this.collect.on(i.SubmitError,(function(e){var t=e.type,i=e.eventData,o=e.errorCode;"f_data"===t&&n.sdkError(i,o)}))}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),n=t.header,i=t.user,o=n.app_id,r=n.app_name,a=n.sdk_version,s=i.web_id,c={events:[{event:"onload",params:JSON.stringify({app_id:o,app_name:r||"",sdk_version:a,sdk_type:"npm",sdk_config:this.config,sdk_desc:"TOC_OVERSEA"}),local_time_ms:Date.now()}],user:{user_unique_id:s},header:{}};setTimeout((function(){e.collect.requestManager.useRequest({url:e.url,data:[c],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch(e){}},e.prototype.sdkError=function(e,t){var n=this;try{var i=e[0],o=i.user,r=i.header,a=[];e.forEach((function(e){e.events.forEach((function(e){a.push(e)}))}));var s={events:a.map((function(e){return{event:"on_error",params:JSON.stringify({error_code:t,app_id:r.app_id,app_name:r.app_name||"",error_event:e.event,sdk_version:r.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:Date.now(),params:e.params,header:JSON.stringify(r),user:JSON.stringify(o)}),local_time_ms:Date.now()}})),user:{user_unique_id:o.user_unique_id},header:{}};setTimeout((function(){n.collect.requestManager.useRequest({url:n.url,data:[s],timeout:3e4,app_key:"566f58151b0ed37e",forceXhr:!0})}),16)}catch(e){}},e}();function ds(e,t){if(void 0===t&&(t="list"),!e)return!1;if(t&&"list"===t){if(["LI","TR","DL"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaIdx"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-idx"))return!0}else{if(["A","BUTTON"].includes(e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaContainer"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-container"))return!0}return!1}function gs(e){for(var t=e;t&&!ds(t,"container");){if("HTML"===t.nodeName||"BODY"===t.nodeName)return e;t=t.parentElement}return t||e}function vs(e){var t="";return 3===e.nodeType?t=e.textContent.trim():e.dataset&&e.dataset.hasOwnProperty("teaTitle")||e.hasAttribute("ata-tea-title")?t=e.getAttribute("data-tea-title"):e.hasAttribute("title")?t=e.getAttribute("title"):"INPUT"===e.nodeName&&["button","submit"].includes(e.getAttribute("type"))?t=e.getAttribute("value"):"IMG"===e.nodeName&&e.getAttribute("alt")&&(t=e.getAttribute("alt")),t.slice(0,200)}var ms=function(e,t){return e.hasAttribute?e.hasAttribute(t):e.attributes?!(!e.attributes[t]||!e.attributes[t].specified):void 0},_s=function(){function e(e,t,n){var i=this;this.statistics=!1,this.pageView=!1,this.clickEvent=function(e){(function(e,t){if(1!==e.nodeType)return!1;if(!t.svg&&function(e){if("svg"===e.tagName.toLowerCase())return!0;for(var t=e.parentElement,n=!1;t;)"svg"===t.tagName.toLowerCase()?(t=null,n=!0):t=t.parentElement;return n}(e))return!1;if(["HTML","BODY"].includes(e.tagName.toUpperCase()))return!1;var n=e;return!("none"===n.style.display||!ds(n,"container")&&!function(e){if(e.children.length){var t=e.children;return![].slice.call(t).some((function(e){return e.children.length>0}))}return!0}(n)&&!t.svg)})(e.target,i.options)&&i.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){i.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){i.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(e,t){t&&"pushState"===t&&i.eventHandel({eventType:"dom",eventName:"beat"},pa({beat_type:0},e)),i.eventHandel({eventType:"dom",eventName:"page_view"},e)},this.getPageLoadEvent=function(e){i.eventHandel({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=n.getConfig().eventConfig,this.collect=t,this.options=e,this.beatTime=e.beat}return e.prototype.init=function(e){this.eventHandel=e;var t=this.config.mode;this.addListener(t)},e.prototype.addListener=function(e){var t=this;if("proxy-capturing"===e){if(this.config.click&&window.document.addEventListener("click",this.clickEvent,!0),this.config.change&&window.document.addEventListener("change",this.changeEvent,!0),this.config.submit&&window.document.addEventListener("submit",this.submitEvent,!0),this.config.pv){this.collect.on("route-change",(function(e){var n=e.config,i=e.name;t.getPageViewEvent(n,i),t.pageView=!0}));var n=setTimeout((function(){t.pageView||(t.getPageViewEvent(t.getDefaultConfig()),t.pageView=!0,clearTimeout(n))}),2e3)}if(this.config.beat){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",(function(){t.beatEvent(t.beatTime)}));var i=0,o=null;window.addEventListener("scroll",(function(){clearTimeout(o),o=setTimeout(r,500),i=document.documentElement.scrollTop||document.body.scrollTop}));var r=function(){(document.documentElement.scrollTop||document.body.scrollTop)==i&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(e){}try{var a=window.performance&&window.performance.getEntriesByType("paint");a&&a.length?(new PerformanceObserver((function(e){var n=e.getEntries(),i=n[n.length-1],o=i.renderTime||i.loadTime;t.statistics||(t.getPageLoadEvent(o),t.statistics=!0)})).observe({entryTypes:["largest-contentful-paint"]}),setTimeout((function(){t.statistics||(t.getPageLoadEvent(a[0].startTime||0),t.statistics=!0)}),2e3)):this.getPageLoadEvent(0)}catch(e){this.getPageLoadEvent(0)}}}},e.prototype.removeListener=function(){window.document.removeEventListener("click",this.clickEvent,!0),window.document.removeEventListener("change",this.changeEvent,!0),window.document.removeEventListener("submit",this.submitEvent,!0)},e.prototype.beatEvent=function(e){var t=this;try{var n;this.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(n=setInterval((function(){t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})}),e)),ka((function(){t.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),t.beatTime&&clearInterval(n)}))}catch(e){}},e.prototype.getDefaultConfig=function(){return{is_html:1,url:location.href,referrer:document.referrer,page_key:location.href,refer_page_key:document.referrer,page_title:document.title||location.pathname,page_manual_key:"",refer_page_manual_key:"",refer_page_title:"",page_path:location.pathname,page_host:location.host}},e}(),ys={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},bs=function(){function e(e,t){this.config=e,this.config.eventConfig=Object.assign(this.config.eventConfig,t)}return e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(e){return this.config=e},e}();var Es=function(e,t,n,i,o){return pa(pa({event:e},function(e,t,n,i){var o={},r=function(e){if(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return{left:t.left,top:t.top,element_width:n,element_height:i}}}(t),a=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.clientX,i=e.clientY,o=t.left,r=t.top,a=n-o>=0?n-o:0,s=i-r>=0?i-r:0;return{touch_x:Math.floor(a),touch_y:Math.floor(s)}}(e,r),s=r.element_width,c=r.element_height,u=a.touch_x,l=a.touch_y,h=function(e){for(var t=[];null!==e.parentElement;)t.push(e),e=e.parentElement;var n=[],i=[];return t.forEach((function(e){var t=function(e){if(null===e)return{str:"",index:0};var t=0,n=e.parentElement;if(n)for(var i=n.children,o=0;o<i.length&&i[o]!==e;o++)i[o].nodeName===e.nodeName&&t++;return{str:[e.nodeName.toLowerCase(),ds(e,"list")?"[]":""].join(""),index:t}}(e),o=t.str,r=t.index;n.unshift(o),i.unshift(r)})),{element_path:"/"+n.join("/"),positions:i}}(t),f=h.element_path,p=h.positions,d=function(e){var t=gs(e),n=[];return function e(t){var i=vs(t);if(i&&-1===n.indexOf(i)&&n.push(i),t.childNodes.length>0)for(var o=t.childNodes,r=0;r<o.length;r++)8!==o[r].nodeType&&e(o[r])}(t),n}(t),g=window.performance.timing.navigationStart,v=Date.now()-g,m=p.map((function(e){return""+e})),_=null;if(window.TEAVisualEditor&&window.TEAVisualEditor.getOriginXpath&&(_=window.TEAVisualEditor.getOriginXpath({xpath:f,positions:m})),o.element_path=_&&_.xpath||f,o.positions=_&&_.positions||m,i&&!i.text&&(o.texts=d,o.element_title=function(e){var t=gs(e),n="";return function e(t){var i=vs(t);if(i&&(n+=i),t.childNodes.length>0)for(var o=t.childNodes,r=0;r<o.length;r++)3===o[r].nodeType&&e(o[r])}(t),n}(t)),o.element_id=t.getAttribute("id")||"",o.element_class_name=t.getAttribute("class")||"",o.element_type=t.nodeType,o.element_width=Math.floor(s),o.element_height=Math.floor(c),o.touch_x=u,o.touch_y=l,o.page_manual_key="",o.elememt_manual_key="",o.since_page_start_ms=v,o.page_start_ms=g,o.page_path=location.pathname,o.page_host=location.host,n.track_attr&&function(e,t){return!!function(e,t){if("string"==typeof t)return ms(e,t);if(Ea(t)){for(var n=!1,i=0;i<t.length;i++)if(ms(e,t[i])){n=!0;break}return n}}(e,t)}(t,n.track_attr)){var y=function(e,t){var n={};if("string"==typeof t)ms(e,t)&&(n.attrs=e.getAttribute(t));else if(Ea(t))for(var i=0;i<t.length;i++)ms(e,t[i])&&(n[t[i]]=e.getAttribute(t[i]));return n}(t,n.track_attr);for(var b in y)o[b]=y[b]}var E=gs(t);return"A"===E.tagName&&(o.href=E.getAttribute("href")),"IMG"===t.tagName&&(o.src=t.getAttribute("src")),o}(t,n,i,o)),{is_html:1,page_key:window.location.href,page_title:document.title})},Ss=function(){function e(e,t){this.ignore={text:!0},this.initConfig=e,this.options=t,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics",exposure:"__bav_page_exposure"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics",exposure:"bav2b_exposure"},t&&!0===t.text&&(this.ignore.text=!1),t&&t.exposure&&t.exposure.eventName&&(this.eventName.exposure=t.exposure.eventName)}return e.prototype.handleEvent=function(e,t){try{if(function(e){for(var t=e;t&&t.parentNode;){if(t.hasAttribute("data-tea-ignore"))return!0;if("HTML"===t.nodeName||"body"===t.nodeName)return!1;t=t.parentNode}return!1}(e.target))return null;var n="bav2b_click";switch(t){case"click":return n=this.eventName.click,Es(n,e,e.target,this.options,this.ignore);case"exposure":return n=this.eventName.exposure,Es(n,e,e.target,this.options,this.ignore);case"change":return pa(pa({},Es(n="bav2b_change",e,e.target,this.options)),function(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(e){return{}}}(n,e.target));case"submit":return Es(n="bav2b_submit",e,e.target,this.options)}}catch(e){return console.error(e),null}},e.prototype.handleViewEvent=function(e){e.event=this.eventName.page,e.page_title=document.title,e.page_total_width=window.innerWidth,e.page_total_height=window.innerHeight;try{var t=window.sessionStorage.getItem("_tea_cache_duration");if(t){var n=JSON.parse(t);e.refer_page_duration_ms=n?n.duration:""}e.scroll_width=document.documentElement.scrollLeft?document.documentElement.scrollLeft+window.innerWidth:window.innerWidth,e.scroll_height=document.documentElement.scrollTop?document.documentElement.scrollTop+window.innerHeight:window.innerHeight,e.page_start_ms=window.performance.timing.navigationStart}catch(e){console.log("page event error "+JSON.stringify(e))}return e},e.prototype.handleStatisticsEvent=function(e){var t={};t.event=this.eventName.static,t.is_html=1,t.page_key=location.href,t.refer_page_key=document.referrer||"",t.page_title=document.title,t.page_manual_key=this.initConfig.autotrack.page_manual_key||"",t.refer_page_manual_key="";try{var n=e.lcp,i=window.performance.timing,o=i.loadEventEnd-i.navigationStart;t.page_init_cost_ms=parseInt(n||(o>0?o:0)),t.page_start_ms=i.navigationStart}catch(e){console.log("page_statistics event error "+JSON.stringify(e))}return t},e.prototype.handleBeadtEvent=function(e){e.event=this.eventName.beat,e.page_key=window.location.href,e.is_html=1,e.page_title=document.title,e.page_manual_key=this.initConfig.autotrack.page_manual_key||"";try{e.page_viewport_width=window.innerWidth,e.page_viewport_height=window.innerHeight,e.page_total_width=document.documentElement.scrollWidth,e.page_total_height=document.documentElement.scrollHeight,e.scroll_width=document.documentElement.scrollLeft+window.innerWidth,e.scroll_height=document.documentElement.scrollTop+window.innerHeight,e.since_page_start_ms=Date.now()-window.performance.timing.navigationStart,e.page_start_ms=window.performance.timing.navigationStart}catch(e){console.log("beat event error "+JSON.stringify(e))}return e},e}(),ws=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_change_event","report_submit_event","report_exposure_event","report_page_view_event","report_page_statistics_event","report_beat_event"]}return e.prototype.send=function(e,t){var n=e.eventSend,i=t.event;delete t.event,n&&"becon"===n?this.collect.beconEvent(i,t):this.collect.event(i,t)},e.prototype.get=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"GET"},t);fetch(e,n)},e.prototype.post=function(e,t){var n=Object.assign({headers:{"content-type":"application/json"},method:"POST"},t);fetch(e,n)},e}(),ks={},Ts=[];function Ds(e,t,n,i){var o=e&&e.source||window.opener||window.parent,r=e&&e.origin||i||"*",a={type:t,payload:n};o.postMessage(JSON.stringify(a),r)}function As(e){if(Ts.some((function(e){return"*"===e}))||Ts.some((function(t){return e.origin.indexOf(t)>-1}))){var t=e.data;if("string"==typeof e.data)try{t=JSON.parse(e.data)}catch(e){t=void 0}if(!t)return;var n=t.type,i=t.payload;ks[n]&&ks[n].forEach((function(t){"function"==typeof t&&t(e,i)}))}}var zs=!1;function Os(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.appId=t.app_id;var n,i,o,r,a=t.channel_domain,s="";if((n=["*"]).length&&n.forEach((function(e){Ts.push(e)})),a){var c,u="";try{var l=window.performance.getEntriesByType("resource");if(l&&l.length&&(l.forEach((function(e){"script"===e.initiatorType&&e.name&&-1!==e.name.indexOf("collect")&&(u=e.name)})),u&&(c=u.split("/"))&&c.length)){s="https:/";for(var h=2;h<c.length&&h!==c.length-1;h++)s=s+"/"+c[h];if(s&&s.indexOf("/5.0")){var f=s.split("/5.0");s=f[0]||s}}}catch(e){}}delete(i=pa({},t)).filter,(window.opener||window.parent).postMessage({type:"tea:sdk:info",config:i,version:"5.3.1_oversea"},"*"),window.addEventListener("message",As,!1);try{r=function(n){var i=n.data.app_id;i&&i!==t.app_id||function(e){var t,n,i,o,r=e.event,a=e.autoTrackInstance;zs||(zs=!0,t=e.editorUrl,n=function(){Ds(r,"editorScriptloadSuccess"),a.destroy()},i=function(){r&&Ds(r,"editorScriptloadError"),zs=!1},(o=document.createElement("script")).src=t,o.onerror=function(){i()},o.onload=function(){n()},document.getElementsByTagName("head")[0].appendChild(o))}({event:n,editorUrl:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/log-sdk/collect/heatmap-core.js?query="+Date.now(),autoTrackInstance:e})},ks[o="tea:openHeatMapCore"]=ks[o]||[],ks[o].push(r)}catch(e){console.log("openHeatMapCore error")}}var Gs,Rs=function(){function e(e){this._instance=null,this._intersection=e,this.init()}return e.prototype.init=function(){var e=this;this._instance=new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type&&e.attributeChangeObserve(t),"childList"===t.type&&e.modifyNodeObserve(t)}))})),this._instance.observe(document.body,{childList:!0,attributes:!0,subtree:!0,attributeOldValue:!1})},e.prototype.attributeChangeObserve=function(e){e.target.hasAttribute("data-exposure")?this.exposureAdd(e,"mutation"):this.exposureRemove(e)},e.prototype.modifyNodeObserve=function(e){var t=this;Array.prototype.forEach.call(e.addedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureAdd(e,"intersect"),t.mapChild(e,t.exposureAdd)})),Array.prototype.forEach.call(e.removedNodes,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t.exposureRemove(e),t.mapChild(e,t.exposureRemove)}))},e.prototype.mapChild=function(e,t){var n=this;1===e.nodeType&&e.children.length&&Array.prototype.forEach.call(e.children,(function(e){1===e.nodeType&&e.hasAttribute("data-exposure")&&t(e),n.mapChild(e,t)}))},e.prototype.exposureAdd=function(e,t){this._intersection.exposureAdd(e,t)},e.prototype.exposureRemove=function(e){this._intersection.exposureRemove(e)},e._exposure_observer=null,e}(),Is=function(){function e(t,n){this.count=1,this.instance=this.buildObserver(),this.observeMap=e._observer_map,t.autotrack.exposure.ratio?this.Ratio=t.autotrack.exposure.ratio:0===t.autotrack.exposure.ratio?this.Ratio=0:this.Ratio=.5,this.EventHandle=n}return e.prototype.buildObserver=function(){var t=this;if(!e._observer_instance)return IntersectionObserver&&(e._observer_instance=new IntersectionObserver((function(e){e.forEach((function(e){t.observeMap.get(e.target._observeId)&&t.exposureEvent(e)}))}),{threshold:[.01,.25,.5,.75,1]})),e._observer_instance},e.prototype.exposureAdd=function(e,t){var n=e;"mutation"===t&&(n=e.target);var i=n._observeId;if(i||this.observeMap.has(i)){if(!1===n.visible){var o=n.getBoundingClientRect(),r=o.top,a=o.left,s=o.right,c=o.bottom;r>=0&&c<=window.innerHeight&&a>=0&&s<=window.innerWidth&&(n.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e))}}else n._observeId=this.count,n.visible=!1,this.observeMap.set(this.count,n),this.observe(n),this.count++},e.prototype.exposureRemove=function(e){this.observeMap.has(e._observeId)&&(this.observeMap.delete(e._observeId),this.unobserve(e))},e.prototype.exposureEvent=function(e){if(e.intersectionRatio>=this.Ratio&&e.isIntersecting){if("0"===e.target.style.opacity||"hidden"===e.target.style.visibility)return;if(!0===e.target.visible)return;e.target.visible=!0,this.EventHandle({eventType:"dom",eventName:"exposure"},e)}else e.target.visible=!1},e.prototype.observe=function(e){this.instance.observe(e)},e.prototype.unobserve=function(e){this.instance.unobserve(e)},e._observer_instance=null,e._observer_map=new Map,e}(),Cs=function(){function e(e,t){e.autotrack&&e.autotrack.exposure&&(this._intersection=new Is(e,t),this._observer=new Rs(this._intersection),this.initObserver())}return e.prototype.initObserver=function(){var e=this;Array.prototype.forEach.call(document.querySelectorAll("[data-exposure]"),(function(t){e._intersection.exposureAdd(t,"intersect")}))},e}(),Ms={hashTag:!1,impr:!1},xs=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var n=e.Types;t.autotrack&&t.autotrack.collect_url&&!t.autotrack.collect_url()||(this.ready(n.Autotrack),this.collect.emit(n.AutotrackReady))}},e.prototype.ready=function(e){this.collect.set(e);var t=this.config.autotrack;t="object"==typeof t?t:{},t=Object.assign(Ms,t),this.destroyed=!1,this.options=t,this.Config=new bs(ys,this.options),this.Exposure=new Cs(this.config,this.handle.bind(this)),this.Listener=new _s(t,this.collect,this.Config),this.EventHandle=new Ss(this.config,t),this.Request=new ws(this.collect),this.autoTrackStart=!0,this.init(),Os(this,this.config)},e.prototype.init=function(){this.Listener.init(this.handle.bind(this)),"base"===this.collect.loadType&&(window.opener||window.parent).postMessage("[tea-sdk]ready","*")},e.prototype.handle=function(e,t){"dom"===e.eventType&&this.handleDom(e,t)},e.prototype.handleDom=function(e,t){try{var n=e.eventName;if("click"===n||"exposure"===n||"change"===n||"submit"===n){var i=this.EventHandle.handleEvent(t,n);null!==i&&this.Request.send({eventType:"custom",eventName:"report_"+n+"_event",extra:{methods:"GET"}},i)}else if("page_view"===n||"page_statistics"===n){var o;o="page_view"===n?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},o)}else if("beat"===n){var r=this.EventHandle.handleBeadtEvent(t),a=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:a},r)}}catch(e){console.log("handel dom event error "+JSON.stringify(e))}},e.prototype.destroy=function(){if(!this.autoTrackStart)return console.warn("engine is undefined, make sure you have called autoTrack.start()");this.autoTrackStart=!1,this.Listener.removeListener()},e}();!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(Gs||(Gs={}));var Bs={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]},Ls=function(){function e(){}return e.prototype.apply=function(e,t){var n=this;if(this.ready=t.app_id&&t.enable_tracer&&!t.disable_track_event,this.ready){this.limit={pv:1,sdk:3,autotrack:3,log:3},this.errorCode={f_net:0,f_data:0},this.tracerCache=new Map,this.collect=e,this.appid=t.app_id,this.reportUrl=e.configManager.getUrl("event");var i=this.collect.Types;e.adapters.fetch,this.collect.on(i.Event,(function(e){Ea(e)?e.forEach((function(e){n.addCount("log")})):n.addCount("log")})),this.collect.on(i.SubmitError,(function(e){var t=e.type,i=e.eventDate,o=e.errorCode,r=e.response;n.addErrorCount(i,t,o,r)})),this.listener(),this.collect.emit(i.TracerReady)}},e.prototype.addCount=function(e,t,n){void 0===t&&(t="net"),void 0===n&&(n=1);try{this.tracerCache||(this.tracerCache=new Map);var i=void 0;if(this.tracerCache.has(e))(o=this.tracerCache.get(e)).has(t)?(i=o.get(t).params.count,i++,o.set(t,this.processTracer(i,e,t))):(i=n,o.set(t,this.processTracer(n,e,t)));else{var o=new Map;i=n,o.set(t,this.processTracer(n,e,t)),this.tracerCache.set(e,o)}"net"===t&&i>=this.limit[e]&&this.report(!1)}catch(e){console.log(e)}},e.prototype.addErrorCount=function(e,t,n,i){var o=this;try{if(e&&e.length){var r=e[0].events;r&&r.length&&("f_data"===t?(i&&i.hasOwnProperty("sc")?this.addCount("log",t,r.length-i.sc):this.addCount("log",t,r.length),this.errorCode[t]=n):r.forEach((function(e){var i="log";for(var r in Bs)if(-1!==Bs[r].indexOf(e.event)){i=r;break}o.addCount(i,t,1),o.errorCode[t]=n})))}}catch(e){}},e.prototype.report=function(e){if(this.tracerCache){var t=[];this.tracerCache.forEach((function(e){console.log(e),e.forEach((function(e){t.push(e)}))})),t&&t.length&&this.sendTracer(t,e)}},e.prototype.sendTracer=function(e,t){try{var n=this.collect.eventManager.merge(e);this.collect.requestManager.useRequest({url:this.reportUrl,data:n,useBeacon:t}),this.tracerCache=null}catch(e){}},e.prototype.processTracer=function(e,t,n){try{var i={count:e,state:n,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:"5.3.1_oversea"};"f_net"!==n&&"f_data"!==n||(i.errorCode=this.errorCode[n]);var o=this.collect.processEvent("applog_trace",i);if(o&&o.event)return delete o.is_bav,o}catch(e){console.warn("something error")}},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.leavePage()})),ka((function(){e.leavePage()}))},e.prototype.leavePage=function(){this.report(!0)},e}(),Us="undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null,Ps=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{this.collect.remotePlugin.forEach((function(t,n){if("sdk"===t)if(is.hasOwnProperty(n)){var i=is[n].object,o=""+is[n].src[e.channel];e.exist(n,i,o)}else console.warn("your "+n+" is not existï¼please check plugin name");else"object"==typeof t&&(t.src?e.exist(n,t.call,t.src):e.process(n,t.instance,"INSTANCE"))}))}catch(e){this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"LoadExtend Fail",level:"error",time:Date.now(),data:e.message}),console.log("load extend error")}},e.prototype.exist=function(e,t,n){var i=this;Us[t]?(this.process(e,Us[t]),console.log("already has "+e+" plugin~")):this.loadPlugin(e,n,(function(){i.process(e,Us[t]),console.log(" %c %s %s %s","color: yellow; background-color: black;","â","load plugin:"+e+" success","-")}),(function(){console.log(" %c %s %s %s","color: red; background-color: yellow;","â","load plugin:"+e+" error","-")}))},e.prototype.process=function(e,t,n){try{if(n){var i=new t;i.apply&&i.apply(this.collect,this.config),console.log("excude "+e+" success")}else t&&t(this.collect,this.config)}catch(t){this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"Extend Process Fail",level:"error",time:Date.now(),data:t.message}),console.log("excude "+e+" error, message:"+t.message)}},e.prototype.loadPlugin=function(e,t,n,i){var o=this;try{var r=document.createElement("script");r.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(n),r.onerror=function(){i(t)},r.onload=function(){o._plugin[e].forEach((function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(r)}catch(e){this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"Extend LoadPlugin Fail",level:"error",time:Date.now(),data:e.message})}},e}(),Ns=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={},this.allowHash=!1}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var n=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.allowHash=t.allow_hash,this.fncArray=new Map,this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(n.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:"",refer_title:document.title||location.pathname,refer_manual_key:"",routeChange:!1},this.config.autotrack&&"object"==typeof this.config.autotrack&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItem(this.cache_key,this.cache)},e.prototype.hack=function(){var e=this,t=window.history.pushState;history.pushState=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];"function"==typeof history.onpushstate&&history.onpushstate({state:n});var r=t.call.apply(t,ga([history,n],i));if(e.collect.sdkStop||e.collect.destroy)return r;if(!(e.lastLocation===location.href||e.config.disable_spa_query&&e.pathEquel())){var a=e.getPopStateChangeEventData();return e.setReferCache(e.lastLocation),e.lastLocation=location.href,e.sendPv(a,"pushState"),r}};var n=history.replaceState;history.replaceState=function(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];"function"==typeof history.onreplacestate&&history.onreplacestate({state:t});var r=n.call.apply(n,ga([history,t],i));if(e.collect.sdkStop||e.collect.destroy)return r;if(!(e.lastLocation===location.href||e.config.disable_spa_query&&e.pathEquel())){var a=e.getPopStateChangeEventData();return e.setReferCache(e.lastLocation),e.lastLocation=location.href,e.sendPv(a),r}}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.getLocation=function(){return this.lastLocation},e.prototype.pathEquel=function(){try{return new URL(this.lastLocation).origin+new URL(this.lastLocation).pathname===new URL(location.href).origin+new URL(location.href).pathname}catch(e){return!1}},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this;window.addEventListener("hashchange",(function(t){if(!e.collect.sdkStop&&!e.collect.destroy&&e.lastLocation!==window.location.href&&(!e.config.disable_spa_query||!e.pathEquel())&&e.allowHash){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}})),window.addEventListener("popstate",(function(t){if(!e.collect.sdkStop&&!e.collect.destroy&&!(e.lastLocation===window.location.href||e.config.disable_spa_query&&e.pathEquel())){e.setReferCache(e.lastLocation),e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}}))},e.prototype.getPopStateChangeEventData=function(){var e=this.pageConfig();return e.is_back=0,e},e.prototype.pageConfig=function(){try{var e,t=this.storage.getItem(this.cache_key)||{},n=this.storage.getItem("__tea_cache_first_"+this.appid);return e=!n||1!=n,{is_html:1,url:location.href,referrer:this.handleRefer(),page_key:location.href,refer_page_key:this.handleRefer(),page_title:document.title||location.pathname,page_manual_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:t&&t.refer_manual_key||"",refer_page_title:t&&t.refer_title||"",page_path:location.pathname,page_host:location.host,is_first_time:""+e}}catch(t){return this.collect.emit(_a.DEBUGGER_MESSAGE,{type:_a.DEBUGGER_MESSAGE_SDK,info:"something error",level:"error",time:Date.now(),data:t.message}),{}}},e.prototype.sendPv=function(e,t){this.collect.emit("route-change",{config:e,init:!1})},e.prototype.handleRefer=function(){var e="";try{var t=this.storage.getItem()||{};e=t.routeChange?t.refer_key:this.collect.configManager.get("referrer")}catch(t){e=document.referrer}return e},e.prototype.setReferCache=function(e){var t=this.storage.getItem(this.cache_key)||{};t.refer_key=e,t.routeChange=!0,this.storage.setItem(this.cache_key,t)},e}();rs.usePlugin(Ps,"extend"),rs.usePlugin(Ls,"tracer"),rs.usePlugin(ss,"ab"),rs.usePlugin(hs,"stay"),rs.usePlugin(xs,"autotrack"),rs.usePlugin(cs,"et"),rs.usePlugin(fs,"heartbeat"),rs.usePlugin(ps,"monitor"),rs.usePlugin(Ns,"route"),rs.usePlugin(Ls,"tracer");var js=new rs("default"),Ks=new(function(){function e(){this.fetchWebId=null,this.channelType="",this.isInit=!1,this.conf={app_id:0,evtParams:{}}}return e.prototype.init=function(e,t){if(void 0===t&&(t={}),!this.isInit){this.isInit=!0,this.conf.app_id=2740,this.conf.evtParams=i(i({},t),{webdriver:"undefined",isScheduling:"false",product_host:window.location.host,product_path:window.location.hostname,type:2,aid:e.aid});var n,o={app_id:this.conf.app_id,channel:"va"};n=e.aid,Object.values(ta).filter((function(e){return"number"==typeof e})).includes(n)&&(o.channel_type="tcpy"),js.init(o),js.config({})}},e.prototype.trackEvent=function(e,t){void 0===t&&(t={});var n=i(i(i({},this.conf.evtParams),t),{key:"h5_"+e,time:Date.now()});js.event("turing_verify_sdk",n)},e}()),Vs={back_up_js_v2:{va:[]},js_v2:{va:"https://sf16-website-login.neutral.ttwstatic.com/obj/tiktok_web_login_static/bric-captcha-ttweb/core-captcha/va/2.32.1/1.0.0.162/captcha.js"}},qs={},Hs={executor:"Function",static_domain:"",settingHost:""},Fs={aid:1e5},Js=function(){function e(){}return e.get=function(t){return 0!==e.status&&3!==e.status||(e.status=1,e.core=function(e){var t=Date.now();return fa(Hs.settingHost,e).catch((function(){return fa(Hs.settingHost,e)})).then((function(e){var n,i;return Ks.trackEvent("hotsdk_getsetting",{is_success:1,duration:Date.now()-t,message:""}),(null===(i=null===(n=null==e?void 0:e.verify)||void 0===n?void 0:n.js_v2)||void 0===i?void 0:i[na])?e.verify:Vs})).catch((function(e){return Ks.trackEvent("hotsdk_getsetting",{is_success:0,duration:Date.now()-t,message:null==e?void 0:e.message}),Vs}))}(t).then((function(t){var n,i,o,r=null===(n=t.js_v2)||void 0===n?void 0:n[na],a=(null===(i=t.back_up_js_v2)||void 0===i?void 0:i[na])||[],s=null===(o=r.match(/\/\/([\w-]+(\.[\w-]+)+)/))||void 0===o?void 0:o[1];Hs.static_domain="";var c=[r].concat(a);return new gr((function(t,n){var i=function(){var o,r=c.shift(),a=null===(o=r.match(/\/\/([\w-]+(\.[\w-]+)+)/))||void 0===o?void 0:o[1];(function(e,t,n,i){sa.setFileName(e);var o,r=Date.now(),a=gr.resolve({});return a="script"===t?(o=e,new gr((function(e,t){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("crossorigin","anonymous"),i.setAttribute("src",o),n.appendChild(i);var r=setTimeout((function(){t(new Error("LoadJSSDKMoreTan4000ms"))}),4e3);i.onload=function(){clearTimeout(r),e(0)},i.onerror=function(){clearTimeout(r),t(new Error("Failed to load SDK!"))}}))).then((function(){return window.verifySDK})):function(e,t){return void 0===t&&(t={}),ca({url:e,method:"GET",config:t})}(e,{timeout:2e4}).then((function(e){if(n&&i&&n!==i){var t=new RegExp(n,"g");e=e.replace(t,i)}var o=function(e){var t={exports:{}},n=new Function("exports","module",e);try{n(t.exports,t)}catch(e){sa.reportJsError({message:null==e?void 0:e.message,stack:null==e?void 0:e.stack,filename:null==e?void 0:e.filename})}return t}(e);return o.exports})),a.then((function(t){return sa.reportResource({url:e,startTime:Date.now(),duration:Date.now()-r}),t})).catch((function(t){return sa.reportResourceError(e),gr.reject(t)}))})(r,Hs.executor,s,a).then((function(n){t(n),e.status=2,Ks.trackEvent("hotsdk_loadscript",{is_success:1})})).catch((function(t){c.length?i():(n(t),e.status=3,Ks.trackEvent("hotsdk_loadscript",{is_success:0}))}))};i()}))})).catch((function(e){return gr.reject(e)}))),e.core},e.status=0,e}(),Ws=function(e){e.static_domain&&(Hs.static_domain=e.static_domain),e.settingHost&&(Hs.settingHost=e.settingHost),e.executor&&(Hs.executor=e.executor)},Xs=function(e,t,n){void 0===t&&(t=function(){}),void 0===n&&(n=function(){});var o=ra(e);Object.assign(Fs,o),Ks.init(i(i({},o),{region:na})),sa.init(o,ua),sa.start(),Js.get(o).then((function(n){var o;Object.assign(qs,i(i({},e),{captchaOptions:i(i({},e.captchaOptions),{h5_check_version:(null===(o=e.captchaOptions)||void 0===o?void 0:o.closeDecisionCheck)?"0.0.0":"3.8.23"})})),null==n||n.initVerifyOptions(qs),t(n)})).catch((function(e){var t;n({type:"loadJSSDK",msg:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:""})}))},$s=function(e){Js.get(Fs).then((function(t){null==t||t.autoRender(e)})).catch((function(e){console.log("err: ",e)}))},Ys=function(){Js.get(Fs).then((function(e){null==e||e.closeCaptcha()}))},Zs=function(){var e,t,n=(null===(e=null==qs?void 0:qs.captchaOptions)||void 0===e?void 0:e.fp)||la.get(ia)||ha(null===(t=null==qs?void 0:qs.captchaOptions)||void 0===t?void 0:t.fpCookieOption);return gr.resolve(n)},Qs=function(){function e(){}return e.config=function(e){Ws(e)},e.init=function(e,t,n){var o=ra(e);return Ks.init(i(i({},o),{region:na})),sa.init(o,ua),sa.start(),Js.get(o).then((function(n){var o;Object.assign(qs,i(i({},e),{captchaOptions:i(i({},e.captchaOptions),{h5_check_version:(null===(o=e.captchaOptions)||void 0===o?void 0:o.closeDecisionCheck)?"0.0.0":"3.8.23"})}));var r=n.initVerifyCenter(qs);if(!t)return r;t(r)})).catch((function(e){if(!n)return gr.reject(e);n(e)}))},e}(),ec=function(e){var t={code:"10000",from:"",type:"verify",version:"1",region:na,subtype:"",verify_event:"",fp:"",detail:""};return t.subtype=3059===e?"text":3060===e?"3d":99996===e?"whirl":"slide",JSON.stringify(t)}}}]);